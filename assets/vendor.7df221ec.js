var am=Object.defineProperty,lm=Object.defineProperties;var um=Object.getOwnPropertyDescriptors;var Ll=Object.getOwnPropertySymbols;var Lp=Object.prototype.hasOwnProperty,Pp=Object.prototype.propertyIsEnumerable;var Rp=(s,e,o)=>e in s?am(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,Xn=(s,e)=>{for(var o in e||(e={}))Lp.call(e,o)&&Rp(s,o,e[o]);if(Ll)for(var o of Ll(e))Pp.call(e,o)&&Rp(s,o,e[o]);return s},Br=(s,e)=>lm(s,um(e));var _i=(s,e)=>{var o={};for(var a in s)Lp.call(s,a)&&e.indexOf(a)<0&&(o[a]=s[a]);if(s!=null&&Ll)for(var a of Ll(s))e.indexOf(a)<0&&Pp.call(s,a)&&(o[a]=s[a]);return o};var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},react={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function shouldUseNative(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var e={},o=0;o<10;o++)e["_"+String.fromCharCode(o)]=o;var a=Object.getOwnPropertyNames(e).map(function(d){return e[d]});if(a.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(d){c[d]=d}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(s,e){for(var o,a=toObject(s),c,d=1;d<arguments.length;d++){o=Object(arguments[d]);for(var _ in o)hasOwnProperty.call(o,_)&&(a[_]=o[_]);if(getOwnPropertySymbols){c=getOwnPropertySymbols(o);for(var b=0;b<c.length;b++)propIsEnumerable.call(o,c[b])&&(a[c[b]]=o[c[b]])}}return a};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=objectAssign,n$1=60103,p$1=60106;react_production_min.Fragment=60107;react_production_min.StrictMode=60108;react_production_min.Profiler=60114;var q$1=60109,r$1=60110,t=60112;react_production_min.Suspense=60113;var u=60115,v=60116;if(typeof Symbol=="function"&&Symbol.for){var w=Symbol.for;n$1=w("react.element"),p$1=w("react.portal"),react_production_min.Fragment=w("react.fragment"),react_production_min.StrictMode=w("react.strict_mode"),react_production_min.Profiler=w("react.profiler"),q$1=w("react.provider"),r$1=w("react.context"),t=w("react.forward_ref"),react_production_min.Suspense=w("react.suspense"),u=w("react.memo"),v=w("react.lazy")}var x=typeof Symbol=="function"&&Symbol.iterator;function y$1(s){return s===null||typeof s!="object"?null:(s=x&&s[x]||s["@@iterator"],typeof s=="function"?s:null)}function z(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,o=1;o<arguments.length;o++)e+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B$1={};function C(s,e,o){this.props=s,this.context=e,this.refs=B$1,this.updater=o||A}C.prototype.isReactComponent={};C.prototype.setState=function(s,e){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error(z(85));this.updater.enqueueSetState(this,s,e,"setState")};C.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function D$1(){}D$1.prototype=C.prototype;function E$1(s,e,o){this.props=s,this.context=e,this.refs=B$1,this.updater=o||A}var F$1=E$1.prototype=new D$1;F$1.constructor=E$1;l(F$1,C.prototype);F$1.isPureReactComponent=!0;var G$1={current:null},H$1=Object.prototype.hasOwnProperty,I$1={key:!0,ref:!0,__self:!0,__source:!0};function J(s,e,o){var a,c={},d=null,_=null;if(e!=null)for(a in e.ref!==void 0&&(_=e.ref),e.key!==void 0&&(d=""+e.key),e)H$1.call(e,a)&&!I$1.hasOwnProperty(a)&&(c[a]=e[a]);var b=arguments.length-2;if(b===1)c.children=o;else if(1<b){for(var k=Array(b),j=0;j<b;j++)k[j]=arguments[j+2];c.children=k}if(s&&s.defaultProps)for(a in b=s.defaultProps,b)c[a]===void 0&&(c[a]=b[a]);return{$$typeof:n$1,type:s,key:d,ref:_,props:c,_owner:G$1.current}}function K(s,e){return{$$typeof:n$1,type:s.type,key:e,ref:s.ref,props:s.props,_owner:s._owner}}function L(s){return typeof s=="object"&&s!==null&&s.$$typeof===n$1}function escape$1(s){var e={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(o){return e[o]})}var M$1=/\/+/g;function N$1(s,e){return typeof s=="object"&&s!==null&&s.key!=null?escape$1(""+s.key):e.toString(36)}function O$1(s,e,o,a,c){var d=typeof s;(d==="undefined"||d==="boolean")&&(s=null);var _=!1;if(s===null)_=!0;else switch(d){case"string":case"number":_=!0;break;case"object":switch(s.$$typeof){case n$1:case p$1:_=!0}}if(_)return _=s,c=c(_),s=a===""?"."+N$1(_,0):a,Array.isArray(c)?(o="",s!=null&&(o=s.replace(M$1,"$&/")+"/"),O$1(c,e,o,"",function(j){return j})):c!=null&&(L(c)&&(c=K(c,o+(!c.key||_&&_.key===c.key?"":(""+c.key).replace(M$1,"$&/")+"/")+s)),e.push(c)),1;if(_=0,a=a===""?".":a+":",Array.isArray(s))for(var b=0;b<s.length;b++){d=s[b];var k=a+N$1(d,b);_+=O$1(d,e,o,k,c)}else if(k=y$1(s),typeof k=="function")for(s=k.call(s),b=0;!(d=s.next()).done;)d=d.value,k=a+N$1(d,b++),_+=O$1(d,e,o,k,c);else if(d==="object")throw e=""+s,Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e));return _}function P$1(s,e,o){if(s==null)return s;var a=[],c=0;return O$1(s,a,"","",function(d){return e.call(o,d,c++)}),a}function Q(s){if(s._status===-1){var e=s._result;e=e(),s._status=0,s._result=e,e.then(function(o){s._status===0&&(o=o.default,s._status=1,s._result=o)},function(o){s._status===0&&(s._status=2,s._result=o)})}if(s._status===1)return s._result;throw s._result}var R$1={current:null};function S$1(){var s=R$1.current;if(s===null)throw Error(z(321));return s}var T$1={ReactCurrentDispatcher:R$1,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G$1,IsSomeRendererActing:{current:!1},assign:l};react_production_min.Children={map:P$1,forEach:function(s,e,o){P$1(s,function(){e.apply(this,arguments)},o)},count:function(s){var e=0;return P$1(s,function(){e++}),e},toArray:function(s){return P$1(s,function(e){return e})||[]},only:function(s){if(!L(s))throw Error(z(143));return s}};react_production_min.Component=C;react_production_min.PureComponent=E$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T$1;react_production_min.cloneElement=function(s,e,o){if(s==null)throw Error(z(267,s));var a=l({},s.props),c=s.key,d=s.ref,_=s._owner;if(e!=null){if(e.ref!==void 0&&(d=e.ref,_=G$1.current),e.key!==void 0&&(c=""+e.key),s.type&&s.type.defaultProps)var b=s.type.defaultProps;for(k in e)H$1.call(e,k)&&!I$1.hasOwnProperty(k)&&(a[k]=e[k]===void 0&&b!==void 0?b[k]:e[k])}var k=arguments.length-2;if(k===1)a.children=o;else if(1<k){b=Array(k);for(var j=0;j<k;j++)b[j]=arguments[j+2];a.children=b}return{$$typeof:n$1,type:s.type,key:c,ref:d,props:a,_owner:_}};react_production_min.createContext=function(s,e){return e===void 0&&(e=null),s={$$typeof:r$1,_calculateChangedBits:e,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null},s.Provider={$$typeof:q$1,_context:s},s.Consumer=s};react_production_min.createElement=J;react_production_min.createFactory=function(s){var e=J.bind(null,s);return e.type=s,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(s){return{$$typeof:t,render:s}};react_production_min.isValidElement=L;react_production_min.lazy=function(s){return{$$typeof:v,_payload:{_status:-1,_result:s},_init:Q}};react_production_min.memo=function(s,e){return{$$typeof:u,type:s,compare:e===void 0?null:e}};react_production_min.useCallback=function(s,e){return S$1().useCallback(s,e)};react_production_min.useContext=function(s,e){return S$1().useContext(s,e)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(s,e){return S$1().useEffect(s,e)};react_production_min.useImperativeHandle=function(s,e,o){return S$1().useImperativeHandle(s,e,o)};react_production_min.useLayoutEffect=function(s,e){return S$1().useLayoutEffect(s,e)};react_production_min.useMemo=function(s,e){return S$1().useMemo(s,e)};react_production_min.useReducer=function(s,e,o){return S$1().useReducer(s,e,o)};react_production_min.useRef=function(s){return S$1().useRef(s)};react_production_min.useState=function(s){return S$1().useState(s)};react_production_min.version="17.0.2";react.exports=react_production_min;var React=react.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){var e,o,a,c;if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;s.unstable_now=function(){return d.now()}}else{var _=Date,b=_.now();s.unstable_now=function(){return _.now()-b}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var k=null,j=null,et=function(){if(k!==null)try{var Lt=s.unstable_now();k(!0,Lt),k=null}catch(It){throw setTimeout(et,0),It}};e=function(Lt){k!==null?setTimeout(e,0,Lt):(k=Lt,setTimeout(et,0))},o=function(Lt,It){j=setTimeout(Lt,It)},a=function(){clearTimeout(j)},s.unstable_shouldYield=function(){return!1},c=s.unstable_forceFrameRate=function(){}}else{var nt=window.setTimeout,tt=window.clearTimeout;if(typeof console!="undefined"){var rt=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof rt!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var at=!1,lt=null,ut=-1,st=5,it=0;s.unstable_shouldYield=function(){return s.unstable_now()>=it},c=function(){},s.unstable_forceFrameRate=function(Lt){0>Lt||125<Lt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):st=0<Lt?Math.floor(1e3/Lt):5};var ft=new MessageChannel,ct=ft.port2;ft.port1.onmessage=function(){if(lt!==null){var Lt=s.unstable_now();it=Lt+st;try{lt(!0,Lt)?ct.postMessage(null):(at=!1,lt=null)}catch(It){throw ct.postMessage(null),It}}else at=!1},e=function(Lt){lt=Lt,at||(at=!0,ct.postMessage(null))},o=function(Lt,It){ut=nt(function(){Lt(s.unstable_now())},It)},a=function(){tt(ut),ut=-1}}function dt(Lt,It){var Ht=Lt.length;Lt.push(It);e:for(;;){var on=Ht-1>>>1,nn=Lt[on];if(nn!==void 0&&0<yt(nn,It))Lt[on]=It,Lt[Ht]=nn,Ht=on;else break e}}function mt(Lt){return Lt=Lt[0],Lt===void 0?null:Lt}function gt(Lt){var It=Lt[0];if(It!==void 0){var Ht=Lt.pop();if(Ht!==It){Lt[0]=Ht;e:for(var on=0,nn=Lt.length;on<nn;){var jt=2*(on+1)-1,Mn=Lt[jt],gn=jt+1,fn=Lt[gn];if(Mn!==void 0&&0>yt(Mn,Ht))fn!==void 0&&0>yt(fn,Mn)?(Lt[on]=fn,Lt[gn]=Ht,on=gn):(Lt[on]=Mn,Lt[jt]=Ht,on=jt);else if(fn!==void 0&&0>yt(fn,Ht))Lt[on]=fn,Lt[gn]=Ht,on=gn;else break e}}return It}return null}function yt(Lt,It){var Ht=Lt.sortIndex-It.sortIndex;return Ht!==0?Ht:Lt.id-It.id}var St=[],Et=[],vt=1,_t=null,bt=3,At=!1,Rt=!1,Pt=!1;function Dt(Lt){for(var It=mt(Et);It!==null;){if(It.callback===null)gt(Et);else if(It.startTime<=Lt)gt(Et),It.sortIndex=It.expirationTime,dt(St,It);else break;It=mt(Et)}}function Ft(Lt){if(Pt=!1,Dt(Lt),!Rt)if(mt(St)!==null)Rt=!0,e(Vt);else{var It=mt(Et);It!==null&&o(Ft,It.startTime-Lt)}}function Vt(Lt,It){Rt=!1,Pt&&(Pt=!1,a()),At=!0;var Ht=bt;try{for(Dt(It),_t=mt(St);_t!==null&&(!(_t.expirationTime>It)||Lt&&!s.unstable_shouldYield());){var on=_t.callback;if(typeof on=="function"){_t.callback=null,bt=_t.priorityLevel;var nn=on(_t.expirationTime<=It);It=s.unstable_now(),typeof nn=="function"?_t.callback=nn:_t===mt(St)&&gt(St),Dt(It)}else gt(St);_t=mt(St)}if(_t!==null)var jt=!0;else{var Mn=mt(Et);Mn!==null&&o(Ft,Mn.startTime-It),jt=!1}return jt}finally{_t=null,bt=Ht,At=!1}}var Qt=c;s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Lt){Lt.callback=null},s.unstable_continueExecution=function(){Rt||At||(Rt=!0,e(Vt))},s.unstable_getCurrentPriorityLevel=function(){return bt},s.unstable_getFirstCallbackNode=function(){return mt(St)},s.unstable_next=function(Lt){switch(bt){case 1:case 2:case 3:var It=3;break;default:It=bt}var Ht=bt;bt=It;try{return Lt()}finally{bt=Ht}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=Qt,s.unstable_runWithPriority=function(Lt,It){switch(Lt){case 1:case 2:case 3:case 4:case 5:break;default:Lt=3}var Ht=bt;bt=Lt;try{return It()}finally{bt=Ht}},s.unstable_scheduleCallback=function(Lt,It,Ht){var on=s.unstable_now();switch(typeof Ht=="object"&&Ht!==null?(Ht=Ht.delay,Ht=typeof Ht=="number"&&0<Ht?on+Ht:on):Ht=on,Lt){case 1:var nn=-1;break;case 2:nn=250;break;case 5:nn=1073741823;break;case 4:nn=1e4;break;default:nn=5e3}return nn=Ht+nn,Lt={id:vt++,callback:It,priorityLevel:Lt,startTime:Ht,expirationTime:nn,sortIndex:-1},Ht>on?(Lt.sortIndex=Ht,dt(Et,Lt),mt(St)===null&&Lt===mt(Et)&&(Pt?a():Pt=!0,o(Ft,Ht-on))):(Lt.sortIndex=nn,dt(St,Lt),Rt||At||(Rt=!0,e(Vt))),Lt},s.unstable_wrapCallback=function(Lt){var It=bt;return function(){var Ht=bt;bt=It;try{return Lt.apply(this,arguments)}finally{bt=Ht}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=react.exports,m$1=objectAssign,r=scheduler.exports;function y(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,o=1;o<arguments.length;o++)e+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa)throw Error(y(227));var ba=new Set,ca={};function da(s,e){ea(s,e),ea(s+"Capture",e)}function ea(s,e){for(ca[s]=e,s=0;s<e.length;s++)ba.add(e[s])}var fa=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),ha=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ia=Object.prototype.hasOwnProperty,ja={},ka={};function la(s){return ia.call(ka,s)?!0:ia.call(ja,s)?!1:ha.test(s)?ka[s]=!0:(ja[s]=!0,!1)}function ma(s,e,o,a){if(o!==null&&o.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return a?!1:o!==null?!o.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function na(s,e,o,a){if(e===null||typeof e=="undefined"||ma(s,e,o,a))return!0;if(a)return!1;if(o!==null)switch(o.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function B(s,e,o,a,c,d,_){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=o,this.propertyName=s,this.type=e,this.sanitizeURL=d,this.removeEmptyString=_}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){D[s]=new B(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var e=s[0];D[e]=new B(e,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){D[s]=new B(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){D[s]=new B(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){D[s]=new B(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){D[s]=new B(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){D[s]=new B(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){D[s]=new B(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){D[s]=new B(s,5,!1,s.toLowerCase(),null,!1,!1)});var oa=/[\-:]([a-z])/g;function pa(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var e=s.replace(oa,pa);D[e]=new B(e,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var e=s.replace(oa,pa);D[e]=new B(e,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var e=s.replace(oa,pa);D[e]=new B(e,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){D[s]=new B(s,1,!1,s.toLowerCase(),null,!1,!1)});D.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){D[s]=new B(s,1,!1,s.toLowerCase(),null,!0,!0)});function qa(s,e,o,a){var c=D.hasOwnProperty(e)?D[e]:null,d=c!==null?c.type===0:a?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");d||(na(e,o,c,a)&&(o=null),a||c===null?la(e)&&(o===null?s.removeAttribute(e):s.setAttribute(e,""+o)):c.mustUseProperty?s[c.propertyName]=o===null?c.type===3?!1:"":o:(e=c.attributeName,a=c.attributeNamespace,o===null?s.removeAttribute(e):(c=c.type,o=c===3||c===4&&o===!0?"":""+o,a?s.setAttributeNS(a,e,o):s.setAttribute(e,o))))}var ra=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;if(typeof Symbol=="function"&&Symbol.for){var E=Symbol.for;sa=E("react.element"),ta=E("react.portal"),ua=E("react.fragment"),wa=E("react.strict_mode"),xa=E("react.profiler"),ya=E("react.provider"),za=E("react.context"),Aa=E("react.forward_ref"),Ba=E("react.suspense"),Ca=E("react.suspense_list"),Da=E("react.memo"),Ea=E("react.lazy"),Fa=E("react.block"),E("react.scope"),Ga=E("react.opaque.id"),Ha=E("react.debug_trace_mode"),Ia=E("react.offscreen"),Ja=E("react.legacy_hidden")}var Ka=typeof Symbol=="function"&&Symbol.iterator;function La(s){return s===null||typeof s!="object"?null:(s=Ka&&s[Ka]||s["@@iterator"],typeof s=="function"?s:null)}var Ma;function Na(s){if(Ma===void 0)try{throw Error()}catch(o){var e=o.stack.trim().match(/\n( *(at )?)/);Ma=e&&e[1]||""}return`
`+Ma+s}var Oa=!1;function Pa(s,e){if(!s||Oa)return"";Oa=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(k){var a=k}Reflect.construct(s,[],e)}else{try{e.call()}catch(k){a=k}s.call(e.prototype)}else{try{throw Error()}catch(k){a=k}s()}}catch(k){if(k&&a&&typeof k.stack=="string"){for(var c=k.stack.split(`
`),d=a.stack.split(`
`),_=c.length-1,b=d.length-1;1<=_&&0<=b&&c[_]!==d[b];)b--;for(;1<=_&&0<=b;_--,b--)if(c[_]!==d[b]){if(_!==1||b!==1)do if(_--,b--,0>b||c[_]!==d[b])return`
`+c[_].replace(" at new "," at ");while(1<=_&&0<=b);break}}}finally{Oa=!1,Error.prepareStackTrace=o}return(s=s?s.displayName||s.name:"")?Na(s):""}function Qa(s){switch(s.tag){case 5:return Na(s.type);case 16:return Na("Lazy");case 13:return Na("Suspense");case 19:return Na("SuspenseList");case 0:case 2:case 15:return s=Pa(s.type,!1),s;case 11:return s=Pa(s.type.render,!1),s;case 22:return s=Pa(s.type._render,!1),s;case 1:return s=Pa(s.type,!0),s;default:return""}}function Ra(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case ua:return"Fragment";case ta:return"Portal";case xa:return"Profiler";case wa:return"StrictMode";case Ba:return"Suspense";case Ca:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case za:return(s.displayName||"Context")+".Consumer";case ya:return(s._context.displayName||"Context")+".Provider";case Aa:var e=s.render;return e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case Da:return Ra(s.type);case Fa:return Ra(s._render);case Ea:e=s._payload,s=s._init;try{return Ra(s(e))}catch{}}return null}function Sa(s){switch(typeof s){case"boolean":case"number":case"object":case"string":case"undefined":return s;default:return""}}function Ta(s){var e=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(s){var e=Ta(s)?"checked":"value",o=Object.getOwnPropertyDescriptor(s.constructor.prototype,e),a=""+s[e];if(!s.hasOwnProperty(e)&&typeof o!="undefined"&&typeof o.get=="function"&&typeof o.set=="function"){var c=o.get,d=o.set;return Object.defineProperty(s,e,{configurable:!0,get:function(){return c.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(s,e,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){s._valueTracker=null,delete s[e]}}}}function Va(s){s._valueTracker||(s._valueTracker=Ua(s))}function Wa(s){if(!s)return!1;var e=s._valueTracker;if(!e)return!0;var o=e.getValue(),a="";return s&&(a=Ta(s)?s.checked?"true":"false":s.value),s=a,s!==o?(e.setValue(s),!0):!1}function Xa(s){if(s=s||(typeof document!="undefined"?document:void 0),typeof s=="undefined")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ya(s,e){var o=e.checked;return m$1({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o!=null?o:s._wrapperState.initialChecked})}function Za(s,e){var o=e.defaultValue==null?"":e.defaultValue,a=e.checked!=null?e.checked:e.defaultChecked;o=Sa(e.value!=null?e.value:o),s._wrapperState={initialChecked:a,initialValue:o,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $a(s,e){e=e.checked,e!=null&&qa(s,"checked",e,!1)}function ab(s,e){$a(s,e);var o=Sa(e.value),a=e.type;if(o!=null)a==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+o):s.value!==""+o&&(s.value=""+o);else if(a==="submit"||a==="reset"){s.removeAttribute("value");return}e.hasOwnProperty("value")?bb(s,e.type,o):e.hasOwnProperty("defaultValue")&&bb(s,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(s.defaultChecked=!!e.defaultChecked)}function cb(s,e,o){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var a=e.type;if(!(a!=="submit"&&a!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+s._wrapperState.initialValue,o||e===s.value||(s.value=e),s.defaultValue=e}o=s.name,o!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,o!==""&&(s.name=o)}function bb(s,e,o){(e!=="number"||Xa(s.ownerDocument)!==s)&&(o==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+o&&(s.defaultValue=""+o))}function db(s){var e="";return aa.Children.forEach(s,function(o){o!=null&&(e+=o)}),e}function eb(s,e){return s=m$1({children:void 0},e),(e=db(e.children))&&(s.children=e),s}function fb(s,e,o,a){if(s=s.options,e){e={};for(var c=0;c<o.length;c++)e["$"+o[c]]=!0;for(o=0;o<s.length;o++)c=e.hasOwnProperty("$"+s[o].value),s[o].selected!==c&&(s[o].selected=c),c&&a&&(s[o].defaultSelected=!0)}else{for(o=""+Sa(o),e=null,c=0;c<s.length;c++){if(s[c].value===o){s[c].selected=!0,a&&(s[c].defaultSelected=!0);return}e!==null||s[c].disabled||(e=s[c])}e!==null&&(e.selected=!0)}}function gb(s,e){if(e.dangerouslySetInnerHTML!=null)throw Error(y(91));return m$1({},e,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function hb(s,e){var o=e.value;if(o==null){if(o=e.children,e=e.defaultValue,o!=null){if(e!=null)throw Error(y(92));if(Array.isArray(o)){if(!(1>=o.length))throw Error(y(93));o=o[0]}e=o}e==null&&(e=""),o=e}s._wrapperState={initialValue:Sa(o)}}function ib(s,e){var o=Sa(e.value),a=Sa(e.defaultValue);o!=null&&(o=""+o,o!==s.value&&(s.value=o),e.defaultValue==null&&s.defaultValue!==o&&(s.defaultValue=o)),a!=null&&(s.defaultValue=""+a)}function jb(s){var e=s.textContent;e===s._wrapperState.initialValue&&e!==""&&e!==null&&(s.value=e)}var kb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function lb(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mb(s,e){return s==null||s==="http://www.w3.org/1999/xhtml"?lb(e):s==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var nb,ob=function(s){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,o,a,c){MSApp.execUnsafeLocalFunction(function(){return s(e,o,a,c)})}:s}(function(s,e){if(s.namespaceURI!==kb.svg||"innerHTML"in s)s.innerHTML=e;else{for(nb=nb||document.createElement("div"),nb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nb.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;e.firstChild;)s.appendChild(e.firstChild)}});function pb(s,e){if(e){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=e;return}}s.textContent=e}var qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=["Webkit","ms","Moz","O"];Object.keys(qb).forEach(function(s){rb.forEach(function(e){e=e+s.charAt(0).toUpperCase()+s.substring(1),qb[e]=qb[s]})});function sb(s,e,o){return e==null||typeof e=="boolean"||e===""?"":o||typeof e!="number"||e===0||qb.hasOwnProperty(s)&&qb[s]?(""+e).trim():e+"px"}function tb(s,e){s=s.style;for(var o in e)if(e.hasOwnProperty(o)){var a=o.indexOf("--")===0,c=sb(o,e[o],a);o==="float"&&(o="cssFloat"),a?s.setProperty(o,c):s[o]=c}}var ub=m$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vb(s,e){if(e){if(ub[s]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(y(137,s));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(y(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(y(62))}}function wb(s,e){if(s.indexOf("-")===-1)return typeof e.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function xb(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yb=null,zb=null,Ab=null;function Bb(s){if(s=Cb(s)){if(typeof yb!="function")throw Error(y(280));var e=s.stateNode;e&&(e=Db(e),yb(s.stateNode,s.type,e))}}function Eb(s){zb?Ab?Ab.push(s):Ab=[s]:zb=s}function Fb(){if(zb){var s=zb,e=Ab;if(Ab=zb=null,Bb(s),e)for(s=0;s<e.length;s++)Bb(e[s])}}function Gb(s,e){return s(e)}function Hb(s,e,o,a,c){return s(e,o,a,c)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){(zb!==null||Ab!==null)&&(Ib(),Fb())}function Nb(s,e,o){if(Lb)return s(e,o);Lb=!0;try{return Jb(s,e,o)}finally{Lb=!1,Mb()}}function Ob(s,e){var o=s.stateNode;if(o===null)return null;var a=Db(o);if(a===null)return null;o=a[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(s=s.type,a=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!a;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(y(231,e,typeof o));return o}var Pb=!1;if(fa)try{var Qb={};Object.defineProperty(Qb,"passive",{get:function(){Pb=!0}}),window.addEventListener("test",Qb,Qb),window.removeEventListener("test",Qb,Qb)}catch{Pb=!1}function Rb(s,e,o,a,c,d,_,b,k){var j=Array.prototype.slice.call(arguments,3);try{e.apply(o,j)}catch(et){this.onError(et)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(s){Sb=!0,Tb=s}};function Xb(s,e,o,a,c,d,_,b,k){Sb=!1,Tb=null,Rb.apply(Wb,arguments)}function Yb(s,e,o,a,c,d,_,b,k){if(Xb.apply(this,arguments),Sb){if(Sb){var j=Tb;Sb=!1,Tb=null}else throw Error(y(198));Ub||(Ub=!0,Vb=j)}}function Zb(s){var e=s,o=s;if(s.alternate)for(;e.return;)e=e.return;else{s=e;do e=s,(e.flags&1026)!==0&&(o=e.return),s=e.return;while(s)}return e.tag===3?o:null}function $b(s){if(s.tag===13){var e=s.memoizedState;if(e===null&&(s=s.alternate,s!==null&&(e=s.memoizedState)),e!==null)return e.dehydrated}return null}function ac(s){if(Zb(s)!==s)throw Error(y(188))}function bc(s){var e=s.alternate;if(!e){if(e=Zb(s),e===null)throw Error(y(188));return e!==s?null:s}for(var o=s,a=e;;){var c=o.return;if(c===null)break;var d=c.alternate;if(d===null){if(a=c.return,a!==null){o=a;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===o)return ac(c),s;if(d===a)return ac(c),e;d=d.sibling}throw Error(y(188))}if(o.return!==a.return)o=c,a=d;else{for(var _=!1,b=c.child;b;){if(b===o){_=!0,o=c,a=d;break}if(b===a){_=!0,a=c,o=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===o){_=!0,o=d,a=c;break}if(b===a){_=!0,a=d,o=c;break}b=b.sibling}if(!_)throw Error(y(189))}}if(o.alternate!==a)throw Error(y(190))}if(o.tag!==3)throw Error(y(188));return o.stateNode.current===o?s:e}function cc(s){if(s=bc(s),!s)return null;for(var e=s;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===s)break;for(;!e.sibling;){if(!e.return||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function dc(s,e){for(var o=s.alternate;e!==null;){if(e===s||e===o)return!0;e=e.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rc(s,e,o,a,c){return{blockedOn:s,domEventName:e,eventSystemFlags:o|16,nativeEvent:c,targetContainers:[a]}}function sc(s,e){switch(s){case"focusin":case"focusout":kc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":mc=null;break;case"pointerover":case"pointerout":nc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(e.pointerId)}}function tc(s,e,o,a,c,d){return s===null||s.nativeEvent!==d?(s=rc(e,o,a,c,d),e!==null&&(e=Cb(e),e!==null&&fc(e)),s):(s.eventSystemFlags|=a,e=s.targetContainers,c!==null&&e.indexOf(c)===-1&&e.push(c),s)}function uc(s,e,o,a,c){switch(e){case"focusin":return kc=tc(kc,s,e,o,a,c),!0;case"dragenter":return lc=tc(lc,s,e,o,a,c),!0;case"mouseover":return mc=tc(mc,s,e,o,a,c),!0;case"pointerover":var d=c.pointerId;return nc.set(d,tc(nc.get(d)||null,s,e,o,a,c)),!0;case"gotpointercapture":return d=c.pointerId,oc.set(d,tc(oc.get(d)||null,s,e,o,a,c)),!0}return!1}function vc(s){var e=wc(s.target);if(e!==null){var o=Zb(e);if(o!==null){if(e=o.tag,e===13){if(e=$b(o),e!==null){s.blockedOn=e,hc(s.lanePriority,function(){r.unstable_runWithPriority(s.priority,function(){gc(o)})});return}}else if(e===3&&o.stateNode.hydrate){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function xc(s){if(s.blockedOn!==null)return!1;for(var e=s.targetContainers;0<e.length;){var o=yc(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(o!==null)return e=Cb(o),e!==null&&fc(e),s.blockedOn=o,!1;e.shift()}return!0}function zc(s,e,o){xc(s)&&o.delete(e)}function Ac(){for(ic=!1;0<jc.length;){var s=jc[0];if(s.blockedOn!==null){s=Cb(s.blockedOn),s!==null&&ec(s);break}for(var e=s.targetContainers;0<e.length;){var o=yc(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(o!==null){s.blockedOn=o;break}e.shift()}s.blockedOn===null&&jc.shift()}kc!==null&&xc(kc)&&(kc=null),lc!==null&&xc(lc)&&(lc=null),mc!==null&&xc(mc)&&(mc=null),nc.forEach(zc),oc.forEach(zc)}function Bc(s,e){s.blockedOn===e&&(s.blockedOn=null,ic||(ic=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ac)))}function Cc(s){function e(c){return Bc(c,s)}if(0<jc.length){Bc(jc[0],s);for(var o=1;o<jc.length;o++){var a=jc[o];a.blockedOn===s&&(a.blockedOn=null)}}for(kc!==null&&Bc(kc,s),lc!==null&&Bc(lc,s),mc!==null&&Bc(mc,s),nc.forEach(e),oc.forEach(e),o=0;o<pc.length;o++)a=pc[o],a.blockedOn===s&&(a.blockedOn=null);for(;0<pc.length&&(o=pc[0],o.blockedOn===null);)vc(o),o.blockedOn===null&&pc.shift()}function Dc(s,e){var o={};return o[s.toLowerCase()]=e.toLowerCase(),o["Webkit"+s]="webkit"+e,o["Moz"+s]="moz"+e,o}var Ec={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},Fc={},Gc={};fa&&(Gc=document.createElement("div").style,"AnimationEvent"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),"TransitionEvent"in window||delete Ec.transitionend.transition);function Hc(s){if(Fc[s])return Fc[s];if(!Ec[s])return s;var e=Ec[s],o;for(o in e)if(e.hasOwnProperty(o)&&o in Gc)return Fc[s]=e[o];return s}var Ic=Hc("animationend"),Jc=Hc("animationiteration"),Kc=Hc("animationstart"),Lc=Hc("transitionend"),Mc=new Map,Nc=new Map,Oc=["abort","abort",Ic,"animationEnd",Jc,"animationIteration",Kc,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Lc,"transitionEnd","waiting","waiting"];function Pc(s,e){for(var o=0;o<s.length;o+=2){var a=s[o],c=s[o+1];c="on"+(c[0].toUpperCase()+c.slice(1)),Nc.set(a,e),Mc.set(a,c),da(c,[a])}}var Qc=r.unstable_now;Qc();var F=8;function Rc(s){if((1&s)!==0)return F=15,1;if((2&s)!==0)return F=14,2;if((4&s)!==0)return F=13,4;var e=24&s;return e!==0?(F=12,e):(s&32)!==0?(F=11,32):(e=192&s,e!==0?(F=10,e):(s&256)!==0?(F=9,256):(e=3584&s,e!==0?(F=8,e):(s&4096)!==0?(F=7,4096):(e=4186112&s,e!==0?(F=6,e):(e=62914560&s,e!==0?(F=5,e):s&67108864?(F=4,67108864):(s&134217728)!==0?(F=3,134217728):(e=805306368&s,e!==0?(F=2,e):(1073741824&s)!==0?(F=1,1073741824):(F=8,s))))))}function Sc(s){switch(s){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(s){switch(s){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y(358,s))}}function Uc(s,e){var o=s.pendingLanes;if(o===0)return F=0;var a=0,c=0,d=s.expiredLanes,_=s.suspendedLanes,b=s.pingedLanes;if(d!==0)a=d,c=F=15;else if(d=o&134217727,d!==0){var k=d&~_;k!==0?(a=Rc(k),c=F):(b&=d,b!==0&&(a=Rc(b),c=F))}else d=o&~_,d!==0?(a=Rc(d),c=F):b!==0&&(a=Rc(b),c=F);if(a===0)return 0;if(a=31-Vc(a),a=o&((0>a?0:1<<a)<<1)-1,e!==0&&e!==a&&(e&_)===0){if(Rc(e),c<=F)return e;F=c}if(e=s.entangledLanes,e!==0)for(s=s.entanglements,e&=a;0<e;)o=31-Vc(e),c=1<<o,a|=s[o],e&=~c;return a}function Wc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Xc(s,e){switch(s){case 15:return 1;case 14:return 2;case 12:return s=Yc(24&~e),s===0?Xc(10,e):s;case 10:return s=Yc(192&~e),s===0?Xc(8,e):s;case 8:return s=Yc(3584&~e),s===0&&(s=Yc(4186112&~e),s===0&&(s=512)),s;case 2:return e=Yc(805306368&~e),e===0&&(e=268435456),e}throw Error(y(358,s))}function Yc(s){return s&-s}function Zc(s){for(var e=[],o=0;31>o;o++)e.push(s);return e}function $c(s,e,o){s.pendingLanes|=e;var a=e-1;s.suspendedLanes&=a,s.pingedLanes&=a,s=s.eventTimes,e=31-Vc(e),s[e]=o}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(s){return s===0?32:31-(bd(s)/cd|0)|0}var dd=r.unstable_UserBlockingPriority,ed=r.unstable_runWithPriority,fd=!0;function gd(s,e,o,a){Kb||Ib();var c=hd,d=Kb;Kb=!0;try{Hb(c,s,e,o,a)}finally{(Kb=d)||Mb()}}function id(s,e,o,a){ed(dd,hd.bind(null,s,e,o,a))}function hd(s,e,o,a){if(fd){var c;if((c=(e&4)===0)&&0<jc.length&&-1<qc.indexOf(s))s=rc(null,s,e,o,a),jc.push(s);else{var d=yc(s,e,o,a);if(d===null)c&&sc(s,a);else{if(c){if(-1<qc.indexOf(s)){s=rc(d,s,e,o,a),jc.push(s);return}if(uc(d,s,e,o,a))return;sc(s,a)}jd(s,e,a,null,o)}}}}function yc(s,e,o,a){var c=xb(a);if(c=wc(c),c!==null){var d=Zb(c);if(d===null)c=null;else{var _=d.tag;if(_===13){if(c=$b(d),c!==null)return c;c=null}else if(_===3){if(d.stateNode.hydrate)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null)}}return jd(s,e,a,c,o),null}var kd=null,ld=null,md=null;function nd(){if(md)return md;var s,e=ld,o=e.length,a,c="value"in kd?kd.value:kd.textContent,d=c.length;for(s=0;s<o&&e[s]===c[s];s++);var _=o-s;for(a=1;a<=_&&e[o-a]===c[d-a];a++);return md=c.slice(s,1<a?1-a:void 0)}function od(s){var e=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&e===13&&(s=13)):s=e,s===10&&(s=13),32<=s||s===13?s:0}function pd(){return!0}function qd(){return!1}function rd(s){function e(o,a,c,d,_){this._reactName=o,this._targetInst=c,this.type=a,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in s)s.hasOwnProperty(b)&&(o=s[b],this[b]=o?o(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return m$1(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==yd&&(yd&&s.type==="mousemove"?(wd=s.screenX-yd.screenX,xd=s.screenY-yd.screenY):xd=wd=0,yd=s),wd)},movementY:function(s){return"movementY"in s?s.movementY:xd}}),Bd=rd(Ad),Cd=m$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m$1({},sd,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(s){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(s):(s=Od[s])?!!e[s]:!1}function zd(){return Pd}var Qd=m$1({},ud,{key:function(s){if(s.key){var e=Md[s.key]||s.key;if(e!=="Unidentified")return e}return s.type==="keypress"?(s=od(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Nd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(s){return s.type==="keypress"?od(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?od(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Rd=rd(Qd),Sd=m$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m$1({},Ad,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=fa&&"CompositionEvent"in window,be=null;fa&&"documentMode"in document&&(be=document.documentMode);var ce=fa&&"TextEvent"in window&&!be,de=fa&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(s,e){switch(s){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ie=!1;function je(s,e){switch(s){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee);case"textInput":return s=e.data,s===ee&&fe?null:s;default:return null}}function ke(s,e){if(ie)return s==="compositionend"||!ae&&ge(s,e)?(s=nd(),md=ld=kd=null,ie=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e==="input"?!!le[s.type]:e==="textarea"}function ne(s,e,o,a){Eb(a),e=oe(e,"onChange"),0<e.length&&(o=new td("onChange","change",null,o,a),s.push({event:o,listeners:e}))}var pe=null,qe=null;function re(s){se(s,0)}function te(s){var e=ue(s);if(Wa(e))return s}function ve(s,e){if(s==="change")return e}var we=!1;if(fa){var xe;if(fa){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(s){if(s.propertyName==="value"&&te(qe)){var e=[];if(ne(e,qe,s,xb(s)),s=re,Kb)s(e);else{Kb=!0;try{Gb(s,e)}finally{Kb=!1,Mb()}}}}function Ce(s,e,o){s==="focusin"?(Ae(),pe=e,qe=o,pe.attachEvent("onpropertychange",Be)):s==="focusout"&&Ae()}function De(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return te(qe)}function Ee(s,e){if(s==="click")return te(e)}function Fe(s,e){if(s==="input"||s==="change")return te(e)}function Ge(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge,Ie=Object.prototype.hasOwnProperty;function Je(s,e){if(He(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;var o=Object.keys(s),a=Object.keys(e);if(o.length!==a.length)return!1;for(a=0;a<o.length;a++)if(!Ie.call(e,o[a])||!He(s[o[a]],e[o[a]]))return!1;return!0}function Ke(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Le(s,e){var o=Ke(s);s=0;for(var a;o;){if(o.nodeType===3){if(a=s+o.textContent.length,s<=e&&a>=e)return{node:o,offset:e-s};s=a}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Ke(o)}}function Me(s,e){return s&&e?s===e?!0:s&&s.nodeType===3?!1:e&&e.nodeType===3?Me(s,e.parentNode):"contains"in s?s.contains(e):s.compareDocumentPosition?!!(s.compareDocumentPosition(e)&16):!1:!1}function Ne(){for(var s=window,e=Xa();e instanceof s.HTMLIFrameElement;){try{var o=typeof e.contentWindow.location.href=="string"}catch{o=!1}if(o)s=e.contentWindow;else break;e=Xa(s.document)}return e}function Oe(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e&&(e==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||e==="textarea"||s.contentEditable==="true")}var Pe=fa&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(s,e,o){var a=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Te||Qe==null||Qe!==Xa(a)||(a=Qe,"selectionStart"in a&&Oe(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se&&Je(Se,a)||(Se=a,a=oe(Re,"onSelect"),0<a.length&&(e=new td("onSelect","select",null,e,o),s.push({event:e,listeners:a}),e.target=Qe)))}Pc("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Pc("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Pc(Oc,2);for(var Ve="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),We=0;We<Ve.length;We++)Nc.set(Ve[We],0);ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da("onBeforeInput",["compositionend","keypress","textInput","paste"]);da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ye=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xe));function Ze(s,e,o){var a=s.type||"unknown-event";s.currentTarget=o,Yb(a,e,void 0,s),s.currentTarget=null}function se(s,e){e=(e&4)!==0;for(var o=0;o<s.length;o++){var a=s[o],c=a.event;a=a.listeners;e:{var d=void 0;if(e)for(var _=a.length-1;0<=_;_--){var b=a[_],k=b.instance,j=b.currentTarget;if(b=b.listener,k!==d&&c.isPropagationStopped())break e;Ze(c,b,j),d=k}else for(_=0;_<a.length;_++){if(b=a[_],k=b.instance,j=b.currentTarget,b=b.listener,k!==d&&c.isPropagationStopped())break e;Ze(c,b,j),d=k}}}if(Ub)throw s=Vb,Ub=!1,Vb=null,s}function G(s,e){var o=$e(e),a=s+"__bubble";o.has(a)||(af(e,s,2,!1),o.add(a))}var bf="_reactListening"+Math.random().toString(36).slice(2);function cf(s){s[bf]||(s[bf]=!0,ba.forEach(function(e){Ye.has(e)||df(e,!1,s,null),df(e,!0,s,null)}))}function df(s,e,o,a){var c=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,d=o;if(s==="selectionchange"&&o.nodeType!==9&&(d=o.ownerDocument),a!==null&&!e&&Ye.has(s)){if(s!=="scroll")return;c|=2,d=a}var _=$e(d),b=s+"__"+(e?"capture":"bubble");_.has(b)||(e&&(c|=4),af(d,s,c,e),_.add(b))}function af(s,e,o,a){var c=Nc.get(e);switch(c===void 0?2:c){case 0:c=gd;break;case 1:c=id;break;default:c=hd}o=c.bind(null,e,o,s),c=void 0,!Pb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(c=!0),a?c!==void 0?s.addEventListener(e,o,{capture:!0,passive:c}):s.addEventListener(e,o,!0):c!==void 0?s.addEventListener(e,o,{passive:c}):s.addEventListener(e,o,!1)}function jd(s,e,o,a,c){var d=a;if((e&1)===0&&(e&2)===0&&a!==null)e:for(;;){if(a===null)return;var _=a.tag;if(_===3||_===4){var b=a.stateNode.containerInfo;if(b===c||b.nodeType===8&&b.parentNode===c)break;if(_===4)for(_=a.return;_!==null;){var k=_.tag;if((k===3||k===4)&&(k=_.stateNode.containerInfo,k===c||k.nodeType===8&&k.parentNode===c))return;_=_.return}for(;b!==null;){if(_=wc(b),_===null)return;if(k=_.tag,k===5||k===6){a=d=_;continue e}b=b.parentNode}}a=a.return}Nb(function(){var j=d,et=xb(o),nt=[];e:{var tt=Mc.get(s);if(tt!==void 0){var rt=td,at=s;switch(s){case"keypress":if(od(o)===0)break e;case"keydown":case"keyup":rt=Rd;break;case"focusin":at="focus",rt=Fd;break;case"focusout":at="blur",rt=Fd;break;case"beforeblur":case"afterblur":rt=Fd;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=Vd;break;case Ic:case Jc:case Kc:rt=Hd;break;case Lc:rt=Xd;break;case"scroll":rt=vd;break;case"wheel":rt=Zd;break;case"copy":case"cut":case"paste":rt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=Td}var lt=(e&4)!==0,ut=!lt&&s==="scroll",st=lt?tt!==null?tt+"Capture":null:tt;lt=[];for(var it=j,ft;it!==null;){ft=it;var ct=ft.stateNode;if(ft.tag===5&&ct!==null&&(ft=ct,st!==null&&(ct=Ob(it,st),ct!=null&&lt.push(ef(it,ct,ft)))),ut)break;it=it.return}0<lt.length&&(tt=new rt(tt,at,null,o,et),nt.push({event:tt,listeners:lt}))}}if((e&7)===0){e:{if(tt=s==="mouseover"||s==="pointerover",rt=s==="mouseout"||s==="pointerout",tt&&(e&16)===0&&(at=o.relatedTarget||o.fromElement)&&(wc(at)||at[ff]))break e;if((rt||tt)&&(tt=et.window===et?et:(tt=et.ownerDocument)?tt.defaultView||tt.parentWindow:window,rt?(at=o.relatedTarget||o.toElement,rt=j,at=at?wc(at):null,at!==null&&(ut=Zb(at),at!==ut||at.tag!==5&&at.tag!==6)&&(at=null)):(rt=null,at=j),rt!==at)){if(lt=Bd,ct="onMouseLeave",st="onMouseEnter",it="mouse",(s==="pointerout"||s==="pointerover")&&(lt=Td,ct="onPointerLeave",st="onPointerEnter",it="pointer"),ut=rt==null?tt:ue(rt),ft=at==null?tt:ue(at),tt=new lt(ct,it+"leave",rt,o,et),tt.target=ut,tt.relatedTarget=ft,ct=null,wc(et)===j&&(lt=new lt(st,it+"enter",at,o,et),lt.target=ft,lt.relatedTarget=ut,ct=lt),ut=ct,rt&&at)t:{for(lt=rt,st=at,it=0,ft=lt;ft;ft=gf(ft))it++;for(ft=0,ct=st;ct;ct=gf(ct))ft++;for(;0<it-ft;)lt=gf(lt),it--;for(;0<ft-it;)st=gf(st),ft--;for(;it--;){if(lt===st||st!==null&&lt===st.alternate)break t;lt=gf(lt),st=gf(st)}lt=null}else lt=null;rt!==null&&hf(nt,tt,rt,lt,!1),at!==null&&ut!==null&&hf(nt,ut,at,lt,!0)}}e:{if(tt=j?ue(j):window,rt=tt.nodeName&&tt.nodeName.toLowerCase(),rt==="select"||rt==="input"&&tt.type==="file")var dt=ve;else if(me(tt))if(we)dt=Fe;else{dt=De;var mt=Ce}else(rt=tt.nodeName)&&rt.toLowerCase()==="input"&&(tt.type==="checkbox"||tt.type==="radio")&&(dt=Ee);if(dt&&(dt=dt(s,j))){ne(nt,dt,o,et);break e}mt&&mt(s,tt,j),s==="focusout"&&(mt=tt._wrapperState)&&mt.controlled&&tt.type==="number"&&bb(tt,"number",tt.value)}switch(mt=j?ue(j):window,s){case"focusin":(me(mt)||mt.contentEditable==="true")&&(Qe=mt,Re=j,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(nt,o,et);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(nt,o,et)}var gt;if(ae)e:{switch(s){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else ie?ge(s,o)&&(yt="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(yt="onCompositionStart");yt&&(de&&o.locale!=="ko"&&(ie||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&ie&&(gt=nd()):(kd=et,ld="value"in kd?kd.value:kd.textContent,ie=!0)),mt=oe(j,yt),0<mt.length&&(yt=new Ld(yt,s,null,o,et),nt.push({event:yt,listeners:mt}),gt?yt.data=gt:(gt=he(o),gt!==null&&(yt.data=gt)))),(gt=ce?je(s,o):ke(s,o))&&(j=oe(j,"onBeforeInput"),0<j.length&&(et=new Ld("onBeforeInput","beforeinput",null,o,et),nt.push({event:et,listeners:j}),et.data=gt))}se(nt,e)})}function ef(s,e,o){return{instance:s,listener:e,currentTarget:o}}function oe(s,e){for(var o=e+"Capture",a=[];s!==null;){var c=s,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=Ob(s,o),d!=null&&a.unshift(ef(s,d,c)),d=Ob(s,e),d!=null&&a.push(ef(s,d,c))),s=s.return}return a}function gf(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function hf(s,e,o,a,c){for(var d=e._reactName,_=[];o!==null&&o!==a;){var b=o,k=b.alternate,j=b.stateNode;if(k!==null&&k===a)break;b.tag===5&&j!==null&&(b=j,c?(k=Ob(o,d),k!=null&&_.unshift(ef(o,k,b))):c||(k=Ob(o,d),k!=null&&_.push(ef(o,k,b)))),o=o.return}_.length!==0&&s.push({event:e,listeners:_})}function jf(){}var kf=null,lf=null;function mf(s,e){switch(s){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function nf(s,e){return s==="textarea"||s==="option"||s==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var of=typeof setTimeout=="function"?setTimeout:void 0,pf=typeof clearTimeout=="function"?clearTimeout:void 0;function qf(s){s.nodeType===1?s.textContent="":s.nodeType===9&&(s=s.body,s!=null&&(s.textContent=""))}function rf(s){for(;s!=null;s=s.nextSibling){var e=s.nodeType;if(e===1||e===3)break}return s}function sf(s){s=s.previousSibling;for(var e=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"){if(e===0)return s;e--}else o==="/$"&&e++}s=s.previousSibling}return null}var tf=0;function uf(s){return{$$typeof:Ga,toString:s,valueOf:s}}var vf=Math.random().toString(36).slice(2),wf="__reactFiber$"+vf,xf="__reactProps$"+vf,ff="__reactContainer$"+vf,yf="__reactEvents$"+vf;function wc(s){var e=s[wf];if(e)return e;for(var o=s.parentNode;o;){if(e=o[ff]||o[wf]){if(o=e.alternate,e.child!==null||o!==null&&o.child!==null)for(s=sf(s);s!==null;){if(o=s[wf])return o;s=sf(s)}return e}s=o,o=s.parentNode}return null}function Cb(s){return s=s[wf]||s[ff],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ue(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(y(33))}function Db(s){return s[xf]||null}function $e(s){var e=s[yf];return e===void 0&&(e=s[yf]=new Set),e}var zf=[],Af=-1;function Bf(s){return{current:s}}function H(s){0>Af||(s.current=zf[Af],zf[Af]=null,Af--)}function I(s,e){Af++,zf[Af]=s.current,s.current=e}var Cf={},M=Bf(Cf),N=Bf(!1),Df=Cf;function Ef(s,e){var o=s.type.contextTypes;if(!o)return Cf;var a=s.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===e)return a.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in o)c[d]=e[d];return a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=e,s.__reactInternalMemoizedMaskedChildContext=c),c}function Ff(s){return s=s.childContextTypes,s!=null}function Gf(){H(N),H(M)}function Hf(s,e,o){if(M.current!==Cf)throw Error(y(168));I(M,e),I(N,o)}function If(s,e,o){var a=s.stateNode;if(s=e.childContextTypes,typeof a.getChildContext!="function")return o;a=a.getChildContext();for(var c in a)if(!(c in s))throw Error(y(108,Ra(e)||"Unknown",c));return m$1({},o,a)}function Jf(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Cf,Df=M.current,I(M,s),I(N,N.current),!0}function Kf(s,e,o){var a=s.stateNode;if(!a)throw Error(y(169));o?(s=If(s,e,Df),a.__reactInternalMemoizedMergedChildContext=s,H(N),H(M),I(M,s)):H(N),I(N,o)}var Lf=null,Mf=null,Nf=r.unstable_runWithPriority,Of=r.unstable_scheduleCallback,Pf=r.unstable_cancelCallback,Qf=r.unstable_shouldYield,Rf=r.unstable_requestPaint,Sf=r.unstable_now,Tf=r.unstable_getCurrentPriorityLevel,Uf=r.unstable_ImmediatePriority,Vf=r.unstable_UserBlockingPriority,Wf=r.unstable_NormalPriority,Xf=r.unstable_LowPriority,Yf=r.unstable_IdlePriority,Zf={},$f=Rf!==void 0?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O=1e4>dg?Sf:function(){return Sf()-dg};function eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y(332))}}function fg(s){switch(s){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y(332))}}function gg(s,e){return s=fg(s),Nf(s,e)}function hg(s,e,o){return s=fg(s),Of(s,e,o)}function ig(){if(bg!==null){var s=bg;bg=null,Pf(s)}jg()}function jg(){if(!cg&&ag!==null){cg=!0;var s=0;try{var e=ag;gg(99,function(){for(;s<e.length;s++){var o=e[s];do o=o(!0);while(o!==null)}}),ag=null}catch(o){throw ag!==null&&(ag=ag.slice(s+1)),Of(Uf,ig),o}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(s,e){if(s&&s.defaultProps){e=m$1({},e),s=s.defaultProps;for(var o in s)e[o]===void 0&&(e[o]=s[o]);return e}return e}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}function rg(s){var e=mg.current;H(mg),s.type._context._currentValue=e}function sg(s,e){for(;s!==null;){var o=s.alternate;if((s.childLanes&e)===e){if(o===null||(o.childLanes&e)===e)break;o.childLanes|=e}else s.childLanes|=e,o!==null&&(o.childLanes|=e);s=s.return}}function tg(s,e){ng=s,pg=og=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&e)!==0&&(ug=!0),s.firstContext=null)}function vg(s,e){if(pg!==s&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(pg=s,e=1073741823),e={context:s,observedBits:e,next:null},og===null){if(ng===null)throw Error(y(308));og=e,ng.dependencies={lanes:0,firstContext:e,responders:null}}else og=og.next=e;return s._currentValue}var wg=!1;function xg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function yg(s,e){s=s.updateQueue,e.updateQueue===s&&(e.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function zg(s,e){return{eventTime:s,lane:e,tag:0,payload:null,callback:null,next:null}}function Ag(s,e){if(s=s.updateQueue,s!==null){s=s.shared;var o=s.pending;o===null?e.next=e:(e.next=o.next,o.next=e),s.pending=e}}function Bg(s,e){var o=s.updateQueue,a=s.alternate;if(a!==null&&(a=a.updateQueue,o===a)){var c=null,d=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};d===null?c=d=_:d=d.next=_,o=o.next}while(o!==null);d===null?c=d=e:d=d.next=e}else c=d=e;o={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:a.shared,effects:a.effects},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=e:s.next=e,o.lastBaseUpdate=e}function Cg(s,e,o,a){var c=s.updateQueue;wg=!1;var d=c.firstBaseUpdate,_=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var k=b,j=k.next;k.next=null,_===null?d=j:_.next=j,_=k;var et=s.alternate;if(et!==null){et=et.updateQueue;var nt=et.lastBaseUpdate;nt!==_&&(nt===null?et.firstBaseUpdate=j:nt.next=j,et.lastBaseUpdate=k)}}if(d!==null){nt=c.baseState,_=0,et=j=k=null;do{b=d.lane;var tt=d.eventTime;if((a&b)===b){et!==null&&(et=et.next={eventTime:tt,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var rt=s,at=d;switch(b=e,tt=o,at.tag){case 1:if(rt=at.payload,typeof rt=="function"){nt=rt.call(tt,nt,b);break e}nt=rt;break e;case 3:rt.flags=rt.flags&-4097|64;case 0:if(rt=at.payload,b=typeof rt=="function"?rt.call(tt,nt,b):rt,b==null)break e;nt=m$1({},nt,b);break e;case 2:wg=!0}}d.callback!==null&&(s.flags|=32,b=c.effects,b===null?c.effects=[d]:b.push(d))}else tt={eventTime:tt,lane:b,tag:d.tag,payload:d.payload,callback:d.callback,next:null},et===null?(j=et=tt,k=nt):et=et.next=tt,_|=b;if(d=d.next,d===null){if(b=c.shared.pending,b===null)break;d=b.next,b.next=null,c.lastBaseUpdate=b,c.shared.pending=null}}while(1);et===null&&(k=nt),c.baseState=k,c.firstBaseUpdate=j,c.lastBaseUpdate=et,Dg|=_,s.lanes=_,s.memoizedState=nt}}function Eg(s,e,o){if(s=e.effects,e.effects=null,s!==null)for(e=0;e<s.length;e++){var a=s[e],c=a.callback;if(c!==null){if(a.callback=null,a=o,typeof c!="function")throw Error(y(191,c));c.call(a)}}}var Fg=new aa.Component().refs;function Gg(s,e,o,a){e=s.memoizedState,o=o(a,e),o=o==null?e:m$1({},e,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var Kg={isMounted:function(s){return(s=s._reactInternals)?Zb(s)===s:!1},enqueueSetState:function(s,e,o){s=s._reactInternals;var a=Hg(),c=Ig(s),d=zg(a,c);d.payload=e,o!=null&&(d.callback=o),Ag(s,d),Jg(s,c,a)},enqueueReplaceState:function(s,e,o){s=s._reactInternals;var a=Hg(),c=Ig(s),d=zg(a,c);d.tag=1,d.payload=e,o!=null&&(d.callback=o),Ag(s,d),Jg(s,c,a)},enqueueForceUpdate:function(s,e){s=s._reactInternals;var o=Hg(),a=Ig(s),c=zg(o,a);c.tag=2,e!=null&&(c.callback=e),Ag(s,c),Jg(s,a,o)}};function Lg(s,e,o,a,c,d,_){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(a,d,_):e.prototype&&e.prototype.isPureReactComponent?!Je(o,a)||!Je(c,d):!0}function Mg(s,e,o){var a=!1,c=Cf,d=e.contextType;return typeof d=="object"&&d!==null?d=vg(d):(c=Ff(e)?Df:M.current,a=e.contextTypes,d=(a=a!=null)?Ef(s,c):Cf),e=new e(o,d),s.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kg,s.stateNode=e,e._reactInternals=s,a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=c,s.__reactInternalMemoizedMaskedChildContext=d),e}function Ng(s,e,o,a){s=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(o,a),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(o,a),e.state!==s&&Kg.enqueueReplaceState(e,e.state,null)}function Og(s,e,o,a){var c=s.stateNode;c.props=o,c.state=s.memoizedState,c.refs=Fg,xg(s);var d=e.contextType;typeof d=="object"&&d!==null?c.context=vg(d):(d=Ff(e)?Df:M.current,c.context=Ef(s,d)),Cg(s,o,c,a),c.state=s.memoizedState,d=e.getDerivedStateFromProps,typeof d=="function"&&(Gg(s,e,d,o),c.state=s.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(e=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),e!==c.state&&Kg.enqueueReplaceState(c,c.state,null),Cg(s,o,c,a),c.state=s.memoizedState),typeof c.componentDidMount=="function"&&(s.flags|=4)}var Pg=Array.isArray;function Qg(s,e,o){if(s=o.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(y(309));var a=o.stateNode}if(!a)throw Error(y(147,s));var c=""+s;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===c?e.ref:(e=function(d){var _=a.refs;_===Fg&&(_=a.refs={}),d===null?delete _[c]:_[c]=d},e._stringRef=c,e)}if(typeof s!="string")throw Error(y(284));if(!o._owner)throw Error(y(290,s))}return s}function Rg(s,e){if(s.type!=="textarea")throw Error(y(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function Sg(s){function e(ut,st){if(s){var it=ut.lastEffect;it!==null?(it.nextEffect=st,ut.lastEffect=st):ut.firstEffect=ut.lastEffect=st,st.nextEffect=null,st.flags=8}}function o(ut,st){if(!s)return null;for(;st!==null;)e(ut,st),st=st.sibling;return null}function a(ut,st){for(ut=new Map;st!==null;)st.key!==null?ut.set(st.key,st):ut.set(st.index,st),st=st.sibling;return ut}function c(ut,st){return ut=Tg(ut,st),ut.index=0,ut.sibling=null,ut}function d(ut,st,it){return ut.index=it,s?(it=ut.alternate,it!==null?(it=it.index,it<st?(ut.flags=2,st):it):(ut.flags=2,st)):st}function _(ut){return s&&ut.alternate===null&&(ut.flags=2),ut}function b(ut,st,it,ft){return st===null||st.tag!==6?(st=Ug(it,ut.mode,ft),st.return=ut,st):(st=c(st,it),st.return=ut,st)}function k(ut,st,it,ft){return st!==null&&st.elementType===it.type?(ft=c(st,it.props),ft.ref=Qg(ut,st,it),ft.return=ut,ft):(ft=Vg(it.type,it.key,it.props,null,ut.mode,ft),ft.ref=Qg(ut,st,it),ft.return=ut,ft)}function j(ut,st,it,ft){return st===null||st.tag!==4||st.stateNode.containerInfo!==it.containerInfo||st.stateNode.implementation!==it.implementation?(st=Wg(it,ut.mode,ft),st.return=ut,st):(st=c(st,it.children||[]),st.return=ut,st)}function et(ut,st,it,ft,ct){return st===null||st.tag!==7?(st=Xg(it,ut.mode,ft,ct),st.return=ut,st):(st=c(st,it),st.return=ut,st)}function nt(ut,st,it){if(typeof st=="string"||typeof st=="number")return st=Ug(""+st,ut.mode,it),st.return=ut,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case sa:return it=Vg(st.type,st.key,st.props,null,ut.mode,it),it.ref=Qg(ut,null,st),it.return=ut,it;case ta:return st=Wg(st,ut.mode,it),st.return=ut,st}if(Pg(st)||La(st))return st=Xg(st,ut.mode,it,null),st.return=ut,st;Rg(ut,st)}return null}function tt(ut,st,it,ft){var ct=st!==null?st.key:null;if(typeof it=="string"||typeof it=="number")return ct!==null?null:b(ut,st,""+it,ft);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case sa:return it.key===ct?it.type===ua?et(ut,st,it.props.children,ft,ct):k(ut,st,it,ft):null;case ta:return it.key===ct?j(ut,st,it,ft):null}if(Pg(it)||La(it))return ct!==null?null:et(ut,st,it,ft,null);Rg(ut,it)}return null}function rt(ut,st,it,ft,ct){if(typeof ft=="string"||typeof ft=="number")return ut=ut.get(it)||null,b(st,ut,""+ft,ct);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case sa:return ut=ut.get(ft.key===null?it:ft.key)||null,ft.type===ua?et(st,ut,ft.props.children,ct,ft.key):k(st,ut,ft,ct);case ta:return ut=ut.get(ft.key===null?it:ft.key)||null,j(st,ut,ft,ct)}if(Pg(ft)||La(ft))return ut=ut.get(it)||null,et(st,ut,ft,ct,null);Rg(st,ft)}return null}function at(ut,st,it,ft){for(var ct=null,dt=null,mt=st,gt=st=0,yt=null;mt!==null&&gt<it.length;gt++){mt.index>gt?(yt=mt,mt=null):yt=mt.sibling;var St=tt(ut,mt,it[gt],ft);if(St===null){mt===null&&(mt=yt);break}s&&mt&&St.alternate===null&&e(ut,mt),st=d(St,st,gt),dt===null?ct=St:dt.sibling=St,dt=St,mt=yt}if(gt===it.length)return o(ut,mt),ct;if(mt===null){for(;gt<it.length;gt++)mt=nt(ut,it[gt],ft),mt!==null&&(st=d(mt,st,gt),dt===null?ct=mt:dt.sibling=mt,dt=mt);return ct}for(mt=a(ut,mt);gt<it.length;gt++)yt=rt(mt,ut,gt,it[gt],ft),yt!==null&&(s&&yt.alternate!==null&&mt.delete(yt.key===null?gt:yt.key),st=d(yt,st,gt),dt===null?ct=yt:dt.sibling=yt,dt=yt);return s&&mt.forEach(function(Et){return e(ut,Et)}),ct}function lt(ut,st,it,ft){var ct=La(it);if(typeof ct!="function")throw Error(y(150));if(it=ct.call(it),it==null)throw Error(y(151));for(var dt=ct=null,mt=st,gt=st=0,yt=null,St=it.next();mt!==null&&!St.done;gt++,St=it.next()){mt.index>gt?(yt=mt,mt=null):yt=mt.sibling;var Et=tt(ut,mt,St.value,ft);if(Et===null){mt===null&&(mt=yt);break}s&&mt&&Et.alternate===null&&e(ut,mt),st=d(Et,st,gt),dt===null?ct=Et:dt.sibling=Et,dt=Et,mt=yt}if(St.done)return o(ut,mt),ct;if(mt===null){for(;!St.done;gt++,St=it.next())St=nt(ut,St.value,ft),St!==null&&(st=d(St,st,gt),dt===null?ct=St:dt.sibling=St,dt=St);return ct}for(mt=a(ut,mt);!St.done;gt++,St=it.next())St=rt(mt,ut,gt,St.value,ft),St!==null&&(s&&St.alternate!==null&&mt.delete(St.key===null?gt:St.key),st=d(St,st,gt),dt===null?ct=St:dt.sibling=St,dt=St);return s&&mt.forEach(function(vt){return e(ut,vt)}),ct}return function(ut,st,it,ft){var ct=typeof it=="object"&&it!==null&&it.type===ua&&it.key===null;ct&&(it=it.props.children);var dt=typeof it=="object"&&it!==null;if(dt)switch(it.$$typeof){case sa:e:{for(dt=it.key,ct=st;ct!==null;){if(ct.key===dt){switch(ct.tag){case 7:if(it.type===ua){o(ut,ct.sibling),st=c(ct,it.props.children),st.return=ut,ut=st;break e}break;default:if(ct.elementType===it.type){o(ut,ct.sibling),st=c(ct,it.props),st.ref=Qg(ut,ct,it),st.return=ut,ut=st;break e}}o(ut,ct);break}else e(ut,ct);ct=ct.sibling}it.type===ua?(st=Xg(it.props.children,ut.mode,ft,it.key),st.return=ut,ut=st):(ft=Vg(it.type,it.key,it.props,null,ut.mode,ft),ft.ref=Qg(ut,st,it),ft.return=ut,ut=ft)}return _(ut);case ta:e:{for(ct=it.key;st!==null;){if(st.key===ct)if(st.tag===4&&st.stateNode.containerInfo===it.containerInfo&&st.stateNode.implementation===it.implementation){o(ut,st.sibling),st=c(st,it.children||[]),st.return=ut,ut=st;break e}else{o(ut,st);break}else e(ut,st);st=st.sibling}st=Wg(it,ut.mode,ft),st.return=ut,ut=st}return _(ut)}if(typeof it=="string"||typeof it=="number")return it=""+it,st!==null&&st.tag===6?(o(ut,st.sibling),st=c(st,it),st.return=ut,ut=st):(o(ut,st),st=Ug(it,ut.mode,ft),st.return=ut,ut=st),_(ut);if(Pg(it))return at(ut,st,it,ft);if(La(it))return lt(ut,st,it,ft);if(dt&&Rg(ut,it),typeof it=="undefined"&&!ct)switch(ut.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y(152,Ra(ut.type)||"Component"))}return o(ut,st)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);function dh(s){if(s===$g)throw Error(y(174));return s}function eh(s,e){switch(I(ch,e),I(bh,s),I(ah,$g),s=e.nodeType,s){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mb(null,"");break;default:s=s===8?e.parentNode:e,e=s.namespaceURI||null,s=s.tagName,e=mb(e,s)}H(ah),I(ah,e)}function fh(){H(ah),H(bh),H(ch)}function gh(s){dh(ch.current);var e=dh(ah.current),o=mb(e,s.type);e!==o&&(I(bh,s),I(ah,o))}function hh(s){bh.current===s&&(H(ah),H(bh))}var P=Bf(0);function ih(s){for(var e=s;e!==null;){if(e.tag===13){var o=e.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jh=null,kh=null,lh=!1;function mh(s,e){var o=nh(5,null,null,0);o.elementType="DELETED",o.type="DELETED",o.stateNode=e,o.return=s,o.flags=8,s.lastEffect!==null?(s.lastEffect.nextEffect=o,s.lastEffect=o):s.firstEffect=s.lastEffect=o}function oh(s,e){switch(s.tag){case 5:var o=s.type;return e=e.nodeType!==1||o.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(s.stateNode=e,!0):!1;case 6:return e=s.pendingProps===""||e.nodeType!==3?null:e,e!==null?(s.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function ph(s){if(lh){var e=kh;if(e){var o=e;if(!oh(s,e)){if(e=rf(o.nextSibling),!e||!oh(s,e)){s.flags=s.flags&-1025|2,lh=!1,jh=s;return}mh(jh,o)}jh=s,kh=rf(e.firstChild)}else s.flags=s.flags&-1025|2,lh=!1,jh=s}}function qh(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;jh=s}function rh(s){if(s!==jh)return!1;if(!lh)return qh(s),lh=!0,!1;var e=s.type;if(s.tag!==5||e!=="head"&&e!=="body"&&!nf(e,s.memoizedProps))for(e=kh;e;)mh(s,e),e=rf(e.nextSibling);if(qh(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(y(317));e:{for(s=s.nextSibling,e=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"){if(e===0){kh=rf(s.nextSibling);break e}e--}else o!=="$"&&o!=="$!"&&o!=="$?"||e++}s=s.nextSibling}kh=null}}else kh=jh?rf(s.stateNode.nextSibling):null;return!0}function sh(){kh=jh=null,lh=!1}var th=[];function uh(){for(var s=0;s<th.length;s++)th[s]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R=null,S=null,T=null,yh=!1,zh=!1;function Ah(){throw Error(y(321))}function Bh(s,e){if(e===null)return!1;for(var o=0;o<e.length&&o<s.length;o++)if(!He(s[o],e[o]))return!1;return!0}function Ch(s,e,o,a,c,d){if(xh=d,R=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vh.current=s===null||s.memoizedState===null?Dh:Eh,s=o(a,c),zh){d=0;do{if(zh=!1,!(25>d))throw Error(y(301));d+=1,T=S=null,e.updateQueue=null,vh.current=Fh,s=o(a,c)}while(zh)}if(vh.current=Gh,e=S!==null&&S.next!==null,xh=0,T=S=R=null,yh=!1,e)throw Error(y(300));return s}function Hh(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return T===null?R.memoizedState=T=s:T=T.next=s,T}function Ih(){if(S===null){var s=R.alternate;s=s!==null?s.memoizedState:null}else s=S.next;var e=T===null?R.memoizedState:T.next;if(e!==null)T=e,S=s;else{if(s===null)throw Error(y(310));S=s,s={memoizedState:S.memoizedState,baseState:S.baseState,baseQueue:S.baseQueue,queue:S.queue,next:null},T===null?R.memoizedState=T=s:T=T.next=s}return T}function Jh(s,e){return typeof e=="function"?e(s):e}function Kh(s){var e=Ih(),o=e.queue;if(o===null)throw Error(y(311));o.lastRenderedReducer=s;var a=S,c=a.baseQueue,d=o.pending;if(d!==null){if(c!==null){var _=c.next;c.next=d.next,d.next=_}a.baseQueue=c=d,o.pending=null}if(c!==null){c=c.next,a=a.baseState;var b=_=d=null,k=c;do{var j=k.lane;if((xh&j)===j)b!==null&&(b=b.next={lane:0,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null}),a=k.eagerReducer===s?k.eagerState:s(a,k.action);else{var et={lane:j,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null};b===null?(_=b=et,d=a):b=b.next=et,R.lanes|=j,Dg|=j}k=k.next}while(k!==null&&k!==c);b===null?d=a:b.next=_,He(a,e.memoizedState)||(ug=!0),e.memoizedState=a,e.baseState=d,e.baseQueue=b,o.lastRenderedState=a}return[e.memoizedState,o.dispatch]}function Lh(s){var e=Ih(),o=e.queue;if(o===null)throw Error(y(311));o.lastRenderedReducer=s;var a=o.dispatch,c=o.pending,d=e.memoizedState;if(c!==null){o.pending=null;var _=c=c.next;do d=s(d,_.action),_=_.next;while(_!==c);He(d,e.memoizedState)||(ug=!0),e.memoizedState=d,e.baseQueue===null&&(e.baseState=d),o.lastRenderedState=d}return[d,a]}function Mh(s,e,o){var a=e._getVersion;a=a(e._source);var c=e._workInProgressVersionPrimary;if(c!==null?s=c===a:(s=s.mutableReadLanes,(s=(xh&s)===s)&&(e._workInProgressVersionPrimary=a,th.push(e))),s)return o(e._source);throw th.push(e),Error(y(350))}function Nh(s,e,o,a){var c=U;if(c===null)throw Error(y(349));var d=e._getVersion,_=d(e._source),b=vh.current,k=b.useState(function(){return Mh(c,e,o)}),j=k[1],et=k[0];k=T;var nt=s.memoizedState,tt=nt.refs,rt=tt.getSnapshot,at=nt.source;nt=nt.subscribe;var lt=R;return s.memoizedState={refs:tt,source:e,subscribe:a},b.useEffect(function(){tt.getSnapshot=o,tt.setSnapshot=j;var ut=d(e._source);if(!He(_,ut)){ut=o(e._source),He(et,ut)||(j(ut),ut=Ig(lt),c.mutableReadLanes|=ut&c.pendingLanes),ut=c.mutableReadLanes,c.entangledLanes|=ut;for(var st=c.entanglements,it=ut;0<it;){var ft=31-Vc(it),ct=1<<ft;st[ft]|=ut,it&=~ct}}},[o,e,a]),b.useEffect(function(){return a(e._source,function(){var ut=tt.getSnapshot,st=tt.setSnapshot;try{st(ut(e._source));var it=Ig(lt);c.mutableReadLanes|=it&c.pendingLanes}catch(ft){st(function(){throw ft})}})},[e,a]),He(rt,o)&&He(at,e)&&He(nt,a)||(s={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:et},s.dispatch=j=Oh.bind(null,R,s),k.queue=s,k.baseQueue=null,et=Mh(c,e,o),k.memoizedState=k.baseState=et),et}function Ph(s,e,o){var a=Ih();return Nh(a,s,e,o)}function Qh(s){var e=Hh();return typeof s=="function"&&(s=s()),e.memoizedState=e.baseState=s,s=e.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:s},s=s.dispatch=Oh.bind(null,R,s),[e.memoizedState,s]}function Rh(s,e,o,a){return s={tag:s,create:e,destroy:o,deps:a,next:null},e=R.updateQueue,e===null?(e={lastEffect:null},R.updateQueue=e,e.lastEffect=s.next=s):(o=e.lastEffect,o===null?e.lastEffect=s.next=s:(a=o.next,o.next=s,s.next=a,e.lastEffect=s)),s}function Sh(s){var e=Hh();return s={current:s},e.memoizedState=s}function Th(){return Ih().memoizedState}function Uh(s,e,o,a){var c=Hh();R.flags|=s,c.memoizedState=Rh(1|e,o,void 0,a===void 0?null:a)}function Vh(s,e,o,a){var c=Ih();a=a===void 0?null:a;var d=void 0;if(S!==null){var _=S.memoizedState;if(d=_.destroy,a!==null&&Bh(a,_.deps)){Rh(e,o,d,a);return}}R.flags|=s,c.memoizedState=Rh(1|e,o,d,a)}function Wh(s,e){return Uh(516,4,s,e)}function Xh(s,e){return Vh(516,4,s,e)}function Yh(s,e){return Vh(4,2,s,e)}function Zh(s,e){if(typeof e=="function")return s=s(),e(s),function(){e(null)};if(e!=null)return s=s(),e.current=s,function(){e.current=null}}function $h(s,e,o){return o=o!=null?o.concat([s]):null,Vh(4,2,Zh.bind(null,e,s),o)}function ai(){}function bi(s,e){var o=Ih();e=e===void 0?null:e;var a=o.memoizedState;return a!==null&&e!==null&&Bh(e,a[1])?a[0]:(o.memoizedState=[s,e],s)}function ci(s,e){var o=Ih();e=e===void 0?null:e;var a=o.memoizedState;return a!==null&&e!==null&&Bh(e,a[1])?a[0]:(s=s(),o.memoizedState=[s,e],s)}function di(s,e){var o=eg();gg(98>o?98:o,function(){s(!0)}),gg(97<o?97:o,function(){var a=wh.transition;wh.transition=1;try{s(!1),e()}finally{wh.transition=a}})}function Oh(s,e,o){var a=Hg(),c=Ig(s),d={lane:c,action:o,eagerReducer:null,eagerState:null,next:null},_=e.pending;if(_===null?d.next=d:(d.next=_.next,_.next=d),e.pending=d,_=s.alternate,s===R||_!==null&&_===R)zh=yh=!0;else{if(s.lanes===0&&(_===null||_.lanes===0)&&(_=e.lastRenderedReducer,_!==null))try{var b=e.lastRenderedState,k=_(b,o);if(d.eagerReducer=_,d.eagerState=k,He(k,b))return}catch{}finally{}Jg(s,c,a)}}var Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(s,e){return Hh().memoizedState=[s,e===void 0?null:e],s},useContext:vg,useEffect:Wh,useImperativeHandle:function(s,e,o){return o=o!=null?o.concat([s]):null,Uh(4,2,Zh.bind(null,e,s),o)},useLayoutEffect:function(s,e){return Uh(4,2,s,e)},useMemo:function(s,e){var o=Hh();return e=e===void 0?null:e,s=s(),o.memoizedState=[s,e],s},useReducer:function(s,e,o){var a=Hh();return e=o!==void 0?o(e):e,a.memoizedState=a.baseState=e,s=a.queue={pending:null,dispatch:null,lastRenderedReducer:s,lastRenderedState:e},s=s.dispatch=Oh.bind(null,R,s),[a.memoizedState,s]},useRef:Sh,useState:Qh,useDebugValue:ai,useDeferredValue:function(s){var e=Qh(s),o=e[0],a=e[1];return Wh(function(){var c=wh.transition;wh.transition=1;try{a(s)}finally{wh.transition=c}},[s]),o},useTransition:function(){var s=Qh(!1),e=s[0];return s=di.bind(null,s[1]),Sh(s),[s,e]},useMutableSource:function(s,e,o){var a=Hh();return a.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:s,subscribe:o},Nh(a,s,e,o)},useOpaqueIdentifier:function(){if(lh){var s=!1,e=uf(function(){throw s||(s=!0,o("r:"+(tf++).toString(36))),Error(y(355))}),o=Qh(e)[1];return(R.mode&2)===0&&(R.flags|=516,Rh(5,function(){o("r:"+(tf++).toString(36))},void 0,null)),e}return e="r:"+(tf++).toString(36),Qh(e),e},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai,useDeferredValue:function(s){var e=Kh(Jh),o=e[0],a=e[1];return Xh(function(){var c=wh.transition;wh.transition=1;try{a(s)}finally{wh.transition=c}},[s]),o},useTransition:function(){var s=Kh(Jh)[0];return[Th().current,s]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai,useDeferredValue:function(s){var e=Lh(Jh),o=e[0],a=e[1];return Xh(function(){var c=wh.transition;wh.transition=1;try{a(s)}finally{wh.transition=c}},[s]),o},useTransition:function(){var s=Lh(Jh)[0];return[Th().current,s]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei=ra.ReactCurrentOwner,ug=!1;function fi(s,e,o,a){e.child=s===null?Zg(e,null,o,a):Yg(e,s.child,o,a)}function gi(s,e,o,a,c){o=o.render;var d=e.ref;return tg(e,c),a=Ch(s,e,o,a,d,c),s!==null&&!ug?(e.updateQueue=s.updateQueue,e.flags&=-517,s.lanes&=~c,hi(s,e,c)):(e.flags|=1,fi(s,e,a,c),e.child)}function ii(s,e,o,a,c,d){if(s===null){var _=o.type;return typeof _=="function"&&!ji(_)&&_.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(e.tag=15,e.type=_,ki(s,e,_,a,c,d)):(s=Vg(o.type,null,a,e,e.mode,d),s.ref=e.ref,s.return=e,e.child=s)}return _=s.child,(c&d)===0&&(c=_.memoizedProps,o=o.compare,o=o!==null?o:Je,o(c,a)&&s.ref===e.ref)?hi(s,e,d):(e.flags|=1,s=Tg(_,a),s.ref=e.ref,s.return=e,e.child=s)}function ki(s,e,o,a,c,d){if(s!==null&&Je(s.memoizedProps,a)&&s.ref===e.ref)if(ug=!1,(d&c)!==0)(s.flags&16384)!==0&&(ug=!0);else return e.lanes=s.lanes,hi(s,e,d);return li(s,e,o,a,d)}function mi(s,e,o){var a=e.pendingProps,c=a.children,d=s!==null?s.memoizedState:null;if(a.mode==="hidden"||a.mode==="unstable-defer-without-hiding")if((e.mode&4)===0)e.memoizedState={baseLanes:0},ni(e,o);else if((o&1073741824)!==0)e.memoizedState={baseLanes:0},ni(e,d!==null?d.baseLanes:o);else return s=d!==null?d.baseLanes|o:o,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:s},ni(e,s),null;else d!==null?(a=d.baseLanes|o,e.memoizedState=null):a=o,ni(e,a);return fi(s,e,c,o),e.child}function oi(s,e){var o=e.ref;(s===null&&o!==null||s!==null&&s.ref!==o)&&(e.flags|=128)}function li(s,e,o,a,c){var d=Ff(o)?Df:M.current;return d=Ef(e,d),tg(e,c),o=Ch(s,e,o,a,d,c),s!==null&&!ug?(e.updateQueue=s.updateQueue,e.flags&=-517,s.lanes&=~c,hi(s,e,c)):(e.flags|=1,fi(s,e,o,c),e.child)}function pi(s,e,o,a,c){if(Ff(o)){var d=!0;Jf(e)}else d=!1;if(tg(e,c),e.stateNode===null)s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2),Mg(e,o,a),Og(e,o,a,c),a=!0;else if(s===null){var _=e.stateNode,b=e.memoizedProps;_.props=b;var k=_.context,j=o.contextType;typeof j=="object"&&j!==null?j=vg(j):(j=Ff(o)?Df:M.current,j=Ef(e,j));var et=o.getDerivedStateFromProps,nt=typeof et=="function"||typeof _.getSnapshotBeforeUpdate=="function";nt||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(b!==a||k!==j)&&Ng(e,_,a,j),wg=!1;var tt=e.memoizedState;_.state=tt,Cg(e,a,_,c),k=e.memoizedState,b!==a||tt!==k||N.current||wg?(typeof et=="function"&&(Gg(e,o,et,a),k=e.memoizedState),(b=wg||Lg(e,o,b,a,tt,k,j))?(nt||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(e.flags|=4)):(typeof _.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=a,e.memoizedState=k),_.props=a,_.state=k,_.context=j,a=b):(typeof _.componentDidMount=="function"&&(e.flags|=4),a=!1)}else{_=e.stateNode,yg(s,e),b=e.memoizedProps,j=e.type===e.elementType?b:lg(e.type,b),_.props=j,nt=e.pendingProps,tt=_.context,k=o.contextType,typeof k=="object"&&k!==null?k=vg(k):(k=Ff(o)?Df:M.current,k=Ef(e,k));var rt=o.getDerivedStateFromProps;(et=typeof rt=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(b!==nt||tt!==k)&&Ng(e,_,a,k),wg=!1,tt=e.memoizedState,_.state=tt,Cg(e,a,_,c);var at=e.memoizedState;b!==nt||tt!==at||N.current||wg?(typeof rt=="function"&&(Gg(e,o,rt,a),at=e.memoizedState),(j=wg||Lg(e,o,j,a,tt,at,k))?(et||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(a,at,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(a,at,k)),typeof _.componentDidUpdate=="function"&&(e.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof _.componentDidUpdate!="function"||b===s.memoizedProps&&tt===s.memoizedState||(e.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||b===s.memoizedProps&&tt===s.memoizedState||(e.flags|=256),e.memoizedProps=a,e.memoizedState=at),_.props=a,_.state=at,_.context=k,a=j):(typeof _.componentDidUpdate!="function"||b===s.memoizedProps&&tt===s.memoizedState||(e.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||b===s.memoizedProps&&tt===s.memoizedState||(e.flags|=256),a=!1)}return qi(s,e,o,a,d,c)}function qi(s,e,o,a,c,d){oi(s,e);var _=(e.flags&64)!==0;if(!a&&!_)return c&&Kf(e,o,!1),hi(s,e,d);a=e.stateNode,ei.current=e;var b=_&&typeof o.getDerivedStateFromError!="function"?null:a.render();return e.flags|=1,s!==null&&_?(e.child=Yg(e,s.child,null,d),e.child=Yg(e,null,b,d)):fi(s,e,b,d),e.memoizedState=a.state,c&&Kf(e,o,!0),e.child}function ri(s){var e=s.stateNode;e.pendingContext?Hf(s,e.pendingContext,e.pendingContext!==e.context):e.context&&Hf(s,e.context,!1),eh(s,e.containerInfo)}var si={dehydrated:null,retryLane:0};function ti(s,e,o){var a=e.pendingProps,c=P.current,d=!1,_;return(_=(e.flags&64)!==0)||(_=s!==null&&s.memoizedState===null?!1:(c&2)!==0),_?(d=!0,e.flags&=-65):s!==null&&s.memoizedState===null||a.fallback===void 0||a.unstable_avoidThisFallback===!0||(c|=1),I(P,c&1),s===null?(a.fallback!==void 0&&ph(e),s=a.children,c=a.fallback,d?(s=ui(e,s,c,o),e.child.memoizedState={baseLanes:o},e.memoizedState=si,s):typeof a.unstable_expectedLoadTime=="number"?(s=ui(e,s,c,o),e.child.memoizedState={baseLanes:o},e.memoizedState=si,e.lanes=33554432,s):(o=vi({mode:"visible",children:s},e.mode,o,null),o.return=e,e.child=o)):s.memoizedState!==null?d?(a=wi(s,e,a.children,a.fallback,o),d=e.child,c=s.child.memoizedState,d.memoizedState=c===null?{baseLanes:o}:{baseLanes:c.baseLanes|o},d.childLanes=s.childLanes&~o,e.memoizedState=si,a):(o=xi(s,e,a.children,o),e.memoizedState=null,o):d?(a=wi(s,e,a.children,a.fallback,o),d=e.child,c=s.child.memoizedState,d.memoizedState=c===null?{baseLanes:o}:{baseLanes:c.baseLanes|o},d.childLanes=s.childLanes&~o,e.memoizedState=si,a):(o=xi(s,e,a.children,o),e.memoizedState=null,o)}function ui(s,e,o,a){var c=s.mode,d=s.child;return e={mode:"hidden",children:e},(c&2)===0&&d!==null?(d.childLanes=0,d.pendingProps=e):d=vi(e,c,0,null),o=Xg(o,c,a,null),d.return=s,o.return=s,d.sibling=o,s.child=d,o}function xi(s,e,o,a){var c=s.child;return s=c.sibling,o=Tg(c,{mode:"visible",children:o}),(e.mode&2)===0&&(o.lanes=a),o.return=e,o.sibling=null,s!==null&&(s.nextEffect=null,s.flags=8,e.firstEffect=e.lastEffect=s),e.child=o}function wi(s,e,o,a,c){var d=e.mode,_=s.child;s=_.sibling;var b={mode:"hidden",children:o};return(d&2)===0&&e.child!==_?(o=e.child,o.childLanes=0,o.pendingProps=b,_=o.lastEffect,_!==null?(e.firstEffect=o.firstEffect,e.lastEffect=_,_.nextEffect=null):e.firstEffect=e.lastEffect=null):o=Tg(_,b),s!==null?a=Tg(s,a):(a=Xg(a,d,c,null),a.flags|=2),a.return=e,o.return=e,o.sibling=a,e.child=o,a}function yi(s,e){s.lanes|=e;var o=s.alternate;o!==null&&(o.lanes|=e),sg(s.return,e)}function zi(s,e,o,a,c,d){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:a,tail:o,tailMode:c,lastEffect:d}:(_.isBackwards=e,_.rendering=null,_.renderingStartTime=0,_.last=a,_.tail=o,_.tailMode=c,_.lastEffect=d)}function Ai(s,e,o){var a=e.pendingProps,c=a.revealOrder,d=a.tail;if(fi(s,e,a.children,o),a=P.current,(a&2)!==0)a=a&1|2,e.flags|=64;else{if(s!==null&&(s.flags&64)!==0)e:for(s=e.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&yi(s,o);else if(s.tag===19)yi(s,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}a&=1}if(I(P,a),(e.mode&2)===0)e.memoizedState=null;else switch(c){case"forwards":for(o=e.child,c=null;o!==null;)s=o.alternate,s!==null&&ih(s)===null&&(c=o),o=o.sibling;o=c,o===null?(c=e.child,e.child=null):(c=o.sibling,o.sibling=null),zi(e,!1,c,o,d,e.lastEffect);break;case"backwards":for(o=null,c=e.child,e.child=null;c!==null;){if(s=c.alternate,s!==null&&ih(s)===null){e.child=c;break}s=c.sibling,c.sibling=o,o=c,c=s}zi(e,!0,o,null,d,e.lastEffect);break;case"together":zi(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function hi(s,e,o){if(s!==null&&(e.dependencies=s.dependencies),Dg|=e.lanes,(o&e.childLanes)!==0){if(s!==null&&e.child!==s.child)throw Error(y(153));if(e.child!==null){for(s=e.child,o=Tg(s,s.pendingProps),e.child=o,o.return=e;s.sibling!==null;)s=s.sibling,o=o.sibling=Tg(s,s.pendingProps),o.return=e;o.sibling=null}return e.child}return null}var Bi,Ci,Di,Ei;Bi=function(s,e){for(var o=e.child;o!==null;){if(o.tag===5||o.tag===6)s.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break;for(;o.sibling===null;){if(o.return===null||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Ci=function(){};Di=function(s,e,o,a){var c=s.memoizedProps;if(c!==a){s=e.stateNode,dh(ah.current);var d=null;switch(o){case"input":c=Ya(s,c),a=Ya(s,a),d=[];break;case"option":c=eb(s,c),a=eb(s,a),d=[];break;case"select":c=m$1({},c,{value:void 0}),a=m$1({},a,{value:void 0}),d=[];break;case"textarea":c=gb(s,c),a=gb(s,a),d=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(s.onclick=jf)}vb(o,a);var _;o=null;for(j in c)if(!a.hasOwnProperty(j)&&c.hasOwnProperty(j)&&c[j]!=null)if(j==="style"){var b=c[j];for(_ in b)b.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(ca.hasOwnProperty(j)?d||(d=[]):(d=d||[]).push(j,null));for(j in a){var k=a[j];if(b=c!=null?c[j]:void 0,a.hasOwnProperty(j)&&k!==b&&(k!=null||b!=null))if(j==="style")if(b){for(_ in b)!b.hasOwnProperty(_)||k&&k.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in k)k.hasOwnProperty(_)&&b[_]!==k[_]&&(o||(o={}),o[_]=k[_])}else o||(d||(d=[]),d.push(j,o)),o=k;else j==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,b=b?b.__html:void 0,k!=null&&b!==k&&(d=d||[]).push(j,k)):j==="children"?typeof k!="string"&&typeof k!="number"||(d=d||[]).push(j,""+k):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(ca.hasOwnProperty(j)?(k!=null&&j==="onScroll"&&G("scroll",s),d||b===k||(d=[])):typeof k=="object"&&k!==null&&k.$$typeof===Ga?k.toString():(d=d||[]).push(j,k))}o&&(d=d||[]).push("style",o);var j=d;(e.updateQueue=j)&&(e.flags|=4)}};Ei=function(s,e,o,a){o!==a&&(e.flags|=4)};function Fi(s,e){if(!lh)switch(s.tailMode){case"hidden":e=s.tail;for(var o=null;e!==null;)e.alternate!==null&&(o=e),e=e.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?e||s.tail===null?s.tail=null:s.tail.sibling=null:a.sibling=null}}function Gi(s,e,o){var a=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(e.type)&&Gf(),null;case 3:return fh(),H(N),H(M),uh(),a=e.stateNode,a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(rh(e)?e.flags|=4:a.hydrate||(e.flags|=256)),Ci(e),null;case 5:hh(e);var c=dh(ch.current);if(o=e.type,s!==null&&e.stateNode!=null)Di(s,e,o,a,c),s.ref!==e.ref&&(e.flags|=128);else{if(!a){if(e.stateNode===null)throw Error(y(166));return null}if(s=dh(ah.current),rh(e)){a=e.stateNode,o=e.type;var d=e.memoizedProps;switch(a[wf]=e,a[xf]=d,o){case"dialog":G("cancel",a),G("close",a);break;case"iframe":case"object":case"embed":G("load",a);break;case"video":case"audio":for(s=0;s<Xe.length;s++)G(Xe[s],a);break;case"source":G("error",a);break;case"img":case"image":case"link":G("error",a),G("load",a);break;case"details":G("toggle",a);break;case"input":Za(a,d),G("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!d.multiple},G("invalid",a);break;case"textarea":hb(a,d),G("invalid",a)}vb(o,d),s=null;for(var _ in d)d.hasOwnProperty(_)&&(c=d[_],_==="children"?typeof c=="string"?a.textContent!==c&&(s=["children",c]):typeof c=="number"&&a.textContent!==""+c&&(s=["children",""+c]):ca.hasOwnProperty(_)&&c!=null&&_==="onScroll"&&G("scroll",a));switch(o){case"input":Va(a),cb(a,d,!0);break;case"textarea":Va(a),jb(a);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(a.onclick=jf)}a=s,e.updateQueue=a,a!==null&&(e.flags|=4)}else{switch(_=c.nodeType===9?c:c.ownerDocument,s===kb.html&&(s=lb(o)),s===kb.html?o==="script"?(s=_.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof a.is=="string"?s=_.createElement(o,{is:a.is}):(s=_.createElement(o),o==="select"&&(_=s,a.multiple?_.multiple=!0:a.size&&(_.size=a.size))):s=_.createElementNS(s,o),s[wf]=e,s[xf]=a,Bi(s,e,!1,!1),e.stateNode=s,_=wb(o,a),o){case"dialog":G("cancel",s),G("close",s),c=a;break;case"iframe":case"object":case"embed":G("load",s),c=a;break;case"video":case"audio":for(c=0;c<Xe.length;c++)G(Xe[c],s);c=a;break;case"source":G("error",s),c=a;break;case"img":case"image":case"link":G("error",s),G("load",s),c=a;break;case"details":G("toggle",s),c=a;break;case"input":Za(s,a),c=Ya(s,a),G("invalid",s);break;case"option":c=eb(s,a);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},c=m$1({},a,{value:void 0}),G("invalid",s);break;case"textarea":hb(s,a),c=gb(s,a),G("invalid",s);break;default:c=a}vb(o,c);var b=c;for(d in b)if(b.hasOwnProperty(d)){var k=b[d];d==="style"?tb(s,k):d==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&ob(s,k)):d==="children"?typeof k=="string"?(o!=="textarea"||k!=="")&&pb(s,k):typeof k=="number"&&pb(s,""+k):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ca.hasOwnProperty(d)?k!=null&&d==="onScroll"&&G("scroll",s):k!=null&&qa(s,d,k,_))}switch(o){case"input":Va(s),cb(s,a,!1);break;case"textarea":Va(s),jb(s);break;case"option":a.value!=null&&s.setAttribute("value",""+Sa(a.value));break;case"select":s.multiple=!!a.multiple,d=a.value,d!=null?fb(s,!!a.multiple,d,!1):a.defaultValue!=null&&fb(s,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(s.onclick=jf)}mf(o,a)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(s&&e.stateNode!=null)Ei(s,e,s.memoizedProps,a);else{if(typeof a!="string"&&e.stateNode===null)throw Error(y(166));o=dh(ch.current),dh(ah.current),rh(e)?(a=e.stateNode,o=e.memoizedProps,a[wf]=e,a.nodeValue!==o&&(e.flags|=4)):(a=(o.nodeType===9?o:o.ownerDocument).createTextNode(a),a[wf]=e,e.stateNode=a)}return null;case 13:return H(P),a=e.memoizedState,(e.flags&64)!==0?(e.lanes=o,e):(a=a!==null,o=!1,s===null?e.memoizedProps.fallback!==void 0&&rh(e):o=s.memoizedState!==null,a&&!o&&(e.mode&2)!==0&&(s===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(P.current&1)!==0?V===0&&(V=3):((V===0||V===3)&&(V=4),U===null||(Dg&134217727)===0&&(Hi&134217727)===0||Ii(U,W))),(a||o)&&(e.flags|=4),null);case 4:return fh(),Ci(e),s===null&&cf(e.stateNode.containerInfo),null;case 10:return rg(e),null;case 17:return Ff(e.type)&&Gf(),null;case 19:if(H(P),a=e.memoizedState,a===null)return null;if(d=(e.flags&64)!==0,_=a.rendering,_===null)if(d)Fi(a,!1);else{if(V!==0||s!==null&&(s.flags&64)!==0)for(s=e.child;s!==null;){if(_=ih(s),_!==null){for(e.flags|=64,Fi(a,!1),d=_.updateQueue,d!==null&&(e.updateQueue=d,e.flags|=4),a.lastEffect===null&&(e.firstEffect=null),e.lastEffect=a.lastEffect,a=o,o=e.child;o!==null;)d=o,s=a,d.flags&=2,d.nextEffect=null,d.firstEffect=null,d.lastEffect=null,_=d.alternate,_===null?(d.childLanes=0,d.lanes=s,d.child=null,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=_.childLanes,d.lanes=_.lanes,d.child=_.child,d.memoizedProps=_.memoizedProps,d.memoizedState=_.memoizedState,d.updateQueue=_.updateQueue,d.type=_.type,s=_.dependencies,d.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o=o.sibling;return I(P,P.current&1|2),e.child}s=s.sibling}a.tail!==null&&O()>Ji&&(e.flags|=64,d=!0,Fi(a,!1),e.lanes=33554432)}else{if(!d)if(s=ih(_),s!==null){if(e.flags|=64,d=!0,o=s.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),Fi(a,!0),a.tail===null&&a.tailMode==="hidden"&&!_.alternate&&!lh)return e=e.lastEffect=a.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*O()-a.renderingStartTime>Ji&&o!==1073741824&&(e.flags|=64,d=!0,Fi(a,!1),e.lanes=33554432);a.isBackwards?(_.sibling=e.child,e.child=_):(o=a.last,o!==null?o.sibling=_:e.child=_,a.last=_)}return a.tail!==null?(o=a.tail,a.rendering=o,a.tail=o.sibling,a.lastEffect=e.lastEffect,a.renderingStartTime=O(),o.sibling=null,e=P.current,I(P,d?e&1|2:e&1),o):null;case 23:case 24:return Ki(),s!==null&&s.memoizedState!==null!=(e.memoizedState!==null)&&a.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(y(156,e.tag))}function Li(s){switch(s.tag){case 1:Ff(s.type)&&Gf();var e=s.flags;return e&4096?(s.flags=e&-4097|64,s):null;case 3:if(fh(),H(N),H(M),uh(),e=s.flags,(e&64)!==0)throw Error(y(285));return s.flags=e&-4097|64,s;case 5:return hh(s),null;case 13:return H(P),e=s.flags,e&4096?(s.flags=e&-4097|64,s):null;case 19:return H(P),null;case 4:return fh(),null;case 10:return rg(s),null;case 23:case 24:return Ki(),null;default:return null}}function Mi(s,e){try{var o="",a=e;do o+=Qa(a),a=a.return;while(a);var c=o}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:s,source:e,stack:c}}function Ni(s,e){try{console.error(e.value)}catch(o){setTimeout(function(){throw o})}}var Oi=typeof WeakMap=="function"?WeakMap:Map;function Pi(s,e,o){o=zg(-1,o),o.tag=3,o.payload={element:null};var a=e.value;return o.callback=function(){Qi||(Qi=!0,Ri=a),Ni(s,e)},o}function Si(s,e,o){o=zg(-1,o),o.tag=3;var a=s.type.getDerivedStateFromError;if(typeof a=="function"){var c=e.value;o.payload=function(){return Ni(s,e),a(c)}}var d=s.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(o.callback=function(){typeof a!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this),Ni(s,e));var _=e.stack;this.componentDidCatch(e.value,{componentStack:_!==null?_:""})}),o}var Ui=typeof WeakSet=="function"?WeakSet:Set;function Vi(s){var e=s.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(o){Wi(s,o)}else e.current=null}function Xi(s,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&s!==null){var o=s.memoizedProps,a=s.memoizedState;s=e.stateNode,e=s.getSnapshotBeforeUpdate(e.elementType===e.type?o:lg(e.type,o),a),s.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&qf(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y(163))}function Yi(s,e,o){switch(o.tag){case 0:case 11:case 15:case 22:if(e=o.updateQueue,e=e!==null?e.lastEffect:null,e!==null){s=e=e.next;do{if((s.tag&3)===3){var a=s.create;s.destroy=a()}s=s.next}while(s!==e)}if(e=o.updateQueue,e=e!==null?e.lastEffect:null,e!==null){s=e=e.next;do{var c=s;a=c.next,c=c.tag,(c&4)!==0&&(c&1)!==0&&(Zi(o,s),$i(o,s)),s=a}while(s!==e)}return;case 1:s=o.stateNode,o.flags&4&&(e===null?s.componentDidMount():(a=o.elementType===o.type?e.memoizedProps:lg(o.type,e.memoizedProps),s.componentDidUpdate(a,e.memoizedState,s.__reactInternalSnapshotBeforeUpdate))),e=o.updateQueue,e!==null&&Eg(o,e,s);return;case 3:if(e=o.updateQueue,e!==null){if(s=null,o.child!==null)switch(o.child.tag){case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}Eg(o,e,s)}return;case 5:s=o.stateNode,e===null&&o.flags&4&&mf(o.type,o.memoizedProps)&&s.focus();return;case 6:return;case 4:return;case 12:return;case 13:o.memoizedState===null&&(o=o.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&Cc(o))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y(163))}function aj(s,e){for(var o=s;;){if(o.tag===5){var a=o.stateNode;if(e)a=a.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{a=o.stateNode;var c=o.memoizedProps.style;c=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=sb("display",c)}}else if(o.tag===6)o.stateNode.nodeValue=e?"":o.memoizedProps;else if((o.tag!==23&&o.tag!==24||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}function bj(s,e){if(Mf&&typeof Mf.onCommitFiberUnmount=="function")try{Mf.onCommitFiberUnmount(Lf,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(s=e.updateQueue,s!==null&&(s=s.lastEffect,s!==null)){var o=s=s.next;do{var a=o,c=a.destroy;if(a=a.tag,c!==void 0)if((a&4)!==0)Zi(e,o);else{a=e;try{c()}catch(d){Wi(a,d)}}o=o.next}while(o!==s)}break;case 1:if(Vi(e),s=e.stateNode,typeof s.componentWillUnmount=="function")try{s.props=e.memoizedProps,s.state=e.memoizedState,s.componentWillUnmount()}catch(d){Wi(e,d)}break;case 5:Vi(e);break;case 4:cj(s,e)}}function dj(s){s.alternate=null,s.child=null,s.dependencies=null,s.firstEffect=null,s.lastEffect=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.return=null,s.updateQueue=null}function ej(s){return s.tag===5||s.tag===3||s.tag===4}function fj(s){e:{for(var e=s.return;e!==null;){if(ej(e))break e;e=e.return}throw Error(y(160))}var o=e;switch(e=o.stateNode,o.tag){case 5:var a=!1;break;case 3:e=e.containerInfo,a=!0;break;case 4:e=e.containerInfo,a=!0;break;default:throw Error(y(161))}o.flags&16&&(pb(e,""),o.flags&=-17);e:t:for(o=s;;){for(;o.sibling===null;){if(o.return===null||ej(o.return)){o=null;break e}o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2)){o=o.stateNode;break e}}a?gj(s,o,e):hj(s,o,e)}function gj(s,e,o){var a=s.tag,c=a===5||a===6;if(c)s=c?s.stateNode:s.stateNode.instance,e?o.nodeType===8?o.parentNode.insertBefore(s,e):o.insertBefore(s,e):(o.nodeType===8?(e=o.parentNode,e.insertBefore(s,o)):(e=o,e.appendChild(s)),o=o._reactRootContainer,o!=null||e.onclick!==null||(e.onclick=jf));else if(a!==4&&(s=s.child,s!==null))for(gj(s,e,o),s=s.sibling;s!==null;)gj(s,e,o),s=s.sibling}function hj(s,e,o){var a=s.tag,c=a===5||a===6;if(c)s=c?s.stateNode:s.stateNode.instance,e?o.insertBefore(s,e):o.appendChild(s);else if(a!==4&&(s=s.child,s!==null))for(hj(s,e,o),s=s.sibling;s!==null;)hj(s,e,o),s=s.sibling}function cj(s,e){for(var o=e,a=!1,c,d;;){if(!a){a=o.return;e:for(;;){if(a===null)throw Error(y(160));switch(c=a.stateNode,a.tag){case 5:d=!1;break e;case 3:c=c.containerInfo,d=!0;break e;case 4:c=c.containerInfo,d=!0;break e}a=a.return}a=!0}if(o.tag===5||o.tag===6){e:for(var _=s,b=o,k=b;;)if(bj(_,k),k.child!==null&&k.tag!==4)k.child.return=k,k=k.child;else{if(k===b)break e;for(;k.sibling===null;){if(k.return===null||k.return===b)break e;k=k.return}k.sibling.return=k.return,k=k.sibling}d?(_=c,b=o.stateNode,_.nodeType===8?_.parentNode.removeChild(b):_.removeChild(b)):c.removeChild(o.stateNode)}else if(o.tag===4){if(o.child!==null){c=o.stateNode.containerInfo,d=!0,o.child.return=o,o=o.child;continue}}else if(bj(s,o),o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break;for(;o.sibling===null;){if(o.return===null||o.return===e)return;o=o.return,o.tag===4&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function ij(s,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var o=e.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var a=o=o.next;do(a.tag&3)===3&&(s=a.destroy,a.destroy=void 0,s!==void 0&&s()),a=a.next;while(a!==o)}return;case 1:return;case 5:if(o=e.stateNode,o!=null){a=e.memoizedProps;var c=s!==null?s.memoizedProps:a;s=e.type;var d=e.updateQueue;if(e.updateQueue=null,d!==null){for(o[xf]=a,s==="input"&&a.type==="radio"&&a.name!=null&&$a(o,a),wb(s,c),e=wb(s,a),c=0;c<d.length;c+=2){var _=d[c],b=d[c+1];_==="style"?tb(o,b):_==="dangerouslySetInnerHTML"?ob(o,b):_==="children"?pb(o,b):qa(o,_,b,e)}switch(s){case"input":ab(o,a);break;case"textarea":ib(o,a);break;case"select":s=o._wrapperState.wasMultiple,o._wrapperState.wasMultiple=!!a.multiple,d=a.value,d!=null?fb(o,!!a.multiple,d,!1):s!==!!a.multiple&&(a.defaultValue!=null?fb(o,!!a.multiple,a.defaultValue,!0):fb(o,!!a.multiple,a.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(y(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:o=e.stateNode,o.hydrate&&(o.hydrate=!1,Cc(o.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(jj=O(),aj(e.child,!0)),kj(e);return;case 19:kj(e);return;case 17:return;case 23:case 24:aj(e,e.memoizedState!==null);return}throw Error(y(163))}function kj(s){var e=s.updateQueue;if(e!==null){s.updateQueue=null;var o=s.stateNode;o===null&&(o=s.stateNode=new Ui),e.forEach(function(a){var c=lj.bind(null,s,a);o.has(a)||(o.add(a),a.then(c,c))})}}function mj(s,e){return s!==null&&(s=s.memoizedState,s===null||s.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X=0,U=null,Y=null,W=0,qj=0,rj=Bf(0),V=0,sj=null,tj=0,Dg=0,Hi=0,uj=0,vj=null,jj=0,Ji=1/0;function wj(){Ji=O()+500}var Z=null,Qi=!1,Ri=null,Ti=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return(X&48)!==0?O():Fj!==-1?Fj:Fj=O()}function Ig(s){if(s=s.mode,(s&2)===0)return 1;if((s&4)===0)return eg()===99?1:2;if(Gj===0&&(Gj=tj),kg.transition!==0){Hj!==0&&(Hj=vj!==null?vj.pendingLanes:0),s=Gj;var e=4186112&~Hj;return e&=-e,e===0&&(s=4186112&~s,e=s&-s,e===0&&(e=8192)),e}return s=eg(),(X&4)!==0&&s===98?s=Xc(12,Gj):(s=Sc(s),s=Xc(s,Gj)),s}function Jg(s,e,o){if(50<Dj)throw Dj=0,Ej=null,Error(y(185));if(s=Kj(s,e),s===null)return null;$c(s,e,o),s===U&&(Hi|=e,V===4&&Ii(s,W));var a=eg();e===1?(X&8)!==0&&(X&48)===0?Lj(s):(Mj(s,o),X===0&&(wj(),ig())):((X&4)===0||a!==98&&a!==99||(Cj===null?Cj=new Set([s]):Cj.add(s)),Mj(s,o)),vj=s}function Kj(s,e){s.lanes|=e;var o=s.alternate;for(o!==null&&(o.lanes|=e),o=s,s=s.return;s!==null;)s.childLanes|=e,o=s.alternate,o!==null&&(o.childLanes|=e),o=s,s=s.return;return o.tag===3?o.stateNode:null}function Mj(s,e){for(var o=s.callbackNode,a=s.suspendedLanes,c=s.pingedLanes,d=s.expirationTimes,_=s.pendingLanes;0<_;){var b=31-Vc(_),k=1<<b,j=d[b];if(j===-1){if((k&a)===0||(k&c)!==0){j=e,Rc(k);var et=F;d[b]=10<=et?j+250:6<=et?j+5e3:-1}}else j<=e&&(s.expiredLanes|=k);_&=~k}if(a=Uc(s,s===U?W:0),e=F,a===0)o!==null&&(o!==Zf&&Pf(o),s.callbackNode=null,s.callbackPriority=0);else{if(o!==null){if(s.callbackPriority===e)return;o!==Zf&&Pf(o)}e===15?(o=Lj.bind(null,s),ag===null?(ag=[o],bg=Of(Uf,jg)):ag.push(o),o=Zf):e===14?o=hg(99,Lj.bind(null,s)):(o=Tc(e),o=hg(o,Nj.bind(null,s))),s.callbackPriority=e,s.callbackNode=o}}function Nj(s){if(Fj=-1,Hj=Gj=0,(X&48)!==0)throw Error(y(327));var e=s.callbackNode;if(Oj()&&s.callbackNode!==e)return null;var o=Uc(s,s===U?W:0);if(o===0)return null;var a=o,c=X;X|=16;var d=Pj();(U!==s||W!==a)&&(wj(),Qj(s,a));do try{Rj();break}catch(b){Sj(s,b)}while(1);if(qg(),oj.current=d,X=c,Y!==null?a=0:(U=null,W=0,a=V),(tj&Hi)!==0)Qj(s,0);else if(a!==0){if(a===2&&(X|=64,s.hydrate&&(s.hydrate=!1,qf(s.containerInfo)),o=Wc(s),o!==0&&(a=Tj(s,o))),a===1)throw e=sj,Qj(s,0),Ii(s,o),Mj(s,O()),e;switch(s.finishedWork=s.current.alternate,s.finishedLanes=o,a){case 0:case 1:throw Error(y(345));case 2:Uj(s);break;case 3:if(Ii(s,o),(o&62914560)===o&&(a=jj+500-O(),10<a)){if(Uc(s,0)!==0)break;if(c=s.suspendedLanes,(c&o)!==o){Hg(),s.pingedLanes|=s.suspendedLanes&c;break}s.timeoutHandle=of(Uj.bind(null,s),a);break}Uj(s);break;case 4:if(Ii(s,o),(o&4186112)===o)break;for(a=s.eventTimes,c=-1;0<o;){var _=31-Vc(o);d=1<<_,_=a[_],_>c&&(c=_),o&=~d}if(o=c,o=O()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*nj(o/1960))-o,10<o){s.timeoutHandle=of(Uj.bind(null,s),o);break}Uj(s);break;case 5:Uj(s);break;default:throw Error(y(329))}}return Mj(s,O()),s.callbackNode===e?Nj.bind(null,s):null}function Ii(s,e){for(e&=~uj,e&=~Hi,s.suspendedLanes|=e,s.pingedLanes&=~e,s=s.expirationTimes;0<e;){var o=31-Vc(e),a=1<<o;s[o]=-1,e&=~a}}function Lj(s){if((X&48)!==0)throw Error(y(327));if(Oj(),s===U&&(s.expiredLanes&W)!==0){var e=W,o=Tj(s,e);(tj&Hi)!==0&&(e=Uc(s,e),o=Tj(s,e))}else e=Uc(s,0),o=Tj(s,e);if(s.tag!==0&&o===2&&(X|=64,s.hydrate&&(s.hydrate=!1,qf(s.containerInfo)),e=Wc(s),e!==0&&(o=Tj(s,e))),o===1)throw o=sj,Qj(s,0),Ii(s,e),Mj(s,O()),o;return s.finishedWork=s.current.alternate,s.finishedLanes=e,Uj(s),Mj(s,O()),null}function Vj(){if(Cj!==null){var s=Cj;Cj=null,s.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,Mj(e,O())})}ig()}function Wj(s,e){var o=X;X|=1;try{return s(e)}finally{X=o,X===0&&(wj(),ig())}}function Xj(s,e){var o=X;X&=-2,X|=8;try{return s(e)}finally{X=o,X===0&&(wj(),ig())}}function ni(s,e){I(rj,qj),qj|=e,tj|=e}function Ki(){qj=rj.current,H(rj)}function Qj(s,e){s.finishedWork=null,s.finishedLanes=0;var o=s.timeoutHandle;if(o!==-1&&(s.timeoutHandle=-1,pf(o)),Y!==null)for(o=Y.return;o!==null;){var a=o;switch(a.tag){case 1:a=a.type.childContextTypes,a!=null&&Gf();break;case 3:fh(),H(N),H(M),uh();break;case 5:hh(a);break;case 4:fh();break;case 13:H(P);break;case 19:H(P);break;case 10:rg(a);break;case 23:case 24:Ki()}o=o.return}U=s,Y=Tg(s.current,null),W=qj=tj=e,V=0,sj=null,uj=Hi=Dg=0}function Sj(s,e){do{var o=Y;try{if(qg(),vh.current=Gh,yh){for(var a=R.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}yh=!1}if(xh=0,T=S=R=null,zh=!1,pj.current=null,o===null||o.return===null){V=1,sj=e,Y=null;break}e:{var d=s,_=o.return,b=o,k=e;if(e=W,b.flags|=2048,b.firstEffect=b.lastEffect=null,k!==null&&typeof k=="object"&&typeof k.then=="function"){var j=k;if((b.mode&2)===0){var et=b.alternate;et?(b.updateQueue=et.updateQueue,b.memoizedState=et.memoizedState,b.lanes=et.lanes):(b.updateQueue=null,b.memoizedState=null)}var nt=(P.current&1)!==0,tt=_;do{var rt;if(rt=tt.tag===13){var at=tt.memoizedState;if(at!==null)rt=at.dehydrated!==null;else{var lt=tt.memoizedProps;rt=lt.fallback===void 0?!1:lt.unstable_avoidThisFallback!==!0?!0:!nt}}if(rt){var ut=tt.updateQueue;if(ut===null){var st=new Set;st.add(j),tt.updateQueue=st}else ut.add(j);if((tt.mode&2)===0){if(tt.flags|=64,b.flags|=16384,b.flags&=-2981,b.tag===1)if(b.alternate===null)b.tag=17;else{var it=zg(-1,1);it.tag=2,Ag(b,it)}b.lanes|=1;break e}k=void 0,b=e;var ft=d.pingCache;if(ft===null?(ft=d.pingCache=new Oi,k=new Set,ft.set(j,k)):(k=ft.get(j),k===void 0&&(k=new Set,ft.set(j,k))),!k.has(b)){k.add(b);var ct=Yj.bind(null,d,j,b);j.then(ct,ct)}tt.flags|=4096,tt.lanes=e;break e}tt=tt.return}while(tt!==null);k=Error((Ra(b.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}V!==5&&(V=2),k=Mi(k,b),tt=_;do{switch(tt.tag){case 3:d=k,tt.flags|=4096,e&=-e,tt.lanes|=e;var dt=Pi(tt,d,e);Bg(tt,dt);break e;case 1:d=k;var mt=tt.type,gt=tt.stateNode;if((tt.flags&64)===0&&(typeof mt.getDerivedStateFromError=="function"||gt!==null&&typeof gt.componentDidCatch=="function"&&(Ti===null||!Ti.has(gt)))){tt.flags|=4096,e&=-e,tt.lanes|=e;var yt=Si(tt,d,e);Bg(tt,yt);break e}}tt=tt.return}while(tt!==null)}Zj(o)}catch(St){e=St,Y===o&&o!==null&&(Y=o=o.return);continue}break}while(1)}function Pj(){var s=oj.current;return oj.current=Gh,s===null?Gh:s}function Tj(s,e){var o=X;X|=16;var a=Pj();U===s&&W===e||Qj(s,e);do try{ak();break}catch(c){Sj(s,c)}while(1);if(qg(),X=o,oj.current=a,Y!==null)throw Error(y(261));return U=null,W=0,V}function ak(){for(;Y!==null;)bk(Y)}function Rj(){for(;Y!==null&&!Qf();)bk(Y)}function bk(s){var e=ck(s.alternate,s,qj);s.memoizedProps=s.pendingProps,e===null?Zj(s):Y=e,pj.current=null}function Zj(s){var e=s;do{var o=e.alternate;if(s=e.return,(e.flags&2048)===0){if(o=Gi(o,e,qj),o!==null){Y=o;return}if(o=e,o.tag!==24&&o.tag!==23||o.memoizedState===null||(qj&1073741824)!==0||(o.mode&4)===0){for(var a=0,c=o.child;c!==null;)a|=c.lanes|c.childLanes,c=c.sibling;o.childLanes=a}s!==null&&(s.flags&2048)===0&&(s.firstEffect===null&&(s.firstEffect=e.firstEffect),e.lastEffect!==null&&(s.lastEffect!==null&&(s.lastEffect.nextEffect=e.firstEffect),s.lastEffect=e.lastEffect),1<e.flags&&(s.lastEffect!==null?s.lastEffect.nextEffect=e:s.firstEffect=e,s.lastEffect=e))}else{if(o=Li(e),o!==null){o.flags&=2047,Y=o;return}s!==null&&(s.firstEffect=s.lastEffect=null,s.flags|=2048)}if(e=e.sibling,e!==null){Y=e;return}Y=e=s}while(e!==null);V===0&&(V=5)}function Uj(s){var e=eg();return gg(99,dk.bind(null,s,e)),null}function dk(s,e){do Oj();while(yj!==null);if((X&48)!==0)throw Error(y(327));var o=s.finishedWork;if(o===null)return null;if(s.finishedWork=null,s.finishedLanes=0,o===s.current)throw Error(y(177));s.callbackNode=null;var a=o.lanes|o.childLanes,c=a,d=s.pendingLanes&~c;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=c,s.mutableReadLanes&=c,s.entangledLanes&=c,c=s.entanglements;for(var _=s.eventTimes,b=s.expirationTimes;0<d;){var k=31-Vc(d),j=1<<k;c[k]=0,_[k]=-1,b[k]=-1,d&=~j}if(Cj!==null&&(a&24)===0&&Cj.has(s)&&Cj.delete(s),s===U&&(Y=U=null,W=0),1<o.flags?o.lastEffect!==null?(o.lastEffect.nextEffect=o,a=o.firstEffect):a=o:a=o.firstEffect,a!==null){if(c=X,X|=32,pj.current=null,kf=fd,_=Ne(),Oe(_)){if("selectionStart"in _)b={start:_.selectionStart,end:_.selectionEnd};else e:if(b=(b=_.ownerDocument)&&b.defaultView||window,(j=b.getSelection&&b.getSelection())&&j.rangeCount!==0){b=j.anchorNode,d=j.anchorOffset,k=j.focusNode,j=j.focusOffset;try{b.nodeType,k.nodeType}catch{b=null;break e}var et=0,nt=-1,tt=-1,rt=0,at=0,lt=_,ut=null;t:for(;;){for(var st;lt!==b||d!==0&&lt.nodeType!==3||(nt=et+d),lt!==k||j!==0&&lt.nodeType!==3||(tt=et+j),lt.nodeType===3&&(et+=lt.nodeValue.length),(st=lt.firstChild)!==null;)ut=lt,lt=st;for(;;){if(lt===_)break t;if(ut===b&&++rt===d&&(nt=et),ut===k&&++at===j&&(tt=et),(st=lt.nextSibling)!==null)break;lt=ut,ut=lt.parentNode}lt=st}b=nt===-1||tt===-1?null:{start:nt,end:tt}}else b=null;b=b||{start:0,end:0}}else b=null;lf={focusedElem:_,selectionRange:b},fd=!1,Ij=null,Jj=!1,Z=a;do try{ek()}catch(St){if(Z===null)throw Error(y(330));Wi(Z,St),Z=Z.nextEffect}while(Z!==null);Ij=null,Z=a;do try{for(_=s;Z!==null;){var it=Z.flags;if(it&16&&pb(Z.stateNode,""),it&128){var ft=Z.alternate;if(ft!==null){var ct=ft.ref;ct!==null&&(typeof ct=="function"?ct(null):ct.current=null)}}switch(it&1038){case 2:fj(Z),Z.flags&=-3;break;case 6:fj(Z),Z.flags&=-3,ij(Z.alternate,Z);break;case 1024:Z.flags&=-1025;break;case 1028:Z.flags&=-1025,ij(Z.alternate,Z);break;case 4:ij(Z.alternate,Z);break;case 8:b=Z,cj(_,b);var dt=b.alternate;dj(b),dt!==null&&dj(dt)}Z=Z.nextEffect}}catch(St){if(Z===null)throw Error(y(330));Wi(Z,St),Z=Z.nextEffect}while(Z!==null);if(ct=lf,ft=Ne(),it=ct.focusedElem,_=ct.selectionRange,ft!==it&&it&&it.ownerDocument&&Me(it.ownerDocument.documentElement,it)){for(_!==null&&Oe(it)&&(ft=_.start,ct=_.end,ct===void 0&&(ct=ft),"selectionStart"in it?(it.selectionStart=ft,it.selectionEnd=Math.min(ct,it.value.length)):(ct=(ft=it.ownerDocument||document)&&ft.defaultView||window,ct.getSelection&&(ct=ct.getSelection(),b=it.textContent.length,dt=Math.min(_.start,b),_=_.end===void 0?dt:Math.min(_.end,b),!ct.extend&&dt>_&&(b=_,_=dt,dt=b),b=Le(it,dt),d=Le(it,_),b&&d&&(ct.rangeCount!==1||ct.anchorNode!==b.node||ct.anchorOffset!==b.offset||ct.focusNode!==d.node||ct.focusOffset!==d.offset)&&(ft=ft.createRange(),ft.setStart(b.node,b.offset),ct.removeAllRanges(),dt>_?(ct.addRange(ft),ct.extend(d.node,d.offset)):(ft.setEnd(d.node,d.offset),ct.addRange(ft)))))),ft=[],ct=it;ct=ct.parentNode;)ct.nodeType===1&&ft.push({element:ct,left:ct.scrollLeft,top:ct.scrollTop});for(typeof it.focus=="function"&&it.focus(),it=0;it<ft.length;it++)ct=ft[it],ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}fd=!!kf,lf=kf=null,s.current=o,Z=a;do try{for(it=s;Z!==null;){var mt=Z.flags;if(mt&36&&Yi(it,Z.alternate,Z),mt&128){ft=void 0;var gt=Z.ref;if(gt!==null){var yt=Z.stateNode;switch(Z.tag){case 5:ft=yt;break;default:ft=yt}typeof gt=="function"?gt(ft):gt.current=ft}}Z=Z.nextEffect}}catch(St){if(Z===null)throw Error(y(330));Wi(Z,St),Z=Z.nextEffect}while(Z!==null);Z=null,$f(),X=c}else s.current=o;if(xj)xj=!1,yj=s,zj=e;else for(Z=a;Z!==null;)e=Z.nextEffect,Z.nextEffect=null,Z.flags&8&&(mt=Z,mt.sibling=null,mt.stateNode=null),Z=e;if(a=s.pendingLanes,a===0&&(Ti=null),a===1?s===Ej?Dj++:(Dj=0,Ej=s):Dj=0,o=o.stateNode,Mf&&typeof Mf.onCommitFiberRoot=="function")try{Mf.onCommitFiberRoot(Lf,o,void 0,(o.current.flags&64)===64)}catch{}if(Mj(s,O()),Qi)throw Qi=!1,s=Ri,Ri=null,s;return(X&8)!==0||ig(),null}function ek(){for(;Z!==null;){var s=Z.alternate;Jj||Ij===null||((Z.flags&8)!==0?dc(Z,Ij)&&(Jj=!0):Z.tag===13&&mj(s,Z)&&dc(Z,Ij)&&(Jj=!0));var e=Z.flags;(e&256)!==0&&Xi(s,Z),(e&512)===0||xj||(xj=!0,hg(97,function(){return Oj(),null})),Z=Z.nextEffect}}function Oj(){if(zj!==90){var s=97<zj?97:zj;return zj=90,gg(s,fk)}return!1}function $i(s,e){Aj.push(e,s),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function Zi(s,e){Bj.push(e,s),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function fk(){if(yj===null)return!1;var s=yj;if(yj=null,(X&48)!==0)throw Error(y(331));var e=X;X|=32;var o=Bj;Bj=[];for(var a=0;a<o.length;a+=2){var c=o[a],d=o[a+1],_=c.destroy;if(c.destroy=void 0,typeof _=="function")try{_()}catch(k){if(d===null)throw Error(y(330));Wi(d,k)}}for(o=Aj,Aj=[],a=0;a<o.length;a+=2){c=o[a],d=o[a+1];try{var b=c.create;c.destroy=b()}catch(k){if(d===null)throw Error(y(330));Wi(d,k)}}for(b=s.current.firstEffect;b!==null;)s=b.nextEffect,b.nextEffect=null,b.flags&8&&(b.sibling=null,b.stateNode=null),b=s;return X=e,ig(),!0}function gk(s,e,o){e=Mi(o,e),e=Pi(s,e,1),Ag(s,e),e=Hg(),s=Kj(s,1),s!==null&&($c(s,1,e),Mj(s,e))}function Wi(s,e){if(s.tag===3)gk(s,s,e);else for(var o=s.return;o!==null;){if(o.tag===3){gk(o,s,e);break}else if(o.tag===1){var a=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ti===null||!Ti.has(a))){s=Mi(e,s);var c=Si(o,s,1);if(Ag(o,c),c=Hg(),o=Kj(o,1),o!==null)$c(o,1,c),Mj(o,c);else if(typeof a.componentDidCatch=="function"&&(Ti===null||!Ti.has(a)))try{a.componentDidCatch(e,s)}catch{}break}}o=o.return}}function Yj(s,e,o){var a=s.pingCache;a!==null&&a.delete(e),e=Hg(),s.pingedLanes|=s.suspendedLanes&o,U===s&&(W&o)===o&&(V===4||V===3&&(W&62914560)===W&&500>O()-jj?Qj(s,0):uj|=o),Mj(s,e)}function lj(s,e){var o=s.stateNode;o!==null&&o.delete(e),e=0,e===0&&(e=s.mode,(e&2)===0?e=1:(e&4)===0?e=eg()===99?1:2:(Gj===0&&(Gj=tj),e=Yc(62914560&~Gj),e===0&&(e=4194304))),o=Hg(),s=Kj(s,e),s!==null&&($c(s,e,o),Mj(s,o))}var ck;ck=function(s,e,o){var a=e.lanes;if(s!==null)if(s.memoizedProps!==e.pendingProps||N.current)ug=!0;else if((o&a)!==0)ug=(s.flags&16384)!==0;else{switch(ug=!1,e.tag){case 3:ri(e),sh();break;case 5:gh(e);break;case 1:Ff(e.type)&&Jf(e);break;case 4:eh(e,e.stateNode.containerInfo);break;case 10:a=e.memoizedProps.value;var c=e.type._context;I(mg,c._currentValue),c._currentValue=a;break;case 13:if(e.memoizedState!==null)return(o&e.child.childLanes)!==0?ti(s,e,o):(I(P,P.current&1),e=hi(s,e,o),e!==null?e.sibling:null);I(P,P.current&1);break;case 19:if(a=(o&e.childLanes)!==0,(s.flags&64)!==0){if(a)return Ai(s,e,o);e.flags|=64}if(c=e.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),I(P,P.current),a)break;return null;case 23:case 24:return e.lanes=0,mi(s,e,o)}return hi(s,e,o)}else ug=!1;switch(e.lanes=0,e.tag){case 2:if(a=e.type,s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2),s=e.pendingProps,c=Ef(e,M.current),tg(e,o),c=Ch(null,e,a,s,c,o),e.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ff(a)){var d=!0;Jf(e)}else d=!1;e.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,xg(e);var _=a.getDerivedStateFromProps;typeof _=="function"&&Gg(e,a,_,s),c.updater=Kg,e.stateNode=c,c._reactInternals=e,Og(e,a,s,o),e=qi(null,e,a,!0,d,o)}else e.tag=0,fi(null,e,c,o),e=e.child;return e;case 16:c=e.elementType;e:{switch(s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2),s=e.pendingProps,d=c._init,c=d(c._payload),e.type=c,d=e.tag=hk(c),s=lg(c,s),d){case 0:e=li(null,e,c,s,o);break e;case 1:e=pi(null,e,c,s,o);break e;case 11:e=gi(null,e,c,s,o);break e;case 14:e=ii(null,e,c,lg(c.type,s),a,o);break e}throw Error(y(306,c,""))}return e;case 0:return a=e.type,c=e.pendingProps,c=e.elementType===a?c:lg(a,c),li(s,e,a,c,o);case 1:return a=e.type,c=e.pendingProps,c=e.elementType===a?c:lg(a,c),pi(s,e,a,c,o);case 3:if(ri(e),a=e.updateQueue,s===null||a===null)throw Error(y(282));if(a=e.pendingProps,c=e.memoizedState,c=c!==null?c.element:null,yg(s,e),Cg(e,a,null,o),a=e.memoizedState.element,a===c)sh(),e=hi(s,e,o);else{if(c=e.stateNode,(d=c.hydrate)&&(kh=rf(e.stateNode.containerInfo.firstChild),jh=e,d=lh=!0),d){if(s=c.mutableSourceEagerHydrationData,s!=null)for(c=0;c<s.length;c+=2)d=s[c],d._workInProgressVersionPrimary=s[c+1],th.push(d);for(o=Zg(e,null,a,o),e.child=o;o;)o.flags=o.flags&-3|1024,o=o.sibling}else fi(s,e,a,o),sh();e=e.child}return e;case 5:return gh(e),s===null&&ph(e),a=e.type,c=e.pendingProps,d=s!==null?s.memoizedProps:null,_=c.children,nf(a,c)?_=null:d!==null&&nf(a,d)&&(e.flags|=16),oi(s,e),fi(s,e,_,o),e.child;case 6:return s===null&&ph(e),null;case 13:return ti(s,e,o);case 4:return eh(e,e.stateNode.containerInfo),a=e.pendingProps,s===null?e.child=Yg(e,null,a,o):fi(s,e,a,o),e.child;case 11:return a=e.type,c=e.pendingProps,c=e.elementType===a?c:lg(a,c),gi(s,e,a,c,o);case 7:return fi(s,e,e.pendingProps,o),e.child;case 8:return fi(s,e,e.pendingProps.children,o),e.child;case 12:return fi(s,e,e.pendingProps.children,o),e.child;case 10:e:{a=e.type._context,c=e.pendingProps,_=e.memoizedProps,d=c.value;var b=e.type._context;if(I(mg,b._currentValue),b._currentValue=d,_!==null)if(b=_.value,d=He(b,d)?0:(typeof a._calculateChangedBits=="function"?a._calculateChangedBits(b,d):1073741823)|0,d===0){if(_.children===c.children&&!N.current){e=hi(s,e,o);break e}}else for(b=e.child,b!==null&&(b.return=e);b!==null;){var k=b.dependencies;if(k!==null){_=b.child;for(var j=k.firstContext;j!==null;){if(j.context===a&&(j.observedBits&d)!==0){b.tag===1&&(j=zg(-1,o&-o),j.tag=2,Ag(b,j)),b.lanes|=o,j=b.alternate,j!==null&&(j.lanes|=o),sg(b.return,o),k.lanes|=o;break}j=j.next}}else _=b.tag===10&&b.type===e.type?null:b.child;if(_!==null)_.return=b;else for(_=b;_!==null;){if(_===e){_=null;break}if(b=_.sibling,b!==null){b.return=_.return,_=b;break}_=_.return}b=_}fi(s,e,c.children,o),e=e.child}return e;case 9:return c=e.type,d=e.pendingProps,a=d.children,tg(e,o),c=vg(c,d.unstable_observedBits),a=a(c),e.flags|=1,fi(s,e,a,o),e.child;case 14:return c=e.type,d=lg(c,e.pendingProps),d=lg(c.type,d),ii(s,e,c,d,a,o);case 15:return ki(s,e,e.type,e.pendingProps,a,o);case 17:return a=e.type,c=e.pendingProps,c=e.elementType===a?c:lg(a,c),s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Ff(a)?(s=!0,Jf(e)):s=!1,tg(e,o),Mg(e,a,c),Og(e,a,c,o),qi(null,e,a,!0,s,o);case 19:return Ai(s,e,o);case 23:return mi(s,e,o);case 24:return mi(s,e,o)}throw Error(y(156,e.tag))};function ik(s,e,o,a){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function nh(s,e,o,a){return new ik(s,e,o,a)}function ji(s){return s=s.prototype,!(!s||!s.isReactComponent)}function hk(s){if(typeof s=="function")return ji(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Aa)return 11;if(s===Da)return 14}return 2}function Tg(s,e){var o=s.alternate;return o===null?(o=nh(s.tag,e,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=e,o.type=s.type,o.flags=0,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null),o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o}function Vg(s,e,o,a,c,d){var _=2;if(a=s,typeof s=="function")ji(s)&&(_=1);else if(typeof s=="string")_=5;else e:switch(s){case ua:return Xg(o.children,c,d,e);case Ha:_=8,c|=16;break;case wa:_=8,c|=1;break;case xa:return s=nh(12,o,e,c|8),s.elementType=xa,s.type=xa,s.lanes=d,s;case Ba:return s=nh(13,o,e,c),s.type=Ba,s.elementType=Ba,s.lanes=d,s;case Ca:return s=nh(19,o,e,c),s.elementType=Ca,s.lanes=d,s;case Ia:return vi(o,c,d,e);case Ja:return s=nh(24,o,e,c),s.elementType=Ja,s.lanes=d,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case ya:_=10;break e;case za:_=9;break e;case Aa:_=11;break e;case Da:_=14;break e;case Ea:_=16,a=null;break e;case Fa:_=22;break e}throw Error(y(130,s==null?s:typeof s,""))}return e=nh(_,o,e,c),e.elementType=s,e.type=a,e.lanes=d,e}function Xg(s,e,o,a){return s=nh(7,s,a,e),s.lanes=o,s}function vi(s,e,o,a){return s=nh(23,s,a,e),s.elementType=Ia,s.lanes=o,s}function Ug(s,e,o){return s=nh(6,s,null,e),s.lanes=o,s}function Wg(s,e,o){return e=nh(4,s.children!==null?s.children:[],s.key,e),e.lanes=o,e.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},e}function jk(s,e,o){this.tag=e,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=o,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Zc(0),this.expirationTimes=Zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.mutableSourceEagerHydrationData=null}function kk(s,e,o){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ta,key:a==null?null:""+a,children:s,containerInfo:e,implementation:o}}function lk(s,e,o,a){var c=e.current,d=Hg(),_=Ig(c);e:if(o){o=o._reactInternals;t:{if(Zb(o)!==o||o.tag!==1)throw Error(y(170));var b=o;do{switch(b.tag){case 3:b=b.stateNode.context;break t;case 1:if(Ff(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break t}}b=b.return}while(b!==null);throw Error(y(171))}if(o.tag===1){var k=o.type;if(Ff(k)){o=If(o,k,b);break e}}o=b}else o=Cf;return e.context===null?e.context=o:e.pendingContext=o,e=zg(d,_),e.payload={element:s},a=a===void 0?null:a,a!==null&&(e.callback=a),Ag(c,e),Jg(c,_,d),_}function mk(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function nk(s,e){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<e?o:e}}function ok(s,e){nk(s,e),(s=s.alternate)&&nk(s,e)}function pk(){return null}function qk(s,e,o){var a=o!=null&&o.hydrationOptions!=null&&o.hydrationOptions.mutableSources||null;if(o=new jk(s,e,o!=null&&o.hydrate===!0),e=nh(3,null,null,e===2?7:e===1?3:0),o.current=e,e.stateNode=o,xg(e),s[ff]=o.current,cf(s.nodeType===8?s.parentNode:s),a)for(s=0;s<a.length;s++){e=a[s];var c=e._getVersion;c=c(e._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[e,c]:o.mutableSourceEagerHydrationData.push(e,c)}this._internalRoot=o}qk.prototype.render=function(s){lk(s,this._internalRoot,null,null)};qk.prototype.unmount=function(){var s=this._internalRoot,e=s.containerInfo;lk(null,s,null,function(){e[ff]=null})};function rk(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function sk(s,e){if(e||(e=s?s.nodeType===9?s.documentElement:s.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var o;o=s.lastChild;)s.removeChild(o);return new qk(s,0,e?{hydrate:!0}:void 0)}function tk(s,e,o,a,c){var d=o._reactRootContainer;if(d){var _=d._internalRoot;if(typeof c=="function"){var b=c;c=function(){var j=mk(_);b.call(j)}}lk(e,_,s,c)}else{if(d=o._reactRootContainer=sk(o,a),_=d._internalRoot,typeof c=="function"){var k=c;c=function(){var j=mk(_);k.call(j)}}Xj(function(){lk(e,_,s,c)})}return mk(_)}ec=function(s){if(s.tag===13){var e=Hg();Jg(s,4,e),ok(s,4)}};fc=function(s){if(s.tag===13){var e=Hg();Jg(s,67108864,e),ok(s,67108864)}};gc=function(s){if(s.tag===13){var e=Hg(),o=Ig(s);Jg(s,o,e),ok(s,o)}};hc=function(s,e){return e()};yb=function(s,e,o){switch(e){case"input":if(ab(s,o),e=o.name,o.type==="radio"&&e!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<o.length;e++){var a=o[e];if(a!==s&&a.form===s.form){var c=Db(a);if(!c)throw Error(y(90));Wa(a),ab(a,c)}}}break;case"textarea":ib(s,o);break;case"select":e=o.value,e!=null&&fb(s,!!o.multiple,e,!1)}};Gb=Wj;Hb=function(s,e,o,a,c){var d=X;X|=4;try{return gg(98,s.bind(null,e,o,a,c))}finally{X=d,X===0&&(wj(),ig())}};Ib=function(){(X&49)===0&&(Vj(),Oj())};Jb=function(s,e){var o=X;X|=2;try{return s(e)}finally{X=o,X===0&&(wj(),ig())}};function uk(s,e){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rk(e))throw Error(y(200));return kk(s,e,null,o)}var vk={Events:[Cb,ue,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=cc(s),s===null?null:s.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||pk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;reactDom_production_min.createPortal=uk;reactDom_production_min.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var e=s._reactInternals;if(e===void 0)throw typeof s.render=="function"?Error(y(188)):Error(y(268,Object.keys(s)));return s=cc(e),s=s===null?null:s.stateNode,s};reactDom_production_min.flushSync=function(s,e){var o=X;if((o&48)!==0)return s(e);X|=1;try{if(s)return gg(99,s.bind(null,e))}finally{X=o,ig()}};reactDom_production_min.hydrate=function(s,e,o){if(!rk(e))throw Error(y(200));return tk(null,s,e,!0,o)};reactDom_production_min.render=function(s,e,o){if(!rk(e))throw Error(y(200));return tk(null,s,e,!1,o)};reactDom_production_min.unmountComponentAtNode=function(s){if(!rk(s))throw Error(y(40));return s._reactRootContainer?(Xj(function(){tk(null,null,s,!1,function(){s._reactRootContainer=null,s[ff]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Wj;reactDom_production_min.unstable_createPortal=function(s,e){return uk(s,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};reactDom_production_min.unstable_renderSubtreeIntoContainer=function(s,e,o,a){if(!rk(o))throw Error(y(200));if(s==null||s._reactInternals===void 0)throw Error(y(38));return tk(s,e,o,!1,a)};reactDom_production_min.version="17.0.2";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(s){console.error(s)}}checkDCE(),reactDom.exports=reactDom_production_min;var ReactDOM=reactDom.exports;/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="138",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,SmoothShading=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,CubeUVRefractionMapping=307,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",_SRGBAFormat=1035;class EventDispatcher{addEventListener(e,o){this._listeners===void 0&&(this._listeners={});const a=this._listeners;a[e]===void 0&&(a[e]=[]),a[e].indexOf(o)===-1&&a[e].push(o)}hasEventListener(e,o){if(this._listeners===void 0)return!1;const a=this._listeners;return a[e]!==void 0&&a[e].indexOf(o)!==-1}removeEventListener(e,o){if(this._listeners===void 0)return;const c=this._listeners[e];if(c!==void 0){const d=c.indexOf(o);d!==-1&&c.splice(d,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const a=this._listeners[e.type];if(a!==void 0){e.target=this;const c=a.slice(0);for(let d=0,_=c.length;d<_;d++)c[d].call(this,e);e.target=null}}}const _lut$1=[];for(let s=0;s<256;s++)_lut$1[s]=(s<16?"0":"")+s.toString(16);let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID$1(){const s=Math.random()*4294967295|0,e=Math.random()*4294967295|0,o=Math.random()*4294967295|0,a=Math.random()*4294967295|0;return(_lut$1[s&255]+_lut$1[s>>8&255]+_lut$1[s>>16&255]+_lut$1[s>>24&255]+"-"+_lut$1[e&255]+_lut$1[e>>8&255]+"-"+_lut$1[e>>16&15|64]+_lut$1[e>>24&255]+"-"+_lut$1[o&63|128]+_lut$1[o>>8&255]+"-"+_lut$1[o>>16&255]+_lut$1[o>>24&255]+_lut$1[a&255]+_lut$1[a>>8&255]+_lut$1[a>>16&255]+_lut$1[a>>24&255]).toUpperCase()}function clamp(s,e,o){return Math.max(e,Math.min(o,s))}function euclideanModulo(s,e){return(s%e+e)%e}function mapLinear(s,e,o,a,c){return a+(s-e)*(c-a)/(o-e)}function inverseLerp(s,e,o){return s!==e?(o-s)/(e-s):0}function lerp(s,e,o){return(1-o)*s+o*e}function damp(s,e,o,a){return lerp(s,e,1-Math.exp(-o*a))}function pingpong(s,e=1){return e-Math.abs(euclideanModulo(s,e*2)-e)}function smoothstep(s,e,o){return s<=e?0:s>=o?1:(s=(s-e)/(o-e),s*s*(3-2*s))}function smootherstep(s,e,o){return s<=e?0:s>=o?1:(s=(s-e)/(o-e),s*s*s*(s*(s*6-15)+10))}function randInt(s,e){return s+Math.floor(Math.random()*(e-s+1))}function randFloat(s,e){return s+Math.random()*(e-s)}function randFloatSpread(s){return s*(.5-Math.random())}function seededRandom(s){return s!==void 0&&(_seed=s%2147483647),_seed=_seed*16807%2147483647,(_seed-1)/2147483646}function degToRad(s){return s*DEG2RAD}function radToDeg(s){return s*RAD2DEG}function isPowerOfTwo(s){return(s&s-1)===0&&s!==0}function ceilPowerOfTwo(s){return Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function floorPowerOfTwo(s){return Math.pow(2,Math.floor(Math.log(s)/Math.LN2))}function setQuaternionFromProperEuler(s,e,o,a,c){const d=Math.cos,_=Math.sin,b=d(o/2),k=_(o/2),j=d((e+a)/2),et=_((e+a)/2),nt=d((e-a)/2),tt=_((e-a)/2),rt=d((a-e)/2),at=_((a-e)/2);switch(c){case"XYX":s.set(b*et,k*nt,k*tt,b*j);break;case"YZY":s.set(k*tt,b*et,k*nt,b*j);break;case"ZXZ":s.set(k*nt,k*tt,b*et,b*j);break;case"XZX":s.set(b*et,k*at,k*rt,b*j);break;case"YXY":s.set(k*rt,b*et,k*at,b*j);break;case"ZYZ":s.set(k*at,k*rt,b*et,b*j);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+c)}}var MathUtils=Object.freeze({__proto__:null,DEG2RAD,RAD2DEG,generateUUID:generateUUID$1,clamp,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler});class Vector2{constructor(e=0,o=0){this.x=e,this.y=o}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,o){return this.x=e,this.y=o,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,o){switch(e){case 0:this.x=o;break;case 1:this.y=o;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,o){return o!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,o)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,o){return this.x=e.x+o.x,this.y=e.y+o.y,this}addScaledVector(e,o){return this.x+=e.x*o,this.y+=e.y*o,this}sub(e,o){return o!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,o)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,o){return this.x=e.x-o.x,this.y=e.y-o.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const o=this.x,a=this.y,c=e.elements;return this.x=c[0]*o+c[3]*a+c[6],this.y=c[1]*o+c[4]*a+c[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,o){return this.x=Math.max(e.x,Math.min(o.x,this.x)),this.y=Math.max(e.y,Math.min(o.y,this.y)),this}clampScalar(e,o){return this.x=Math.max(e,Math.min(o,this.x)),this.y=Math.max(e,Math.min(o,this.y)),this}clampLength(e,o){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(e,Math.min(o,a)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const o=this.x-e.x,a=this.y-e.y;return o*o+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,o){return this.x+=(e.x-this.x)*o,this.y+=(e.y-this.y)*o,this}lerpVectors(e,o,a){return this.x=e.x+(o.x-e.x)*a,this.y=e.y+(o.y-e.y)*a,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,o=0){return this.x=e[o],this.y=e[o+1],this}toArray(e=[],o=0){return e[o]=this.x,e[o+1]=this.y,e}fromBufferAttribute(e,o,a){return a!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(o),this.y=e.getY(o),this}rotateAround(e,o){const a=Math.cos(o),c=Math.sin(o),d=this.x-e.x,_=this.y-e.y;return this.x=d*a-_*c+e.x,this.y=d*c+_*a+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Vector2.prototype.isVector2=!0;class Matrix3{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,o,a,c,d,_,b,k,j){const et=this.elements;return et[0]=e,et[1]=c,et[2]=b,et[3]=o,et[4]=d,et[5]=k,et[6]=a,et[7]=_,et[8]=j,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const o=this.elements,a=e.elements;return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5],o[6]=a[6],o[7]=a[7],o[8]=a[8],this}extractBasis(e,o,a){return e.setFromMatrix3Column(this,0),o.setFromMatrix3Column(this,1),a.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const o=e.elements;return this.set(o[0],o[4],o[8],o[1],o[5],o[9],o[2],o[6],o[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,o){const a=e.elements,c=o.elements,d=this.elements,_=a[0],b=a[3],k=a[6],j=a[1],et=a[4],nt=a[7],tt=a[2],rt=a[5],at=a[8],lt=c[0],ut=c[3],st=c[6],it=c[1],ft=c[4],ct=c[7],dt=c[2],mt=c[5],gt=c[8];return d[0]=_*lt+b*it+k*dt,d[3]=_*ut+b*ft+k*mt,d[6]=_*st+b*ct+k*gt,d[1]=j*lt+et*it+nt*dt,d[4]=j*ut+et*ft+nt*mt,d[7]=j*st+et*ct+nt*gt,d[2]=tt*lt+rt*it+at*dt,d[5]=tt*ut+rt*ft+at*mt,d[8]=tt*st+rt*ct+at*gt,this}multiplyScalar(e){const o=this.elements;return o[0]*=e,o[3]*=e,o[6]*=e,o[1]*=e,o[4]*=e,o[7]*=e,o[2]*=e,o[5]*=e,o[8]*=e,this}determinant(){const e=this.elements,o=e[0],a=e[1],c=e[2],d=e[3],_=e[4],b=e[5],k=e[6],j=e[7],et=e[8];return o*_*et-o*b*j-a*d*et+a*b*k+c*d*j-c*_*k}invert(){const e=this.elements,o=e[0],a=e[1],c=e[2],d=e[3],_=e[4],b=e[5],k=e[6],j=e[7],et=e[8],nt=et*_-b*j,tt=b*k-et*d,rt=j*d-_*k,at=o*nt+a*tt+c*rt;if(at===0)return this.set(0,0,0,0,0,0,0,0,0);const lt=1/at;return e[0]=nt*lt,e[1]=(c*j-et*a)*lt,e[2]=(b*a-c*_)*lt,e[3]=tt*lt,e[4]=(et*o-c*k)*lt,e[5]=(c*d-b*o)*lt,e[6]=rt*lt,e[7]=(a*k-j*o)*lt,e[8]=(_*o-a*d)*lt,this}transpose(){let e;const o=this.elements;return e=o[1],o[1]=o[3],o[3]=e,e=o[2],o[2]=o[6],o[6]=e,e=o[5],o[5]=o[7],o[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const o=this.elements;return e[0]=o[0],e[1]=o[3],e[2]=o[6],e[3]=o[1],e[4]=o[4],e[5]=o[7],e[6]=o[2],e[7]=o[5],e[8]=o[8],this}setUvTransform(e,o,a,c,d,_,b){const k=Math.cos(d),j=Math.sin(d);return this.set(a*k,a*j,-a*(k*_+j*b)+_+e,-c*j,c*k,-c*(-j*_+k*b)+b+o,0,0,1),this}scale(e,o){const a=this.elements;return a[0]*=e,a[3]*=e,a[6]*=e,a[1]*=o,a[4]*=o,a[7]*=o,this}rotate(e){const o=Math.cos(e),a=Math.sin(e),c=this.elements,d=c[0],_=c[3],b=c[6],k=c[1],j=c[4],et=c[7];return c[0]=o*d+a*k,c[3]=o*_+a*j,c[6]=o*b+a*et,c[1]=-a*d+o*k,c[4]=-a*_+o*j,c[7]=-a*b+o*et,this}translate(e,o){const a=this.elements;return a[0]+=e*a[2],a[3]+=e*a[5],a[6]+=e*a[8],a[1]+=o*a[2],a[4]+=o*a[5],a[7]+=o*a[8],this}equals(e){const o=this.elements,a=e.elements;for(let c=0;c<9;c++)if(o[c]!==a[c])return!1;return!0}fromArray(e,o=0){for(let a=0;a<9;a++)this.elements[a]=e[a+o];return this}toArray(e=[],o=0){const a=this.elements;return e[o]=a[0],e[o+1]=a[1],e[o+2]=a[2],e[o+3]=a[3],e[o+4]=a[4],e[o+5]=a[5],e[o+6]=a[6],e[o+7]=a[7],e[o+8]=a[8],e}clone(){return new this.constructor().fromArray(this.elements)}}Matrix3.prototype.isMatrix3=!0;function arrayNeedsUint32(s){for(let e=s.length-1;e>=0;--e)if(s[e]>65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(s,e){return new TYPED_ARRAYS[s](e)}function createElementNS(s){return document.createElementNS("http://www.w3.org/1999/xhtml",s)}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(s,e,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?s+(e-s)*6*o:o<1/2?e:o<2/3?s+(e-s)*6*(2/3-o):s}function SRGBToLinear(s){return s<.04045?s*.0773993808:Math.pow(s*.9478672986+.0521327014,2.4)}function LinearToSRGB(s){return s<.0031308?s*12.92:1.055*Math.pow(s,.41666)-.055}class Color{constructor(e,o,a){return o===void 0&&a===void 0?this.set(e):this.setRGB(e,o,a)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,o,a){return this.r=e,this.g=o,this.b=a,this}setHSL(e,o,a){if(e=euclideanModulo(e,1),o=clamp(o,0,1),a=clamp(a,0,1),o===0)this.r=this.g=this.b=a;else{const c=a<=.5?a*(1+o):a+o-a*o,d=2*a-c;this.r=hue2rgb(d,c,e+1/3),this.g=hue2rgb(d,c,e),this.b=hue2rgb(d,c,e-1/3)}return this}setStyle(e){function o(c){c!==void 0&&parseFloat(c)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let c;const d=a[1],_=a[2];switch(d){case"rgb":case"rgba":if(c=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(_))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,o(c[4]),this;if(c=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(_))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,o(c[4]),this;break;case"hsl":case"hsla":if(c=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(_)){const b=parseFloat(c[1])/360,k=parseInt(c[2],10)/100,j=parseInt(c[3],10)/100;return o(c[4]),this.setHSL(b,k,j)}break}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const c=a[1],d=c.length;if(d===3)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(d===6)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const o=_colorKeywords[e.toLowerCase()];return o!==void 0?this.setHex(o):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=SRGBToLinear(e.r),this.g=SRGBToLinear(e.g),this.b=SRGBToLinear(e.b),this}copyLinearToSRGB(e){return this.r=LinearToSRGB(e.r),this.g=LinearToSRGB(e.g),this.b=LinearToSRGB(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const o=this.r,a=this.g,c=this.b,d=Math.max(o,a,c),_=Math.min(o,a,c);let b,k;const j=(_+d)/2;if(_===d)b=0,k=0;else{const et=d-_;switch(k=j<=.5?et/(d+_):et/(2-d-_),d){case o:b=(a-c)/et+(a<c?6:0);break;case a:b=(c-o)/et+2;break;case c:b=(o-a)/et+4;break}b/=6}return e.h=b,e.s=k,e.l=j,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,o,a){return this.getHSL(_hslA),_hslA.h+=e,_hslA.s+=o,_hslA.l+=a,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,o){return this.r=e.r+o.r,this.g=e.g+o.g,this.b=e.b+o.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,o){return this.r+=(e.r-this.r)*o,this.g+=(e.g-this.g)*o,this.b+=(e.b-this.b)*o,this}lerpColors(e,o,a){return this.r=e.r+(o.r-e.r)*a,this.g=e.g+(o.g-e.g)*a,this.b=e.b+(o.b-e.b)*a,this}lerpHSL(e,o){this.getHSL(_hslA),e.getHSL(_hslB);const a=lerp(_hslA.h,_hslB.h,o),c=lerp(_hslA.s,_hslB.s,o),d=lerp(_hslA.l,_hslB.l,o);return this.setHSL(a,c,d),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,o=0){return this.r=e[o],this.g=e[o+1],this.b=e[o+2],this}toArray(e=[],o=0){return e[o]=this.r,e[o+1]=this.g,e[o+2]=this.b,e}fromBufferAttribute(e,o){return this.r=e.getX(o),this.g=e.getY(o),this.b=e.getZ(o),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Color.NAMES=_colorKeywords;Color.prototype.isColor=!0;Color.prototype.r=1;Color.prototype.g=1;Color.prototype.b=1;let _canvas;class ImageUtils{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let o;if(e instanceof HTMLCanvasElement)o=e;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=e.width,_canvas.height=e.height;const a=_canvas.getContext("2d");e instanceof ImageData?a.putImageData(e,0,0):a.drawImage(e,0,0,e.width,e.height),o=_canvas}return o.width>2048||o.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),o.toDataURL("image/jpeg",.6)):o.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const o=createElementNS("canvas");o.width=e.width,o.height=e.height;const a=o.getContext("2d");a.drawImage(e,0,0,e.width,e.height);const c=a.getImageData(0,0,e.width,e.height),d=c.data;for(let _=0;_<d.length;_++)d[_]=SRGBToLinear(d[_]/255)*255;return a.putImageData(c,0,0),o}else if(e.data){const o=e.data.slice(0);for(let a=0;a<o.length;a++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[a]=Math.floor(SRGBToLinear(o[a]/255)*255):o[a]=SRGBToLinear(o[a]);return{data:o,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Source{constructor(e=null){this.uuid=generateUUID$1(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const o=e===void 0||typeof e=="string";if(!o&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const a={uuid:this.uuid,url:""},c=this.data;if(c!==null){let d;if(Array.isArray(c)){d=[];for(let _=0,b=c.length;_<b;_++)c[_].isDataTexture?d.push(serializeImage(c[_].image)):d.push(serializeImage(c[_]))}else d=serializeImage(c);a.url=d}return o||(e.images[this.uuid]=a),a}}function serializeImage(s){return typeof HTMLImageElement!="undefined"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&s instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&s instanceof ImageBitmap?ImageUtils.getDataURL(s):s.data?{data:Array.prototype.slice.call(s.data),width:s.width,height:s.height,type:s.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Source.prototype.isSource=!0;let textureId=0;class Texture extends EventDispatcher{constructor(e=Texture.DEFAULT_IMAGE,o=Texture.DEFAULT_MAPPING,a=ClampToEdgeWrapping,c=ClampToEdgeWrapping,d=LinearFilter,_=LinearMipmapLinearFilter,b=RGBAFormat,k=UnsignedByteType,j=1,et=LinearEncoding){super();Object.defineProperty(this,"id",{value:textureId++}),this.uuid=generateUUID$1(),this.name="",this.source=new Source(e),this.mipmaps=[],this.mapping=o,this.wrapS=a,this.wrapT=c,this.magFilter=d,this.minFilter=_,this.anisotropy=j,this.format=b,this.internalFormat=null,this.type=k,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=et,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const o=e===void 0||typeof e=="string";if(!o&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const a={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(a.userData=this.userData),o||(e.textures[this.uuid]=a),a}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==UVMapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case RepeatWrapping:e.x=e.x-Math.floor(e.x);break;case ClampToEdgeWrapping:e.x=e.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case RepeatWrapping:e.y=e.y-Math.floor(e.y);break;case ClampToEdgeWrapping:e.y=e.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.prototype.isTexture=!0;class Vector4{constructor(e=0,o=0,a=0,c=1){this.x=e,this.y=o,this.z=a,this.w=c}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,o,a,c){return this.x=e,this.y=o,this.z=a,this.w=c,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,o){switch(e){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;case 3:this.w=o;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,o){return o!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,o)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,o){return this.x=e.x+o.x,this.y=e.y+o.y,this.z=e.z+o.z,this.w=e.w+o.w,this}addScaledVector(e,o){return this.x+=e.x*o,this.y+=e.y*o,this.z+=e.z*o,this.w+=e.w*o,this}sub(e,o){return o!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,o)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,o){return this.x=e.x-o.x,this.y=e.y-o.y,this.z=e.z-o.z,this.w=e.w-o.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const o=this.x,a=this.y,c=this.z,d=this.w,_=e.elements;return this.x=_[0]*o+_[4]*a+_[8]*c+_[12]*d,this.y=_[1]*o+_[5]*a+_[9]*c+_[13]*d,this.z=_[2]*o+_[6]*a+_[10]*c+_[14]*d,this.w=_[3]*o+_[7]*a+_[11]*c+_[15]*d,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const o=Math.sqrt(1-e.w*e.w);return o<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/o,this.y=e.y/o,this.z=e.z/o),this}setAxisAngleFromRotationMatrix(e){let o,a,c,d;const k=e.elements,j=k[0],et=k[4],nt=k[8],tt=k[1],rt=k[5],at=k[9],lt=k[2],ut=k[6],st=k[10];if(Math.abs(et-tt)<.01&&Math.abs(nt-lt)<.01&&Math.abs(at-ut)<.01){if(Math.abs(et+tt)<.1&&Math.abs(nt+lt)<.1&&Math.abs(at+ut)<.1&&Math.abs(j+rt+st-3)<.1)return this.set(1,0,0,0),this;o=Math.PI;const ft=(j+1)/2,ct=(rt+1)/2,dt=(st+1)/2,mt=(et+tt)/4,gt=(nt+lt)/4,yt=(at+ut)/4;return ft>ct&&ft>dt?ft<.01?(a=0,c=.707106781,d=.707106781):(a=Math.sqrt(ft),c=mt/a,d=gt/a):ct>dt?ct<.01?(a=.707106781,c=0,d=.707106781):(c=Math.sqrt(ct),a=mt/c,d=yt/c):dt<.01?(a=.707106781,c=.707106781,d=0):(d=Math.sqrt(dt),a=gt/d,c=yt/d),this.set(a,c,d,o),this}let it=Math.sqrt((ut-at)*(ut-at)+(nt-lt)*(nt-lt)+(tt-et)*(tt-et));return Math.abs(it)<.001&&(it=1),this.x=(ut-at)/it,this.y=(nt-lt)/it,this.z=(tt-et)/it,this.w=Math.acos((j+rt+st-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,o){return this.x=Math.max(e.x,Math.min(o.x,this.x)),this.y=Math.max(e.y,Math.min(o.y,this.y)),this.z=Math.max(e.z,Math.min(o.z,this.z)),this.w=Math.max(e.w,Math.min(o.w,this.w)),this}clampScalar(e,o){return this.x=Math.max(e,Math.min(o,this.x)),this.y=Math.max(e,Math.min(o,this.y)),this.z=Math.max(e,Math.min(o,this.z)),this.w=Math.max(e,Math.min(o,this.w)),this}clampLength(e,o){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(e,Math.min(o,a)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,o){return this.x+=(e.x-this.x)*o,this.y+=(e.y-this.y)*o,this.z+=(e.z-this.z)*o,this.w+=(e.w-this.w)*o,this}lerpVectors(e,o,a){return this.x=e.x+(o.x-e.x)*a,this.y=e.y+(o.y-e.y)*a,this.z=e.z+(o.z-e.z)*a,this.w=e.w+(o.w-e.w)*a,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,o=0){return this.x=e[o],this.y=e[o+1],this.z=e[o+2],this.w=e[o+3],this}toArray(e=[],o=0){return e[o]=this.x,e[o+1]=this.y,e[o+2]=this.z,e[o+3]=this.w,e}fromBufferAttribute(e,o,a){return a!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(o),this.y=e.getY(o),this.z=e.getZ(o),this.w=e.getW(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Vector4.prototype.isVector4=!0;class WebGLRenderTarget extends EventDispatcher{constructor(e,o,a={}){super();this.width=e,this.height=o,this.depth=1,this.scissor=new Vector4(0,0,e,o),this.scissorTest=!1,this.viewport=new Vector4(0,0,e,o);const c={width:e,height:o,depth:1};this.texture=new Texture(c,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=a.generateMipmaps!==void 0?a.generateMipmaps:!1,this.texture.internalFormat=a.internalFormat!==void 0?a.internalFormat:null,this.texture.minFilter=a.minFilter!==void 0?a.minFilter:LinearFilter,this.depthBuffer=a.depthBuffer!==void 0?a.depthBuffer:!0,this.stencilBuffer=a.stencilBuffer!==void 0?a.stencilBuffer:!1,this.depthTexture=a.depthTexture!==void 0?a.depthTexture:null,this.samples=a.samples!==void 0?a.samples:0}setSize(e,o,a=1){(this.width!==e||this.height!==o||this.depth!==a)&&(this.width=e,this.height=o,this.depth=a,this.texture.image.width=e,this.texture.image.height=o,this.texture.image.depth=a,this.dispose()),this.viewport.set(0,0,e,o),this.scissor.set(0,0,e,o)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}WebGLRenderTarget.prototype.isWebGLRenderTarget=!0;class DataArrayTexture extends Texture{constructor(e=null,o=1,a=1,c=1){super(null);this.image={data:e,width:o,height:a,depth:c},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}DataArrayTexture.prototype.isDataArrayTexture=!0;class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(e,o,a){super(e,o);this.depth=a,this.texture=new DataArrayTexture(null,e,o,a),this.texture.isRenderTargetTexture=!0}}WebGLArrayRenderTarget.prototype.isWebGLArrayRenderTarget=!0;class Data3DTexture extends Texture{constructor(e=null,o=1,a=1,c=1){super(null);this.image={data:e,width:o,height:a,depth:c},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Data3DTexture.prototype.isData3DTexture=!0;class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(e,o,a){super(e,o);this.depth=a,this.texture=new Data3DTexture(null,e,o,a),this.texture.isRenderTargetTexture=!0}}WebGL3DRenderTarget.prototype.isWebGL3DRenderTarget=!0;class WebGLMultipleRenderTargets extends WebGLRenderTarget{constructor(e,o,a,c={}){super(e,o,c);const d=this.texture;this.texture=[];for(let _=0;_<a;_++)this.texture[_]=d.clone()}setSize(e,o,a=1){if(this.width!==e||this.height!==o||this.depth!==a){this.width=e,this.height=o,this.depth=a;for(let c=0,d=this.texture.length;c<d;c++)this.texture[c].image.width=e,this.texture[c].image.height=o,this.texture[c].image.depth=a;this.dispose()}return this.viewport.set(0,0,e,o),this.scissor.set(0,0,e,o),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let o=0,a=e.texture.length;o<a;o++)this.texture[o]=e.texture[o].clone();return this}}WebGLMultipleRenderTargets.prototype.isWebGLMultipleRenderTargets=!0;class Quaternion{constructor(e=0,o=0,a=0,c=1){this._x=e,this._y=o,this._z=a,this._w=c}static slerp(e,o,a,c){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),a.slerpQuaternions(e,o,c)}static slerpFlat(e,o,a,c,d,_,b){let k=a[c+0],j=a[c+1],et=a[c+2],nt=a[c+3];const tt=d[_+0],rt=d[_+1],at=d[_+2],lt=d[_+3];if(b===0){e[o+0]=k,e[o+1]=j,e[o+2]=et,e[o+3]=nt;return}if(b===1){e[o+0]=tt,e[o+1]=rt,e[o+2]=at,e[o+3]=lt;return}if(nt!==lt||k!==tt||j!==rt||et!==at){let ut=1-b;const st=k*tt+j*rt+et*at+nt*lt,it=st>=0?1:-1,ft=1-st*st;if(ft>Number.EPSILON){const dt=Math.sqrt(ft),mt=Math.atan2(dt,st*it);ut=Math.sin(ut*mt)/dt,b=Math.sin(b*mt)/dt}const ct=b*it;if(k=k*ut+tt*ct,j=j*ut+rt*ct,et=et*ut+at*ct,nt=nt*ut+lt*ct,ut===1-b){const dt=1/Math.sqrt(k*k+j*j+et*et+nt*nt);k*=dt,j*=dt,et*=dt,nt*=dt}}e[o]=k,e[o+1]=j,e[o+2]=et,e[o+3]=nt}static multiplyQuaternionsFlat(e,o,a,c,d,_){const b=a[c],k=a[c+1],j=a[c+2],et=a[c+3],nt=d[_],tt=d[_+1],rt=d[_+2],at=d[_+3];return e[o]=b*at+et*nt+k*rt-j*tt,e[o+1]=k*at+et*tt+j*nt-b*rt,e[o+2]=j*at+et*rt+b*tt-k*nt,e[o+3]=et*at-b*nt-k*tt-j*rt,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,o,a,c){return this._x=e,this._y=o,this._z=a,this._w=c,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,o){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const a=e._x,c=e._y,d=e._z,_=e._order,b=Math.cos,k=Math.sin,j=b(a/2),et=b(c/2),nt=b(d/2),tt=k(a/2),rt=k(c/2),at=k(d/2);switch(_){case"XYZ":this._x=tt*et*nt+j*rt*at,this._y=j*rt*nt-tt*et*at,this._z=j*et*at+tt*rt*nt,this._w=j*et*nt-tt*rt*at;break;case"YXZ":this._x=tt*et*nt+j*rt*at,this._y=j*rt*nt-tt*et*at,this._z=j*et*at-tt*rt*nt,this._w=j*et*nt+tt*rt*at;break;case"ZXY":this._x=tt*et*nt-j*rt*at,this._y=j*rt*nt+tt*et*at,this._z=j*et*at+tt*rt*nt,this._w=j*et*nt-tt*rt*at;break;case"ZYX":this._x=tt*et*nt-j*rt*at,this._y=j*rt*nt+tt*et*at,this._z=j*et*at-tt*rt*nt,this._w=j*et*nt+tt*rt*at;break;case"YZX":this._x=tt*et*nt+j*rt*at,this._y=j*rt*nt+tt*et*at,this._z=j*et*at-tt*rt*nt,this._w=j*et*nt-tt*rt*at;break;case"XZY":this._x=tt*et*nt-j*rt*at,this._y=j*rt*nt-tt*et*at,this._z=j*et*at+tt*rt*nt,this._w=j*et*nt+tt*rt*at;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+_)}return o!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,o){const a=o/2,c=Math.sin(a);return this._x=e.x*c,this._y=e.y*c,this._z=e.z*c,this._w=Math.cos(a),this._onChangeCallback(),this}setFromRotationMatrix(e){const o=e.elements,a=o[0],c=o[4],d=o[8],_=o[1],b=o[5],k=o[9],j=o[2],et=o[6],nt=o[10],tt=a+b+nt;if(tt>0){const rt=.5/Math.sqrt(tt+1);this._w=.25/rt,this._x=(et-k)*rt,this._y=(d-j)*rt,this._z=(_-c)*rt}else if(a>b&&a>nt){const rt=2*Math.sqrt(1+a-b-nt);this._w=(et-k)/rt,this._x=.25*rt,this._y=(c+_)/rt,this._z=(d+j)/rt}else if(b>nt){const rt=2*Math.sqrt(1+b-a-nt);this._w=(d-j)/rt,this._x=(c+_)/rt,this._y=.25*rt,this._z=(k+et)/rt}else{const rt=2*Math.sqrt(1+nt-a-b);this._w=(_-c)/rt,this._x=(d+j)/rt,this._y=(k+et)/rt,this._z=.25*rt}return this._onChangeCallback(),this}setFromUnitVectors(e,o){let a=e.dot(o)+1;return a<Number.EPSILON?(a=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=a):(this._x=0,this._y=-e.z,this._z=e.y,this._w=a)):(this._x=e.y*o.z-e.z*o.y,this._y=e.z*o.x-e.x*o.z,this._z=e.x*o.y-e.y*o.x,this._w=a),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(clamp(this.dot(e),-1,1)))}rotateTowards(e,o){const a=this.angleTo(e);if(a===0)return this;const c=Math.min(1,o/a);return this.slerp(e,c),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,o){return o!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,o)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,o){const a=e._x,c=e._y,d=e._z,_=e._w,b=o._x,k=o._y,j=o._z,et=o._w;return this._x=a*et+_*b+c*j-d*k,this._y=c*et+_*k+d*b-a*j,this._z=d*et+_*j+a*k-c*b,this._w=_*et-a*b-c*k-d*j,this._onChangeCallback(),this}slerp(e,o){if(o===0)return this;if(o===1)return this.copy(e);const a=this._x,c=this._y,d=this._z,_=this._w;let b=_*e._w+a*e._x+c*e._y+d*e._z;if(b<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,b=-b):this.copy(e),b>=1)return this._w=_,this._x=a,this._y=c,this._z=d,this;const k=1-b*b;if(k<=Number.EPSILON){const rt=1-o;return this._w=rt*_+o*this._w,this._x=rt*a+o*this._x,this._y=rt*c+o*this._y,this._z=rt*d+o*this._z,this.normalize(),this._onChangeCallback(),this}const j=Math.sqrt(k),et=Math.atan2(j,b),nt=Math.sin((1-o)*et)/j,tt=Math.sin(o*et)/j;return this._w=_*nt+this._w*tt,this._x=a*nt+this._x*tt,this._y=c*nt+this._y*tt,this._z=d*nt+this._z*tt,this._onChangeCallback(),this}slerpQuaternions(e,o,a){return this.copy(e).slerp(o,a)}random(){const e=Math.random(),o=Math.sqrt(1-e),a=Math.sqrt(e),c=2*Math.PI*Math.random(),d=2*Math.PI*Math.random();return this.set(o*Math.cos(c),a*Math.sin(d),a*Math.cos(d),o*Math.sin(c))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,o=0){return this._x=e[o],this._y=e[o+1],this._z=e[o+2],this._w=e[o+3],this._onChangeCallback(),this}toArray(e=[],o=0){return e[o]=this._x,e[o+1]=this._y,e[o+2]=this._z,e[o+3]=this._w,e}fromBufferAttribute(e,o){return this._x=e.getX(o),this._y=e.getY(o),this._z=e.getZ(o),this._w=e.getW(o),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Quaternion.prototype.isQuaternion=!0;class Vector3{constructor(e=0,o=0,a=0){this.x=e,this.y=o,this.z=a}set(e,o,a){return a===void 0&&(a=this.z),this.x=e,this.y=o,this.z=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,o){switch(e){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,o){return o!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,o)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,o){return this.x=e.x+o.x,this.y=e.y+o.y,this.z=e.z+o.z,this}addScaledVector(e,o){return this.x+=e.x*o,this.y+=e.y*o,this.z+=e.z*o,this}sub(e,o){return o!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,o)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,o){return this.x=e.x-o.x,this.y=e.y-o.y,this.z=e.z-o.z,this}multiply(e,o){return o!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,o)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,o){return this.x=e.x*o.x,this.y=e.y*o.y,this.z=e.z*o.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_quaternion$4.setFromEuler(e))}applyAxisAngle(e,o){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(e,o))}applyMatrix3(e){const o=this.x,a=this.y,c=this.z,d=e.elements;return this.x=d[0]*o+d[3]*a+d[6]*c,this.y=d[1]*o+d[4]*a+d[7]*c,this.z=d[2]*o+d[5]*a+d[8]*c,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const o=this.x,a=this.y,c=this.z,d=e.elements,_=1/(d[3]*o+d[7]*a+d[11]*c+d[15]);return this.x=(d[0]*o+d[4]*a+d[8]*c+d[12])*_,this.y=(d[1]*o+d[5]*a+d[9]*c+d[13])*_,this.z=(d[2]*o+d[6]*a+d[10]*c+d[14])*_,this}applyQuaternion(e){const o=this.x,a=this.y,c=this.z,d=e.x,_=e.y,b=e.z,k=e.w,j=k*o+_*c-b*a,et=k*a+b*o-d*c,nt=k*c+d*a-_*o,tt=-d*o-_*a-b*c;return this.x=j*k+tt*-d+et*-b-nt*-_,this.y=et*k+tt*-_+nt*-d-j*-b,this.z=nt*k+tt*-b+j*-_-et*-d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const o=this.x,a=this.y,c=this.z,d=e.elements;return this.x=d[0]*o+d[4]*a+d[8]*c,this.y=d[1]*o+d[5]*a+d[9]*c,this.z=d[2]*o+d[6]*a+d[10]*c,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,o){return this.x=Math.max(e.x,Math.min(o.x,this.x)),this.y=Math.max(e.y,Math.min(o.y,this.y)),this.z=Math.max(e.z,Math.min(o.z,this.z)),this}clampScalar(e,o){return this.x=Math.max(e,Math.min(o,this.x)),this.y=Math.max(e,Math.min(o,this.y)),this.z=Math.max(e,Math.min(o,this.z)),this}clampLength(e,o){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(e,Math.min(o,a)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,o){return this.x+=(e.x-this.x)*o,this.y+=(e.y-this.y)*o,this.z+=(e.z-this.z)*o,this}lerpVectors(e,o,a){return this.x=e.x+(o.x-e.x)*a,this.y=e.y+(o.y-e.y)*a,this.z=e.z+(o.z-e.z)*a,this}cross(e,o){return o!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,o)):this.crossVectors(this,e)}crossVectors(e,o){const a=e.x,c=e.y,d=e.z,_=o.x,b=o.y,k=o.z;return this.x=c*k-d*b,this.y=d*_-a*k,this.z=a*b-c*_,this}projectOnVector(e){const o=e.lengthSq();if(o===0)return this.set(0,0,0);const a=e.dot(this)/o;return this.copy(e).multiplyScalar(a)}projectOnPlane(e){return _vector$c.copy(this).projectOnVector(e),this.sub(_vector$c)}reflect(e){return this.sub(_vector$c.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const o=Math.sqrt(this.lengthSq()*e.lengthSq());if(o===0)return Math.PI/2;const a=this.dot(e)/o;return Math.acos(clamp(a,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const o=this.x-e.x,a=this.y-e.y,c=this.z-e.z;return o*o+a*a+c*c}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,o,a){const c=Math.sin(o)*e;return this.x=c*Math.sin(a),this.y=Math.cos(o)*e,this.z=c*Math.cos(a),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,o,a){return this.x=e*Math.sin(o),this.y=a,this.z=e*Math.cos(o),this}setFromMatrixPosition(e){const o=e.elements;return this.x=o[12],this.y=o[13],this.z=o[14],this}setFromMatrixScale(e){const o=this.setFromMatrixColumn(e,0).length(),a=this.setFromMatrixColumn(e,1).length(),c=this.setFromMatrixColumn(e,2).length();return this.x=o,this.y=a,this.z=c,this}setFromMatrixColumn(e,o){return this.fromArray(e.elements,o*4)}setFromMatrix3Column(e,o){return this.fromArray(e.elements,o*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,o=0){return this.x=e[o],this.y=e[o+1],this.z=e[o+2],this}toArray(e=[],o=0){return e[o]=this.x,e[o+1]=this.y,e[o+2]=this.z,e}fromBufferAttribute(e,o,a){return a!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(o),this.y=e.getY(o),this.z=e.getZ(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,o=Math.random()*Math.PI*2,a=Math.sqrt(1-e**2);return this.x=a*Math.cos(o),this.y=a*Math.sin(o),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}Vector3.prototype.isVector3=!0;const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(e=new Vector3(1/0,1/0,1/0),o=new Vector3(-1/0,-1/0,-1/0)){this.min=e,this.max=o}set(e,o){return this.min.copy(e),this.max.copy(o),this}setFromArray(e){let o=1/0,a=1/0,c=1/0,d=-1/0,_=-1/0,b=-1/0;for(let k=0,j=e.length;k<j;k+=3){const et=e[k],nt=e[k+1],tt=e[k+2];et<o&&(o=et),nt<a&&(a=nt),tt<c&&(c=tt),et>d&&(d=et),nt>_&&(_=nt),tt>b&&(b=tt)}return this.min.set(o,a,c),this.max.set(d,_,b),this}setFromBufferAttribute(e){let o=1/0,a=1/0,c=1/0,d=-1/0,_=-1/0,b=-1/0;for(let k=0,j=e.count;k<j;k++){const et=e.getX(k),nt=e.getY(k),tt=e.getZ(k);et<o&&(o=et),nt<a&&(a=nt),tt<c&&(c=tt),et>d&&(d=et),nt>_&&(_=nt),tt>b&&(b=tt)}return this.min.set(o,a,c),this.max.set(d,_,b),this}setFromPoints(e){this.makeEmpty();for(let o=0,a=e.length;o<a;o++)this.expandByPoint(e[o]);return this}setFromCenterAndSize(e,o){const a=_vector$b.copy(o).multiplyScalar(.5);return this.min.copy(e).sub(a),this.max.copy(e).add(a),this}setFromObject(e,o=!1){return this.makeEmpty(),this.expandByObject(e,o)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,o=!1){e.updateWorldMatrix(!1,!1);const a=e.geometry;if(a!==void 0)if(o&&a.attributes!=null&&a.attributes.position!==void 0){const d=a.attributes.position;for(let _=0,b=d.count;_<b;_++)_vector$b.fromBufferAttribute(d,_).applyMatrix4(e.matrixWorld),this.expandByPoint(_vector$b)}else a.boundingBox===null&&a.computeBoundingBox(),_box$3.copy(a.boundingBox),_box$3.applyMatrix4(e.matrixWorld),this.union(_box$3);const c=e.children;for(let d=0,_=c.length;d<_;d++)this.expandByObject(c[d],o);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,o){return o.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,_vector$b),_vector$b.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let o,a;return e.normal.x>0?(o=e.normal.x*this.min.x,a=e.normal.x*this.max.x):(o=e.normal.x*this.max.x,a=e.normal.x*this.min.x),e.normal.y>0?(o+=e.normal.y*this.min.y,a+=e.normal.y*this.max.y):(o+=e.normal.y*this.max.y,a+=e.normal.y*this.min.y),e.normal.z>0?(o+=e.normal.z*this.min.z,a+=e.normal.z*this.max.z):(o+=e.normal.z*this.max.z,a+=e.normal.z*this.min.z),o<=-e.constant&&a>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(e.a,_center),_v1$7.subVectors(e.b,_center),_v2$3.subVectors(e.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$3,_v1$7),_f2.subVectors(_v0$2,_v2$3);let o=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(o,_v0$2,_v1$7,_v2$3,_extents)||(o=[1,0,0,0,1,0,0,0,1],!satForAxes(o,_v0$2,_v1$7,_v2$3,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),o=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(o,_v0$2,_v1$7,_v2$3,_extents))}clampPoint(e,o){return o.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return _vector$b.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(_vector$b).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_points),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Box3.prototype.isBox3=!0;const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$3=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$3=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(s,e,o,a,c){for(let d=0,_=s.length-3;d<=_;d+=3){_testAxis.fromArray(s,d);const b=c.x*Math.abs(_testAxis.x)+c.y*Math.abs(_testAxis.y)+c.z*Math.abs(_testAxis.z),k=e.dot(_testAxis),j=o.dot(_testAxis),et=a.dot(_testAxis);if(Math.max(-Math.max(k,j,et),Math.min(k,j,et))>b)return!1}return!0}const _box$2=new Box3,_v1$6=new Vector3,_toFarthestPoint=new Vector3,_toPoint=new Vector3;class Sphere{constructor(e=new Vector3,o=-1){this.center=e,this.radius=o}set(e,o){return this.center.copy(e),this.radius=o,this}setFromPoints(e,o){const a=this.center;o!==void 0?a.copy(o):_box$2.setFromPoints(e).getCenter(a);let c=0;for(let d=0,_=e.length;d<_;d++)c=Math.max(c,a.distanceToSquared(e[d]));return this.radius=Math.sqrt(c),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const o=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=o*o}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,o){const a=this.center.distanceToSquared(e);return o.copy(e),a>this.radius*this.radius&&(o.sub(this.center).normalize(),o.multiplyScalar(this.radius).add(this.center)),o}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){_toPoint.subVectors(e,this.center);const o=_toPoint.lengthSq();if(o>this.radius*this.radius){const a=Math.sqrt(o),c=(a-this.radius)*.5;this.center.add(_toPoint.multiplyScalar(c/a)),this.radius+=c}return this}union(e){return this.center.equals(e.center)===!0?_toFarthestPoint.set(0,0,1).multiplyScalar(e.radius):_toFarthestPoint.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(_v1$6.copy(e.center).add(_toFarthestPoint)),this.expandByPoint(_v1$6.copy(e.center).sub(_toFarthestPoint)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(e=new Vector3,o=new Vector3(0,0,-1)){this.origin=e,this.direction=o}set(e,o){return this.origin.copy(e),this.direction.copy(o),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,o){return o.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,_vector$a)),this}closestPointToPoint(e,o){o.subVectors(e,this.origin);const a=o.dot(this.direction);return a<0?o.copy(this.origin):o.copy(this.direction).multiplyScalar(a).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const o=_vector$a.subVectors(e,this.origin).dot(this.direction);return o<0?this.origin.distanceToSquared(e):(_vector$a.copy(this.direction).multiplyScalar(o).add(this.origin),_vector$a.distanceToSquared(e))}distanceSqToSegment(e,o,a,c){_segCenter.copy(e).add(o).multiplyScalar(.5),_segDir.copy(o).sub(e).normalize(),_diff.copy(this.origin).sub(_segCenter);const d=e.distanceTo(o)*.5,_=-this.direction.dot(_segDir),b=_diff.dot(this.direction),k=-_diff.dot(_segDir),j=_diff.lengthSq(),et=Math.abs(1-_*_);let nt,tt,rt,at;if(et>0)if(nt=_*k-b,tt=_*b-k,at=d*et,nt>=0)if(tt>=-at)if(tt<=at){const lt=1/et;nt*=lt,tt*=lt,rt=nt*(nt+_*tt+2*b)+tt*(_*nt+tt+2*k)+j}else tt=d,nt=Math.max(0,-(_*tt+b)),rt=-nt*nt+tt*(tt+2*k)+j;else tt=-d,nt=Math.max(0,-(_*tt+b)),rt=-nt*nt+tt*(tt+2*k)+j;else tt<=-at?(nt=Math.max(0,-(-_*d+b)),tt=nt>0?-d:Math.min(Math.max(-d,-k),d),rt=-nt*nt+tt*(tt+2*k)+j):tt<=at?(nt=0,tt=Math.min(Math.max(-d,-k),d),rt=tt*(tt+2*k)+j):(nt=Math.max(0,-(_*d+b)),tt=nt>0?d:Math.min(Math.max(-d,-k),d),rt=-nt*nt+tt*(tt+2*k)+j);else tt=_>0?-d:d,nt=Math.max(0,-(_*tt+b)),rt=-nt*nt+tt*(tt+2*k)+j;return a&&a.copy(this.direction).multiplyScalar(nt).add(this.origin),c&&c.copy(_segDir).multiplyScalar(tt).add(_segCenter),rt}intersectSphere(e,o){_vector$a.subVectors(e.center,this.origin);const a=_vector$a.dot(this.direction),c=_vector$a.dot(_vector$a)-a*a,d=e.radius*e.radius;if(c>d)return null;const _=Math.sqrt(d-c),b=a-_,k=a+_;return b<0&&k<0?null:b<0?this.at(k,o):this.at(b,o)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const o=e.normal.dot(this.direction);if(o===0)return e.distanceToPoint(this.origin)===0?0:null;const a=-(this.origin.dot(e.normal)+e.constant)/o;return a>=0?a:null}intersectPlane(e,o){const a=this.distanceToPlane(e);return a===null?null:this.at(a,o)}intersectsPlane(e){const o=e.distanceToPoint(this.origin);return o===0||e.normal.dot(this.direction)*o<0}intersectBox(e,o){let a,c,d,_,b,k;const j=1/this.direction.x,et=1/this.direction.y,nt=1/this.direction.z,tt=this.origin;return j>=0?(a=(e.min.x-tt.x)*j,c=(e.max.x-tt.x)*j):(a=(e.max.x-tt.x)*j,c=(e.min.x-tt.x)*j),et>=0?(d=(e.min.y-tt.y)*et,_=(e.max.y-tt.y)*et):(d=(e.max.y-tt.y)*et,_=(e.min.y-tt.y)*et),a>_||d>c||((d>a||a!==a)&&(a=d),(_<c||c!==c)&&(c=_),nt>=0?(b=(e.min.z-tt.z)*nt,k=(e.max.z-tt.z)*nt):(b=(e.max.z-tt.z)*nt,k=(e.min.z-tt.z)*nt),a>k||b>c)||((b>a||a!==a)&&(a=b),(k<c||c!==c)&&(c=k),c<0)?null:this.at(a>=0?a:c,o)}intersectsBox(e){return this.intersectBox(e,_vector$a)!==null}intersectTriangle(e,o,a,c,d){_edge1.subVectors(o,e),_edge2.subVectors(a,e),_normal$1.crossVectors(_edge1,_edge2);let _=this.direction.dot(_normal$1),b;if(_>0){if(c)return null;b=1}else if(_<0)b=-1,_=-_;else return null;_diff.subVectors(this.origin,e);const k=b*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(k<0)return null;const j=b*this.direction.dot(_edge1.cross(_diff));if(j<0||k+j>_)return null;const et=-b*_diff.dot(_normal$1);return et<0?null:this.at(et/_,d)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,o,a,c,d,_,b,k,j,et,nt,tt,rt,at,lt,ut){const st=this.elements;return st[0]=e,st[4]=o,st[8]=a,st[12]=c,st[1]=d,st[5]=_,st[9]=b,st[13]=k,st[2]=j,st[6]=et,st[10]=nt,st[14]=tt,st[3]=rt,st[7]=at,st[11]=lt,st[15]=ut,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(e){const o=this.elements,a=e.elements;return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5],o[6]=a[6],o[7]=a[7],o[8]=a[8],o[9]=a[9],o[10]=a[10],o[11]=a[11],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15],this}copyPosition(e){const o=this.elements,a=e.elements;return o[12]=a[12],o[13]=a[13],o[14]=a[14],this}setFromMatrix3(e){const o=e.elements;return this.set(o[0],o[3],o[6],0,o[1],o[4],o[7],0,o[2],o[5],o[8],0,0,0,0,1),this}extractBasis(e,o,a){return e.setFromMatrixColumn(this,0),o.setFromMatrixColumn(this,1),a.setFromMatrixColumn(this,2),this}makeBasis(e,o,a){return this.set(e.x,o.x,a.x,0,e.y,o.y,a.y,0,e.z,o.z,a.z,0,0,0,0,1),this}extractRotation(e){const o=this.elements,a=e.elements,c=1/_v1$5.setFromMatrixColumn(e,0).length(),d=1/_v1$5.setFromMatrixColumn(e,1).length(),_=1/_v1$5.setFromMatrixColumn(e,2).length();return o[0]=a[0]*c,o[1]=a[1]*c,o[2]=a[2]*c,o[3]=0,o[4]=a[4]*d,o[5]=a[5]*d,o[6]=a[6]*d,o[7]=0,o[8]=a[8]*_,o[9]=a[9]*_,o[10]=a[10]*_,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const o=this.elements,a=e.x,c=e.y,d=e.z,_=Math.cos(a),b=Math.sin(a),k=Math.cos(c),j=Math.sin(c),et=Math.cos(d),nt=Math.sin(d);if(e.order==="XYZ"){const tt=_*et,rt=_*nt,at=b*et,lt=b*nt;o[0]=k*et,o[4]=-k*nt,o[8]=j,o[1]=rt+at*j,o[5]=tt-lt*j,o[9]=-b*k,o[2]=lt-tt*j,o[6]=at+rt*j,o[10]=_*k}else if(e.order==="YXZ"){const tt=k*et,rt=k*nt,at=j*et,lt=j*nt;o[0]=tt+lt*b,o[4]=at*b-rt,o[8]=_*j,o[1]=_*nt,o[5]=_*et,o[9]=-b,o[2]=rt*b-at,o[6]=lt+tt*b,o[10]=_*k}else if(e.order==="ZXY"){const tt=k*et,rt=k*nt,at=j*et,lt=j*nt;o[0]=tt-lt*b,o[4]=-_*nt,o[8]=at+rt*b,o[1]=rt+at*b,o[5]=_*et,o[9]=lt-tt*b,o[2]=-_*j,o[6]=b,o[10]=_*k}else if(e.order==="ZYX"){const tt=_*et,rt=_*nt,at=b*et,lt=b*nt;o[0]=k*et,o[4]=at*j-rt,o[8]=tt*j+lt,o[1]=k*nt,o[5]=lt*j+tt,o[9]=rt*j-at,o[2]=-j,o[6]=b*k,o[10]=_*k}else if(e.order==="YZX"){const tt=_*k,rt=_*j,at=b*k,lt=b*j;o[0]=k*et,o[4]=lt-tt*nt,o[8]=at*nt+rt,o[1]=nt,o[5]=_*et,o[9]=-b*et,o[2]=-j*et,o[6]=rt*nt+at,o[10]=tt-lt*nt}else if(e.order==="XZY"){const tt=_*k,rt=_*j,at=b*k,lt=b*j;o[0]=k*et,o[4]=-nt,o[8]=j*et,o[1]=tt*nt+lt,o[5]=_*et,o[9]=rt*nt-at,o[2]=at*nt-rt,o[6]=b*et,o[10]=lt*nt+tt}return o[3]=0,o[7]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_zero,e,_one)}lookAt(e,o,a){const c=this.elements;return _z.subVectors(e,o),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(a,_z),_x.lengthSq()===0&&(Math.abs(a.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(a,_z)),_x.normalize(),_y.crossVectors(_z,_x),c[0]=_x.x,c[4]=_y.x,c[8]=_z.x,c[1]=_x.y,c[5]=_y.y,c[9]=_z.y,c[2]=_x.z,c[6]=_y.z,c[10]=_z.z,this}multiply(e,o){return o!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,o)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,o){const a=e.elements,c=o.elements,d=this.elements,_=a[0],b=a[4],k=a[8],j=a[12],et=a[1],nt=a[5],tt=a[9],rt=a[13],at=a[2],lt=a[6],ut=a[10],st=a[14],it=a[3],ft=a[7],ct=a[11],dt=a[15],mt=c[0],gt=c[4],yt=c[8],St=c[12],Et=c[1],vt=c[5],_t=c[9],bt=c[13],At=c[2],Rt=c[6],Pt=c[10],Dt=c[14],Ft=c[3],Vt=c[7],Qt=c[11],Lt=c[15];return d[0]=_*mt+b*Et+k*At+j*Ft,d[4]=_*gt+b*vt+k*Rt+j*Vt,d[8]=_*yt+b*_t+k*Pt+j*Qt,d[12]=_*St+b*bt+k*Dt+j*Lt,d[1]=et*mt+nt*Et+tt*At+rt*Ft,d[5]=et*gt+nt*vt+tt*Rt+rt*Vt,d[9]=et*yt+nt*_t+tt*Pt+rt*Qt,d[13]=et*St+nt*bt+tt*Dt+rt*Lt,d[2]=at*mt+lt*Et+ut*At+st*Ft,d[6]=at*gt+lt*vt+ut*Rt+st*Vt,d[10]=at*yt+lt*_t+ut*Pt+st*Qt,d[14]=at*St+lt*bt+ut*Dt+st*Lt,d[3]=it*mt+ft*Et+ct*At+dt*Ft,d[7]=it*gt+ft*vt+ct*Rt+dt*Vt,d[11]=it*yt+ft*_t+ct*Pt+dt*Qt,d[15]=it*St+ft*bt+ct*Dt+dt*Lt,this}multiplyScalar(e){const o=this.elements;return o[0]*=e,o[4]*=e,o[8]*=e,o[12]*=e,o[1]*=e,o[5]*=e,o[9]*=e,o[13]*=e,o[2]*=e,o[6]*=e,o[10]*=e,o[14]*=e,o[3]*=e,o[7]*=e,o[11]*=e,o[15]*=e,this}determinant(){const e=this.elements,o=e[0],a=e[4],c=e[8],d=e[12],_=e[1],b=e[5],k=e[9],j=e[13],et=e[2],nt=e[6],tt=e[10],rt=e[14],at=e[3],lt=e[7],ut=e[11],st=e[15];return at*(+d*k*nt-c*j*nt-d*b*tt+a*j*tt+c*b*rt-a*k*rt)+lt*(+o*k*rt-o*j*tt+d*_*tt-c*_*rt+c*j*et-d*k*et)+ut*(+o*j*nt-o*b*rt-d*_*nt+a*_*rt+d*b*et-a*j*et)+st*(-c*b*et-o*k*nt+o*b*tt+c*_*nt-a*_*tt+a*k*et)}transpose(){const e=this.elements;let o;return o=e[1],e[1]=e[4],e[4]=o,o=e[2],e[2]=e[8],e[8]=o,o=e[6],e[6]=e[9],e[9]=o,o=e[3],e[3]=e[12],e[12]=o,o=e[7],e[7]=e[13],e[13]=o,o=e[11],e[11]=e[14],e[14]=o,this}setPosition(e,o,a){const c=this.elements;return e.isVector3?(c[12]=e.x,c[13]=e.y,c[14]=e.z):(c[12]=e,c[13]=o,c[14]=a),this}invert(){const e=this.elements,o=e[0],a=e[1],c=e[2],d=e[3],_=e[4],b=e[5],k=e[6],j=e[7],et=e[8],nt=e[9],tt=e[10],rt=e[11],at=e[12],lt=e[13],ut=e[14],st=e[15],it=nt*ut*j-lt*tt*j+lt*k*rt-b*ut*rt-nt*k*st+b*tt*st,ft=at*tt*j-et*ut*j-at*k*rt+_*ut*rt+et*k*st-_*tt*st,ct=et*lt*j-at*nt*j+at*b*rt-_*lt*rt-et*b*st+_*nt*st,dt=at*nt*k-et*lt*k-at*b*tt+_*lt*tt+et*b*ut-_*nt*ut,mt=o*it+a*ft+c*ct+d*dt;if(mt===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const gt=1/mt;return e[0]=it*gt,e[1]=(lt*tt*d-nt*ut*d-lt*c*rt+a*ut*rt+nt*c*st-a*tt*st)*gt,e[2]=(b*ut*d-lt*k*d+lt*c*j-a*ut*j-b*c*st+a*k*st)*gt,e[3]=(nt*k*d-b*tt*d-nt*c*j+a*tt*j+b*c*rt-a*k*rt)*gt,e[4]=ft*gt,e[5]=(et*ut*d-at*tt*d+at*c*rt-o*ut*rt-et*c*st+o*tt*st)*gt,e[6]=(at*k*d-_*ut*d-at*c*j+o*ut*j+_*c*st-o*k*st)*gt,e[7]=(_*tt*d-et*k*d+et*c*j-o*tt*j-_*c*rt+o*k*rt)*gt,e[8]=ct*gt,e[9]=(at*nt*d-et*lt*d-at*a*rt+o*lt*rt+et*a*st-o*nt*st)*gt,e[10]=(_*lt*d-at*b*d+at*a*j-o*lt*j-_*a*st+o*b*st)*gt,e[11]=(et*b*d-_*nt*d-et*a*j+o*nt*j+_*a*rt-o*b*rt)*gt,e[12]=dt*gt,e[13]=(et*lt*c-at*nt*c+at*a*tt-o*lt*tt-et*a*ut+o*nt*ut)*gt,e[14]=(at*b*c-_*lt*c-at*a*k+o*lt*k+_*a*ut-o*b*ut)*gt,e[15]=(_*nt*c-et*b*c+et*a*k-o*nt*k-_*a*tt+o*b*tt)*gt,this}scale(e){const o=this.elements,a=e.x,c=e.y,d=e.z;return o[0]*=a,o[4]*=c,o[8]*=d,o[1]*=a,o[5]*=c,o[9]*=d,o[2]*=a,o[6]*=c,o[10]*=d,o[3]*=a,o[7]*=c,o[11]*=d,this}getMaxScaleOnAxis(){const e=this.elements,o=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],a=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],c=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(o,a,c))}makeTranslation(e,o,a){return this.set(1,0,0,e,0,1,0,o,0,0,1,a,0,0,0,1),this}makeRotationX(e){const o=Math.cos(e),a=Math.sin(e);return this.set(1,0,0,0,0,o,-a,0,0,a,o,0,0,0,0,1),this}makeRotationY(e){const o=Math.cos(e),a=Math.sin(e);return this.set(o,0,a,0,0,1,0,0,-a,0,o,0,0,0,0,1),this}makeRotationZ(e){const o=Math.cos(e),a=Math.sin(e);return this.set(o,-a,0,0,a,o,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,o){const a=Math.cos(o),c=Math.sin(o),d=1-a,_=e.x,b=e.y,k=e.z,j=d*_,et=d*b;return this.set(j*_+a,j*b-c*k,j*k+c*b,0,j*b+c*k,et*b+a,et*k-c*_,0,j*k-c*b,et*k+c*_,d*k*k+a,0,0,0,0,1),this}makeScale(e,o,a){return this.set(e,0,0,0,0,o,0,0,0,0,a,0,0,0,0,1),this}makeShear(e,o,a,c,d,_){return this.set(1,a,d,0,e,1,_,0,o,c,1,0,0,0,0,1),this}compose(e,o,a){const c=this.elements,d=o._x,_=o._y,b=o._z,k=o._w,j=d+d,et=_+_,nt=b+b,tt=d*j,rt=d*et,at=d*nt,lt=_*et,ut=_*nt,st=b*nt,it=k*j,ft=k*et,ct=k*nt,dt=a.x,mt=a.y,gt=a.z;return c[0]=(1-(lt+st))*dt,c[1]=(rt+ct)*dt,c[2]=(at-ft)*dt,c[3]=0,c[4]=(rt-ct)*mt,c[5]=(1-(tt+st))*mt,c[6]=(ut+it)*mt,c[7]=0,c[8]=(at+ft)*gt,c[9]=(ut-it)*gt,c[10]=(1-(tt+lt))*gt,c[11]=0,c[12]=e.x,c[13]=e.y,c[14]=e.z,c[15]=1,this}decompose(e,o,a){const c=this.elements;let d=_v1$5.set(c[0],c[1],c[2]).length();const _=_v1$5.set(c[4],c[5],c[6]).length(),b=_v1$5.set(c[8],c[9],c[10]).length();this.determinant()<0&&(d=-d),e.x=c[12],e.y=c[13],e.z=c[14],_m1$2.copy(this);const j=1/d,et=1/_,nt=1/b;return _m1$2.elements[0]*=j,_m1$2.elements[1]*=j,_m1$2.elements[2]*=j,_m1$2.elements[4]*=et,_m1$2.elements[5]*=et,_m1$2.elements[6]*=et,_m1$2.elements[8]*=nt,_m1$2.elements[9]*=nt,_m1$2.elements[10]*=nt,o.setFromRotationMatrix(_m1$2),a.x=d,a.y=_,a.z=b,this}makePerspective(e,o,a,c,d,_){_===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const b=this.elements,k=2*d/(o-e),j=2*d/(a-c),et=(o+e)/(o-e),nt=(a+c)/(a-c),tt=-(_+d)/(_-d),rt=-2*_*d/(_-d);return b[0]=k,b[4]=0,b[8]=et,b[12]=0,b[1]=0,b[5]=j,b[9]=nt,b[13]=0,b[2]=0,b[6]=0,b[10]=tt,b[14]=rt,b[3]=0,b[7]=0,b[11]=-1,b[15]=0,this}makeOrthographic(e,o,a,c,d,_){const b=this.elements,k=1/(o-e),j=1/(a-c),et=1/(_-d),nt=(o+e)*k,tt=(a+c)*j,rt=(_+d)*et;return b[0]=2*k,b[4]=0,b[8]=0,b[12]=-nt,b[1]=0,b[5]=2*j,b[9]=0,b[13]=-tt,b[2]=0,b[6]=0,b[10]=-2*et,b[14]=-rt,b[3]=0,b[7]=0,b[11]=0,b[15]=1,this}equals(e){const o=this.elements,a=e.elements;for(let c=0;c<16;c++)if(o[c]!==a[c])return!1;return!0}fromArray(e,o=0){for(let a=0;a<16;a++)this.elements[a]=e[a+o];return this}toArray(e=[],o=0){const a=this.elements;return e[o]=a[0],e[o+1]=a[1],e[o+2]=a[2],e[o+3]=a[3],e[o+4]=a[4],e[o+5]=a[5],e[o+6]=a[6],e[o+7]=a[7],e[o+8]=a[8],e[o+9]=a[9],e[o+10]=a[10],e[o+11]=a[11],e[o+12]=a[12],e[o+13]=a[13],e[o+14]=a[14],e[o+15]=a[15],e}}Matrix4.prototype.isMatrix4=!0;const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$1=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(e=0,o=0,a=0,c=Euler.DefaultOrder){this._x=e,this._y=o,this._z=a,this._order=c}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,o,a,c=this._order){return this._x=e,this._y=o,this._z=a,this._order=c,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,o=this._order,a=!0){const c=e.elements,d=c[0],_=c[4],b=c[8],k=c[1],j=c[5],et=c[9],nt=c[2],tt=c[6],rt=c[10];switch(o){case"XYZ":this._y=Math.asin(clamp(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(-et,rt),this._z=Math.atan2(-_,d)):(this._x=Math.atan2(tt,j),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(et,-1,1)),Math.abs(et)<.9999999?(this._y=Math.atan2(b,rt),this._z=Math.atan2(k,j)):(this._y=Math.atan2(-nt,d),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(tt,-1,1)),Math.abs(tt)<.9999999?(this._y=Math.atan2(-nt,rt),this._z=Math.atan2(-_,j)):(this._y=0,this._z=Math.atan2(k,d));break;case"ZYX":this._y=Math.asin(-clamp(nt,-1,1)),Math.abs(nt)<.9999999?(this._x=Math.atan2(tt,rt),this._z=Math.atan2(k,d)):(this._x=0,this._z=Math.atan2(-_,j));break;case"YZX":this._z=Math.asin(clamp(k,-1,1)),Math.abs(k)<.9999999?(this._x=Math.atan2(-et,j),this._y=Math.atan2(-nt,d)):(this._x=0,this._y=Math.atan2(b,rt));break;case"XZY":this._z=Math.asin(-clamp(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(tt,j),this._y=Math.atan2(b,d)):(this._x=Math.atan2(-et,rt),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+o)}return this._order=o,a===!0&&this._onChangeCallback(),this}setFromQuaternion(e,o,a){return _matrix$1.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_matrix$1,o,a)}setFromVector3(e,o=this._order){return this.set(e.x,e.y,e.z,o)}reorder(e){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],o=0){return e[o]=this._x,e[o+1]=this._y,e[o+2]=this._z,e[o+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Euler.prototype.isEuler=!0;Euler.DefaultOrder="XYZ";Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Layers{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};class Object3D extends EventDispatcher{constructor(){super();Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID$1(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();const e=new Vector3,o=new Euler,a=new Quaternion,c=new Vector3(1,1,1);function d(){a.setFromEuler(o,!1)}function _(){o.setFromQuaternion(a,void 0,!1)}o._onChange(d),a._onChange(_),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:o},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:c},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,o){this.quaternion.setFromAxisAngle(e,o)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,o){return _q1.setFromAxisAngle(e,o),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(e,o){return _q1.setFromAxisAngle(e,o),this.quaternion.premultiply(_q1),this}rotateX(e){return this.rotateOnAxis(_xAxis,e)}rotateY(e){return this.rotateOnAxis(_yAxis,e)}rotateZ(e){return this.rotateOnAxis(_zAxis,e)}translateOnAxis(e,o){return _v1$4.copy(e).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(o)),this}translateX(e){return this.translateOnAxis(_xAxis,e)}translateY(e){return this.translateOnAxis(_yAxis,e)}translateZ(e){return this.translateOnAxis(_zAxis,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt(e,o,a){e.isVector3?_target.copy(e):_target.set(e,o,a);const c=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),c&&(_m1$1.extractRotation(c.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add(e){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.add(arguments[o]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.remove(arguments[a]);return this}const o=this.children.indexOf(e);return o!==-1&&(e.parent=null,this.children.splice(o,1),e.dispatchEvent(_removedEvent)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const o=this.children[e];o.parent=null,o.dispatchEvent(_removedEvent)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(e.parent.matrixWorld)),e.applyMatrix4(_m1$1),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,o){if(this[e]===o)return this;for(let a=0,c=this.children.length;a<c;a++){const _=this.children[a].getObjectByProperty(e,o);if(_!==void 0)return _}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,e,_scale$2),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const o=this.matrixWorld.elements;return e.set(o[8],o[9],o[10]).normalize()}raycast(){}traverse(e){e(this);const o=this.children;for(let a=0,c=o.length;a<c;a++)o[a].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const o=this.children;for(let a=0,c=o.length;a<c;a++)o[a].traverseVisible(e)}traverseAncestors(e){const o=this.parent;o!==null&&(e(o),o.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const o=this.children;for(let a=0,c=o.length;a<c;a++)o[a].updateMatrixWorld(e)}updateWorldMatrix(e,o){const a=this.parent;if(e===!0&&a!==null&&a.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),o===!0){const c=this.children;for(let d=0,_=c.length;d<_;d++)c[d].updateWorldMatrix(!1,!0)}}toJSON(e){const o=e===void 0||typeof e=="string",a={};o&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},a.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const c={};c.uuid=this.uuid,c.type=this.type,this.name!==""&&(c.name=this.name),this.castShadow===!0&&(c.castShadow=!0),this.receiveShadow===!0&&(c.receiveShadow=!0),this.visible===!1&&(c.visible=!1),this.frustumCulled===!1&&(c.frustumCulled=!1),this.renderOrder!==0&&(c.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(c.userData=this.userData),c.layers=this.layers.mask,c.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(c.matrixAutoUpdate=!1),this.isInstancedMesh&&(c.type="InstancedMesh",c.count=this.count,c.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(c.instanceColor=this.instanceColor.toJSON()));function d(b,k){return b[k.uuid]===void 0&&(b[k.uuid]=k.toJSON(e)),k.uuid}if(this.isScene)this.background&&(this.background.isColor?c.background=this.background.toJSON():this.background.isTexture&&(c.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(c.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){c.geometry=d(e.geometries,this.geometry);const b=this.geometry.parameters;if(b!==void 0&&b.shapes!==void 0){const k=b.shapes;if(Array.isArray(k))for(let j=0,et=k.length;j<et;j++){const nt=k[j];d(e.shapes,nt)}else d(e.shapes,k)}}if(this.isSkinnedMesh&&(c.bindMode=this.bindMode,c.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(d(e.skeletons,this.skeleton),c.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const b=[];for(let k=0,j=this.material.length;k<j;k++)b.push(d(e.materials,this.material[k]));c.material=b}else c.material=d(e.materials,this.material);if(this.children.length>0){c.children=[];for(let b=0;b<this.children.length;b++)c.children.push(this.children[b].toJSON(e).object)}if(this.animations.length>0){c.animations=[];for(let b=0;b<this.animations.length;b++){const k=this.animations[b];c.animations.push(d(e.animations,k))}}if(o){const b=_(e.geometries),k=_(e.materials),j=_(e.textures),et=_(e.images),nt=_(e.shapes),tt=_(e.skeletons),rt=_(e.animations),at=_(e.nodes);b.length>0&&(a.geometries=b),k.length>0&&(a.materials=k),j.length>0&&(a.textures=j),et.length>0&&(a.images=et),nt.length>0&&(a.shapes=nt),tt.length>0&&(a.skeletons=tt),rt.length>0&&(a.animations=rt),at.length>0&&(a.nodes=at)}return a.object=c,a;function _(b){const k=[];for(const j in b){const et=b[j];delete et.metadata,k.push(et)}return k}}clone(e){return new this.constructor().copy(this,e)}copy(e,o=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),o===!0)for(let a=0;a<e.children.length;a++){const c=e.children[a];this.add(c.clone())}return this}}Object3D.DefaultUp=new Vector3(0,1,0);Object3D.DefaultMatrixAutoUpdate=!0;Object3D.prototype.isObject3D=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$1=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;class Triangle{constructor(e=new Vector3,o=new Vector3,a=new Vector3){this.a=e,this.b=o,this.c=a}static getNormal(e,o,a,c){c.subVectors(a,o),_v0$1.subVectors(e,o),c.cross(_v0$1);const d=c.lengthSq();return d>0?c.multiplyScalar(1/Math.sqrt(d)):c.set(0,0,0)}static getBarycoord(e,o,a,c,d){_v0$1.subVectors(c,o),_v1$3.subVectors(a,o),_v2$2.subVectors(e,o);const _=_v0$1.dot(_v0$1),b=_v0$1.dot(_v1$3),k=_v0$1.dot(_v2$2),j=_v1$3.dot(_v1$3),et=_v1$3.dot(_v2$2),nt=_*j-b*b;if(nt===0)return d.set(-2,-1,-1);const tt=1/nt,rt=(j*k-b*et)*tt,at=(_*et-b*k)*tt;return d.set(1-rt-at,at,rt)}static containsPoint(e,o,a,c){return this.getBarycoord(e,o,a,c,_v3$1),_v3$1.x>=0&&_v3$1.y>=0&&_v3$1.x+_v3$1.y<=1}static getUV(e,o,a,c,d,_,b,k){return this.getBarycoord(e,o,a,c,_v3$1),k.set(0,0),k.addScaledVector(d,_v3$1.x),k.addScaledVector(_,_v3$1.y),k.addScaledVector(b,_v3$1.z),k}static isFrontFacing(e,o,a,c){return _v0$1.subVectors(a,o),_v1$3.subVectors(e,o),_v0$1.cross(_v1$3).dot(c)<0}set(e,o,a){return this.a.copy(e),this.b.copy(o),this.c.copy(a),this}setFromPointsAndIndices(e,o,a,c){return this.a.copy(e[o]),this.b.copy(e[a]),this.c.copy(e[c]),this}setFromAttributeAndIndices(e,o,a,c){return this.a.fromBufferAttribute(e,o),this.b.fromBufferAttribute(e,a),this.c.fromBufferAttribute(e,c),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Triangle.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,o){return Triangle.getBarycoord(e,this.a,this.b,this.c,o)}getUV(e,o,a,c,d){return Triangle.getUV(e,this.a,this.b,this.c,o,a,c,d)}containsPoint(e){return Triangle.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Triangle.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,o){const a=this.a,c=this.b,d=this.c;let _,b;_vab.subVectors(c,a),_vac.subVectors(d,a),_vap.subVectors(e,a);const k=_vab.dot(_vap),j=_vac.dot(_vap);if(k<=0&&j<=0)return o.copy(a);_vbp.subVectors(e,c);const et=_vab.dot(_vbp),nt=_vac.dot(_vbp);if(et>=0&&nt<=et)return o.copy(c);const tt=k*nt-et*j;if(tt<=0&&k>=0&&et<=0)return _=k/(k-et),o.copy(a).addScaledVector(_vab,_);_vcp.subVectors(e,d);const rt=_vab.dot(_vcp),at=_vac.dot(_vcp);if(at>=0&&rt<=at)return o.copy(d);const lt=rt*j-k*at;if(lt<=0&&j>=0&&at<=0)return b=j/(j-at),o.copy(a).addScaledVector(_vac,b);const ut=et*at-rt*nt;if(ut<=0&&nt-et>=0&&rt-at>=0)return _vbc.subVectors(d,c),b=(nt-et)/(nt-et+(rt-at)),o.copy(c).addScaledVector(_vbc,b);const st=1/(ut+lt+tt);return _=lt*st,b=tt*st,o.copy(a).addScaledVector(_vab,_).addScaledVector(_vac,b)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let materialId=0;class Material extends EventDispatcher{constructor(){super();Object.defineProperty(this,"id",{value:materialId++}),this.uuid=generateUUID$1(),this.name="",this.type="Material",this.fog=!0,this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const o in e){const a=e[o];if(a===void 0){console.warn("THREE.Material: '"+o+"' parameter is undefined.");continue}if(o==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=a===FlatShading;continue}const c=this[o];if(c===void 0){console.warn("THREE."+this.type+": '"+o+"' is not a property of this material.");continue}c&&c.isColor?c.set(a):c&&c.isVector3&&a&&a.isVector3?c.copy(a):this[o]=a}}toJSON(e){const o=e===void 0||typeof e=="string";o&&(e={textures:{},images:{}});const a={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.color&&this.color.isColor&&(a.color=this.color.getHex()),this.roughness!==void 0&&(a.roughness=this.roughness),this.metalness!==void 0&&(a.metalness=this.metalness),this.sheen!==void 0&&(a.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(a.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(a.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(a.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(a.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(a.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(a.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(a.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(a.shininess=this.shininess),this.clearcoat!==void 0&&(a.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(a.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(a.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(a.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,a.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(a.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(a.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(a.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(a.lightMap=this.lightMap.toJSON(e).uuid,a.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(a.aoMap=this.aoMap.toJSON(e).uuid,a.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(a.bumpMap=this.bumpMap.toJSON(e).uuid,a.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(a.normalMap=this.normalMap.toJSON(e).uuid,a.normalMapType=this.normalMapType,a.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(a.displacementMap=this.displacementMap.toJSON(e).uuid,a.displacementScale=this.displacementScale,a.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(a.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(a.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(a.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(a.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(a.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(a.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(a.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(a.combine=this.combine)),this.envMapIntensity!==void 0&&(a.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(a.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(a.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(a.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(a.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(a.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(a.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(a.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(a.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(a.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(a.size=this.size),this.shadowSide!==null&&(a.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(a.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(a.blending=this.blending),this.side!==FrontSide&&(a.side=this.side),this.vertexColors&&(a.vertexColors=!0),this.opacity<1&&(a.opacity=this.opacity),this.transparent===!0&&(a.transparent=this.transparent),a.depthFunc=this.depthFunc,a.depthTest=this.depthTest,a.depthWrite=this.depthWrite,a.colorWrite=this.colorWrite,a.stencilWrite=this.stencilWrite,a.stencilWriteMask=this.stencilWriteMask,a.stencilFunc=this.stencilFunc,a.stencilRef=this.stencilRef,a.stencilFuncMask=this.stencilFuncMask,a.stencilFail=this.stencilFail,a.stencilZFail=this.stencilZFail,a.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(a.rotation=this.rotation),this.polygonOffset===!0&&(a.polygonOffset=!0),this.polygonOffsetFactor!==0&&(a.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(a.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(a.linewidth=this.linewidth),this.dashSize!==void 0&&(a.dashSize=this.dashSize),this.gapSize!==void 0&&(a.gapSize=this.gapSize),this.scale!==void 0&&(a.scale=this.scale),this.dithering===!0&&(a.dithering=!0),this.alphaTest>0&&(a.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(a.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(a.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(a.wireframe=this.wireframe),this.wireframeLinewidth>1&&(a.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(a.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(a.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(a.flatShading=this.flatShading),this.visible===!1&&(a.visible=!1),this.toneMapped===!1&&(a.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(a.userData=this.userData);function c(d){const _=[];for(const b in d){const k=d[b];delete k.metadata,_.push(k)}return _}if(o){const d=c(e.textures),_=c(e.images);d.length>0&&(a.textures=d),_.length>0&&(a.images=_)}return a}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const o=e.clippingPlanes;let a=null;if(o!==null){const c=o.length;a=new Array(c);for(let d=0;d!==c;++d)a[d]=o[d].clone()}return this.clippingPlanes=a,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}Material.prototype.isMaterial=!0;Material.fromType=function(){return null};class MeshBasicMaterial extends Material{constructor(e){super();this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;const _vector$9=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(e,o,a){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=o,this.count=e!==void 0?e.length/o:0,this.normalized=a===!0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,o,a){e*=this.itemSize,a*=o.itemSize;for(let c=0,d=this.itemSize;c<d;c++)this.array[e+c]=o.array[a+c];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const o=this.array;let a=0;for(let c=0,d=e.length;c<d;c++){let _=e[c];_===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",c),_=new Color),o[a++]=_.r,o[a++]=_.g,o[a++]=_.b}return this}copyVector2sArray(e){const o=this.array;let a=0;for(let c=0,d=e.length;c<d;c++){let _=e[c];_===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",c),_=new Vector2),o[a++]=_.x,o[a++]=_.y}return this}copyVector3sArray(e){const o=this.array;let a=0;for(let c=0,d=e.length;c<d;c++){let _=e[c];_===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",c),_=new Vector3),o[a++]=_.x,o[a++]=_.y,o[a++]=_.z}return this}copyVector4sArray(e){const o=this.array;let a=0;for(let c=0,d=e.length;c<d;c++){let _=e[c];_===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",c),_=new Vector4),o[a++]=_.x,o[a++]=_.y,o[a++]=_.z,o[a++]=_.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let o=0,a=this.count;o<a;o++)_vector2$1.fromBufferAttribute(this,o),_vector2$1.applyMatrix3(e),this.setXY(o,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let o=0,a=this.count;o<a;o++)_vector$9.fromBufferAttribute(this,o),_vector$9.applyMatrix3(e),this.setXYZ(o,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(e){for(let o=0,a=this.count;o<a;o++)_vector$9.x=this.getX(o),_vector$9.y=this.getY(o),_vector$9.z=this.getZ(o),_vector$9.applyMatrix4(e),this.setXYZ(o,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(e){for(let o=0,a=this.count;o<a;o++)_vector$9.x=this.getX(o),_vector$9.y=this.getY(o),_vector$9.z=this.getZ(o),_vector$9.applyNormalMatrix(e),this.setXYZ(o,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(e){for(let o=0,a=this.count;o<a;o++)_vector$9.x=this.getX(o),_vector$9.y=this.getY(o),_vector$9.z=this.getZ(o),_vector$9.transformDirection(e),this.setXYZ(o,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(e,o=0){return this.array.set(e,o),this}getX(e){return this.array[e*this.itemSize]}setX(e,o){return this.array[e*this.itemSize]=o,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,o){return this.array[e*this.itemSize+1]=o,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,o){return this.array[e*this.itemSize+2]=o,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,o){return this.array[e*this.itemSize+3]=o,this}setXY(e,o,a){return e*=this.itemSize,this.array[e+0]=o,this.array[e+1]=a,this}setXYZ(e,o,a,c){return e*=this.itemSize,this.array[e+0]=o,this.array[e+1]=a,this.array[e+2]=c,this}setXYZW(e,o,a,c,d){return e*=this.itemSize,this.array[e+0]=o,this.array[e+1]=a,this.array[e+2]=c,this.array[e+3]=d,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==StaticDrawUsage&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}BufferAttribute.prototype.isBufferAttribute=!0;class Int8BufferAttribute extends BufferAttribute{constructor(e,o,a){super(new Int8Array(e),o,a)}}class Uint8BufferAttribute extends BufferAttribute{constructor(e,o,a){super(new Uint8Array(e),o,a)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(e,o,a){super(new Uint8ClampedArray(e),o,a)}}class Int16BufferAttribute extends BufferAttribute{constructor(e,o,a){super(new Int16Array(e),o,a)}}class Uint16BufferAttribute extends BufferAttribute{constructor(e,o,a){super(new Uint16Array(e),o,a)}}class Int32BufferAttribute extends BufferAttribute{constructor(e,o,a){super(new Int32Array(e),o,a)}}class Uint32BufferAttribute extends BufferAttribute{constructor(e,o,a){super(new Uint32Array(e),o,a)}}class Float16BufferAttribute extends BufferAttribute{constructor(e,o,a){super(new Uint16Array(e),o,a)}}Float16BufferAttribute.prototype.isFloat16BufferAttribute=!0;class Float32BufferAttribute extends BufferAttribute{constructor(e,o,a){super(new Float32Array(e),o,a)}}class Float64BufferAttribute extends BufferAttribute{constructor(e,o,a){super(new Float64Array(e),o,a)}}let _id$1=0;const _m1=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$1=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super();Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID$1(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(arrayNeedsUint32(e)?Uint32BufferAttribute:Uint16BufferAttribute)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,o){return this.attributes[e]=o,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,o,a=0){this.groups.push({start:e,count:o,materialIndex:a})}clearGroups(){this.groups=[]}setDrawRange(e,o){this.drawRange.start=e,this.drawRange.count=o}applyMatrix4(e){const o=this.attributes.position;o!==void 0&&(o.applyMatrix4(e),o.needsUpdate=!0);const a=this.attributes.normal;if(a!==void 0){const d=new Matrix3().getNormalMatrix(e);a.applyNormalMatrix(d),a.needsUpdate=!0}const c=this.attributes.tangent;return c!==void 0&&(c.transformDirection(e),c.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return _m1.makeRotationFromQuaternion(e),this.applyMatrix4(_m1),this}rotateX(e){return _m1.makeRotationX(e),this.applyMatrix4(_m1),this}rotateY(e){return _m1.makeRotationY(e),this.applyMatrix4(_m1),this}rotateZ(e){return _m1.makeRotationZ(e),this.applyMatrix4(_m1),this}translate(e,o,a){return _m1.makeTranslation(e,o,a),this.applyMatrix4(_m1),this}scale(e,o,a){return _m1.makeScale(e,o,a),this.applyMatrix4(_m1),this}lookAt(e){return _obj.lookAt(e),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(e){const o=[];for(let a=0,c=e.length;a<c;a++){const d=e[a];o.push(d.x,d.y,d.z||0)}return this.setAttribute("position",new Float32BufferAttribute(o,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const e=this.attributes.position,o=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),o)for(let a=0,c=o.length;a<c;a++){const d=o[a];_box$1.setFromBufferAttribute(d),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$1.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$1.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$1.min),this.boundingBox.expandByPoint(_box$1.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const e=this.attributes.position,o=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Vector3,1/0);return}if(e){const a=this.boundingSphere.center;if(_box$1.setFromBufferAttribute(e),o)for(let d=0,_=o.length;d<_;d++){const b=o[d];_boxMorphTargets.setFromBufferAttribute(b),this.morphTargetsRelative?(_vector$8.addVectors(_box$1.min,_boxMorphTargets.min),_box$1.expandByPoint(_vector$8),_vector$8.addVectors(_box$1.max,_boxMorphTargets.max),_box$1.expandByPoint(_vector$8)):(_box$1.expandByPoint(_boxMorphTargets.min),_box$1.expandByPoint(_boxMorphTargets.max))}_box$1.getCenter(a);let c=0;for(let d=0,_=e.count;d<_;d++)_vector$8.fromBufferAttribute(e,d),c=Math.max(c,a.distanceToSquared(_vector$8));if(o)for(let d=0,_=o.length;d<_;d++){const b=o[d],k=this.morphTargetsRelative;for(let j=0,et=b.count;j<et;j++)_vector$8.fromBufferAttribute(b,j),k&&(_offset.fromBufferAttribute(e,j),_vector$8.add(_offset)),c=Math.max(c,a.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(c),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,o=this.attributes;if(e===null||o.position===void 0||o.normal===void 0||o.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const a=e.array,c=o.position.array,d=o.normal.array,_=o.uv.array,b=c.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*b),4));const k=this.getAttribute("tangent").array,j=[],et=[];for(let Et=0;Et<b;Et++)j[Et]=new Vector3,et[Et]=new Vector3;const nt=new Vector3,tt=new Vector3,rt=new Vector3,at=new Vector2,lt=new Vector2,ut=new Vector2,st=new Vector3,it=new Vector3;function ft(Et,vt,_t){nt.fromArray(c,Et*3),tt.fromArray(c,vt*3),rt.fromArray(c,_t*3),at.fromArray(_,Et*2),lt.fromArray(_,vt*2),ut.fromArray(_,_t*2),tt.sub(nt),rt.sub(nt),lt.sub(at),ut.sub(at);const bt=1/(lt.x*ut.y-ut.x*lt.y);!isFinite(bt)||(st.copy(tt).multiplyScalar(ut.y).addScaledVector(rt,-lt.y).multiplyScalar(bt),it.copy(rt).multiplyScalar(lt.x).addScaledVector(tt,-ut.x).multiplyScalar(bt),j[Et].add(st),j[vt].add(st),j[_t].add(st),et[Et].add(it),et[vt].add(it),et[_t].add(it))}let ct=this.groups;ct.length===0&&(ct=[{start:0,count:a.length}]);for(let Et=0,vt=ct.length;Et<vt;++Et){const _t=ct[Et],bt=_t.start,At=_t.count;for(let Rt=bt,Pt=bt+At;Rt<Pt;Rt+=3)ft(a[Rt+0],a[Rt+1],a[Rt+2])}const dt=new Vector3,mt=new Vector3,gt=new Vector3,yt=new Vector3;function St(Et){gt.fromArray(d,Et*3),yt.copy(gt);const vt=j[Et];dt.copy(vt),dt.sub(gt.multiplyScalar(gt.dot(vt))).normalize(),mt.crossVectors(yt,vt);const bt=mt.dot(et[Et])<0?-1:1;k[Et*4]=dt.x,k[Et*4+1]=dt.y,k[Et*4+2]=dt.z,k[Et*4+3]=bt}for(let Et=0,vt=ct.length;Et<vt;++Et){const _t=ct[Et],bt=_t.start,At=_t.count;for(let Rt=bt,Pt=bt+At;Rt<Pt;Rt+=3)St(a[Rt+0]),St(a[Rt+1]),St(a[Rt+2])}}computeVertexNormals(){const e=this.index,o=this.getAttribute("position");if(o!==void 0){let a=this.getAttribute("normal");if(a===void 0)a=new BufferAttribute(new Float32Array(o.count*3),3),this.setAttribute("normal",a);else for(let tt=0,rt=a.count;tt<rt;tt++)a.setXYZ(tt,0,0,0);const c=new Vector3,d=new Vector3,_=new Vector3,b=new Vector3,k=new Vector3,j=new Vector3,et=new Vector3,nt=new Vector3;if(e)for(let tt=0,rt=e.count;tt<rt;tt+=3){const at=e.getX(tt+0),lt=e.getX(tt+1),ut=e.getX(tt+2);c.fromBufferAttribute(o,at),d.fromBufferAttribute(o,lt),_.fromBufferAttribute(o,ut),et.subVectors(_,d),nt.subVectors(c,d),et.cross(nt),b.fromBufferAttribute(a,at),k.fromBufferAttribute(a,lt),j.fromBufferAttribute(a,ut),b.add(et),k.add(et),j.add(et),a.setXYZ(at,b.x,b.y,b.z),a.setXYZ(lt,k.x,k.y,k.z),a.setXYZ(ut,j.x,j.y,j.z)}else for(let tt=0,rt=o.count;tt<rt;tt+=3)c.fromBufferAttribute(o,tt+0),d.fromBufferAttribute(o,tt+1),_.fromBufferAttribute(o,tt+2),et.subVectors(_,d),nt.subVectors(c,d),et.cross(nt),a.setXYZ(tt+0,et.x,et.y,et.z),a.setXYZ(tt+1,et.x,et.y,et.z),a.setXYZ(tt+2,et.x,et.y,et.z);this.normalizeNormals(),a.needsUpdate=!0}}merge(e,o){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}o===void 0&&(o=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const a=this.attributes;for(const c in a){if(e.attributes[c]===void 0)continue;const _=a[c].array,b=e.attributes[c],k=b.array,j=b.itemSize*o,et=Math.min(k.length,_.length-j);for(let nt=0,tt=j;nt<et;nt++,tt++)_[tt]=k[nt]}return this}normalizeNormals(){const e=this.attributes.normal;for(let o=0,a=e.count;o<a;o++)_vector$8.fromBufferAttribute(e,o),_vector$8.normalize(),e.setXYZ(o,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function e(b,k){const j=b.array,et=b.itemSize,nt=b.normalized,tt=new j.constructor(k.length*et);let rt=0,at=0;for(let lt=0,ut=k.length;lt<ut;lt++){b.isInterleavedBufferAttribute?rt=k[lt]*b.data.stride+b.offset:rt=k[lt]*et;for(let st=0;st<et;st++)tt[at++]=j[rt++]}return new BufferAttribute(tt,et,nt)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const o=new BufferGeometry,a=this.index.array,c=this.attributes;for(const b in c){const k=c[b],j=e(k,a);o.setAttribute(b,j)}const d=this.morphAttributes;for(const b in d){const k=[],j=d[b];for(let et=0,nt=j.length;et<nt;et++){const tt=j[et],rt=e(tt,a);k.push(rt)}o.morphAttributes[b]=k}o.morphTargetsRelative=this.morphTargetsRelative;const _=this.groups;for(let b=0,k=_.length;b<k;b++){const j=_[b];o.addGroup(j.start,j.count,j.materialIndex)}return o}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const k=this.parameters;for(const j in k)k[j]!==void 0&&(e[j]=k[j]);return e}e.data={attributes:{}};const o=this.index;o!==null&&(e.data.index={type:o.array.constructor.name,array:Array.prototype.slice.call(o.array)});const a=this.attributes;for(const k in a){const j=a[k];e.data.attributes[k]=j.toJSON(e.data)}const c={};let d=!1;for(const k in this.morphAttributes){const j=this.morphAttributes[k],et=[];for(let nt=0,tt=j.length;nt<tt;nt++){const rt=j[nt];et.push(rt.toJSON(e.data))}et.length>0&&(c[k]=et,d=!0)}d&&(e.data.morphAttributes=c,e.data.morphTargetsRelative=this.morphTargetsRelative);const _=this.groups;_.length>0&&(e.data.groups=JSON.parse(JSON.stringify(_)));const b=this.boundingSphere;return b!==null&&(e.data.boundingSphere={center:b.center.toArray(),radius:b.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const o={};this.name=e.name;const a=e.index;a!==null&&this.setIndex(a.clone(o));const c=e.attributes;for(const j in c){const et=c[j];this.setAttribute(j,et.clone(o))}const d=e.morphAttributes;for(const j in d){const et=[],nt=d[j];for(let tt=0,rt=nt.length;tt<rt;tt++)et.push(nt[tt].clone(o));this.morphAttributes[j]=et}this.morphTargetsRelative=e.morphTargetsRelative;const _=e.groups;for(let j=0,et=_.length;j<et;j++){const nt=_[j];this.addGroup(nt.start,nt.count,nt.materialIndex)}const b=e.boundingBox;b!==null&&(this.boundingBox=b.clone());const k=e.boundingSphere;return k!==null&&(this.boundingSphere=k.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}BufferGeometry.prototype.isBufferGeometry=!0;const _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(e=new BufferGeometry,o=new MeshBasicMaterial){super();this.type="Mesh",this.geometry=e,this.material=o,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const o=e.morphAttributes,a=Object.keys(o);if(a.length>0){const c=o[a[0]];if(c!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let d=0,_=c.length;d<_;d++){const b=c[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=d}}}}else{const o=e.morphTargets;o!==void 0&&o.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,o){const a=this.geometry,c=this.material,d=this.matrixWorld;if(c===void 0||(a.boundingSphere===null&&a.computeBoundingSphere(),_sphere$3.copy(a.boundingSphere),_sphere$3.applyMatrix4(d),e.ray.intersectsSphere(_sphere$3)===!1)||(_inverseMatrix$2.copy(d).invert(),_ray$2.copy(e.ray).applyMatrix4(_inverseMatrix$2),a.boundingBox!==null&&_ray$2.intersectsBox(a.boundingBox)===!1))return;let _;if(a.isBufferGeometry){const b=a.index,k=a.attributes.position,j=a.morphAttributes.position,et=a.morphTargetsRelative,nt=a.attributes.uv,tt=a.attributes.uv2,rt=a.groups,at=a.drawRange;if(b!==null)if(Array.isArray(c))for(let lt=0,ut=rt.length;lt<ut;lt++){const st=rt[lt],it=c[st.materialIndex],ft=Math.max(st.start,at.start),ct=Math.min(b.count,Math.min(st.start+st.count,at.start+at.count));for(let dt=ft,mt=ct;dt<mt;dt+=3){const gt=b.getX(dt),yt=b.getX(dt+1),St=b.getX(dt+2);_=checkBufferGeometryIntersection(this,it,e,_ray$2,k,j,et,nt,tt,gt,yt,St),_&&(_.faceIndex=Math.floor(dt/3),_.face.materialIndex=st.materialIndex,o.push(_))}}else{const lt=Math.max(0,at.start),ut=Math.min(b.count,at.start+at.count);for(let st=lt,it=ut;st<it;st+=3){const ft=b.getX(st),ct=b.getX(st+1),dt=b.getX(st+2);_=checkBufferGeometryIntersection(this,c,e,_ray$2,k,j,et,nt,tt,ft,ct,dt),_&&(_.faceIndex=Math.floor(st/3),o.push(_))}}else if(k!==void 0)if(Array.isArray(c))for(let lt=0,ut=rt.length;lt<ut;lt++){const st=rt[lt],it=c[st.materialIndex],ft=Math.max(st.start,at.start),ct=Math.min(k.count,Math.min(st.start+st.count,at.start+at.count));for(let dt=ft,mt=ct;dt<mt;dt+=3){const gt=dt,yt=dt+1,St=dt+2;_=checkBufferGeometryIntersection(this,it,e,_ray$2,k,j,et,nt,tt,gt,yt,St),_&&(_.faceIndex=Math.floor(dt/3),_.face.materialIndex=st.materialIndex,o.push(_))}}else{const lt=Math.max(0,at.start),ut=Math.min(k.count,at.start+at.count);for(let st=lt,it=ut;st<it;st+=3){const ft=st,ct=st+1,dt=st+2;_=checkBufferGeometryIntersection(this,c,e,_ray$2,k,j,et,nt,tt,ft,ct,dt),_&&(_.faceIndex=Math.floor(st/3),o.push(_))}}}else a.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}Mesh.prototype.isMesh=!0;function checkIntersection(s,e,o,a,c,d,_,b){let k;if(e.side===BackSide?k=a.intersectTriangle(_,d,c,!0,b):k=a.intersectTriangle(c,d,_,e.side!==DoubleSide,b),k===null)return null;_intersectionPointWorld.copy(b),_intersectionPointWorld.applyMatrix4(s.matrixWorld);const j=o.ray.origin.distanceTo(_intersectionPointWorld);return j<o.near||j>o.far?null:{distance:j,point:_intersectionPointWorld.clone(),object:s}}function checkBufferGeometryIntersection(s,e,o,a,c,d,_,b,k,j,et,nt){_vA$1.fromBufferAttribute(c,j),_vB$1.fromBufferAttribute(c,et),_vC$1.fromBufferAttribute(c,nt);const tt=s.morphTargetInfluences;if(d&&tt){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(let at=0,lt=d.length;at<lt;at++){const ut=tt[at],st=d[at];ut!==0&&(_tempA.fromBufferAttribute(st,j),_tempB.fromBufferAttribute(st,et),_tempC.fromBufferAttribute(st,nt),_?(_morphA.addScaledVector(_tempA,ut),_morphB.addScaledVector(_tempB,ut),_morphC.addScaledVector(_tempC,ut)):(_morphA.addScaledVector(_tempA.sub(_vA$1),ut),_morphB.addScaledVector(_tempB.sub(_vB$1),ut),_morphC.addScaledVector(_tempC.sub(_vC$1),ut)))}_vA$1.add(_morphA),_vB$1.add(_morphB),_vC$1.add(_morphC)}s.isSkinnedMesh&&(s.boneTransform(j,_vA$1),s.boneTransform(et,_vB$1),s.boneTransform(nt,_vC$1));const rt=checkIntersection(s,e,o,a,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(rt){b&&(_uvA$1.fromBufferAttribute(b,j),_uvB$1.fromBufferAttribute(b,et),_uvC$1.fromBufferAttribute(b,nt),rt.uv=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),k&&(_uvA$1.fromBufferAttribute(k,j),_uvB$1.fromBufferAttribute(k,et),_uvC$1.fromBufferAttribute(k,nt),rt.uv2=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2));const at={a:j,b:et,c:nt,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,at.normal),rt.face=at}return rt}class BoxGeometry extends BufferGeometry{constructor(e=1,o=1,a=1,c=1,d=1,_=1){super();this.type="BoxGeometry",this.parameters={width:e,height:o,depth:a,widthSegments:c,heightSegments:d,depthSegments:_};const b=this;c=Math.floor(c),d=Math.floor(d),_=Math.floor(_);const k=[],j=[],et=[],nt=[];let tt=0,rt=0;at("z","y","x",-1,-1,a,o,e,_,d,0),at("z","y","x",1,-1,a,o,-e,_,d,1),at("x","z","y",1,1,e,a,o,c,_,2),at("x","z","y",1,-1,e,a,-o,c,_,3),at("x","y","z",1,-1,e,o,a,c,d,4),at("x","y","z",-1,-1,e,o,-a,c,d,5),this.setIndex(k),this.setAttribute("position",new Float32BufferAttribute(j,3)),this.setAttribute("normal",new Float32BufferAttribute(et,3)),this.setAttribute("uv",new Float32BufferAttribute(nt,2));function at(lt,ut,st,it,ft,ct,dt,mt,gt,yt,St){const Et=ct/gt,vt=dt/yt,_t=ct/2,bt=dt/2,At=mt/2,Rt=gt+1,Pt=yt+1;let Dt=0,Ft=0;const Vt=new Vector3;for(let Qt=0;Qt<Pt;Qt++){const Lt=Qt*vt-bt;for(let It=0;It<Rt;It++){const Ht=It*Et-_t;Vt[lt]=Ht*it,Vt[ut]=Lt*ft,Vt[st]=At,j.push(Vt.x,Vt.y,Vt.z),Vt[lt]=0,Vt[ut]=0,Vt[st]=mt>0?1:-1,et.push(Vt.x,Vt.y,Vt.z),nt.push(It/gt),nt.push(1-Qt/yt),Dt+=1}}for(let Qt=0;Qt<yt;Qt++)for(let Lt=0;Lt<gt;Lt++){const It=tt+Lt+Rt*Qt,Ht=tt+Lt+Rt*(Qt+1),on=tt+(Lt+1)+Rt*(Qt+1),nn=tt+(Lt+1)+Rt*Qt;k.push(It,Ht,nn),k.push(Ht,on,nn),Ft+=6}b.addGroup(rt,Ft,St),rt+=Ft,tt+=Dt}}static fromJSON(e){return new BoxGeometry(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function cloneUniforms(s){const e={};for(const o in s){e[o]={};for(const a in s[o]){const c=s[o][a];c&&(c.isColor||c.isMatrix3||c.isMatrix4||c.isVector2||c.isVector3||c.isVector4||c.isTexture||c.isQuaternion)?e[o][a]=c.clone():Array.isArray(c)?e[o][a]=c.slice():e[o][a]=c}}return e}function mergeUniforms(s){const e={};for(let o=0;o<s.length;o++){const a=cloneUniforms(s[o]);for(const c in a)e[c]=a[c]}return e}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(e){super();this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cloneUniforms(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const o=super.toJSON(e);o.glslVersion=this.glslVersion,o.uniforms={};for(const c in this.uniforms){const _=this.uniforms[c].value;_&&_.isTexture?o.uniforms[c]={type:"t",value:_.toJSON(e).uuid}:_&&_.isColor?o.uniforms[c]={type:"c",value:_.getHex()}:_&&_.isVector2?o.uniforms[c]={type:"v2",value:_.toArray()}:_&&_.isVector3?o.uniforms[c]={type:"v3",value:_.toArray()}:_&&_.isVector4?o.uniforms[c]={type:"v4",value:_.toArray()}:_&&_.isMatrix3?o.uniforms[c]={type:"m3",value:_.toArray()}:_&&_.isMatrix4?o.uniforms[c]={type:"m4",value:_.toArray()}:o.uniforms[c]={value:_}}Object.keys(this.defines).length>0&&(o.defines=this.defines),o.vertexShader=this.vertexShader,o.fragmentShader=this.fragmentShader;const a={};for(const c in this.extensions)this.extensions[c]===!0&&(a[c]=!0);return Object.keys(a).length>0&&(o.extensions=a),o}}ShaderMaterial.prototype.isShaderMaterial=!0;class Camera extends Object3D{constructor(){super();this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}copy(e,o){return super.copy(e,o),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const o=this.matrixWorld.elements;return e.set(-o[8],-o[9],-o[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,o){super.updateWorldMatrix(e,o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}Camera.prototype.isCamera=!0;class PerspectiveCamera extends Camera{constructor(e=50,o=1,a=.1,c=2e3){super();this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=a,this.far=c,this.focus=10,this.aspect=o,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,o){return super.copy(e,o),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const o=.5*this.getFilmHeight()/e;this.fov=RAD2DEG*2*Math.atan(o),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,o,a,c,d,_){this.aspect=e/o,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=o,this.view.offsetX=a,this.view.offsetY=c,this.view.width=d,this.view.height=_,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let o=e*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,a=2*o,c=this.aspect*a,d=-.5*c;const _=this.view;if(this.view!==null&&this.view.enabled){const k=_.fullWidth,j=_.fullHeight;d+=_.offsetX*c/k,o-=_.offsetY*a/j,c*=_.width/k,a*=_.height/j}const b=this.filmOffset;b!==0&&(d+=e*b/this.getFilmWidth()),this.projectionMatrix.makePerspective(d,d+c,o,o-a,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const o=super.toJSON(e);return o.object.fov=this.fov,o.object.zoom=this.zoom,o.object.near=this.near,o.object.far=this.far,o.object.focus=this.focus,o.object.aspect=this.aspect,this.view!==null&&(o.object.view=Object.assign({},this.view)),o.object.filmGauge=this.filmGauge,o.object.filmOffset=this.filmOffset,o}}PerspectiveCamera.prototype.isPerspectiveCamera=!0;const fov=90,aspect=1;class CubeCamera extends Object3D{constructor(e,o,a){super();if(this.type="CubeCamera",a.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=a;const c=new PerspectiveCamera(fov,aspect,e,o);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new Vector3(1,0,0)),this.add(c);const d=new PerspectiveCamera(fov,aspect,e,o);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new Vector3(-1,0,0)),this.add(d);const _=new PerspectiveCamera(fov,aspect,e,o);_.layers=this.layers,_.up.set(0,0,1),_.lookAt(new Vector3(0,1,0)),this.add(_);const b=new PerspectiveCamera(fov,aspect,e,o);b.layers=this.layers,b.up.set(0,0,-1),b.lookAt(new Vector3(0,-1,0)),this.add(b);const k=new PerspectiveCamera(fov,aspect,e,o);k.layers=this.layers,k.up.set(0,-1,0),k.lookAt(new Vector3(0,0,1)),this.add(k);const j=new PerspectiveCamera(fov,aspect,e,o);j.layers=this.layers,j.up.set(0,-1,0),j.lookAt(new Vector3(0,0,-1)),this.add(j)}update(e,o){this.parent===null&&this.updateMatrixWorld();const a=this.renderTarget,[c,d,_,b,k,j]=this.children,et=e.xr.enabled,nt=e.getRenderTarget();e.xr.enabled=!1;const tt=a.texture.generateMipmaps;a.texture.generateMipmaps=!1,e.setRenderTarget(a,0),e.render(o,c),e.setRenderTarget(a,1),e.render(o,d),e.setRenderTarget(a,2),e.render(o,_),e.setRenderTarget(a,3),e.render(o,b),e.setRenderTarget(a,4),e.render(o,k),a.texture.generateMipmaps=tt,e.setRenderTarget(a,5),e.render(o,j),e.setRenderTarget(nt),e.xr.enabled=et,a.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(e,o,a,c,d,_,b,k,j,et){e=e!==void 0?e:[],o=o!==void 0?o:CubeReflectionMapping;super(e,o,a,c,d,_,b,k,j,et);this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}CubeTexture.prototype.isCubeTexture=!0;class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(e,o={}){super(e,e,o);const a={width:e,height:e,depth:1},c=[a,a,a,a,a,a];this.texture=new CubeTexture(c,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=o.generateMipmaps!==void 0?o.generateMipmaps:!1,this.texture.minFilter=o.minFilter!==void 0?o.minFilter:LinearFilter}fromEquirectangularTexture(e,o){this.texture.type=o.type,this.texture.format=RGBAFormat,this.texture.encoding=o.encoding,this.texture.generateMipmaps=o.generateMipmaps,this.texture.minFilter=o.minFilter,this.texture.magFilter=o.magFilter;const a={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},c=new BoxGeometry(5,5,5),d=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(a.uniforms),vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,side:BackSide,blending:NoBlending});d.uniforms.tEquirect.value=o;const _=new Mesh(c,d),b=o.minFilter;return o.minFilter===LinearMipmapLinearFilter&&(o.minFilter=LinearFilter),new CubeCamera(1,10,this).update(e,_),o.minFilter=b,_.geometry.dispose(),_.material.dispose(),this}clear(e,o,a,c){const d=e.getRenderTarget();for(let _=0;_<6;_++)e.setRenderTarget(this,_),e.clear(o,a,c);e.setRenderTarget(d)}}WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(e=new Vector3(1,0,0),o=0){this.normal=e,this.constant=o}set(e,o){return this.normal.copy(e),this.constant=o,this}setComponents(e,o,a,c){return this.normal.set(e,o,a),this.constant=c,this}setFromNormalAndCoplanarPoint(e,o){return this.normal.copy(e),this.constant=-o.dot(this.normal),this}setFromCoplanarPoints(e,o,a){const c=_vector1.subVectors(a,o).cross(_vector2.subVectors(e,o)).normalize();return this.setFromNormalAndCoplanarPoint(c,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,o){return o.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,o){const a=e.delta(_vector1),c=this.normal.dot(a);if(c===0)return this.distanceToPoint(e.start)===0?o.copy(e.start):null;const d=-(e.start.dot(this.normal)+this.constant)/c;return d<0||d>1?null:o.copy(a).multiplyScalar(d).add(e.start)}intersectsLine(e){const o=this.distanceToPoint(e.start),a=this.distanceToPoint(e.end);return o<0&&a>0||a<0&&o>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,o){const a=o||_normalMatrix.getNormalMatrix(e),c=this.coplanarPoint(_vector1).applyMatrix4(e),d=this.normal.applyMatrix3(a).normalize();return this.constant=-c.dot(d),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}Plane.prototype.isPlane=!0;const _sphere$2=new Sphere,_vector$7=new Vector3;class Frustum{constructor(e=new Plane,o=new Plane,a=new Plane,c=new Plane,d=new Plane,_=new Plane){this.planes=[e,o,a,c,d,_]}set(e,o,a,c,d,_){const b=this.planes;return b[0].copy(e),b[1].copy(o),b[2].copy(a),b[3].copy(c),b[4].copy(d),b[5].copy(_),this}copy(e){const o=this.planes;for(let a=0;a<6;a++)o[a].copy(e.planes[a]);return this}setFromProjectionMatrix(e){const o=this.planes,a=e.elements,c=a[0],d=a[1],_=a[2],b=a[3],k=a[4],j=a[5],et=a[6],nt=a[7],tt=a[8],rt=a[9],at=a[10],lt=a[11],ut=a[12],st=a[13],it=a[14],ft=a[15];return o[0].setComponents(b-c,nt-k,lt-tt,ft-ut).normalize(),o[1].setComponents(b+c,nt+k,lt+tt,ft+ut).normalize(),o[2].setComponents(b+d,nt+j,lt+rt,ft+st).normalize(),o[3].setComponents(b-d,nt-j,lt-rt,ft-st).normalize(),o[4].setComponents(b-_,nt-et,lt-at,ft-it).normalize(),o[5].setComponents(b+_,nt+et,lt+at,ft+it).normalize(),this}intersectsObject(e){const o=e.geometry;return o.boundingSphere===null&&o.computeBoundingSphere(),_sphere$2.copy(o.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSprite(e){return _sphere$2.center.set(0,0,0),_sphere$2.radius=.7071067811865476,_sphere$2.applyMatrix4(e.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSphere(e){const o=this.planes,a=e.center,c=-e.radius;for(let d=0;d<6;d++)if(o[d].distanceToPoint(a)<c)return!1;return!0}intersectsBox(e){const o=this.planes;for(let a=0;a<6;a++){const c=o[a];if(_vector$7.x=c.normal.x>0?e.max.x:e.min.x,_vector$7.y=c.normal.y>0?e.max.y:e.min.y,_vector$7.z=c.normal.z>0?e.max.z:e.min.z,c.distanceToPoint(_vector$7)<0)return!1}return!0}containsPoint(e){const o=this.planes;for(let a=0;a<6;a++)if(o[a].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let s=null,e=!1,o=null,a=null;function c(d,_){o(d,_),a=s.requestAnimationFrame(c)}return{start:function(){e!==!0&&o!==null&&(a=s.requestAnimationFrame(c),e=!0)},stop:function(){s.cancelAnimationFrame(a),e=!1},setAnimationLoop:function(d){o=d},setContext:function(d){s=d}}}function WebGLAttributes(s,e){const o=e.isWebGL2,a=new WeakMap;function c(j,et){const nt=j.array,tt=j.usage,rt=s.createBuffer();s.bindBuffer(et,rt),s.bufferData(et,nt,tt),j.onUploadCallback();let at;if(nt instanceof Float32Array)at=5126;else if(nt instanceof Uint16Array)if(j.isFloat16BufferAttribute)if(o)at=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else at=5123;else if(nt instanceof Int16Array)at=5122;else if(nt instanceof Uint32Array)at=5125;else if(nt instanceof Int32Array)at=5124;else if(nt instanceof Int8Array)at=5120;else if(nt instanceof Uint8Array)at=5121;else if(nt instanceof Uint8ClampedArray)at=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+nt);return{buffer:rt,type:at,bytesPerElement:nt.BYTES_PER_ELEMENT,version:j.version}}function d(j,et,nt){const tt=et.array,rt=et.updateRange;s.bindBuffer(nt,j),rt.count===-1?s.bufferSubData(nt,0,tt):(o?s.bufferSubData(nt,rt.offset*tt.BYTES_PER_ELEMENT,tt,rt.offset,rt.count):s.bufferSubData(nt,rt.offset*tt.BYTES_PER_ELEMENT,tt.subarray(rt.offset,rt.offset+rt.count)),rt.count=-1)}function _(j){return j.isInterleavedBufferAttribute&&(j=j.data),a.get(j)}function b(j){j.isInterleavedBufferAttribute&&(j=j.data);const et=a.get(j);et&&(s.deleteBuffer(et.buffer),a.delete(j))}function k(j,et){if(j.isGLBufferAttribute){const tt=a.get(j);(!tt||tt.version<j.version)&&a.set(j,{buffer:j.buffer,type:j.type,bytesPerElement:j.elementSize,version:j.version});return}j.isInterleavedBufferAttribute&&(j=j.data);const nt=a.get(j);nt===void 0?a.set(j,c(j,et)):nt.version<j.version&&(d(nt.buffer,j,et),nt.version=j.version)}return{get:_,remove:b,update:k}}class PlaneGeometry extends BufferGeometry{constructor(e=1,o=1,a=1,c=1){super();this.type="PlaneGeometry",this.parameters={width:e,height:o,widthSegments:a,heightSegments:c};const d=e/2,_=o/2,b=Math.floor(a),k=Math.floor(c),j=b+1,et=k+1,nt=e/b,tt=o/k,rt=[],at=[],lt=[],ut=[];for(let st=0;st<et;st++){const it=st*tt-_;for(let ft=0;ft<j;ft++){const ct=ft*nt-d;at.push(ct,-it,0),lt.push(0,0,1),ut.push(ft/b),ut.push(1-st/k)}}for(let st=0;st<k;st++)for(let it=0;it<b;it++){const ft=it+j*st,ct=it+j*(st+1),dt=it+1+j*(st+1),mt=it+1+j*st;rt.push(ft,ct,mt),rt.push(ct,dt,mt)}this.setIndex(rt),this.setAttribute("position",new Float32BufferAttribute(at,3)),this.setAttribute("normal",new Float32BufferAttribute(lt,3)),this.setAttribute("uv",new Float32BufferAttribute(ut,2))}static fromJSON(e){return new PlaneGeometry(e.width,e.height,e.widthSegments,e.heightSegments)}}var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ]
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform vec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			float texelIndex = float( vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset );
			float y = floor( texelIndex / morphTargetsTextureSize.x );
			float x = texelIndex - y * morphTargetsTextureSize.x;
			vec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );
			return texture( morphTargetsTexture, morphUV );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,output_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$g=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$g=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_vertex,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,output_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_vert:vertex$g,background_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},cube:{uniforms:mergeUniforms([UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function WebGLBackground(s,e,o,a,c,d){const _=new Color(0);let b=c===!0?0:1,k,j,et=null,nt=0,tt=null;function rt(lt,ut){let st=!1,it=ut.isScene===!0?ut.background:null;it&&it.isTexture&&(it=e.get(it));const ft=s.xr,ct=ft.getSession&&ft.getSession();ct&&ct.environmentBlendMode==="additive"&&(it=null),it===null?at(_,b):it&&it.isColor&&(at(it,1),st=!0),(s.autoClear||st)&&s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil),it&&(it.isCubeTexture||it.mapping===CubeUVReflectionMapping)?(j===void 0&&(j=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.cube.uniforms),vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),j.geometry.deleteAttribute("normal"),j.geometry.deleteAttribute("uv"),j.onBeforeRender=function(dt,mt,gt){this.matrixWorld.copyPosition(gt.matrixWorld)},Object.defineProperty(j.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(j)),j.material.uniforms.envMap.value=it,j.material.uniforms.flipEnvMap.value=it.isCubeTexture&&it.isRenderTargetTexture===!1?-1:1,(et!==it||nt!==it.version||tt!==s.toneMapping)&&(j.material.needsUpdate=!0,et=it,nt=it.version,tt=s.toneMapping),lt.unshift(j,j.geometry,j.material,0,0,null)):it&&it.isTexture&&(k===void 0&&(k=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),k.geometry.deleteAttribute("normal"),Object.defineProperty(k.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(k)),k.material.uniforms.t2D.value=it,it.matrixAutoUpdate===!0&&it.updateMatrix(),k.material.uniforms.uvTransform.value.copy(it.matrix),(et!==it||nt!==it.version||tt!==s.toneMapping)&&(k.material.needsUpdate=!0,et=it,nt=it.version,tt=s.toneMapping),lt.unshift(k,k.geometry,k.material,0,0,null))}function at(lt,ut){o.buffers.color.setClear(lt.r,lt.g,lt.b,ut,d)}return{getClearColor:function(){return _},setClearColor:function(lt,ut=1){_.set(lt),b=ut,at(_,b)},getClearAlpha:function(){return b},setClearAlpha:function(lt){b=lt,at(_,b)},render:rt}}function WebGLBindingStates(s,e,o,a){const c=s.getParameter(34921),d=a.isWebGL2?null:e.get("OES_vertex_array_object"),_=a.isWebGL2||d!==null,b={},k=lt(null);let j=k;function et(bt,At,Rt,Pt,Dt){let Ft=!1;if(_){const Vt=at(Pt,Rt,At);j!==Vt&&(j=Vt,tt(j.object)),Ft=ut(Pt,Dt),Ft&&st(Pt,Dt)}else{const Vt=At.wireframe===!0;(j.geometry!==Pt.id||j.program!==Rt.id||j.wireframe!==Vt)&&(j.geometry=Pt.id,j.program=Rt.id,j.wireframe=Vt,Ft=!0)}bt.isInstancedMesh===!0&&(Ft=!0),Dt!==null&&o.update(Dt,34963),Ft&&(gt(bt,At,Rt,Pt),Dt!==null&&s.bindBuffer(34963,o.get(Dt).buffer))}function nt(){return a.isWebGL2?s.createVertexArray():d.createVertexArrayOES()}function tt(bt){return a.isWebGL2?s.bindVertexArray(bt):d.bindVertexArrayOES(bt)}function rt(bt){return a.isWebGL2?s.deleteVertexArray(bt):d.deleteVertexArrayOES(bt)}function at(bt,At,Rt){const Pt=Rt.wireframe===!0;let Dt=b[bt.id];Dt===void 0&&(Dt={},b[bt.id]=Dt);let Ft=Dt[At.id];Ft===void 0&&(Ft={},Dt[At.id]=Ft);let Vt=Ft[Pt];return Vt===void 0&&(Vt=lt(nt()),Ft[Pt]=Vt),Vt}function lt(bt){const At=[],Rt=[],Pt=[];for(let Dt=0;Dt<c;Dt++)At[Dt]=0,Rt[Dt]=0,Pt[Dt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:At,enabledAttributes:Rt,attributeDivisors:Pt,object:bt,attributes:{},index:null}}function ut(bt,At){const Rt=j.attributes,Pt=bt.attributes;let Dt=0;for(const Ft in Pt){const Vt=Rt[Ft],Qt=Pt[Ft];if(Vt===void 0||Vt.attribute!==Qt||Vt.data!==Qt.data)return!0;Dt++}return j.attributesNum!==Dt||j.index!==At}function st(bt,At){const Rt={},Pt=bt.attributes;let Dt=0;for(const Ft in Pt){const Vt=Pt[Ft],Qt={};Qt.attribute=Vt,Vt.data&&(Qt.data=Vt.data),Rt[Ft]=Qt,Dt++}j.attributes=Rt,j.attributesNum=Dt,j.index=At}function it(){const bt=j.newAttributes;for(let At=0,Rt=bt.length;At<Rt;At++)bt[At]=0}function ft(bt){ct(bt,0)}function ct(bt,At){const Rt=j.newAttributes,Pt=j.enabledAttributes,Dt=j.attributeDivisors;Rt[bt]=1,Pt[bt]===0&&(s.enableVertexAttribArray(bt),Pt[bt]=1),Dt[bt]!==At&&((a.isWebGL2?s:e.get("ANGLE_instanced_arrays"))[a.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](bt,At),Dt[bt]=At)}function dt(){const bt=j.newAttributes,At=j.enabledAttributes;for(let Rt=0,Pt=At.length;Rt<Pt;Rt++)At[Rt]!==bt[Rt]&&(s.disableVertexAttribArray(Rt),At[Rt]=0)}function mt(bt,At,Rt,Pt,Dt,Ft){a.isWebGL2===!0&&(Rt===5124||Rt===5125)?s.vertexAttribIPointer(bt,At,Rt,Dt,Ft):s.vertexAttribPointer(bt,At,Rt,Pt,Dt,Ft)}function gt(bt,At,Rt,Pt){if(a.isWebGL2===!1&&(bt.isInstancedMesh||Pt.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;it();const Dt=Pt.attributes,Ft=Rt.getAttributes(),Vt=At.defaultAttributeValues;for(const Qt in Ft){const Lt=Ft[Qt];if(Lt.location>=0){let It=Dt[Qt];if(It===void 0&&(Qt==="instanceMatrix"&&bt.instanceMatrix&&(It=bt.instanceMatrix),Qt==="instanceColor"&&bt.instanceColor&&(It=bt.instanceColor)),It!==void 0){const Ht=It.normalized,on=It.itemSize,nn=o.get(It);if(nn===void 0)continue;const jt=nn.buffer,Mn=nn.type,gn=nn.bytesPerElement;if(It.isInterleavedBufferAttribute){const fn=It.data,pn=fn.stride,_n=It.offset;if(fn.isInstancedInterleavedBuffer){for(let $t=0;$t<Lt.locationSize;$t++)ct(Lt.location+$t,fn.meshPerAttribute);bt.isInstancedMesh!==!0&&Pt._maxInstanceCount===void 0&&(Pt._maxInstanceCount=fn.meshPerAttribute*fn.count)}else for(let $t=0;$t<Lt.locationSize;$t++)ft(Lt.location+$t);s.bindBuffer(34962,jt);for(let $t=0;$t<Lt.locationSize;$t++)mt(Lt.location+$t,on/Lt.locationSize,Mn,Ht,pn*gn,(_n+on/Lt.locationSize*$t)*gn)}else{if(It.isInstancedBufferAttribute){for(let fn=0;fn<Lt.locationSize;fn++)ct(Lt.location+fn,It.meshPerAttribute);bt.isInstancedMesh!==!0&&Pt._maxInstanceCount===void 0&&(Pt._maxInstanceCount=It.meshPerAttribute*It.count)}else for(let fn=0;fn<Lt.locationSize;fn++)ft(Lt.location+fn);s.bindBuffer(34962,jt);for(let fn=0;fn<Lt.locationSize;fn++)mt(Lt.location+fn,on/Lt.locationSize,Mn,Ht,on*gn,on/Lt.locationSize*fn*gn)}}else if(Vt!==void 0){const Ht=Vt[Qt];if(Ht!==void 0)switch(Ht.length){case 2:s.vertexAttrib2fv(Lt.location,Ht);break;case 3:s.vertexAttrib3fv(Lt.location,Ht);break;case 4:s.vertexAttrib4fv(Lt.location,Ht);break;default:s.vertexAttrib1fv(Lt.location,Ht)}}}}dt()}function yt(){vt();for(const bt in b){const At=b[bt];for(const Rt in At){const Pt=At[Rt];for(const Dt in Pt)rt(Pt[Dt].object),delete Pt[Dt];delete At[Rt]}delete b[bt]}}function St(bt){if(b[bt.id]===void 0)return;const At=b[bt.id];for(const Rt in At){const Pt=At[Rt];for(const Dt in Pt)rt(Pt[Dt].object),delete Pt[Dt];delete At[Rt]}delete b[bt.id]}function Et(bt){for(const At in b){const Rt=b[At];if(Rt[bt.id]===void 0)continue;const Pt=Rt[bt.id];for(const Dt in Pt)rt(Pt[Dt].object),delete Pt[Dt];delete Rt[bt.id]}}function vt(){_t(),j!==k&&(j=k,tt(j.object))}function _t(){k.geometry=null,k.program=null,k.wireframe=!1}return{setup:et,reset:vt,resetDefaultState:_t,dispose:yt,releaseStatesOfGeometry:St,releaseStatesOfProgram:Et,initAttributes:it,enableAttribute:ft,disableUnusedAttributes:dt}}function WebGLBufferRenderer(s,e,o,a){const c=a.isWebGL2;let d;function _(j){d=j}function b(j,et){s.drawArrays(d,j,et),o.update(et,d,1)}function k(j,et,nt){if(nt===0)return;let tt,rt;if(c)tt=s,rt="drawArraysInstanced";else if(tt=e.get("ANGLE_instanced_arrays"),rt="drawArraysInstancedANGLE",tt===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}tt[rt](d,j,et,nt),o.update(et,d,nt)}this.setMode=_,this.render=b,this.renderInstances=k}function WebGLCapabilities(s,e,o){let a;function c(){if(a!==void 0)return a;if(e.has("EXT_texture_filter_anisotropic")===!0){const gt=e.get("EXT_texture_filter_anisotropic");a=s.getParameter(gt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function d(gt){if(gt==="highp"){if(s.getShaderPrecisionFormat(35633,36338).precision>0&&s.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";gt="mediump"}return gt==="mediump"&&s.getShaderPrecisionFormat(35633,36337).precision>0&&s.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const _=typeof WebGL2RenderingContext!="undefined"&&s instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&s instanceof WebGL2ComputeRenderingContext;let b=o.precision!==void 0?o.precision:"highp";const k=d(b);k!==b&&(console.warn("THREE.WebGLRenderer:",b,"not supported, using",k,"instead."),b=k);const j=_||e.has("WEBGL_draw_buffers"),et=o.logarithmicDepthBuffer===!0,nt=s.getParameter(34930),tt=s.getParameter(35660),rt=s.getParameter(3379),at=s.getParameter(34076),lt=s.getParameter(34921),ut=s.getParameter(36347),st=s.getParameter(36348),it=s.getParameter(36349),ft=tt>0,ct=_||e.has("OES_texture_float"),dt=ft&&ct,mt=_?s.getParameter(36183):0;return{isWebGL2:_,drawBuffers:j,getMaxAnisotropy:c,getMaxPrecision:d,precision:b,logarithmicDepthBuffer:et,maxTextures:nt,maxVertexTextures:tt,maxTextureSize:rt,maxCubemapSize:at,maxAttributes:lt,maxVertexUniforms:ut,maxVaryings:st,maxFragmentUniforms:it,vertexTextures:ft,floatFragmentTextures:ct,floatVertexTextures:dt,maxSamples:mt}}function WebGLClipping(s){const e=this;let o=null,a=0,c=!1,d=!1;const _=new Plane,b=new Matrix3,k={value:null,needsUpdate:!1};this.uniform=k,this.numPlanes=0,this.numIntersection=0,this.init=function(nt,tt,rt){const at=nt.length!==0||tt||a!==0||c;return c=tt,o=et(nt,rt,0),a=nt.length,at},this.beginShadows=function(){d=!0,et(null)},this.endShadows=function(){d=!1,j()},this.setState=function(nt,tt,rt){const at=nt.clippingPlanes,lt=nt.clipIntersection,ut=nt.clipShadows,st=s.get(nt);if(!c||at===null||at.length===0||d&&!ut)d?et(null):j();else{const it=d?0:a,ft=it*4;let ct=st.clippingState||null;k.value=ct,ct=et(at,tt,ft,rt);for(let dt=0;dt!==ft;++dt)ct[dt]=o[dt];st.clippingState=ct,this.numIntersection=lt?this.numPlanes:0,this.numPlanes+=it}};function j(){k.value!==o&&(k.value=o,k.needsUpdate=a>0),e.numPlanes=a,e.numIntersection=0}function et(nt,tt,rt,at){const lt=nt!==null?nt.length:0;let ut=null;if(lt!==0){if(ut=k.value,at!==!0||ut===null){const st=rt+lt*4,it=tt.matrixWorldInverse;b.getNormalMatrix(it),(ut===null||ut.length<st)&&(ut=new Float32Array(st));for(let ft=0,ct=rt;ft!==lt;++ft,ct+=4)_.copy(nt[ft]).applyMatrix4(it,b),_.normal.toArray(ut,ct),ut[ct+3]=_.constant}k.value=ut,k.needsUpdate=!0}return e.numPlanes=lt,e.numIntersection=0,ut}}function WebGLCubeMaps(s){let e=new WeakMap;function o(_,b){return b===EquirectangularReflectionMapping?_.mapping=CubeReflectionMapping:b===EquirectangularRefractionMapping&&(_.mapping=CubeRefractionMapping),_}function a(_){if(_&&_.isTexture&&_.isRenderTargetTexture===!1){const b=_.mapping;if(b===EquirectangularReflectionMapping||b===EquirectangularRefractionMapping)if(e.has(_)){const k=e.get(_).texture;return o(k,_.mapping)}else{const k=_.image;if(k&&k.height>0){const j=new WebGLCubeRenderTarget(k.height/2);return j.fromEquirectangularTexture(s,_),e.set(_,j),_.addEventListener("dispose",c),o(j.texture,_.mapping)}else return null}}return _}function c(_){const b=_.target;b.removeEventListener("dispose",c);const k=e.get(b);k!==void 0&&(e.delete(b),k.dispose())}function d(){e=new WeakMap}return{get:a,dispose:d}}class OrthographicCamera extends Camera{constructor(e=-1,o=1,a=1,c=-1,d=.1,_=2e3){super();this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=o,this.top=a,this.bottom=c,this.near=d,this.far=_,this.updateProjectionMatrix()}copy(e,o){return super.copy(e,o),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,o,a,c,d,_){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=o,this.view.offsetX=a,this.view.offsetY=c,this.view.width=d,this.view.height=_,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),o=(this.top-this.bottom)/(2*this.zoom),a=(this.right+this.left)/2,c=(this.top+this.bottom)/2;let d=a-e,_=a+e,b=c+o,k=c-o;if(this.view!==null&&this.view.enabled){const j=(this.right-this.left)/this.view.fullWidth/this.zoom,et=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=j*this.view.offsetX,_=d+j*this.view.width,b-=et*this.view.offsetY,k=b-et*this.view.height}this.projectionMatrix.makeOrthographic(d,_,b,k,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const o=super.toJSON(e);return o.object.zoom=this.zoom,o.object.left=this.left,o.object.right=this.right,o.object.top=this.top,o.object.bottom=this.bottom,o.object.near=this.near,o.object.far=this.far,this.view!==null&&(o.object.view=Object.assign({},this.view)),o}}OrthographicCamera.prototype.isOrthographicCamera=!0;const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];class PMREMGenerator{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,o=0,a=.1,c=100){_oldTarget=this._renderer.getRenderTarget(),this._setSize(256);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(e,a,c,d),o>0&&this._blur(d,0,0,o),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(e,o=null){return this._fromTexture(e,o)}fromCubemap(e,o=null){return this._fromTexture(e,o)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(_oldTarget),e.scissorTest=!1,_setViewport(e,0,0,e.width,e.height)}_fromTexture(e,o){e.mapping===CubeReflectionMapping||e.mapping===CubeRefractionMapping?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),_oldTarget=this._renderer.getRenderTarget();const a=o||this._allocateTargets();return this._textureToCubeUV(e,a),this._applyPMREM(a),this._cleanup(a),a}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),o=4*this._cubeSize-32,a={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,encoding:LinearEncoding,depthBuffer:!1},c=_createRenderTarget(e,o,a);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(e,o,a);const{_lodMax:d}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(d)),this._blurMaterial=_getBlurShader(d,e,o)}return c}_compileMaterial(e){const o=new Mesh(this._lodPlanes[0],e);this._renderer.compile(o,_flatCamera)}_sceneToCubeUV(e,o,a,c){const b=new PerspectiveCamera(90,1,o,a),k=[1,-1,1,1,1,1],j=[1,1,1,-1,-1,-1],et=this._renderer,nt=et.autoClear,tt=et.toneMapping;et.getClearColor(_clearColor),et.toneMapping=NoToneMapping,et.autoClear=!1;const rt=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),at=new Mesh(new BoxGeometry,rt);let lt=!1;const ut=e.background;ut?ut.isColor&&(rt.color.copy(ut),e.background=null,lt=!0):(rt.color.copy(_clearColor),lt=!0);for(let st=0;st<6;st++){const it=st%3;it===0?(b.up.set(0,k[st],0),b.lookAt(j[st],0,0)):it===1?(b.up.set(0,0,k[st]),b.lookAt(0,j[st],0)):(b.up.set(0,k[st],0),b.lookAt(0,0,j[st]));const ft=this._cubeSize;_setViewport(c,it*ft,st>2?ft:0,ft,ft),et.setRenderTarget(c),lt&&et.render(at,b),et.render(e,b)}at.geometry.dispose(),at.material.dispose(),et.toneMapping=tt,et.autoClear=nt,e.background=ut}_textureToCubeUV(e,o){const a=this._renderer,c=e.mapping===CubeReflectionMapping||e.mapping===CubeRefractionMapping;c?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const d=c?this._cubemapMaterial:this._equirectMaterial,_=new Mesh(this._lodPlanes[0],d),b=d.uniforms;b.envMap.value=e;const k=this._cubeSize;_setViewport(o,0,0,3*k,2*k),a.setRenderTarget(o),a.render(_,_flatCamera)}_applyPMREM(e){const o=this._renderer,a=o.autoClear;o.autoClear=!1;for(let c=1;c<this._lodPlanes.length;c++){const d=Math.sqrt(this._sigmas[c]*this._sigmas[c]-this._sigmas[c-1]*this._sigmas[c-1]),_=_axisDirections[(c-1)%_axisDirections.length];this._blur(e,c-1,c,d,_)}o.autoClear=a}_blur(e,o,a,c,d){const _=this._pingPongRenderTarget;this._halfBlur(e,_,o,a,c,"latitudinal",d),this._halfBlur(_,e,a,a,c,"longitudinal",d)}_halfBlur(e,o,a,c,d,_,b){const k=this._renderer,j=this._blurMaterial;_!=="latitudinal"&&_!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const et=3,nt=new Mesh(this._lodPlanes[c],j),tt=j.uniforms,rt=this._sizeLods[a]-1,at=isFinite(d)?Math.PI/(2*rt):2*Math.PI/(2*MAX_SAMPLES-1),lt=d/at,ut=isFinite(d)?1+Math.floor(et*lt):MAX_SAMPLES;ut>MAX_SAMPLES&&console.warn(`sigmaRadians, ${d}, is too large and will clip, as it requested ${ut} samples when the maximum is set to ${MAX_SAMPLES}`);const st=[];let it=0;for(let gt=0;gt<MAX_SAMPLES;++gt){const yt=gt/lt,St=Math.exp(-yt*yt/2);st.push(St),gt===0?it+=St:gt<ut&&(it+=2*St)}for(let gt=0;gt<st.length;gt++)st[gt]=st[gt]/it;tt.envMap.value=e.texture,tt.samples.value=ut,tt.weights.value=st,tt.latitudinal.value=_==="latitudinal",b&&(tt.poleAxis.value=b);const{_lodMax:ft}=this;tt.dTheta.value=at,tt.mipInt.value=ft-a;const ct=this._sizeLods[c],dt=3*ct*(c>ft-LOD_MIN?c-ft+LOD_MIN:0),mt=4*(this._cubeSize-ct);_setViewport(o,dt,mt,3*ct,2*ct),k.setRenderTarget(o),k.render(nt,_flatCamera)}}function _createPlanes(s){const e=[],o=[],a=[];let c=s;const d=s-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let _=0;_<d;_++){const b=Math.pow(2,c);o.push(b);let k=1/b;_>s-LOD_MIN?k=EXTRA_LOD_SIGMA[_-s+LOD_MIN-1]:_===0&&(k=0),a.push(k);const j=1/(b-1),et=-j/2,nt=1+j/2,tt=[et,et,nt,et,nt,nt,et,et,nt,nt,et,nt],rt=6,at=6,lt=3,ut=2,st=1,it=new Float32Array(lt*at*rt),ft=new Float32Array(ut*at*rt),ct=new Float32Array(st*at*rt);for(let mt=0;mt<rt;mt++){const gt=mt%3*2/3-1,yt=mt>2?0:-1,St=[gt,yt,0,gt+2/3,yt,0,gt+2/3,yt+1,0,gt,yt,0,gt+2/3,yt+1,0,gt,yt+1,0];it.set(St,lt*at*mt),ft.set(tt,ut*at*mt);const Et=[mt,mt,mt,mt,mt,mt];ct.set(Et,st*at*mt)}const dt=new BufferGeometry;dt.setAttribute("position",new BufferAttribute(it,lt)),dt.setAttribute("uv",new BufferAttribute(ft,ut)),dt.setAttribute("faceIndex",new BufferAttribute(ct,st)),e.push(dt),c>LOD_MIN&&c--}return{lodPlanes:e,sizeLods:o,sigmas:a}}function _createRenderTarget(s,e,o){const a=new WebGLRenderTarget(s,e,o);return a.texture.mapping=CubeUVReflectionMapping,a.texture.name="PMREM.cubeUv",a.scissorTest=!0,a}function _setViewport(s,e,o,a,c){s.viewport.set(e,o,a,c),s.scissor.set(e,o,a,c)}function _getBlurShader(s,e,o){const a=new Float32Array(MAX_SAMPLES),c=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/o,CUBEUV_MAX_MIP:`${s}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:a},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:c}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(s){let e=new WeakMap,o=null;function a(b){if(b&&b.isTexture){const k=b.mapping,j=k===EquirectangularReflectionMapping||k===EquirectangularRefractionMapping,et=k===CubeReflectionMapping||k===CubeRefractionMapping;if(j||et)if(b.isRenderTargetTexture&&b.needsPMREMUpdate===!0){b.needsPMREMUpdate=!1;let nt=e.get(b);return o===null&&(o=new PMREMGenerator(s)),nt=j?o.fromEquirectangular(b,nt):o.fromCubemap(b,nt),e.set(b,nt),nt.texture}else{if(e.has(b))return e.get(b).texture;{const nt=b.image;if(j&&nt&&nt.height>0||et&&nt&&c(nt)){o===null&&(o=new PMREMGenerator(s));const tt=j?o.fromEquirectangular(b):o.fromCubemap(b);return e.set(b,tt),b.addEventListener("dispose",d),tt.texture}else return null}}}return b}function c(b){let k=0;const j=6;for(let et=0;et<j;et++)b[et]!==void 0&&k++;return k===j}function d(b){const k=b.target;k.removeEventListener("dispose",d);const j=e.get(k);j!==void 0&&(e.delete(k),j.dispose())}function _(){e=new WeakMap,o!==null&&(o.dispose(),o=null)}return{get:a,dispose:_}}function WebGLExtensions(s){const e={};function o(a){if(e[a]!==void 0)return e[a];let c;switch(a){case"WEBGL_depth_texture":c=s.getExtension("WEBGL_depth_texture")||s.getExtension("MOZ_WEBGL_depth_texture")||s.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":c=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":c=s.getExtension("WEBGL_compressed_texture_s3tc")||s.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":c=s.getExtension("WEBGL_compressed_texture_pvrtc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:c=s.getExtension(a)}return e[a]=c,c}return{has:function(a){return o(a)!==null},init:function(a){a.isWebGL2?o("EXT_color_buffer_float"):(o("WEBGL_depth_texture"),o("OES_texture_float"),o("OES_texture_half_float"),o("OES_texture_half_float_linear"),o("OES_standard_derivatives"),o("OES_element_index_uint"),o("OES_vertex_array_object"),o("ANGLE_instanced_arrays")),o("OES_texture_float_linear"),o("EXT_color_buffer_half_float"),o("WEBGL_multisampled_render_to_texture")},get:function(a){const c=o(a);return c===null&&console.warn("THREE.WebGLRenderer: "+a+" extension not supported."),c}}}function WebGLGeometries(s,e,o,a){const c={},d=new WeakMap;function _(nt){const tt=nt.target;tt.index!==null&&e.remove(tt.index);for(const at in tt.attributes)e.remove(tt.attributes[at]);tt.removeEventListener("dispose",_),delete c[tt.id];const rt=d.get(tt);rt&&(e.remove(rt),d.delete(tt)),a.releaseStatesOfGeometry(tt),tt.isInstancedBufferGeometry===!0&&delete tt._maxInstanceCount,o.memory.geometries--}function b(nt,tt){return c[tt.id]===!0||(tt.addEventListener("dispose",_),c[tt.id]=!0,o.memory.geometries++),tt}function k(nt){const tt=nt.attributes;for(const at in tt)e.update(tt[at],34962);const rt=nt.morphAttributes;for(const at in rt){const lt=rt[at];for(let ut=0,st=lt.length;ut<st;ut++)e.update(lt[ut],34962)}}function j(nt){const tt=[],rt=nt.index,at=nt.attributes.position;let lt=0;if(rt!==null){const it=rt.array;lt=rt.version;for(let ft=0,ct=it.length;ft<ct;ft+=3){const dt=it[ft+0],mt=it[ft+1],gt=it[ft+2];tt.push(dt,mt,mt,gt,gt,dt)}}else{const it=at.array;lt=at.version;for(let ft=0,ct=it.length/3-1;ft<ct;ft+=3){const dt=ft+0,mt=ft+1,gt=ft+2;tt.push(dt,mt,mt,gt,gt,dt)}}const ut=new(arrayNeedsUint32(tt)?Uint32BufferAttribute:Uint16BufferAttribute)(tt,1);ut.version=lt;const st=d.get(nt);st&&e.remove(st),d.set(nt,ut)}function et(nt){const tt=d.get(nt);if(tt){const rt=nt.index;rt!==null&&tt.version<rt.version&&j(nt)}else j(nt);return d.get(nt)}return{get:b,update:k,getWireframeAttribute:et}}function WebGLIndexedBufferRenderer(s,e,o,a){const c=a.isWebGL2;let d;function _(tt){d=tt}let b,k;function j(tt){b=tt.type,k=tt.bytesPerElement}function et(tt,rt){s.drawElements(d,rt,b,tt*k),o.update(rt,d,1)}function nt(tt,rt,at){if(at===0)return;let lt,ut;if(c)lt=s,ut="drawElementsInstanced";else if(lt=e.get("ANGLE_instanced_arrays"),ut="drawElementsInstancedANGLE",lt===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}lt[ut](d,rt,b,tt*k,at),o.update(rt,d,at)}this.setMode=_,this.setIndex=j,this.render=et,this.renderInstances=nt}function WebGLInfo(s){const e={geometries:0,textures:0},o={frame:0,calls:0,triangles:0,points:0,lines:0};function a(d,_,b){switch(o.calls++,_){case 4:o.triangles+=b*(d/3);break;case 1:o.lines+=b*(d/2);break;case 3:o.lines+=b*(d-1);break;case 2:o.lines+=b*d;break;case 0:o.points+=b*d;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",_);break}}function c(){o.frame++,o.calls=0,o.triangles=0,o.points=0,o.lines=0}return{memory:e,render:o,programs:null,autoReset:!0,reset:c,update:a}}function numericalSort(s,e){return s[0]-e[0]}function absNumericalSort(s,e){return Math.abs(e[1])-Math.abs(s[1])}function denormalize(s,e){let o=1;const a=e.isInterleavedBufferAttribute?e.data.array:e.array;a instanceof Int8Array?o=127:a instanceof Int16Array?o=32767:a instanceof Int32Array?o=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",a),s.divideScalar(o)}function WebGLMorphtargets(s,e,o){const a={},c=new Float32Array(8),d=new WeakMap,_=new Vector4,b=[];for(let j=0;j<8;j++)b[j]=[j,0];function k(j,et,nt,tt){const rt=j.morphTargetInfluences;if(e.isWebGL2===!0){const at=et.morphAttributes.position||et.morphAttributes.normal||et.morphAttributes.color,lt=at!==void 0?at.length:0;let ut=d.get(et);if(ut===void 0||ut.count!==lt){let Rt=function(){bt.dispose(),d.delete(et),et.removeEventListener("dispose",Rt)};ut!==void 0&&ut.texture.dispose();const ft=et.morphAttributes.position!==void 0,ct=et.morphAttributes.normal!==void 0,dt=et.morphAttributes.color!==void 0,mt=et.morphAttributes.position||[],gt=et.morphAttributes.normal||[],yt=et.morphAttributes.color||[];let St=0;ft===!0&&(St=1),ct===!0&&(St=2),dt===!0&&(St=3);let Et=et.attributes.position.count*St,vt=1;Et>e.maxTextureSize&&(vt=Math.ceil(Et/e.maxTextureSize),Et=e.maxTextureSize);const _t=new Float32Array(Et*vt*4*lt),bt=new DataArrayTexture(_t,Et,vt,lt);bt.format=RGBAFormat,bt.type=FloatType,bt.needsUpdate=!0;const At=St*4;for(let Pt=0;Pt<lt;Pt++){const Dt=mt[Pt],Ft=gt[Pt],Vt=yt[Pt],Qt=Et*vt*4*Pt;for(let Lt=0;Lt<Dt.count;Lt++){const It=Lt*At;ft===!0&&(_.fromBufferAttribute(Dt,Lt),Dt.normalized===!0&&denormalize(_,Dt),_t[Qt+It+0]=_.x,_t[Qt+It+1]=_.y,_t[Qt+It+2]=_.z,_t[Qt+It+3]=0),ct===!0&&(_.fromBufferAttribute(Ft,Lt),Ft.normalized===!0&&denormalize(_,Ft),_t[Qt+It+4]=_.x,_t[Qt+It+5]=_.y,_t[Qt+It+6]=_.z,_t[Qt+It+7]=0),dt===!0&&(_.fromBufferAttribute(Vt,Lt),Vt.normalized===!0&&denormalize(_,Ft),_t[Qt+It+8]=_.x,_t[Qt+It+9]=_.y,_t[Qt+It+10]=_.z,_t[Qt+It+11]=Vt.itemSize===4?_.w:1)}}ut={count:lt,texture:bt,size:new Vector2(Et,vt)},d.set(et,ut),et.addEventListener("dispose",Rt)}let st=0;for(let ft=0;ft<rt.length;ft++)st+=rt[ft];const it=et.morphTargetsRelative?1:1-st;tt.getUniforms().setValue(s,"morphTargetBaseInfluence",it),tt.getUniforms().setValue(s,"morphTargetInfluences",rt),tt.getUniforms().setValue(s,"morphTargetsTexture",ut.texture,o),tt.getUniforms().setValue(s,"morphTargetsTextureSize",ut.size)}else{const at=rt===void 0?0:rt.length;let lt=a[et.id];if(lt===void 0||lt.length!==at){lt=[];for(let ct=0;ct<at;ct++)lt[ct]=[ct,0];a[et.id]=lt}for(let ct=0;ct<at;ct++){const dt=lt[ct];dt[0]=ct,dt[1]=rt[ct]}lt.sort(absNumericalSort);for(let ct=0;ct<8;ct++)ct<at&&lt[ct][1]?(b[ct][0]=lt[ct][0],b[ct][1]=lt[ct][1]):(b[ct][0]=Number.MAX_SAFE_INTEGER,b[ct][1]=0);b.sort(numericalSort);const ut=et.morphAttributes.position,st=et.morphAttributes.normal;let it=0;for(let ct=0;ct<8;ct++){const dt=b[ct],mt=dt[0],gt=dt[1];mt!==Number.MAX_SAFE_INTEGER&&gt?(ut&&et.getAttribute("morphTarget"+ct)!==ut[mt]&&et.setAttribute("morphTarget"+ct,ut[mt]),st&&et.getAttribute("morphNormal"+ct)!==st[mt]&&et.setAttribute("morphNormal"+ct,st[mt]),c[ct]=gt,it+=gt):(ut&&et.hasAttribute("morphTarget"+ct)===!0&&et.deleteAttribute("morphTarget"+ct),st&&et.hasAttribute("morphNormal"+ct)===!0&&et.deleteAttribute("morphNormal"+ct),c[ct]=0)}const ft=et.morphTargetsRelative?1:1-it;tt.getUniforms().setValue(s,"morphTargetBaseInfluence",ft),tt.getUniforms().setValue(s,"morphTargetInfluences",c)}}return{update:k}}function WebGLObjects(s,e,o,a){let c=new WeakMap;function d(k){const j=a.render.frame,et=k.geometry,nt=e.get(k,et);return c.get(nt)!==j&&(e.update(nt),c.set(nt,j)),k.isInstancedMesh&&(k.hasEventListener("dispose",b)===!1&&k.addEventListener("dispose",b),o.update(k.instanceMatrix,34962),k.instanceColor!==null&&o.update(k.instanceColor,34962)),nt}function _(){c=new WeakMap}function b(k){const j=k.target;j.removeEventListener("dispose",b),o.remove(j.instanceMatrix),j.instanceColor!==null&&o.remove(j.instanceColor)}return{update:d,dispose:_}}const emptyTexture=new Texture,emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(s,e,o){const a=s[0];if(a<=0||a>0)return s;const c=e*o;let d=arrayCacheF32[c];if(d===void 0&&(d=new Float32Array(c),arrayCacheF32[c]=d),e!==0){a.toArray(d,0);for(let _=1,b=0;_!==e;++_)b+=o,s[_].toArray(d,b)}return d}function arraysEqual(s,e){if(s.length!==e.length)return!1;for(let o=0,a=s.length;o<a;o++)if(s[o]!==e[o])return!1;return!0}function copyArray(s,e){for(let o=0,a=e.length;o<a;o++)s[o]=e[o]}function allocTexUnits(s,e){let o=arrayCacheI32[e];o===void 0&&(o=new Int32Array(e),arrayCacheI32[e]=o);for(let a=0;a!==e;++a)o[a]=s.allocateTextureUnit();return o}function setValueV1f(s,e){const o=this.cache;o[0]!==e&&(s.uniform1f(this.addr,e),o[0]=e)}function setValueV2f(s,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y)&&(s.uniform2f(this.addr,e.x,e.y),o[0]=e.x,o[1]=e.y);else{if(arraysEqual(o,e))return;s.uniform2fv(this.addr,e),copyArray(o,e)}}function setValueV3f(s,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y||o[2]!==e.z)&&(s.uniform3f(this.addr,e.x,e.y,e.z),o[0]=e.x,o[1]=e.y,o[2]=e.z);else if(e.r!==void 0)(o[0]!==e.r||o[1]!==e.g||o[2]!==e.b)&&(s.uniform3f(this.addr,e.r,e.g,e.b),o[0]=e.r,o[1]=e.g,o[2]=e.b);else{if(arraysEqual(o,e))return;s.uniform3fv(this.addr,e),copyArray(o,e)}}function setValueV4f(s,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y||o[2]!==e.z||o[3]!==e.w)&&(s.uniform4f(this.addr,e.x,e.y,e.z,e.w),o[0]=e.x,o[1]=e.y,o[2]=e.z,o[3]=e.w);else{if(arraysEqual(o,e))return;s.uniform4fv(this.addr,e),copyArray(o,e)}}function setValueM2(s,e){const o=this.cache,a=e.elements;if(a===void 0){if(arraysEqual(o,e))return;s.uniformMatrix2fv(this.addr,!1,e),copyArray(o,e)}else{if(arraysEqual(o,a))return;mat2array.set(a),s.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(o,a)}}function setValueM3(s,e){const o=this.cache,a=e.elements;if(a===void 0){if(arraysEqual(o,e))return;s.uniformMatrix3fv(this.addr,!1,e),copyArray(o,e)}else{if(arraysEqual(o,a))return;mat3array.set(a),s.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(o,a)}}function setValueM4(s,e){const o=this.cache,a=e.elements;if(a===void 0){if(arraysEqual(o,e))return;s.uniformMatrix4fv(this.addr,!1,e),copyArray(o,e)}else{if(arraysEqual(o,a))return;mat4array.set(a),s.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(o,a)}}function setValueV1i(s,e){const o=this.cache;o[0]!==e&&(s.uniform1i(this.addr,e),o[0]=e)}function setValueV2i(s,e){const o=this.cache;arraysEqual(o,e)||(s.uniform2iv(this.addr,e),copyArray(o,e))}function setValueV3i(s,e){const o=this.cache;arraysEqual(o,e)||(s.uniform3iv(this.addr,e),copyArray(o,e))}function setValueV4i(s,e){const o=this.cache;arraysEqual(o,e)||(s.uniform4iv(this.addr,e),copyArray(o,e))}function setValueV1ui(s,e){const o=this.cache;o[0]!==e&&(s.uniform1ui(this.addr,e),o[0]=e)}function setValueV2ui(s,e){const o=this.cache;arraysEqual(o,e)||(s.uniform2uiv(this.addr,e),copyArray(o,e))}function setValueV3ui(s,e){const o=this.cache;arraysEqual(o,e)||(s.uniform3uiv(this.addr,e),copyArray(o,e))}function setValueV4ui(s,e){const o=this.cache;arraysEqual(o,e)||(s.uniform4uiv(this.addr,e),copyArray(o,e))}function setValueT1(s,e,o){const a=this.cache,c=o.allocateTextureUnit();a[0]!==c&&(s.uniform1i(this.addr,c),a[0]=c),o.setTexture2D(e||emptyTexture,c)}function setValueT3D1(s,e,o){const a=this.cache,c=o.allocateTextureUnit();a[0]!==c&&(s.uniform1i(this.addr,c),a[0]=c),o.setTexture3D(e||empty3dTexture,c)}function setValueT6(s,e,o){const a=this.cache,c=o.allocateTextureUnit();a[0]!==c&&(s.uniform1i(this.addr,c),a[0]=c),o.setTextureCube(e||emptyCubeTexture,c)}function setValueT2DArray1(s,e,o){const a=this.cache,c=o.allocateTextureUnit();a[0]!==c&&(s.uniform1i(this.addr,c),a[0]=c),o.setTexture2DArray(e||emptyArrayTexture,c)}function getSingularSetter(s){switch(s){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(s,e){s.uniform1fv(this.addr,e)}function setValueV2fArray(s,e){const o=flatten(e,this.size,2);s.uniform2fv(this.addr,o)}function setValueV3fArray(s,e){const o=flatten(e,this.size,3);s.uniform3fv(this.addr,o)}function setValueV4fArray(s,e){const o=flatten(e,this.size,4);s.uniform4fv(this.addr,o)}function setValueM2Array(s,e){const o=flatten(e,this.size,4);s.uniformMatrix2fv(this.addr,!1,o)}function setValueM3Array(s,e){const o=flatten(e,this.size,9);s.uniformMatrix3fv(this.addr,!1,o)}function setValueM4Array(s,e){const o=flatten(e,this.size,16);s.uniformMatrix4fv(this.addr,!1,o)}function setValueV1iArray(s,e){s.uniform1iv(this.addr,e)}function setValueV2iArray(s,e){s.uniform2iv(this.addr,e)}function setValueV3iArray(s,e){s.uniform3iv(this.addr,e)}function setValueV4iArray(s,e){s.uniform4iv(this.addr,e)}function setValueV1uiArray(s,e){s.uniform1uiv(this.addr,e)}function setValueV2uiArray(s,e){s.uniform2uiv(this.addr,e)}function setValueV3uiArray(s,e){s.uniform3uiv(this.addr,e)}function setValueV4uiArray(s,e){s.uniform4uiv(this.addr,e)}function setValueT1Array(s,e,o){const a=e.length,c=allocTexUnits(o,a);s.uniform1iv(this.addr,c);for(let d=0;d!==a;++d)o.setTexture2D(e[d]||emptyTexture,c[d])}function setValueT3DArray(s,e,o){const a=e.length,c=allocTexUnits(o,a);s.uniform1iv(this.addr,c);for(let d=0;d!==a;++d)o.setTexture3D(e[d]||empty3dTexture,c[d])}function setValueT6Array(s,e,o){const a=e.length,c=allocTexUnits(o,a);s.uniform1iv(this.addr,c);for(let d=0;d!==a;++d)o.setTextureCube(e[d]||emptyCubeTexture,c[d])}function setValueT2DArrayArray(s,e,o){const a=e.length,c=allocTexUnits(o,a);s.uniform1iv(this.addr,c);for(let d=0;d!==a;++d)o.setTexture2DArray(e[d]||emptyArrayTexture,c[d])}function getPureArraySetter(s){switch(s){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}function SingleUniform(s,e,o){this.id=s,this.addr=o,this.cache=[],this.setValue=getSingularSetter(e.type)}function PureArrayUniform(s,e,o){this.id=s,this.addr=o,this.cache=[],this.size=e.size,this.setValue=getPureArraySetter(e.type)}PureArrayUniform.prototype.updateCache=function(s){const e=this.cache;s instanceof Float32Array&&e.length!==s.length&&(this.cache=new Float32Array(s.length)),copyArray(e,s)};function StructuredUniform(s){this.id=s,this.seq=[],this.map={}}StructuredUniform.prototype.setValue=function(s,e,o){const a=this.seq;for(let c=0,d=a.length;c!==d;++c){const _=a[c];_.setValue(s,e[_.id],o)}};const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(s,e){s.seq.push(e),s.map[e.id]=e}function parseUniform(s,e,o){const a=s.name,c=a.length;for(RePathPart.lastIndex=0;;){const d=RePathPart.exec(a),_=RePathPart.lastIndex;let b=d[1];const k=d[2]==="]",j=d[3];if(k&&(b=b|0),j===void 0||j==="["&&_+2===c){addUniform(o,j===void 0?new SingleUniform(b,s,e):new PureArrayUniform(b,s,e));break}else{let nt=o.map[b];nt===void 0&&(nt=new StructuredUniform(b),addUniform(o,nt)),o=nt}}}function WebGLUniforms(s,e){this.seq=[],this.map={};const o=s.getProgramParameter(e,35718);for(let a=0;a<o;++a){const c=s.getActiveUniform(e,a),d=s.getUniformLocation(e,c.name);parseUniform(c,d,this)}}WebGLUniforms.prototype.setValue=function(s,e,o,a){const c=this.map[e];c!==void 0&&c.setValue(s,o,a)};WebGLUniforms.prototype.setOptional=function(s,e,o){const a=e[o];a!==void 0&&this.setValue(s,o,a)};WebGLUniforms.upload=function(s,e,o,a){for(let c=0,d=e.length;c!==d;++c){const _=e[c],b=o[_.id];b.needsUpdate!==!1&&_.setValue(s,b.value,a)}};WebGLUniforms.seqWithValue=function(s,e){const o=[];for(let a=0,c=s.length;a!==c;++a){const d=s[a];d.id in e&&o.push(d)}return o};function WebGLShader(s,e,o){const a=s.createShader(e);return s.shaderSource(a,o),s.compileShader(a),a}let programIdCount=0;function addLineNumbers(s){const e=s.split(`
`);for(let o=0;o<e.length;o++)e[o]=o+1+": "+e[o];return e.join(`
`)}function getEncodingComponents(s){switch(s){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",s),["Linear","( value )"]}}function getShaderErrors(s,e,o){const a=s.getShaderParameter(e,35713),c=s.getShaderInfoLog(e).trim();return a&&c===""?"":o.toUpperCase()+`

`+c+`

`+addLineNumbers(s.getShaderSource(e))}function getTexelEncodingFunction(s,e){const o=getEncodingComponents(e);return"vec4 "+s+"( vec4 value ) { return LinearTo"+o[0]+o[1]+"; }"}function getToneMappingFunction(s,e){let o;switch(e){case LinearToneMapping:o="Linear";break;case ReinhardToneMapping:o="Reinhard";break;case CineonToneMapping:o="OptimizedCineon";break;case ACESFilmicToneMapping:o="ACESFilmic";break;case CustomToneMapping:o="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),o="Linear"}return"vec3 "+s+"( vec3 color ) { return "+o+"ToneMapping( color ); }"}function generateExtensions(s){return[s.extensionDerivatives||!!s.envMapCubeUVHeight||s.bumpMap||s.tangentSpaceNormalMap||s.clearcoatNormalMap||s.flatShading||s.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(s.extensionFragDepth||s.logarithmicDepthBuffer)&&s.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",s.extensionDrawBuffers&&s.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(s.extensionShaderTextureLOD||s.envMap||s.transmission)&&s.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join(`
`)}function generateDefines(s){const e=[];for(const o in s){const a=s[o];a!==!1&&e.push("#define "+o+" "+a)}return e.join(`
`)}function fetchAttributeLocations(s,e){const o={},a=s.getProgramParameter(e,35721);for(let c=0;c<a;c++){const d=s.getActiveAttrib(e,c),_=d.name;let b=1;d.type===35674&&(b=2),d.type===35675&&(b=3),d.type===35676&&(b=4),o[_]={type:d.type,location:s.getAttribLocation(e,_),locationSize:b}}return o}function filterEmptyLine(s){return s!==""}function replaceLightNums(s,e){return s.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function replaceClippingPlaneNums(s,e){return s.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(s){return s.replace(includePattern,includeReplacer)}function includeReplacer(s,e){const o=ShaderChunk[e];if(o===void 0)throw new Error("Can not resolve #include <"+e+">");return resolveIncludes(o)}const deprecatedUnrollLoopPattern=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(s){return s.replace(unrollLoopPattern,loopReplacer).replace(deprecatedUnrollLoopPattern,deprecatedLoopReplacer)}function deprecatedLoopReplacer(s,e,o,a){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(s,e,o,a)}function loopReplacer(s,e,o,a){let c="";for(let d=parseInt(e);d<parseInt(o);d++)c+=a.replace(/\[\s*i\s*\]/g,"[ "+d+" ]").replace(/UNROLLED_LOOP_INDEX/g,d);return c}function generatePrecision(s){let e="precision "+s.precision+` float;
precision `+s.precision+" int;";return s.precision==="highp"?e+=`
#define HIGH_PRECISION`:s.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:s.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function generateShadowMapTypeDefine(s){let e="SHADOWMAP_TYPE_BASIC";return s.shadowMapType===PCFShadowMap?e="SHADOWMAP_TYPE_PCF":s.shadowMapType===PCFSoftShadowMap?e="SHADOWMAP_TYPE_PCF_SOFT":s.shadowMapType===VSMShadowMap&&(e="SHADOWMAP_TYPE_VSM"),e}function generateEnvMapTypeDefine(s){let e="ENVMAP_TYPE_CUBE";if(s.envMap)switch(s.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:e="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:case CubeUVRefractionMapping:e="ENVMAP_TYPE_CUBE_UV";break}return e}function generateEnvMapModeDefine(s){let e="ENVMAP_MODE_REFLECTION";if(s.envMap)switch(s.envMapMode){case CubeRefractionMapping:case CubeUVRefractionMapping:e="ENVMAP_MODE_REFRACTION";break}return e}function generateEnvMapBlendingDefine(s){let e="ENVMAP_BLENDING_NONE";if(s.envMap)switch(s.combine){case MultiplyOperation:e="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:e="ENVMAP_BLENDING_MIX";break;case AddOperation:e="ENVMAP_BLENDING_ADD";break}return e}function generateCubeUVSize(s){const e=s.envMapCubeUVHeight;if(e===null)return null;const o=Math.log2(e/32+1)+3,a=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,o),7*16)),texelHeight:a,maxMip:o}}function WebGLProgram(s,e,o,a){const c=s.getContext(),d=o.defines;let _=o.vertexShader,b=o.fragmentShader;const k=generateShadowMapTypeDefine(o),j=generateEnvMapTypeDefine(o),et=generateEnvMapModeDefine(o),nt=generateEnvMapBlendingDefine(o),tt=generateCubeUVSize(o),rt=o.isWebGL2?"":generateExtensions(o),at=generateDefines(d),lt=c.createProgram();let ut,st,it=o.glslVersion?"#version "+o.glslVersion+`
`:"";o.isRawShaderMaterial?(ut=[at].filter(filterEmptyLine).join(`
`),ut.length>0&&(ut+=`
`),st=[rt,at].filter(filterEmptyLine).join(`
`),st.length>0&&(st+=`
`)):(ut=[generatePrecision(o),"#define SHADER_NAME "+o.shaderName,at,o.instancing?"#define USE_INSTANCING":"",o.instancingColor?"#define USE_INSTANCING_COLOR":"",o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+et:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",o.specularColorMap?"#define USE_SPECULARCOLORMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.transmission?"#define USE_TRANSMISSION":"",o.transmissionMap?"#define USE_TRANSMISSIONMAP":"",o.thicknessMap?"#define USE_THICKNESSMAP":"",o.sheenColorMap?"#define USE_SHEENCOLORMAP":"",o.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexAlphas?"#define USE_COLOR_ALPHA":"",o.vertexUvs?"#define USE_UV":"",o.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&o.flatShading===!1?"#define USE_MORPHNORMALS":"",o.morphColors&&o.isWebGL2?"#define USE_MORPHCOLORS":"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+o.morphTextureStride:"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_COUNT "+o.morphTargetsCount:"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+k:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),st=[rt,generatePrecision(o),"#define SHADER_NAME "+o.shaderName,at,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+j:"",o.envMap?"#define "+et:"",o.envMap?"#define "+nt:"",tt?"#define CUBEUV_TEXEL_WIDTH "+tt.texelWidth:"",tt?"#define CUBEUV_TEXEL_HEIGHT "+tt.texelHeight:"",tt?"#define CUBEUV_MAX_MIP "+tt.maxMip+".0":"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoat?"#define USE_CLEARCOAT":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",o.specularColorMap?"#define USE_SPECULARCOLORMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.alphaTest?"#define USE_ALPHATEST":"",o.sheen?"#define USE_SHEEN":"",o.sheenColorMap?"#define USE_SHEENCOLORMAP":"",o.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",o.transmission?"#define USE_TRANSMISSION":"",o.transmissionMap?"#define USE_TRANSMISSIONMAP":"",o.thicknessMap?"#define USE_THICKNESSMAP":"",o.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors||o.instancingColor?"#define USE_COLOR":"",o.vertexAlphas?"#define USE_COLOR_ALPHA":"",o.vertexUvs?"#define USE_UV":"",o.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+k:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",o.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",o.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",o.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.opaque?"#define OPAQUE":"",ShaderChunk.encodings_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",o.outputEncoding),o.depthPacking?"#define DEPTH_PACKING "+o.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),_=resolveIncludes(_),_=replaceLightNums(_,o),_=replaceClippingPlaneNums(_,o),b=resolveIncludes(b),b=replaceLightNums(b,o),b=replaceClippingPlaneNums(b,o),_=unrollLoops(_),b=unrollLoops(b),o.isWebGL2&&o.isRawShaderMaterial!==!0&&(it=`#version 300 es
`,ut=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+ut,st=["#define varying in",o.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",o.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+st);const ft=it+ut+_,ct=it+st+b,dt=WebGLShader(c,35633,ft),mt=WebGLShader(c,35632,ct);if(c.attachShader(lt,dt),c.attachShader(lt,mt),o.index0AttributeName!==void 0?c.bindAttribLocation(lt,0,o.index0AttributeName):o.morphTargets===!0&&c.bindAttribLocation(lt,0,"position"),c.linkProgram(lt),s.debug.checkShaderErrors){const St=c.getProgramInfoLog(lt).trim(),Et=c.getShaderInfoLog(dt).trim(),vt=c.getShaderInfoLog(mt).trim();let _t=!0,bt=!0;if(c.getProgramParameter(lt,35714)===!1){_t=!1;const At=getShaderErrors(c,dt,"vertex"),Rt=getShaderErrors(c,mt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+c.getError()+" - VALIDATE_STATUS "+c.getProgramParameter(lt,35715)+`

Program Info Log: `+St+`
`+At+`
`+Rt)}else St!==""?console.warn("THREE.WebGLProgram: Program Info Log:",St):(Et===""||vt==="")&&(bt=!1);bt&&(this.diagnostics={runnable:_t,programLog:St,vertexShader:{log:Et,prefix:ut},fragmentShader:{log:vt,prefix:st}})}c.deleteShader(dt),c.deleteShader(mt);let gt;this.getUniforms=function(){return gt===void 0&&(gt=new WebGLUniforms(c,lt)),gt};let yt;return this.getAttributes=function(){return yt===void 0&&(yt=fetchAttributeLocations(c,lt)),yt},this.destroy=function(){a.releaseStatesOfProgram(this),c.deleteProgram(lt),this.program=void 0},this.name=o.shaderName,this.id=programIdCount++,this.cacheKey=e,this.usedTimes=1,this.program=lt,this.vertexShader=dt,this.fragmentShader=mt,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const o=e.vertexShader,a=e.fragmentShader,c=this._getShaderStage(o),d=this._getShaderStage(a),_=this._getShaderCacheForMaterial(e);return _.has(c)===!1&&(_.add(c),c.usedTimes++),_.has(d)===!1&&(_.add(d),d.usedTimes++),this}remove(e){const o=this.materialCache.get(e);for(const a of o)a.usedTimes--,a.usedTimes===0&&this.shaderCache.delete(a);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const o=this.materialCache;return o.has(e)===!1&&o.set(e,new Set),o.get(e)}_getShaderStage(e){const o=this.shaderCache;if(o.has(e)===!1){const a=new WebGLShaderStage;o.set(e,a)}return o.get(e)}}class WebGLShaderStage{constructor(){this.id=_id++,this.usedTimes=0}}function WebGLPrograms(s,e,o,a,c,d,_){const b=new Layers,k=new WebGLShaderCache,j=[],et=c.isWebGL2,nt=c.logarithmicDepthBuffer,tt=c.floatVertexTextures,rt=c.maxVertexUniforms,at=c.vertexTextures;let lt=c.precision;const ut={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function st(vt){const bt=vt.skeleton.bones;if(tt)return 1024;{const Rt=Math.floor((rt-20)/4),Pt=Math.min(Rt,bt.length);return Pt<bt.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+bt.length+" bones. This GPU supports "+Pt+"."),0):Pt}}function it(vt,_t,bt,At,Rt){const Pt=At.fog,Dt=Rt.geometry,Ft=vt.isMeshStandardMaterial?At.environment:null,Vt=(vt.isMeshStandardMaterial?o:e).get(vt.envMap||Ft),Qt=!!Vt&&(Vt.mapping===CubeUVReflectionMapping||Vt.mapping===CubeUVRefractionMapping)?Vt.image.height:null,Lt=ut[vt.type],It=Rt.isSkinnedMesh?st(Rt):0;vt.precision!==null&&(lt=c.getMaxPrecision(vt.precision),lt!==vt.precision&&console.warn("THREE.WebGLProgram.getParameters:",vt.precision,"not supported, using",lt,"instead."));const Ht=Dt.morphAttributes.position||Dt.morphAttributes.normal||Dt.morphAttributes.color,on=Ht!==void 0?Ht.length:0;let nn=0;Dt.morphAttributes.position!==void 0&&(nn=1),Dt.morphAttributes.normal!==void 0&&(nn=2),Dt.morphAttributes.color!==void 0&&(nn=3);let jt,Mn,gn,fn;if(Lt){const rn=ShaderLib[Lt];jt=rn.vertexShader,Mn=rn.fragmentShader}else jt=vt.vertexShader,Mn=vt.fragmentShader,k.update(vt),gn=k.getVertexShaderID(vt),fn=k.getFragmentShaderID(vt);const pn=s.getRenderTarget(),_n=vt.alphaTest>0,$t=vt.clearcoat>0;return{isWebGL2:et,shaderID:Lt,shaderName:vt.type,vertexShader:jt,fragmentShader:Mn,defines:vt.defines,customVertexShaderID:gn,customFragmentShaderID:fn,isRawShaderMaterial:vt.isRawShaderMaterial===!0,glslVersion:vt.glslVersion,precision:lt,instancing:Rt.isInstancedMesh===!0,instancingColor:Rt.isInstancedMesh===!0&&Rt.instanceColor!==null,supportsVertexTextures:at,outputEncoding:pn===null?s.outputEncoding:pn.isXRRenderTarget===!0?pn.texture.encoding:LinearEncoding,map:!!vt.map,matcap:!!vt.matcap,envMap:!!Vt,envMapMode:Vt&&Vt.mapping,envMapCubeUVHeight:Qt,lightMap:!!vt.lightMap,aoMap:!!vt.aoMap,emissiveMap:!!vt.emissiveMap,bumpMap:!!vt.bumpMap,normalMap:!!vt.normalMap,objectSpaceNormalMap:vt.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:vt.normalMapType===TangentSpaceNormalMap,decodeVideoTexture:!!vt.map&&vt.map.isVideoTexture===!0&&vt.map.encoding===sRGBEncoding,clearcoat:$t,clearcoatMap:$t&&!!vt.clearcoatMap,clearcoatRoughnessMap:$t&&!!vt.clearcoatRoughnessMap,clearcoatNormalMap:$t&&!!vt.clearcoatNormalMap,displacementMap:!!vt.displacementMap,roughnessMap:!!vt.roughnessMap,metalnessMap:!!vt.metalnessMap,specularMap:!!vt.specularMap,specularIntensityMap:!!vt.specularIntensityMap,specularColorMap:!!vt.specularColorMap,opaque:vt.transparent===!1&&vt.blending===NormalBlending,alphaMap:!!vt.alphaMap,alphaTest:_n,gradientMap:!!vt.gradientMap,sheen:vt.sheen>0,sheenColorMap:!!vt.sheenColorMap,sheenRoughnessMap:!!vt.sheenRoughnessMap,transmission:vt.transmission>0,transmissionMap:!!vt.transmissionMap,thicknessMap:!!vt.thicknessMap,combine:vt.combine,vertexTangents:!!vt.normalMap&&!!Dt.attributes.tangent,vertexColors:vt.vertexColors,vertexAlphas:vt.vertexColors===!0&&!!Dt.attributes.color&&Dt.attributes.color.itemSize===4,vertexUvs:!!vt.map||!!vt.bumpMap||!!vt.normalMap||!!vt.specularMap||!!vt.alphaMap||!!vt.emissiveMap||!!vt.roughnessMap||!!vt.metalnessMap||!!vt.clearcoatMap||!!vt.clearcoatRoughnessMap||!!vt.clearcoatNormalMap||!!vt.displacementMap||!!vt.transmissionMap||!!vt.thicknessMap||!!vt.specularIntensityMap||!!vt.specularColorMap||!!vt.sheenColorMap||!!vt.sheenRoughnessMap,uvsVertexOnly:!(!!vt.map||!!vt.bumpMap||!!vt.normalMap||!!vt.specularMap||!!vt.alphaMap||!!vt.emissiveMap||!!vt.roughnessMap||!!vt.metalnessMap||!!vt.clearcoatNormalMap||vt.transmission>0||!!vt.transmissionMap||!!vt.thicknessMap||!!vt.specularIntensityMap||!!vt.specularColorMap||vt.sheen>0||!!vt.sheenColorMap||!!vt.sheenRoughnessMap)&&!!vt.displacementMap,fog:!!Pt,useFog:vt.fog,fogExp2:Pt&&Pt.isFogExp2,flatShading:!!vt.flatShading,sizeAttenuation:vt.sizeAttenuation,logarithmicDepthBuffer:nt,skinning:Rt.isSkinnedMesh===!0&&It>0,maxBones:It,useVertexTexture:tt,morphTargets:Dt.morphAttributes.position!==void 0,morphNormals:Dt.morphAttributes.normal!==void 0,morphColors:Dt.morphAttributes.color!==void 0,morphTargetsCount:on,morphTextureStride:nn,numDirLights:_t.directional.length,numPointLights:_t.point.length,numSpotLights:_t.spot.length,numRectAreaLights:_t.rectArea.length,numHemiLights:_t.hemi.length,numDirLightShadows:_t.directionalShadowMap.length,numPointLightShadows:_t.pointShadowMap.length,numSpotLightShadows:_t.spotShadowMap.length,numClippingPlanes:_.numPlanes,numClipIntersection:_.numIntersection,dithering:vt.dithering,shadowMapEnabled:s.shadowMap.enabled&&bt.length>0,shadowMapType:s.shadowMap.type,toneMapping:vt.toneMapped?s.toneMapping:NoToneMapping,physicallyCorrectLights:s.physicallyCorrectLights,premultipliedAlpha:vt.premultipliedAlpha,doubleSided:vt.side===DoubleSide,flipSided:vt.side===BackSide,depthPacking:vt.depthPacking!==void 0?vt.depthPacking:!1,index0AttributeName:vt.index0AttributeName,extensionDerivatives:vt.extensions&&vt.extensions.derivatives,extensionFragDepth:vt.extensions&&vt.extensions.fragDepth,extensionDrawBuffers:vt.extensions&&vt.extensions.drawBuffers,extensionShaderTextureLOD:vt.extensions&&vt.extensions.shaderTextureLOD,rendererExtensionFragDepth:et||a.has("EXT_frag_depth"),rendererExtensionDrawBuffers:et||a.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:et||a.has("EXT_shader_texture_lod"),customProgramCacheKey:vt.customProgramCacheKey()}}function ft(vt){const _t=[];if(vt.shaderID?_t.push(vt.shaderID):(_t.push(vt.customVertexShaderID),_t.push(vt.customFragmentShaderID)),vt.defines!==void 0)for(const bt in vt.defines)_t.push(bt),_t.push(vt.defines[bt]);return vt.isRawShaderMaterial===!1&&(ct(_t,vt),dt(_t,vt),_t.push(s.outputEncoding)),_t.push(vt.customProgramCacheKey),_t.join()}function ct(vt,_t){vt.push(_t.precision),vt.push(_t.outputEncoding),vt.push(_t.envMapMode),vt.push(_t.envMapCubeUVHeight),vt.push(_t.combine),vt.push(_t.vertexUvs),vt.push(_t.fogExp2),vt.push(_t.sizeAttenuation),vt.push(_t.maxBones),vt.push(_t.morphTargetsCount),vt.push(_t.morphAttributeCount),vt.push(_t.numDirLights),vt.push(_t.numPointLights),vt.push(_t.numSpotLights),vt.push(_t.numHemiLights),vt.push(_t.numRectAreaLights),vt.push(_t.numDirLightShadows),vt.push(_t.numPointLightShadows),vt.push(_t.numSpotLightShadows),vt.push(_t.shadowMapType),vt.push(_t.toneMapping),vt.push(_t.numClippingPlanes),vt.push(_t.numClipIntersection)}function dt(vt,_t){b.disableAll(),_t.isWebGL2&&b.enable(0),_t.supportsVertexTextures&&b.enable(1),_t.instancing&&b.enable(2),_t.instancingColor&&b.enable(3),_t.map&&b.enable(4),_t.matcap&&b.enable(5),_t.envMap&&b.enable(6),_t.lightMap&&b.enable(7),_t.aoMap&&b.enable(8),_t.emissiveMap&&b.enable(9),_t.bumpMap&&b.enable(10),_t.normalMap&&b.enable(11),_t.objectSpaceNormalMap&&b.enable(12),_t.tangentSpaceNormalMap&&b.enable(13),_t.clearcoat&&b.enable(14),_t.clearcoatMap&&b.enable(15),_t.clearcoatRoughnessMap&&b.enable(16),_t.clearcoatNormalMap&&b.enable(17),_t.displacementMap&&b.enable(18),_t.specularMap&&b.enable(19),_t.roughnessMap&&b.enable(20),_t.metalnessMap&&b.enable(21),_t.gradientMap&&b.enable(22),_t.alphaMap&&b.enable(23),_t.alphaTest&&b.enable(24),_t.vertexColors&&b.enable(25),_t.vertexAlphas&&b.enable(26),_t.vertexUvs&&b.enable(27),_t.vertexTangents&&b.enable(28),_t.uvsVertexOnly&&b.enable(29),_t.fog&&b.enable(30),vt.push(b.mask),b.disableAll(),_t.useFog&&b.enable(0),_t.flatShading&&b.enable(1),_t.logarithmicDepthBuffer&&b.enable(2),_t.skinning&&b.enable(3),_t.useVertexTexture&&b.enable(4),_t.morphTargets&&b.enable(5),_t.morphNormals&&b.enable(6),_t.morphColors&&b.enable(7),_t.premultipliedAlpha&&b.enable(8),_t.shadowMapEnabled&&b.enable(9),_t.physicallyCorrectLights&&b.enable(10),_t.doubleSided&&b.enable(11),_t.flipSided&&b.enable(12),_t.depthPacking&&b.enable(13),_t.dithering&&b.enable(14),_t.specularIntensityMap&&b.enable(15),_t.specularColorMap&&b.enable(16),_t.transmission&&b.enable(17),_t.transmissionMap&&b.enable(18),_t.thicknessMap&&b.enable(19),_t.sheen&&b.enable(20),_t.sheenColorMap&&b.enable(21),_t.sheenRoughnessMap&&b.enable(22),_t.decodeVideoTexture&&b.enable(23),_t.opaque&&b.enable(24),vt.push(b.mask)}function mt(vt){const _t=ut[vt.type];let bt;if(_t){const At=ShaderLib[_t];bt=UniformsUtils.clone(At.uniforms)}else bt=vt.uniforms;return bt}function gt(vt,_t){let bt;for(let At=0,Rt=j.length;At<Rt;At++){const Pt=j[At];if(Pt.cacheKey===_t){bt=Pt,++bt.usedTimes;break}}return bt===void 0&&(bt=new WebGLProgram(s,_t,vt,d),j.push(bt)),bt}function yt(vt){if(--vt.usedTimes===0){const _t=j.indexOf(vt);j[_t]=j[j.length-1],j.pop(),vt.destroy()}}function St(vt){k.remove(vt)}function Et(){k.dispose()}return{getParameters:it,getProgramCacheKey:ft,getUniforms:mt,acquireProgram:gt,releaseProgram:yt,releaseShaderCache:St,programs:j,dispose:Et}}function WebGLProperties(){let s=new WeakMap;function e(d){let _=s.get(d);return _===void 0&&(_={},s.set(d,_)),_}function o(d){s.delete(d)}function a(d,_,b){s.get(d)[_]=b}function c(){s=new WeakMap}return{get:e,remove:o,update:a,dispose:c}}function painterSortStable(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.material.id!==e.material.id?s.material.id-e.material.id:s.z!==e.z?s.z-e.z:s.id-e.id}function reversePainterSortStable(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.z!==e.z?e.z-s.z:s.id-e.id}function WebGLRenderList(){const s=[];let e=0;const o=[],a=[],c=[];function d(){e=0,o.length=0,a.length=0,c.length=0}function _(nt,tt,rt,at,lt,ut){let st=s[e];return st===void 0?(st={id:nt.id,object:nt,geometry:tt,material:rt,groupOrder:at,renderOrder:nt.renderOrder,z:lt,group:ut},s[e]=st):(st.id=nt.id,st.object=nt,st.geometry=tt,st.material=rt,st.groupOrder=at,st.renderOrder=nt.renderOrder,st.z=lt,st.group=ut),e++,st}function b(nt,tt,rt,at,lt,ut){const st=_(nt,tt,rt,at,lt,ut);rt.transmission>0?a.push(st):rt.transparent===!0?c.push(st):o.push(st)}function k(nt,tt,rt,at,lt,ut){const st=_(nt,tt,rt,at,lt,ut);rt.transmission>0?a.unshift(st):rt.transparent===!0?c.unshift(st):o.unshift(st)}function j(nt,tt){o.length>1&&o.sort(nt||painterSortStable),a.length>1&&a.sort(tt||reversePainterSortStable),c.length>1&&c.sort(tt||reversePainterSortStable)}function et(){for(let nt=e,tt=s.length;nt<tt;nt++){const rt=s[nt];if(rt.id===null)break;rt.id=null,rt.object=null,rt.geometry=null,rt.material=null,rt.group=null}}return{opaque:o,transmissive:a,transparent:c,init:d,push:b,unshift:k,finish:et,sort:j}}function WebGLRenderLists(){let s=new WeakMap;function e(a,c){let d;return s.has(a)===!1?(d=new WebGLRenderList,s.set(a,[d])):c>=s.get(a).length?(d=new WebGLRenderList,s.get(a).push(d)):d=s.get(a)[c],d}function o(){s=new WeakMap}return{get:e,dispose:o}}function UniformsCache(){const s={};return{get:function(e){if(s[e.id]!==void 0)return s[e.id];let o;switch(e.type){case"DirectionalLight":o={direction:new Vector3,color:new Color};break;case"SpotLight":o={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":o={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":o={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":o={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return s[e.id]=o,o}}}function ShadowUniformsCache(){const s={};return{get:function(e){if(s[e.id]!==void 0)return s[e.id];let o;switch(e.type){case"DirectionalLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return s[e.id]=o,o}}}let nextVersion=0;function shadowCastingLightsFirst(s,e){return(e.castShadow?1:0)-(s.castShadow?1:0)}function WebGLLights(s,e){const o=new UniformsCache,a=ShadowUniformsCache(),c={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let et=0;et<9;et++)c.probe.push(new Vector3);const d=new Vector3,_=new Matrix4,b=new Matrix4;function k(et,nt){let tt=0,rt=0,at=0;for(let St=0;St<9;St++)c.probe[St].set(0,0,0);let lt=0,ut=0,st=0,it=0,ft=0,ct=0,dt=0,mt=0;et.sort(shadowCastingLightsFirst);const gt=nt!==!0?Math.PI:1;for(let St=0,Et=et.length;St<Et;St++){const vt=et[St],_t=vt.color,bt=vt.intensity,At=vt.distance,Rt=vt.shadow&&vt.shadow.map?vt.shadow.map.texture:null;if(vt.isAmbientLight)tt+=_t.r*bt*gt,rt+=_t.g*bt*gt,at+=_t.b*bt*gt;else if(vt.isLightProbe)for(let Pt=0;Pt<9;Pt++)c.probe[Pt].addScaledVector(vt.sh.coefficients[Pt],bt);else if(vt.isDirectionalLight){const Pt=o.get(vt);if(Pt.color.copy(vt.color).multiplyScalar(vt.intensity*gt),vt.castShadow){const Dt=vt.shadow,Ft=a.get(vt);Ft.shadowBias=Dt.bias,Ft.shadowNormalBias=Dt.normalBias,Ft.shadowRadius=Dt.radius,Ft.shadowMapSize=Dt.mapSize,c.directionalShadow[lt]=Ft,c.directionalShadowMap[lt]=Rt,c.directionalShadowMatrix[lt]=vt.shadow.matrix,ct++}c.directional[lt]=Pt,lt++}else if(vt.isSpotLight){const Pt=o.get(vt);if(Pt.position.setFromMatrixPosition(vt.matrixWorld),Pt.color.copy(_t).multiplyScalar(bt*gt),Pt.distance=At,Pt.coneCos=Math.cos(vt.angle),Pt.penumbraCos=Math.cos(vt.angle*(1-vt.penumbra)),Pt.decay=vt.decay,vt.castShadow){const Dt=vt.shadow,Ft=a.get(vt);Ft.shadowBias=Dt.bias,Ft.shadowNormalBias=Dt.normalBias,Ft.shadowRadius=Dt.radius,Ft.shadowMapSize=Dt.mapSize,c.spotShadow[st]=Ft,c.spotShadowMap[st]=Rt,c.spotShadowMatrix[st]=vt.shadow.matrix,mt++}c.spot[st]=Pt,st++}else if(vt.isRectAreaLight){const Pt=o.get(vt);Pt.color.copy(_t).multiplyScalar(bt),Pt.halfWidth.set(vt.width*.5,0,0),Pt.halfHeight.set(0,vt.height*.5,0),c.rectArea[it]=Pt,it++}else if(vt.isPointLight){const Pt=o.get(vt);if(Pt.color.copy(vt.color).multiplyScalar(vt.intensity*gt),Pt.distance=vt.distance,Pt.decay=vt.decay,vt.castShadow){const Dt=vt.shadow,Ft=a.get(vt);Ft.shadowBias=Dt.bias,Ft.shadowNormalBias=Dt.normalBias,Ft.shadowRadius=Dt.radius,Ft.shadowMapSize=Dt.mapSize,Ft.shadowCameraNear=Dt.camera.near,Ft.shadowCameraFar=Dt.camera.far,c.pointShadow[ut]=Ft,c.pointShadowMap[ut]=Rt,c.pointShadowMatrix[ut]=vt.shadow.matrix,dt++}c.point[ut]=Pt,ut++}else if(vt.isHemisphereLight){const Pt=o.get(vt);Pt.skyColor.copy(vt.color).multiplyScalar(bt*gt),Pt.groundColor.copy(vt.groundColor).multiplyScalar(bt*gt),c.hemi[ft]=Pt,ft++}}it>0&&(e.isWebGL2||s.has("OES_texture_float_linear")===!0?(c.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,c.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):s.has("OES_texture_half_float_linear")===!0?(c.rectAreaLTC1=UniformsLib.LTC_HALF_1,c.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),c.ambient[0]=tt,c.ambient[1]=rt,c.ambient[2]=at;const yt=c.hash;(yt.directionalLength!==lt||yt.pointLength!==ut||yt.spotLength!==st||yt.rectAreaLength!==it||yt.hemiLength!==ft||yt.numDirectionalShadows!==ct||yt.numPointShadows!==dt||yt.numSpotShadows!==mt)&&(c.directional.length=lt,c.spot.length=st,c.rectArea.length=it,c.point.length=ut,c.hemi.length=ft,c.directionalShadow.length=ct,c.directionalShadowMap.length=ct,c.pointShadow.length=dt,c.pointShadowMap.length=dt,c.spotShadow.length=mt,c.spotShadowMap.length=mt,c.directionalShadowMatrix.length=ct,c.pointShadowMatrix.length=dt,c.spotShadowMatrix.length=mt,yt.directionalLength=lt,yt.pointLength=ut,yt.spotLength=st,yt.rectAreaLength=it,yt.hemiLength=ft,yt.numDirectionalShadows=ct,yt.numPointShadows=dt,yt.numSpotShadows=mt,c.version=nextVersion++)}function j(et,nt){let tt=0,rt=0,at=0,lt=0,ut=0;const st=nt.matrixWorldInverse;for(let it=0,ft=et.length;it<ft;it++){const ct=et[it];if(ct.isDirectionalLight){const dt=c.directional[tt];dt.direction.setFromMatrixPosition(ct.matrixWorld),d.setFromMatrixPosition(ct.target.matrixWorld),dt.direction.sub(d),dt.direction.transformDirection(st),tt++}else if(ct.isSpotLight){const dt=c.spot[at];dt.position.setFromMatrixPosition(ct.matrixWorld),dt.position.applyMatrix4(st),dt.direction.setFromMatrixPosition(ct.matrixWorld),d.setFromMatrixPosition(ct.target.matrixWorld),dt.direction.sub(d),dt.direction.transformDirection(st),at++}else if(ct.isRectAreaLight){const dt=c.rectArea[lt];dt.position.setFromMatrixPosition(ct.matrixWorld),dt.position.applyMatrix4(st),b.identity(),_.copy(ct.matrixWorld),_.premultiply(st),b.extractRotation(_),dt.halfWidth.set(ct.width*.5,0,0),dt.halfHeight.set(0,ct.height*.5,0),dt.halfWidth.applyMatrix4(b),dt.halfHeight.applyMatrix4(b),lt++}else if(ct.isPointLight){const dt=c.point[rt];dt.position.setFromMatrixPosition(ct.matrixWorld),dt.position.applyMatrix4(st),rt++}else if(ct.isHemisphereLight){const dt=c.hemi[ut];dt.direction.setFromMatrixPosition(ct.matrixWorld),dt.direction.transformDirection(st),dt.direction.normalize(),ut++}}}return{setup:k,setupView:j,state:c}}function WebGLRenderState(s,e){const o=new WebGLLights(s,e),a=[],c=[];function d(){a.length=0,c.length=0}function _(nt){a.push(nt)}function b(nt){c.push(nt)}function k(nt){o.setup(a,nt)}function j(nt){o.setupView(a,nt)}return{init:d,state:{lightsArray:a,shadowsArray:c,lights:o},setupLights:k,setupLightsView:j,pushLight:_,pushShadow:b}}function WebGLRenderStates(s,e){let o=new WeakMap;function a(d,_=0){let b;return o.has(d)===!1?(b=new WebGLRenderState(s,e),o.set(d,[b])):_>=o.get(d).length?(b=new WebGLRenderState(s,e),o.get(d).push(b)):b=o.get(d)[_],b}function c(){o=new WeakMap}return{get:a,dispose:c}}class MeshDepthMaterial extends Material{constructor(e){super();this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;class MeshDistanceMaterial extends Material{constructor(e){super();this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(s,e,o){let a=new Frustum;const c=new Vector2,d=new Vector2,_=new Vector4,b=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),k=new MeshDistanceMaterial,j={},et=o.maxTextureSize,nt={0:BackSide,1:FrontSide,2:DoubleSide},tt=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),rt=tt.clone();rt.defines.HORIZONTAL_PASS=1;const at=new BufferGeometry;at.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const lt=new Mesh(at,tt),ut=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(ct,dt,mt){if(ut.enabled===!1||ut.autoUpdate===!1&&ut.needsUpdate===!1||ct.length===0)return;const gt=s.getRenderTarget(),yt=s.getActiveCubeFace(),St=s.getActiveMipmapLevel(),Et=s.state;Et.setBlending(NoBlending),Et.buffers.color.setClear(1,1,1,1),Et.buffers.depth.setTest(!0),Et.setScissorTest(!1);for(let vt=0,_t=ct.length;vt<_t;vt++){const bt=ct[vt],At=bt.shadow;if(At===void 0){console.warn("THREE.WebGLShadowMap:",bt,"has no shadow.");continue}if(At.autoUpdate===!1&&At.needsUpdate===!1)continue;c.copy(At.mapSize);const Rt=At.getFrameExtents();if(c.multiply(Rt),d.copy(At.mapSize),(c.x>et||c.y>et)&&(c.x>et&&(d.x=Math.floor(et/Rt.x),c.x=d.x*Rt.x,At.mapSize.x=d.x),c.y>et&&(d.y=Math.floor(et/Rt.y),c.y=d.y*Rt.y,At.mapSize.y=d.y)),At.map===null&&!At.isPointLightShadow&&this.type===VSMShadowMap){const Dt={minFilter:LinearFilter,magFilter:LinearFilter,format:RGBAFormat};At.map=new WebGLRenderTarget(c.x,c.y,Dt),At.map.texture.name=bt.name+".shadowMap",At.mapPass=new WebGLRenderTarget(c.x,c.y,Dt),At.camera.updateProjectionMatrix()}if(At.map===null){const Dt={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};At.map=new WebGLRenderTarget(c.x,c.y,Dt),At.map.texture.name=bt.name+".shadowMap",At.camera.updateProjectionMatrix()}s.setRenderTarget(At.map),s.clear();const Pt=At.getViewportCount();for(let Dt=0;Dt<Pt;Dt++){const Ft=At.getViewport(Dt);_.set(d.x*Ft.x,d.y*Ft.y,d.x*Ft.z,d.y*Ft.w),Et.viewport(_),At.updateMatrices(bt,Dt),a=At.getFrustum(),ft(dt,mt,At.camera,bt,this.type)}!At.isPointLightShadow&&this.type===VSMShadowMap&&st(At,mt),At.needsUpdate=!1}ut.needsUpdate=!1,s.setRenderTarget(gt,yt,St)};function st(ct,dt){const mt=e.update(lt);tt.defines.VSM_SAMPLES!==ct.blurSamples&&(tt.defines.VSM_SAMPLES=ct.blurSamples,rt.defines.VSM_SAMPLES=ct.blurSamples,tt.needsUpdate=!0,rt.needsUpdate=!0),tt.uniforms.shadow_pass.value=ct.map.texture,tt.uniforms.resolution.value=ct.mapSize,tt.uniforms.radius.value=ct.radius,s.setRenderTarget(ct.mapPass),s.clear(),s.renderBufferDirect(dt,null,mt,tt,lt,null),rt.uniforms.shadow_pass.value=ct.mapPass.texture,rt.uniforms.resolution.value=ct.mapSize,rt.uniforms.radius.value=ct.radius,s.setRenderTarget(ct.map),s.clear(),s.renderBufferDirect(dt,null,mt,rt,lt,null)}function it(ct,dt,mt,gt,yt,St){let Et=null;const vt=mt.isPointLight===!0?ct.customDistanceMaterial:ct.customDepthMaterial;if(vt!==void 0?Et=vt:Et=mt.isPointLight===!0?k:b,s.localClippingEnabled&&dt.clipShadows===!0&&dt.clippingPlanes.length!==0||dt.displacementMap&&dt.displacementScale!==0||dt.alphaMap&&dt.alphaTest>0){const _t=Et.uuid,bt=dt.uuid;let At=j[_t];At===void 0&&(At={},j[_t]=At);let Rt=At[bt];Rt===void 0&&(Rt=Et.clone(),At[bt]=Rt),Et=Rt}return Et.visible=dt.visible,Et.wireframe=dt.wireframe,St===VSMShadowMap?Et.side=dt.shadowSide!==null?dt.shadowSide:dt.side:Et.side=dt.shadowSide!==null?dt.shadowSide:nt[dt.side],Et.alphaMap=dt.alphaMap,Et.alphaTest=dt.alphaTest,Et.clipShadows=dt.clipShadows,Et.clippingPlanes=dt.clippingPlanes,Et.clipIntersection=dt.clipIntersection,Et.displacementMap=dt.displacementMap,Et.displacementScale=dt.displacementScale,Et.displacementBias=dt.displacementBias,Et.wireframeLinewidth=dt.wireframeLinewidth,Et.linewidth=dt.linewidth,mt.isPointLight===!0&&Et.isMeshDistanceMaterial===!0&&(Et.referencePosition.setFromMatrixPosition(mt.matrixWorld),Et.nearDistance=gt,Et.farDistance=yt),Et}function ft(ct,dt,mt,gt,yt){if(ct.visible===!1)return;if(ct.layers.test(dt.layers)&&(ct.isMesh||ct.isLine||ct.isPoints)&&(ct.castShadow||ct.receiveShadow&&yt===VSMShadowMap)&&(!ct.frustumCulled||a.intersectsObject(ct))){ct.modelViewMatrix.multiplyMatrices(mt.matrixWorldInverse,ct.matrixWorld);const vt=e.update(ct),_t=ct.material;if(Array.isArray(_t)){const bt=vt.groups;for(let At=0,Rt=bt.length;At<Rt;At++){const Pt=bt[At],Dt=_t[Pt.materialIndex];if(Dt&&Dt.visible){const Ft=it(ct,Dt,gt,mt.near,mt.far,yt);s.renderBufferDirect(mt,null,vt,Ft,ct,Pt)}}}else if(_t.visible){const bt=it(ct,_t,gt,mt.near,mt.far,yt);s.renderBufferDirect(mt,null,vt,bt,ct,null)}}const Et=ct.children;for(let vt=0,_t=Et.length;vt<_t;vt++)ft(Et[vt],dt,mt,gt,yt)}}function WebGLState(s,e,o){const a=o.isWebGL2;function c(){let Bt=!1;const an=new Vector4;let en=null;const Cn=new Vector4(0,0,0,0);return{setMask:function(un){en!==un&&!Bt&&(s.colorMask(un,un,un,un),en=un)},setLocked:function(un){Bt=un},setClear:function(un,ln,Rn,Fn,ar){ar===!0&&(un*=Fn,ln*=Fn,Rn*=Fn),an.set(un,ln,Rn,Fn),Cn.equals(an)===!1&&(s.clearColor(un,ln,Rn,Fn),Cn.copy(an))},reset:function(){Bt=!1,en=null,Cn.set(-1,0,0,0)}}}function d(){let Bt=!1,an=null,en=null,Cn=null;return{setTest:function(un){un?nn(2929):jt(2929)},setMask:function(un){an!==un&&!Bt&&(s.depthMask(un),an=un)},setFunc:function(un){if(en!==un){if(un)switch(un){case NeverDepth:s.depthFunc(512);break;case AlwaysDepth:s.depthFunc(519);break;case LessDepth:s.depthFunc(513);break;case LessEqualDepth:s.depthFunc(515);break;case EqualDepth:s.depthFunc(514);break;case GreaterEqualDepth:s.depthFunc(518);break;case GreaterDepth:s.depthFunc(516);break;case NotEqualDepth:s.depthFunc(517);break;default:s.depthFunc(515)}else s.depthFunc(515);en=un}},setLocked:function(un){Bt=un},setClear:function(un){Cn!==un&&(s.clearDepth(un),Cn=un)},reset:function(){Bt=!1,an=null,en=null,Cn=null}}}function _(){let Bt=!1,an=null,en=null,Cn=null,un=null,ln=null,Rn=null,Fn=null,ar=null;return{setTest:function(Yn){Bt||(Yn?nn(2960):jt(2960))},setMask:function(Yn){an!==Yn&&!Bt&&(s.stencilMask(Yn),an=Yn)},setFunc:function(Yn,er,Lr){(en!==Yn||Cn!==er||un!==Lr)&&(s.stencilFunc(Yn,er,Lr),en=Yn,Cn=er,un=Lr)},setOp:function(Yn,er,Lr){(ln!==Yn||Rn!==er||Fn!==Lr)&&(s.stencilOp(Yn,er,Lr),ln=Yn,Rn=er,Fn=Lr)},setLocked:function(Yn){Bt=Yn},setClear:function(Yn){ar!==Yn&&(s.clearStencil(Yn),ar=Yn)},reset:function(){Bt=!1,an=null,en=null,Cn=null,un=null,ln=null,Rn=null,Fn=null,ar=null}}}const b=new c,k=new d,j=new _;let et={},nt={},tt=new WeakMap,rt=[],at=null,lt=!1,ut=null,st=null,it=null,ft=null,ct=null,dt=null,mt=null,gt=!1,yt=null,St=null,Et=null,vt=null,_t=null;const bt=s.getParameter(35661);let At=!1,Rt=0;const Pt=s.getParameter(7938);Pt.indexOf("WebGL")!==-1?(Rt=parseFloat(/^WebGL (\d)/.exec(Pt)[1]),At=Rt>=1):Pt.indexOf("OpenGL ES")!==-1&&(Rt=parseFloat(/^OpenGL ES (\d)/.exec(Pt)[1]),At=Rt>=2);let Dt=null,Ft={};const Vt=s.getParameter(3088),Qt=s.getParameter(2978),Lt=new Vector4().fromArray(Vt),It=new Vector4().fromArray(Qt);function Ht(Bt,an,en){const Cn=new Uint8Array(4),un=s.createTexture();s.bindTexture(Bt,un),s.texParameteri(Bt,10241,9728),s.texParameteri(Bt,10240,9728);for(let ln=0;ln<en;ln++)s.texImage2D(an+ln,0,6408,1,1,0,6408,5121,Cn);return un}const on={};on[3553]=Ht(3553,3553,1),on[34067]=Ht(34067,34069,6),b.setClear(0,0,0,1),k.setClear(1),j.setClear(0),nn(2929),k.setFunc(LessEqualDepth),rn(!1),vn(CullFaceBack),nn(2884),$t(NoBlending);function nn(Bt){et[Bt]!==!0&&(s.enable(Bt),et[Bt]=!0)}function jt(Bt){et[Bt]!==!1&&(s.disable(Bt),et[Bt]=!1)}function Mn(Bt,an){return nt[Bt]!==an?(s.bindFramebuffer(Bt,an),nt[Bt]=an,a&&(Bt===36009&&(nt[36160]=an),Bt===36160&&(nt[36009]=an)),!0):!1}function gn(Bt,an){let en=rt,Cn=!1;if(Bt)if(en=tt.get(an),en===void 0&&(en=[],tt.set(an,en)),Bt.isWebGLMultipleRenderTargets){const un=Bt.texture;if(en.length!==un.length||en[0]!==36064){for(let ln=0,Rn=un.length;ln<Rn;ln++)en[ln]=36064+ln;en.length=un.length,Cn=!0}}else en[0]!==36064&&(en[0]=36064,Cn=!0);else en[0]!==1029&&(en[0]=1029,Cn=!0);Cn&&(o.isWebGL2?s.drawBuffers(en):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(en))}function fn(Bt){return at!==Bt?(s.useProgram(Bt),at=Bt,!0):!1}const pn={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(a)pn[MinEquation]=32775,pn[MaxEquation]=32776;else{const Bt=e.get("EXT_blend_minmax");Bt!==null&&(pn[MinEquation]=Bt.MIN_EXT,pn[MaxEquation]=Bt.MAX_EXT)}const _n={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function $t(Bt,an,en,Cn,un,ln,Rn,Fn){if(Bt===NoBlending){lt===!0&&(jt(3042),lt=!1);return}if(lt===!1&&(nn(3042),lt=!0),Bt!==CustomBlending){if(Bt!==ut||Fn!==gt){if((st!==AddEquation||ct!==AddEquation)&&(s.blendEquation(32774),st=AddEquation,ct=AddEquation),Fn)switch(Bt){case NormalBlending:s.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:s.blendFunc(1,1);break;case SubtractiveBlending:s.blendFuncSeparate(0,769,0,1);break;case MultiplyBlending:s.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Bt);break}else switch(Bt){case NormalBlending:s.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:s.blendFunc(770,1);break;case SubtractiveBlending:s.blendFuncSeparate(0,769,0,1);break;case MultiplyBlending:s.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Bt);break}it=null,ft=null,dt=null,mt=null,ut=Bt,gt=Fn}return}un=un||an,ln=ln||en,Rn=Rn||Cn,(an!==st||un!==ct)&&(s.blendEquationSeparate(pn[an],pn[un]),st=an,ct=un),(en!==it||Cn!==ft||ln!==dt||Rn!==mt)&&(s.blendFuncSeparate(_n[en],_n[Cn],_n[ln],_n[Rn]),it=en,ft=Cn,dt=ln,mt=Rn),ut=Bt,gt=null}function sn(Bt,an){Bt.side===DoubleSide?jt(2884):nn(2884);let en=Bt.side===BackSide;an&&(en=!en),rn(en),Bt.blending===NormalBlending&&Bt.transparent===!1?$t(NoBlending):$t(Bt.blending,Bt.blendEquation,Bt.blendSrc,Bt.blendDst,Bt.blendEquationAlpha,Bt.blendSrcAlpha,Bt.blendDstAlpha,Bt.premultipliedAlpha),k.setFunc(Bt.depthFunc),k.setTest(Bt.depthTest),k.setMask(Bt.depthWrite),b.setMask(Bt.colorWrite);const Cn=Bt.stencilWrite;j.setTest(Cn),Cn&&(j.setMask(Bt.stencilWriteMask),j.setFunc(Bt.stencilFunc,Bt.stencilRef,Bt.stencilFuncMask),j.setOp(Bt.stencilFail,Bt.stencilZFail,Bt.stencilZPass)),Dn(Bt.polygonOffset,Bt.polygonOffsetFactor,Bt.polygonOffsetUnits),Bt.alphaToCoverage===!0?nn(32926):jt(32926)}function rn(Bt){yt!==Bt&&(Bt?s.frontFace(2304):s.frontFace(2305),yt=Bt)}function vn(Bt){Bt!==CullFaceNone?(nn(2884),Bt!==St&&(Bt===CullFaceBack?s.cullFace(1029):Bt===CullFaceFront?s.cullFace(1028):s.cullFace(1032))):jt(2884),St=Bt}function cn(Bt){Bt!==Et&&(At&&s.lineWidth(Bt),Et=Bt)}function Dn(Bt,an,en){Bt?(nn(32823),(vt!==an||_t!==en)&&(s.polygonOffset(an,en),vt=an,_t=en)):jt(32823)}function Kt(Bt){Bt?nn(3089):jt(3089)}function bn(Bt){Bt===void 0&&(Bt=33984+bt-1),Dt!==Bt&&(s.activeTexture(Bt),Dt=Bt)}function En(Bt,an){Dt===null&&bn();let en=Ft[Dt];en===void 0&&(en={type:void 0,texture:void 0},Ft[Dt]=en),(en.type!==Bt||en.texture!==an)&&(s.bindTexture(Bt,an||on[Bt]),en.type=Bt,en.texture=an)}function wt(){const Bt=Ft[Dt];Bt!==void 0&&Bt.type!==void 0&&(s.bindTexture(Bt.type,null),Bt.type=void 0,Bt.texture=void 0)}function Mt(){try{s.compressedTexImage2D.apply(s,arguments)}catch(Bt){console.error("THREE.WebGLState:",Bt)}}function Ot(){try{s.texSubImage2D.apply(s,arguments)}catch(Bt){console.error("THREE.WebGLState:",Bt)}}function zt(){try{s.texSubImage3D.apply(s,arguments)}catch(Bt){console.error("THREE.WebGLState:",Bt)}}function Yt(){try{s.compressedTexSubImage2D.apply(s,arguments)}catch(Bt){console.error("THREE.WebGLState:",Bt)}}function dn(){try{s.texStorage2D.apply(s,arguments)}catch(Bt){console.error("THREE.WebGLState:",Bt)}}function xn(){try{s.texStorage3D.apply(s,arguments)}catch(Bt){console.error("THREE.WebGLState:",Bt)}}function Nt(){try{s.texImage2D.apply(s,arguments)}catch(Bt){console.error("THREE.WebGLState:",Bt)}}function mn(){try{s.texImage3D.apply(s,arguments)}catch(Bt){console.error("THREE.WebGLState:",Bt)}}function Ln(Bt){Lt.equals(Bt)===!1&&(s.scissor(Bt.x,Bt.y,Bt.z,Bt.w),Lt.copy(Bt))}function Sn(Bt){It.equals(Bt)===!1&&(s.viewport(Bt.x,Bt.y,Bt.z,Bt.w),It.copy(Bt))}function yn(){s.disable(3042),s.disable(2884),s.disable(2929),s.disable(32823),s.disable(3089),s.disable(2960),s.disable(32926),s.blendEquation(32774),s.blendFunc(1,0),s.blendFuncSeparate(1,0,1,0),s.colorMask(!0,!0,!0,!0),s.clearColor(0,0,0,0),s.depthMask(!0),s.depthFunc(513),s.clearDepth(1),s.stencilMask(4294967295),s.stencilFunc(519,0,4294967295),s.stencilOp(7680,7680,7680),s.clearStencil(0),s.cullFace(1029),s.frontFace(2305),s.polygonOffset(0,0),s.activeTexture(33984),s.bindFramebuffer(36160,null),a===!0&&(s.bindFramebuffer(36009,null),s.bindFramebuffer(36008,null)),s.useProgram(null),s.lineWidth(1),s.scissor(0,0,s.canvas.width,s.canvas.height),s.viewport(0,0,s.canvas.width,s.canvas.height),et={},Dt=null,Ft={},nt={},tt=new WeakMap,rt=[],at=null,lt=!1,ut=null,st=null,it=null,ft=null,ct=null,dt=null,mt=null,gt=!1,yt=null,St=null,Et=null,vt=null,_t=null,Lt.set(0,0,s.canvas.width,s.canvas.height),It.set(0,0,s.canvas.width,s.canvas.height),b.reset(),k.reset(),j.reset()}return{buffers:{color:b,depth:k,stencil:j},enable:nn,disable:jt,bindFramebuffer:Mn,drawBuffers:gn,useProgram:fn,setBlending:$t,setMaterial:sn,setFlipSided:rn,setCullFace:vn,setLineWidth:cn,setPolygonOffset:Dn,setScissorTest:Kt,activeTexture:bn,bindTexture:En,unbindTexture:wt,compressedTexImage2D:Mt,texImage2D:Nt,texImage3D:mn,texStorage2D:dn,texStorage3D:xn,texSubImage2D:Ot,texSubImage3D:zt,compressedTexSubImage2D:Yt,scissor:Ln,viewport:Sn,reset:yn}}function WebGLTextures(s,e,o,a,c,d,_){const b=c.isWebGL2,k=c.maxTextures,j=c.maxCubemapSize,et=c.maxTextureSize,nt=c.maxSamples,tt=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,rt=new WeakMap;let at;const lt=new WeakMap;let ut=!1;try{ut=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function st(wt,Mt){return ut?new OffscreenCanvas(wt,Mt):createElementNS("canvas")}function it(wt,Mt,Ot,zt){let Yt=1;if((wt.width>zt||wt.height>zt)&&(Yt=zt/Math.max(wt.width,wt.height)),Yt<1||Mt===!0)if(typeof HTMLImageElement!="undefined"&&wt instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&wt instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&wt instanceof ImageBitmap){const dn=Mt?floorPowerOfTwo:Math.floor,xn=dn(Yt*wt.width),Nt=dn(Yt*wt.height);at===void 0&&(at=st(xn,Nt));const mn=Ot?st(xn,Nt):at;return mn.width=xn,mn.height=Nt,mn.getContext("2d").drawImage(wt,0,0,xn,Nt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+wt.width+"x"+wt.height+") to ("+xn+"x"+Nt+")."),mn}else return"data"in wt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+wt.width+"x"+wt.height+")."),wt;return wt}function ft(wt){return isPowerOfTwo(wt.width)&&isPowerOfTwo(wt.height)}function ct(wt){return b?!1:wt.wrapS!==ClampToEdgeWrapping||wt.wrapT!==ClampToEdgeWrapping||wt.minFilter!==NearestFilter&&wt.minFilter!==LinearFilter}function dt(wt,Mt){return wt.generateMipmaps&&Mt&&wt.minFilter!==NearestFilter&&wt.minFilter!==LinearFilter}function mt(wt){s.generateMipmap(wt)}function gt(wt,Mt,Ot,zt,Yt=!1){if(b===!1)return Mt;if(wt!==null){if(s[wt]!==void 0)return s[wt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+wt+"'")}let dn=Mt;return Mt===6403&&(Ot===5126&&(dn=33326),Ot===5131&&(dn=33325),Ot===5121&&(dn=33321)),Mt===33319&&(Ot===5126&&(dn=33328),Ot===5131&&(dn=33327),Ot===5121&&(dn=33323)),Mt===6408&&(Ot===5126&&(dn=34836),Ot===5131&&(dn=34842),Ot===5121&&(dn=zt===sRGBEncoding&&Yt===!1?35907:32856),Ot===32819&&(dn=32854),Ot===32820&&(dn=32855)),(dn===33325||dn===33326||dn===33327||dn===33328||dn===34842||dn===34836)&&e.get("EXT_color_buffer_float"),dn}function yt(wt,Mt,Ot){return dt(wt,Ot)===!0||wt.isFramebufferTexture&&wt.minFilter!==NearestFilter&&wt.minFilter!==LinearFilter?Math.log2(Math.max(Mt.width,Mt.height))+1:wt.mipmaps!==void 0&&wt.mipmaps.length>0?wt.mipmaps.length:wt.isCompressedTexture&&Array.isArray(wt.image)?Mt.mipmaps.length:1}function St(wt){return wt===NearestFilter||wt===NearestMipmapNearestFilter||wt===NearestMipmapLinearFilter?9728:9729}function Et(wt){const Mt=wt.target;Mt.removeEventListener("dispose",Et),_t(Mt),Mt.isVideoTexture&&rt.delete(Mt)}function vt(wt){const Mt=wt.target;Mt.removeEventListener("dispose",vt),At(Mt)}function _t(wt){const Mt=a.get(wt);if(Mt.__webglInit===void 0)return;const Ot=wt.source,zt=lt.get(Ot);if(zt){const Yt=zt[Mt.__cacheKey];Yt.usedTimes--,Yt.usedTimes===0&&bt(wt),Object.keys(zt).length===0&&lt.delete(Ot)}a.remove(wt)}function bt(wt){const Mt=a.get(wt);s.deleteTexture(Mt.__webglTexture);const Ot=wt.source,zt=lt.get(Ot);delete zt[Mt.__cacheKey],_.memory.textures--}function At(wt){const Mt=wt.texture,Ot=a.get(wt),zt=a.get(Mt);if(zt.__webglTexture!==void 0&&(s.deleteTexture(zt.__webglTexture),_.memory.textures--),wt.depthTexture&&wt.depthTexture.dispose(),wt.isWebGLCubeRenderTarget)for(let Yt=0;Yt<6;Yt++)s.deleteFramebuffer(Ot.__webglFramebuffer[Yt]),Ot.__webglDepthbuffer&&s.deleteRenderbuffer(Ot.__webglDepthbuffer[Yt]);else s.deleteFramebuffer(Ot.__webglFramebuffer),Ot.__webglDepthbuffer&&s.deleteRenderbuffer(Ot.__webglDepthbuffer),Ot.__webglMultisampledFramebuffer&&s.deleteFramebuffer(Ot.__webglMultisampledFramebuffer),Ot.__webglColorRenderbuffer&&s.deleteRenderbuffer(Ot.__webglColorRenderbuffer),Ot.__webglDepthRenderbuffer&&s.deleteRenderbuffer(Ot.__webglDepthRenderbuffer);if(wt.isWebGLMultipleRenderTargets)for(let Yt=0,dn=Mt.length;Yt<dn;Yt++){const xn=a.get(Mt[Yt]);xn.__webglTexture&&(s.deleteTexture(xn.__webglTexture),_.memory.textures--),a.remove(Mt[Yt])}a.remove(Mt),a.remove(wt)}let Rt=0;function Pt(){Rt=0}function Dt(){const wt=Rt;return wt>=k&&console.warn("THREE.WebGLTextures: Trying to use "+wt+" texture units while this GPU supports only "+k),Rt+=1,wt}function Ft(wt){const Mt=[];return Mt.push(wt.wrapS),Mt.push(wt.wrapT),Mt.push(wt.magFilter),Mt.push(wt.minFilter),Mt.push(wt.anisotropy),Mt.push(wt.internalFormat),Mt.push(wt.format),Mt.push(wt.type),Mt.push(wt.generateMipmaps),Mt.push(wt.premultiplyAlpha),Mt.push(wt.flipY),Mt.push(wt.unpackAlignment),Mt.push(wt.encoding),Mt.join()}function Vt(wt,Mt){const Ot=a.get(wt);if(wt.isVideoTexture&&bn(wt),wt.version>0&&Ot.__version!==wt.version){const zt=wt.image;if(zt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(zt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Mn(Ot,wt,Mt);return}}o.activeTexture(33984+Mt),o.bindTexture(3553,Ot.__webglTexture)}function Qt(wt,Mt){const Ot=a.get(wt);if(wt.version>0&&Ot.__version!==wt.version){Mn(Ot,wt,Mt);return}o.activeTexture(33984+Mt),o.bindTexture(35866,Ot.__webglTexture)}function Lt(wt,Mt){const Ot=a.get(wt);if(wt.version>0&&Ot.__version!==wt.version){Mn(Ot,wt,Mt);return}o.activeTexture(33984+Mt),o.bindTexture(32879,Ot.__webglTexture)}function It(wt,Mt){const Ot=a.get(wt);if(wt.version>0&&Ot.__version!==wt.version){gn(Ot,wt,Mt);return}o.activeTexture(33984+Mt),o.bindTexture(34067,Ot.__webglTexture)}const Ht={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},on={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function nn(wt,Mt,Ot){if(Ot?(s.texParameteri(wt,10242,Ht[Mt.wrapS]),s.texParameteri(wt,10243,Ht[Mt.wrapT]),(wt===32879||wt===35866)&&s.texParameteri(wt,32882,Ht[Mt.wrapR]),s.texParameteri(wt,10240,on[Mt.magFilter]),s.texParameteri(wt,10241,on[Mt.minFilter])):(s.texParameteri(wt,10242,33071),s.texParameteri(wt,10243,33071),(wt===32879||wt===35866)&&s.texParameteri(wt,32882,33071),(Mt.wrapS!==ClampToEdgeWrapping||Mt.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),s.texParameteri(wt,10240,St(Mt.magFilter)),s.texParameteri(wt,10241,St(Mt.minFilter)),Mt.minFilter!==NearestFilter&&Mt.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const zt=e.get("EXT_texture_filter_anisotropic");if(Mt.type===FloatType&&e.has("OES_texture_float_linear")===!1||b===!1&&Mt.type===HalfFloatType&&e.has("OES_texture_half_float_linear")===!1)return;(Mt.anisotropy>1||a.get(Mt).__currentAnisotropy)&&(s.texParameterf(wt,zt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Mt.anisotropy,c.getMaxAnisotropy())),a.get(Mt).__currentAnisotropy=Mt.anisotropy)}}function jt(wt,Mt){let Ot=!1;wt.__webglInit===void 0&&(wt.__webglInit=!0,Mt.addEventListener("dispose",Et));const zt=Mt.source;let Yt=lt.get(zt);Yt===void 0&&(Yt={},lt.set(zt,Yt));const dn=Ft(Mt);if(dn!==wt.__cacheKey){Yt[dn]===void 0&&(Yt[dn]={texture:s.createTexture(),usedTimes:0},_.memory.textures++,Ot=!0),Yt[dn].usedTimes++;const xn=Yt[wt.__cacheKey];xn!==void 0&&(Yt[wt.__cacheKey].usedTimes--,xn.usedTimes===0&&bt(Mt)),wt.__cacheKey=dn,wt.__webglTexture=Yt[dn].texture}return Ot}function Mn(wt,Mt,Ot){let zt=3553;Mt.isDataArrayTexture&&(zt=35866),Mt.isData3DTexture&&(zt=32879);const Yt=jt(wt,Mt),dn=Mt.source;if(o.activeTexture(33984+Ot),o.bindTexture(zt,wt.__webglTexture),dn.version!==dn.__currentVersion||Yt===!0){s.pixelStorei(37440,Mt.flipY),s.pixelStorei(37441,Mt.premultiplyAlpha),s.pixelStorei(3317,Mt.unpackAlignment),s.pixelStorei(37443,0);const xn=ct(Mt)&&ft(Mt.image)===!1;let Nt=it(Mt.image,xn,!1,et);Nt=En(Mt,Nt);const mn=ft(Nt)||b,Ln=d.convert(Mt.format,Mt.encoding);let Sn=d.convert(Mt.type),yn=gt(Mt.internalFormat,Ln,Sn,Mt.encoding,Mt.isVideoTexture);nn(zt,Mt,mn);let Bt;const an=Mt.mipmaps,en=b&&Mt.isVideoTexture!==!0,Cn=wt.__version===void 0,un=yt(Mt,Nt,mn);if(Mt.isDepthTexture)yn=6402,b?Mt.type===FloatType?yn=36012:Mt.type===UnsignedIntType?yn=33190:Mt.type===UnsignedInt248Type?yn=35056:yn=33189:Mt.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Mt.format===DepthFormat&&yn===6402&&Mt.type!==UnsignedShortType&&Mt.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Mt.type=UnsignedShortType,Sn=d.convert(Mt.type)),Mt.format===DepthStencilFormat&&yn===6402&&(yn=34041,Mt.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Mt.type=UnsignedInt248Type,Sn=d.convert(Mt.type))),en&&Cn?o.texStorage2D(3553,1,yn,Nt.width,Nt.height):o.texImage2D(3553,0,yn,Nt.width,Nt.height,0,Ln,Sn,null);else if(Mt.isDataTexture)if(an.length>0&&mn){en&&Cn&&o.texStorage2D(3553,un,yn,an[0].width,an[0].height);for(let ln=0,Rn=an.length;ln<Rn;ln++)Bt=an[ln],en?o.texSubImage2D(3553,ln,0,0,Bt.width,Bt.height,Ln,Sn,Bt.data):o.texImage2D(3553,ln,yn,Bt.width,Bt.height,0,Ln,Sn,Bt.data);Mt.generateMipmaps=!1}else en?(Cn&&o.texStorage2D(3553,un,yn,Nt.width,Nt.height),o.texSubImage2D(3553,0,0,0,Nt.width,Nt.height,Ln,Sn,Nt.data)):o.texImage2D(3553,0,yn,Nt.width,Nt.height,0,Ln,Sn,Nt.data);else if(Mt.isCompressedTexture){en&&Cn&&o.texStorage2D(3553,un,yn,an[0].width,an[0].height);for(let ln=0,Rn=an.length;ln<Rn;ln++)Bt=an[ln],Mt.format!==RGBAFormat?Ln!==null?en?o.compressedTexSubImage2D(3553,ln,0,0,Bt.width,Bt.height,Ln,Bt.data):o.compressedTexImage2D(3553,ln,yn,Bt.width,Bt.height,0,Bt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):en?o.texSubImage2D(3553,ln,0,0,Bt.width,Bt.height,Ln,Sn,Bt.data):o.texImage2D(3553,ln,yn,Bt.width,Bt.height,0,Ln,Sn,Bt.data)}else if(Mt.isDataArrayTexture)en?(Cn&&o.texStorage3D(35866,un,yn,Nt.width,Nt.height,Nt.depth),o.texSubImage3D(35866,0,0,0,0,Nt.width,Nt.height,Nt.depth,Ln,Sn,Nt.data)):o.texImage3D(35866,0,yn,Nt.width,Nt.height,Nt.depth,0,Ln,Sn,Nt.data);else if(Mt.isData3DTexture)en?(Cn&&o.texStorage3D(32879,un,yn,Nt.width,Nt.height,Nt.depth),o.texSubImage3D(32879,0,0,0,0,Nt.width,Nt.height,Nt.depth,Ln,Sn,Nt.data)):o.texImage3D(32879,0,yn,Nt.width,Nt.height,Nt.depth,0,Ln,Sn,Nt.data);else if(Mt.isFramebufferTexture)en&&Cn?o.texStorage2D(3553,un,yn,Nt.width,Nt.height):o.texImage2D(3553,0,yn,Nt.width,Nt.height,0,Ln,Sn,null);else if(an.length>0&&mn){en&&Cn&&o.texStorage2D(3553,un,yn,an[0].width,an[0].height);for(let ln=0,Rn=an.length;ln<Rn;ln++)Bt=an[ln],en?o.texSubImage2D(3553,ln,0,0,Ln,Sn,Bt):o.texImage2D(3553,ln,yn,Ln,Sn,Bt);Mt.generateMipmaps=!1}else en?(Cn&&o.texStorage2D(3553,un,yn,Nt.width,Nt.height),o.texSubImage2D(3553,0,0,0,Ln,Sn,Nt)):o.texImage2D(3553,0,yn,Ln,Sn,Nt);dt(Mt,mn)&&mt(zt),dn.__currentVersion=dn.version,Mt.onUpdate&&Mt.onUpdate(Mt)}wt.__version=Mt.version}function gn(wt,Mt,Ot){if(Mt.image.length!==6)return;const zt=jt(wt,Mt),Yt=Mt.source;if(o.activeTexture(33984+Ot),o.bindTexture(34067,wt.__webglTexture),Yt.version!==Yt.__currentVersion||zt===!0){s.pixelStorei(37440,Mt.flipY),s.pixelStorei(37441,Mt.premultiplyAlpha),s.pixelStorei(3317,Mt.unpackAlignment),s.pixelStorei(37443,0);const dn=Mt.isCompressedTexture||Mt.image[0].isCompressedTexture,xn=Mt.image[0]&&Mt.image[0].isDataTexture,Nt=[];for(let ln=0;ln<6;ln++)!dn&&!xn?Nt[ln]=it(Mt.image[ln],!1,!0,j):Nt[ln]=xn?Mt.image[ln].image:Mt.image[ln],Nt[ln]=En(Mt,Nt[ln]);const mn=Nt[0],Ln=ft(mn)||b,Sn=d.convert(Mt.format,Mt.encoding),yn=d.convert(Mt.type),Bt=gt(Mt.internalFormat,Sn,yn,Mt.encoding),an=b&&Mt.isVideoTexture!==!0,en=wt.__version===void 0;let Cn=yt(Mt,mn,Ln);nn(34067,Mt,Ln);let un;if(dn){an&&en&&o.texStorage2D(34067,Cn,Bt,mn.width,mn.height);for(let ln=0;ln<6;ln++){un=Nt[ln].mipmaps;for(let Rn=0;Rn<un.length;Rn++){const Fn=un[Rn];Mt.format!==RGBAFormat?Sn!==null?an?o.compressedTexSubImage2D(34069+ln,Rn,0,0,Fn.width,Fn.height,Sn,Fn.data):o.compressedTexImage2D(34069+ln,Rn,Bt,Fn.width,Fn.height,0,Fn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):an?o.texSubImage2D(34069+ln,Rn,0,0,Fn.width,Fn.height,Sn,yn,Fn.data):o.texImage2D(34069+ln,Rn,Bt,Fn.width,Fn.height,0,Sn,yn,Fn.data)}}}else{un=Mt.mipmaps,an&&en&&(un.length>0&&Cn++,o.texStorage2D(34067,Cn,Bt,Nt[0].width,Nt[0].height));for(let ln=0;ln<6;ln++)if(xn){an?o.texSubImage2D(34069+ln,0,0,0,Nt[ln].width,Nt[ln].height,Sn,yn,Nt[ln].data):o.texImage2D(34069+ln,0,Bt,Nt[ln].width,Nt[ln].height,0,Sn,yn,Nt[ln].data);for(let Rn=0;Rn<un.length;Rn++){const ar=un[Rn].image[ln].image;an?o.texSubImage2D(34069+ln,Rn+1,0,0,ar.width,ar.height,Sn,yn,ar.data):o.texImage2D(34069+ln,Rn+1,Bt,ar.width,ar.height,0,Sn,yn,ar.data)}}else{an?o.texSubImage2D(34069+ln,0,0,0,Sn,yn,Nt[ln]):o.texImage2D(34069+ln,0,Bt,Sn,yn,Nt[ln]);for(let Rn=0;Rn<un.length;Rn++){const Fn=un[Rn];an?o.texSubImage2D(34069+ln,Rn+1,0,0,Sn,yn,Fn.image[ln]):o.texImage2D(34069+ln,Rn+1,Bt,Sn,yn,Fn.image[ln])}}}dt(Mt,Ln)&&mt(34067),Yt.__currentVersion=Yt.version,Mt.onUpdate&&Mt.onUpdate(Mt)}wt.__version=Mt.version}function fn(wt,Mt,Ot,zt,Yt){const dn=d.convert(Ot.format,Ot.encoding),xn=d.convert(Ot.type),Nt=gt(Ot.internalFormat,dn,xn,Ot.encoding);a.get(Mt).__hasExternalTextures||(Yt===32879||Yt===35866?o.texImage3D(Yt,0,Nt,Mt.width,Mt.height,Mt.depth,0,dn,xn,null):o.texImage2D(Yt,0,Nt,Mt.width,Mt.height,0,dn,xn,null)),o.bindFramebuffer(36160,wt),Kt(Mt)?tt.framebufferTexture2DMultisampleEXT(36160,zt,Yt,a.get(Ot).__webglTexture,0,Dn(Mt)):s.framebufferTexture2D(36160,zt,Yt,a.get(Ot).__webglTexture,0),o.bindFramebuffer(36160,null)}function pn(wt,Mt,Ot){if(s.bindRenderbuffer(36161,wt),Mt.depthBuffer&&!Mt.stencilBuffer){let zt=33189;if(Ot||Kt(Mt)){const Yt=Mt.depthTexture;Yt&&Yt.isDepthTexture&&(Yt.type===FloatType?zt=36012:Yt.type===UnsignedIntType&&(zt=33190));const dn=Dn(Mt);Kt(Mt)?tt.renderbufferStorageMultisampleEXT(36161,dn,zt,Mt.width,Mt.height):s.renderbufferStorageMultisample(36161,dn,zt,Mt.width,Mt.height)}else s.renderbufferStorage(36161,zt,Mt.width,Mt.height);s.framebufferRenderbuffer(36160,36096,36161,wt)}else if(Mt.depthBuffer&&Mt.stencilBuffer){const zt=Dn(Mt);Ot&&Kt(Mt)===!1?s.renderbufferStorageMultisample(36161,zt,35056,Mt.width,Mt.height):Kt(Mt)?tt.renderbufferStorageMultisampleEXT(36161,zt,35056,Mt.width,Mt.height):s.renderbufferStorage(36161,34041,Mt.width,Mt.height),s.framebufferRenderbuffer(36160,33306,36161,wt)}else{const zt=Mt.isWebGLMultipleRenderTargets===!0?Mt.texture[0]:Mt.texture,Yt=d.convert(zt.format,zt.encoding),dn=d.convert(zt.type),xn=gt(zt.internalFormat,Yt,dn,zt.encoding),Nt=Dn(Mt);Ot&&Kt(Mt)===!1?s.renderbufferStorageMultisample(36161,Nt,xn,Mt.width,Mt.height):Kt(Mt)?tt.renderbufferStorageMultisampleEXT(36161,Nt,xn,Mt.width,Mt.height):s.renderbufferStorage(36161,xn,Mt.width,Mt.height)}s.bindRenderbuffer(36161,null)}function _n(wt,Mt){if(Mt&&Mt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(o.bindFramebuffer(36160,wt),!(Mt.depthTexture&&Mt.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!a.get(Mt.depthTexture).__webglTexture||Mt.depthTexture.image.width!==Mt.width||Mt.depthTexture.image.height!==Mt.height)&&(Mt.depthTexture.image.width=Mt.width,Mt.depthTexture.image.height=Mt.height,Mt.depthTexture.needsUpdate=!0),Vt(Mt.depthTexture,0);const zt=a.get(Mt.depthTexture).__webglTexture,Yt=Dn(Mt);if(Mt.depthTexture.format===DepthFormat)Kt(Mt)?tt.framebufferTexture2DMultisampleEXT(36160,36096,3553,zt,0,Yt):s.framebufferTexture2D(36160,36096,3553,zt,0);else if(Mt.depthTexture.format===DepthStencilFormat)Kt(Mt)?tt.framebufferTexture2DMultisampleEXT(36160,33306,3553,zt,0,Yt):s.framebufferTexture2D(36160,33306,3553,zt,0);else throw new Error("Unknown depthTexture format")}function $t(wt){const Mt=a.get(wt),Ot=wt.isWebGLCubeRenderTarget===!0;if(wt.depthTexture&&!Mt.__autoAllocateDepthBuffer){if(Ot)throw new Error("target.depthTexture not supported in Cube render targets");_n(Mt.__webglFramebuffer,wt)}else if(Ot){Mt.__webglDepthbuffer=[];for(let zt=0;zt<6;zt++)o.bindFramebuffer(36160,Mt.__webglFramebuffer[zt]),Mt.__webglDepthbuffer[zt]=s.createRenderbuffer(),pn(Mt.__webglDepthbuffer[zt],wt,!1)}else o.bindFramebuffer(36160,Mt.__webglFramebuffer),Mt.__webglDepthbuffer=s.createRenderbuffer(),pn(Mt.__webglDepthbuffer,wt,!1);o.bindFramebuffer(36160,null)}function sn(wt,Mt,Ot){const zt=a.get(wt);Mt!==void 0&&fn(zt.__webglFramebuffer,wt,wt.texture,36064,3553),Ot!==void 0&&$t(wt)}function rn(wt){const Mt=wt.texture,Ot=a.get(wt),zt=a.get(Mt);wt.addEventListener("dispose",vt),wt.isWebGLMultipleRenderTargets!==!0&&(zt.__webglTexture===void 0&&(zt.__webglTexture=s.createTexture()),zt.__version=Mt.version,_.memory.textures++);const Yt=wt.isWebGLCubeRenderTarget===!0,dn=wt.isWebGLMultipleRenderTargets===!0,xn=ft(wt)||b;if(Yt){Ot.__webglFramebuffer=[];for(let Nt=0;Nt<6;Nt++)Ot.__webglFramebuffer[Nt]=s.createFramebuffer()}else if(Ot.__webglFramebuffer=s.createFramebuffer(),dn)if(c.drawBuffers){const Nt=wt.texture;for(let mn=0,Ln=Nt.length;mn<Ln;mn++){const Sn=a.get(Nt[mn]);Sn.__webglTexture===void 0&&(Sn.__webglTexture=s.createTexture(),_.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(b&&wt.samples>0&&Kt(wt)===!1){Ot.__webglMultisampledFramebuffer=s.createFramebuffer(),Ot.__webglColorRenderbuffer=s.createRenderbuffer(),s.bindRenderbuffer(36161,Ot.__webglColorRenderbuffer);const Nt=d.convert(Mt.format,Mt.encoding),mn=d.convert(Mt.type),Ln=gt(Mt.internalFormat,Nt,mn,Mt.encoding),Sn=Dn(wt);s.renderbufferStorageMultisample(36161,Sn,Ln,wt.width,wt.height),o.bindFramebuffer(36160,Ot.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(36160,36064,36161,Ot.__webglColorRenderbuffer),s.bindRenderbuffer(36161,null),wt.depthBuffer&&(Ot.__webglDepthRenderbuffer=s.createRenderbuffer(),pn(Ot.__webglDepthRenderbuffer,wt,!0)),o.bindFramebuffer(36160,null)}if(Yt){o.bindTexture(34067,zt.__webglTexture),nn(34067,Mt,xn);for(let Nt=0;Nt<6;Nt++)fn(Ot.__webglFramebuffer[Nt],wt,Mt,36064,34069+Nt);dt(Mt,xn)&&mt(34067),o.unbindTexture()}else if(dn){const Nt=wt.texture;for(let mn=0,Ln=Nt.length;mn<Ln;mn++){const Sn=Nt[mn],yn=a.get(Sn);o.bindTexture(3553,yn.__webglTexture),nn(3553,Sn,xn),fn(Ot.__webglFramebuffer,wt,Sn,36064+mn,3553),dt(Sn,xn)&&mt(3553)}o.unbindTexture()}else{let Nt=3553;(wt.isWebGL3DRenderTarget||wt.isWebGLArrayRenderTarget)&&(b?Nt=wt.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),o.bindTexture(Nt,zt.__webglTexture),nn(Nt,Mt,xn),fn(Ot.__webglFramebuffer,wt,Mt,36064,Nt),dt(Mt,xn)&&mt(Nt),o.unbindTexture()}wt.depthBuffer&&$t(wt)}function vn(wt){const Mt=ft(wt)||b,Ot=wt.isWebGLMultipleRenderTargets===!0?wt.texture:[wt.texture];for(let zt=0,Yt=Ot.length;zt<Yt;zt++){const dn=Ot[zt];if(dt(dn,Mt)){const xn=wt.isWebGLCubeRenderTarget?34067:3553,Nt=a.get(dn).__webglTexture;o.bindTexture(xn,Nt),mt(xn),o.unbindTexture()}}}function cn(wt){if(b&&wt.samples>0&&Kt(wt)===!1){const Mt=wt.width,Ot=wt.height;let zt=16384;const Yt=[36064],dn=wt.stencilBuffer?33306:36096;wt.depthBuffer&&Yt.push(dn);const xn=a.get(wt),Nt=xn.__ignoreDepthValues!==void 0?xn.__ignoreDepthValues:!1;Nt===!1&&(wt.depthBuffer&&(zt|=256),wt.stencilBuffer&&(zt|=1024)),o.bindFramebuffer(36008,xn.__webglMultisampledFramebuffer),o.bindFramebuffer(36009,xn.__webglFramebuffer),Nt===!0&&(s.invalidateFramebuffer(36008,[dn]),s.invalidateFramebuffer(36009,[dn])),s.blitFramebuffer(0,0,Mt,Ot,0,0,Mt,Ot,zt,9728),s.invalidateFramebuffer(36008,Yt),o.bindFramebuffer(36008,null),o.bindFramebuffer(36009,xn.__webglMultisampledFramebuffer)}}function Dn(wt){return Math.min(nt,wt.samples)}function Kt(wt){const Mt=a.get(wt);return b&&wt.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Mt.__useRenderToTexture!==!1}function bn(wt){const Mt=_.render.frame;rt.get(wt)!==Mt&&(rt.set(wt,Mt),wt.update())}function En(wt,Mt){const Ot=wt.encoding,zt=wt.format,Yt=wt.type;return wt.isCompressedTexture===!0||wt.isVideoTexture===!0||wt.format===_SRGBAFormat||Ot!==LinearEncoding&&(Ot===sRGBEncoding?b===!1?e.has("EXT_sRGB")===!0&&zt===RGBAFormat?(wt.format=_SRGBAFormat,wt.minFilter=LinearFilter,wt.generateMipmaps=!1):Mt=ImageUtils.sRGBToLinear(Mt):(zt!==RGBAFormat||Yt!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Ot)),Mt}this.allocateTextureUnit=Dt,this.resetTextureUnits=Pt,this.setTexture2D=Vt,this.setTexture2DArray=Qt,this.setTexture3D=Lt,this.setTextureCube=It,this.rebindTextures=sn,this.setupRenderTarget=rn,this.updateRenderTargetMipmap=vn,this.updateMultisampleRenderTarget=cn,this.setupDepthRenderbuffer=$t,this.setupFrameBufferTexture=fn,this.useMultisampledRTT=Kt}function WebGLUtils(s,e,o){const a=o.isWebGL2;function c(d,_=null){let b;if(d===UnsignedByteType)return 5121;if(d===UnsignedShort4444Type)return 32819;if(d===UnsignedShort5551Type)return 32820;if(d===ByteType)return 5120;if(d===ShortType)return 5122;if(d===UnsignedShortType)return 5123;if(d===IntType)return 5124;if(d===UnsignedIntType)return 5125;if(d===FloatType)return 5126;if(d===HalfFloatType)return a?5131:(b=e.get("OES_texture_half_float"),b!==null?b.HALF_FLOAT_OES:null);if(d===AlphaFormat)return 6406;if(d===RGBAFormat)return 6408;if(d===LuminanceFormat)return 6409;if(d===LuminanceAlphaFormat)return 6410;if(d===DepthFormat)return 6402;if(d===DepthStencilFormat)return 34041;if(d===RedFormat)return 6403;if(d===RGBFormat)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(d===_SRGBAFormat)return b=e.get("EXT_sRGB"),b!==null?b.SRGB_ALPHA_EXT:null;if(d===RedIntegerFormat)return 36244;if(d===RGFormat)return 33319;if(d===RGIntegerFormat)return 33320;if(d===RGBAIntegerFormat)return 36249;if(d===RGB_S3TC_DXT1_Format||d===RGBA_S3TC_DXT1_Format||d===RGBA_S3TC_DXT3_Format||d===RGBA_S3TC_DXT5_Format)if(_===sRGBEncoding)if(b=e.get("WEBGL_compressed_texture_s3tc_srgb"),b!==null){if(d===RGB_S3TC_DXT1_Format)return b.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(d===RGBA_S3TC_DXT1_Format)return b.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(d===RGBA_S3TC_DXT3_Format)return b.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(d===RGBA_S3TC_DXT5_Format)return b.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(b=e.get("WEBGL_compressed_texture_s3tc"),b!==null){if(d===RGB_S3TC_DXT1_Format)return b.COMPRESSED_RGB_S3TC_DXT1_EXT;if(d===RGBA_S3TC_DXT1_Format)return b.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(d===RGBA_S3TC_DXT3_Format)return b.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(d===RGBA_S3TC_DXT5_Format)return b.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(d===RGB_PVRTC_4BPPV1_Format||d===RGB_PVRTC_2BPPV1_Format||d===RGBA_PVRTC_4BPPV1_Format||d===RGBA_PVRTC_2BPPV1_Format)if(b=e.get("WEBGL_compressed_texture_pvrtc"),b!==null){if(d===RGB_PVRTC_4BPPV1_Format)return b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(d===RGB_PVRTC_2BPPV1_Format)return b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(d===RGBA_PVRTC_4BPPV1_Format)return b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(d===RGBA_PVRTC_2BPPV1_Format)return b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(d===RGB_ETC1_Format)return b=e.get("WEBGL_compressed_texture_etc1"),b!==null?b.COMPRESSED_RGB_ETC1_WEBGL:null;if(d===RGB_ETC2_Format||d===RGBA_ETC2_EAC_Format)if(b=e.get("WEBGL_compressed_texture_etc"),b!==null){if(d===RGB_ETC2_Format)return _===sRGBEncoding?b.COMPRESSED_SRGB8_ETC2:b.COMPRESSED_RGB8_ETC2;if(d===RGBA_ETC2_EAC_Format)return _===sRGBEncoding?b.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:b.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(d===RGBA_ASTC_4x4_Format||d===RGBA_ASTC_5x4_Format||d===RGBA_ASTC_5x5_Format||d===RGBA_ASTC_6x5_Format||d===RGBA_ASTC_6x6_Format||d===RGBA_ASTC_8x5_Format||d===RGBA_ASTC_8x6_Format||d===RGBA_ASTC_8x8_Format||d===RGBA_ASTC_10x5_Format||d===RGBA_ASTC_10x6_Format||d===RGBA_ASTC_10x8_Format||d===RGBA_ASTC_10x10_Format||d===RGBA_ASTC_12x10_Format||d===RGBA_ASTC_12x12_Format)if(b=e.get("WEBGL_compressed_texture_astc"),b!==null){if(d===RGBA_ASTC_4x4_Format)return _===sRGBEncoding?b.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:b.COMPRESSED_RGBA_ASTC_4x4_KHR;if(d===RGBA_ASTC_5x4_Format)return _===sRGBEncoding?b.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:b.COMPRESSED_RGBA_ASTC_5x4_KHR;if(d===RGBA_ASTC_5x5_Format)return _===sRGBEncoding?b.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:b.COMPRESSED_RGBA_ASTC_5x5_KHR;if(d===RGBA_ASTC_6x5_Format)return _===sRGBEncoding?b.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:b.COMPRESSED_RGBA_ASTC_6x5_KHR;if(d===RGBA_ASTC_6x6_Format)return _===sRGBEncoding?b.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:b.COMPRESSED_RGBA_ASTC_6x6_KHR;if(d===RGBA_ASTC_8x5_Format)return _===sRGBEncoding?b.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:b.COMPRESSED_RGBA_ASTC_8x5_KHR;if(d===RGBA_ASTC_8x6_Format)return _===sRGBEncoding?b.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:b.COMPRESSED_RGBA_ASTC_8x6_KHR;if(d===RGBA_ASTC_8x8_Format)return _===sRGBEncoding?b.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:b.COMPRESSED_RGBA_ASTC_8x8_KHR;if(d===RGBA_ASTC_10x5_Format)return _===sRGBEncoding?b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:b.COMPRESSED_RGBA_ASTC_10x5_KHR;if(d===RGBA_ASTC_10x6_Format)return _===sRGBEncoding?b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:b.COMPRESSED_RGBA_ASTC_10x6_KHR;if(d===RGBA_ASTC_10x8_Format)return _===sRGBEncoding?b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:b.COMPRESSED_RGBA_ASTC_10x8_KHR;if(d===RGBA_ASTC_10x10_Format)return _===sRGBEncoding?b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:b.COMPRESSED_RGBA_ASTC_10x10_KHR;if(d===RGBA_ASTC_12x10_Format)return _===sRGBEncoding?b.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:b.COMPRESSED_RGBA_ASTC_12x10_KHR;if(d===RGBA_ASTC_12x12_Format)return _===sRGBEncoding?b.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:b.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(d===RGBA_BPTC_Format)if(b=e.get("EXT_texture_compression_bptc"),b!==null){if(d===RGBA_BPTC_Format)return _===sRGBEncoding?b.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:b.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(d===UnsignedInt248Type)return a?34042:(b=e.get("WEBGL_depth_texture"),b!==null?b.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:c}}class ArrayCamera extends PerspectiveCamera{constructor(e=[]){super();this.cameras=e}}ArrayCamera.prototype.isArrayCamera=!0;class Group extends Object3D{constructor(){super();this.type="Group"}}Group.prototype.isGroup=!0;const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,o,a){let c=null,d=null,_=null;const b=this._targetRay,k=this._grip,j=this._hand;if(e&&o.session.visibilityState!=="visible-blurred")if(b!==null&&(c=o.getPose(e.targetRaySpace,a),c!==null&&(b.matrix.fromArray(c.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),c.linearVelocity?(b.hasLinearVelocity=!0,b.linearVelocity.copy(c.linearVelocity)):b.hasLinearVelocity=!1,c.angularVelocity?(b.hasAngularVelocity=!0,b.angularVelocity.copy(c.angularVelocity)):b.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent))),j&&e.hand){_=!0;for(const lt of e.hand.values()){const ut=o.getJointPose(lt,a);if(j.joints[lt.jointName]===void 0){const it=new Group;it.matrixAutoUpdate=!1,it.visible=!1,j.joints[lt.jointName]=it,j.add(it)}const st=j.joints[lt.jointName];ut!==null&&(st.matrix.fromArray(ut.transform.matrix),st.matrix.decompose(st.position,st.rotation,st.scale),st.jointRadius=ut.radius),st.visible=ut!==null}const et=j.joints["index-finger-tip"],nt=j.joints["thumb-tip"],tt=et.position.distanceTo(nt.position),rt=.02,at=.005;j.inputState.pinching&&tt>rt+at?(j.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!j.inputState.pinching&&tt<=rt-at&&(j.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else k!==null&&e.gripSpace&&(d=o.getPose(e.gripSpace,a),d!==null&&(k.matrix.fromArray(d.transform.matrix),k.matrix.decompose(k.position,k.rotation,k.scale),d.linearVelocity?(k.hasLinearVelocity=!0,k.linearVelocity.copy(d.linearVelocity)):k.hasLinearVelocity=!1,d.angularVelocity?(k.hasAngularVelocity=!0,k.angularVelocity.copy(d.angularVelocity)):k.hasAngularVelocity=!1));return b!==null&&(b.visible=c!==null),k!==null&&(k.visible=d!==null),j!==null&&(j.visible=_!==null),this}}class DepthTexture extends Texture{constructor(e,o,a,c,d,_,b,k,j,et){if(et=et!==void 0?et:DepthFormat,et!==DepthFormat&&et!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");a===void 0&&et===DepthFormat&&(a=UnsignedShortType),a===void 0&&et===DepthStencilFormat&&(a=UnsignedInt248Type);super(null,c,d,_,b,k,et,a,j);this.image={width:e,height:o},this.magFilter=b!==void 0?b:NearestFilter,this.minFilter=k!==void 0?k:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}}DepthTexture.prototype.isDepthTexture=!0;class WebXRManager extends EventDispatcher{constructor(e,o){super();const a=this;let c=null,d=1,_=null,b="local-floor",k=null,j=null,et=null,nt=null,tt=null;const rt=o.getContextAttributes();let at=null,lt=null;const ut=[],st=new Map,it=new PerspectiveCamera;it.layers.enable(1),it.viewport=new Vector4;const ft=new PerspectiveCamera;ft.layers.enable(2),ft.viewport=new Vector4;const ct=[it,ft],dt=new ArrayCamera;dt.layers.enable(1),dt.layers.enable(2);let mt=null,gt=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ft){let Vt=ut[Ft];return Vt===void 0&&(Vt=new WebXRController,ut[Ft]=Vt),Vt.getTargetRaySpace()},this.getControllerGrip=function(Ft){let Vt=ut[Ft];return Vt===void 0&&(Vt=new WebXRController,ut[Ft]=Vt),Vt.getGripSpace()},this.getHand=function(Ft){let Vt=ut[Ft];return Vt===void 0&&(Vt=new WebXRController,ut[Ft]=Vt),Vt.getHandSpace()};function yt(Ft){const Vt=st.get(Ft.inputSource);Vt&&Vt.dispatchEvent({type:Ft.type,data:Ft.inputSource})}function St(){st.forEach(function(Ft,Vt){Ft.disconnect(Vt)}),st.clear(),mt=null,gt=null,e.setRenderTarget(at),nt=null,et=null,j=null,c=null,lt=null,Dt.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ft){d=Ft,a.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ft){b=Ft,a.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return _},this.getBaseLayer=function(){return et!==null?et:nt},this.getBinding=function(){return j},this.getFrame=function(){return tt},this.getSession=function(){return c},this.setSession=async function(Ft){if(c=Ft,c!==null){if(at=e.getRenderTarget(),c.addEventListener("select",yt),c.addEventListener("selectstart",yt),c.addEventListener("selectend",yt),c.addEventListener("squeeze",yt),c.addEventListener("squeezestart",yt),c.addEventListener("squeezeend",yt),c.addEventListener("end",St),c.addEventListener("inputsourceschange",Et),rt.xrCompatible!==!0&&await o.makeXRCompatible(),c.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Vt={antialias:c.renderState.layers===void 0?rt.antialias:!0,alpha:rt.alpha,depth:rt.depth,stencil:rt.stencil,framebufferScaleFactor:d};nt=new XRWebGLLayer(c,o,Vt),c.updateRenderState({baseLayer:nt}),lt=new WebGLRenderTarget(nt.framebufferWidth,nt.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,encoding:e.outputEncoding})}else{let Vt=null,Qt=null,Lt=null;rt.depth&&(Lt=rt.stencil?35056:33190,Vt=rt.stencil?DepthStencilFormat:DepthFormat,Qt=rt.stencil?UnsignedInt248Type:UnsignedShortType);const It={colorFormat:e.outputEncoding===sRGBEncoding?35907:32856,depthFormat:Lt,scaleFactor:d};j=new XRWebGLBinding(c,o),et=j.createProjectionLayer(It),c.updateRenderState({layers:[et]}),lt=new WebGLRenderTarget(et.textureWidth,et.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(et.textureWidth,et.textureHeight,Qt,void 0,void 0,void 0,void 0,void 0,void 0,Vt),stencilBuffer:rt.stencil,encoding:e.outputEncoding,samples:rt.antialias?4:0});const Ht=e.properties.get(lt);Ht.__ignoreDepthValues=et.ignoreDepthValues}lt.isXRRenderTarget=!0,this.setFoveation(1),_=await c.requestReferenceSpace(b),Dt.setContext(c),Dt.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"})}};function Et(Ft){const Vt=c.inputSources;for(let Qt=0;Qt<ut.length;Qt++)st.set(Vt[Qt],ut[Qt]);for(let Qt=0;Qt<Ft.removed.length;Qt++){const Lt=Ft.removed[Qt],It=st.get(Lt);It&&(It.dispatchEvent({type:"disconnected",data:Lt}),st.delete(Lt))}for(let Qt=0;Qt<Ft.added.length;Qt++){const Lt=Ft.added[Qt],It=st.get(Lt);It&&It.dispatchEvent({type:"connected",data:Lt})}}const vt=new Vector3,_t=new Vector3;function bt(Ft,Vt,Qt){vt.setFromMatrixPosition(Vt.matrixWorld),_t.setFromMatrixPosition(Qt.matrixWorld);const Lt=vt.distanceTo(_t),It=Vt.projectionMatrix.elements,Ht=Qt.projectionMatrix.elements,on=It[14]/(It[10]-1),nn=It[14]/(It[10]+1),jt=(It[9]+1)/It[5],Mn=(It[9]-1)/It[5],gn=(It[8]-1)/It[0],fn=(Ht[8]+1)/Ht[0],pn=on*gn,_n=on*fn,$t=Lt/(-gn+fn),sn=$t*-gn;Vt.matrixWorld.decompose(Ft.position,Ft.quaternion,Ft.scale),Ft.translateX(sn),Ft.translateZ($t),Ft.matrixWorld.compose(Ft.position,Ft.quaternion,Ft.scale),Ft.matrixWorldInverse.copy(Ft.matrixWorld).invert();const rn=on+$t,vn=nn+$t,cn=pn-sn,Dn=_n+(Lt-sn),Kt=jt*nn/vn*rn,bn=Mn*nn/vn*rn;Ft.projectionMatrix.makePerspective(cn,Dn,Kt,bn,rn,vn)}function At(Ft,Vt){Vt===null?Ft.matrixWorld.copy(Ft.matrix):Ft.matrixWorld.multiplyMatrices(Vt.matrixWorld,Ft.matrix),Ft.matrixWorldInverse.copy(Ft.matrixWorld).invert()}this.updateCamera=function(Ft){if(c===null)return;dt.near=ft.near=it.near=Ft.near,dt.far=ft.far=it.far=Ft.far,(mt!==dt.near||gt!==dt.far)&&(c.updateRenderState({depthNear:dt.near,depthFar:dt.far}),mt=dt.near,gt=dt.far);const Vt=Ft.parent,Qt=dt.cameras;At(dt,Vt);for(let It=0;It<Qt.length;It++)At(Qt[It],Vt);dt.matrixWorld.decompose(dt.position,dt.quaternion,dt.scale),Ft.position.copy(dt.position),Ft.quaternion.copy(dt.quaternion),Ft.scale.copy(dt.scale),Ft.matrix.copy(dt.matrix),Ft.matrixWorld.copy(dt.matrixWorld);const Lt=Ft.children;for(let It=0,Ht=Lt.length;It<Ht;It++)Lt[It].updateMatrixWorld(!0);Qt.length===2?bt(dt,it,ft):dt.projectionMatrix.copy(it.projectionMatrix)},this.getCamera=function(){return dt},this.getFoveation=function(){if(et!==null)return et.fixedFoveation;if(nt!==null)return nt.fixedFoveation},this.setFoveation=function(Ft){et!==null&&(et.fixedFoveation=Ft),nt!==null&&nt.fixedFoveation!==void 0&&(nt.fixedFoveation=Ft)};let Rt=null;function Pt(Ft,Vt){if(k=Vt.getViewerPose(_),tt=Vt,k!==null){const Lt=k.views;nt!==null&&(e.setRenderTargetFramebuffer(lt,nt.framebuffer),e.setRenderTarget(lt));let It=!1;Lt.length!==dt.cameras.length&&(dt.cameras.length=0,It=!0);for(let Ht=0;Ht<Lt.length;Ht++){const on=Lt[Ht];let nn=null;if(nt!==null)nn=nt.getViewport(on);else{const Mn=j.getViewSubImage(et,on);nn=Mn.viewport,Ht===0&&(e.setRenderTargetTextures(lt,Mn.colorTexture,et.ignoreDepthValues?void 0:Mn.depthStencilTexture),e.setRenderTarget(lt))}const jt=ct[Ht];jt.matrix.fromArray(on.transform.matrix),jt.projectionMatrix.fromArray(on.projectionMatrix),jt.viewport.set(nn.x,nn.y,nn.width,nn.height),Ht===0&&dt.matrix.copy(jt.matrix),It===!0&&dt.cameras.push(jt)}}const Qt=c.inputSources;for(let Lt=0;Lt<ut.length;Lt++){const It=ut[Lt],Ht=Qt[Lt];It.update(Ht,Vt,_)}Rt&&Rt(Ft,Vt),tt=null}const Dt=new WebGLAnimation;Dt.setAnimationLoop(Pt),this.setAnimationLoop=function(Ft){Rt=Ft},this.dispose=function(){}}}function WebGLMaterials(s){function e(st,it){st.fogColor.value.copy(it.color),it.isFog?(st.fogNear.value=it.near,st.fogFar.value=it.far):it.isFogExp2&&(st.fogDensity.value=it.density)}function o(st,it,ft,ct,dt){it.isMeshBasicMaterial?a(st,it):it.isMeshLambertMaterial?(a(st,it),k(st,it)):it.isMeshToonMaterial?(a(st,it),et(st,it)):it.isMeshPhongMaterial?(a(st,it),j(st,it)):it.isMeshStandardMaterial?(a(st,it),it.isMeshPhysicalMaterial?tt(st,it,dt):nt(st,it)):it.isMeshMatcapMaterial?(a(st,it),rt(st,it)):it.isMeshDepthMaterial?(a(st,it),at(st,it)):it.isMeshDistanceMaterial?(a(st,it),lt(st,it)):it.isMeshNormalMaterial?(a(st,it),ut(st,it)):it.isLineBasicMaterial?(c(st,it),it.isLineDashedMaterial&&d(st,it)):it.isPointsMaterial?_(st,it,ft,ct):it.isSpriteMaterial?b(st,it):it.isShadowMaterial?(st.color.value.copy(it.color),st.opacity.value=it.opacity):it.isShaderMaterial&&(it.uniformsNeedUpdate=!1)}function a(st,it){st.opacity.value=it.opacity,it.color&&st.diffuse.value.copy(it.color),it.emissive&&st.emissive.value.copy(it.emissive).multiplyScalar(it.emissiveIntensity),it.map&&(st.map.value=it.map),it.alphaMap&&(st.alphaMap.value=it.alphaMap),it.specularMap&&(st.specularMap.value=it.specularMap),it.alphaTest>0&&(st.alphaTest.value=it.alphaTest);const ft=s.get(it).envMap;ft&&(st.envMap.value=ft,st.flipEnvMap.value=ft.isCubeTexture&&ft.isRenderTargetTexture===!1?-1:1,st.reflectivity.value=it.reflectivity,st.ior.value=it.ior,st.refractionRatio.value=it.refractionRatio),it.lightMap&&(st.lightMap.value=it.lightMap,st.lightMapIntensity.value=it.lightMapIntensity),it.aoMap&&(st.aoMap.value=it.aoMap,st.aoMapIntensity.value=it.aoMapIntensity);let ct;it.map?ct=it.map:it.specularMap?ct=it.specularMap:it.displacementMap?ct=it.displacementMap:it.normalMap?ct=it.normalMap:it.bumpMap?ct=it.bumpMap:it.roughnessMap?ct=it.roughnessMap:it.metalnessMap?ct=it.metalnessMap:it.alphaMap?ct=it.alphaMap:it.emissiveMap?ct=it.emissiveMap:it.clearcoatMap?ct=it.clearcoatMap:it.clearcoatNormalMap?ct=it.clearcoatNormalMap:it.clearcoatRoughnessMap?ct=it.clearcoatRoughnessMap:it.specularIntensityMap?ct=it.specularIntensityMap:it.specularColorMap?ct=it.specularColorMap:it.transmissionMap?ct=it.transmissionMap:it.thicknessMap?ct=it.thicknessMap:it.sheenColorMap?ct=it.sheenColorMap:it.sheenRoughnessMap&&(ct=it.sheenRoughnessMap),ct!==void 0&&(ct.isWebGLRenderTarget&&(ct=ct.texture),ct.matrixAutoUpdate===!0&&ct.updateMatrix(),st.uvTransform.value.copy(ct.matrix));let dt;it.aoMap?dt=it.aoMap:it.lightMap&&(dt=it.lightMap),dt!==void 0&&(dt.isWebGLRenderTarget&&(dt=dt.texture),dt.matrixAutoUpdate===!0&&dt.updateMatrix(),st.uv2Transform.value.copy(dt.matrix))}function c(st,it){st.diffuse.value.copy(it.color),st.opacity.value=it.opacity}function d(st,it){st.dashSize.value=it.dashSize,st.totalSize.value=it.dashSize+it.gapSize,st.scale.value=it.scale}function _(st,it,ft,ct){st.diffuse.value.copy(it.color),st.opacity.value=it.opacity,st.size.value=it.size*ft,st.scale.value=ct*.5,it.map&&(st.map.value=it.map),it.alphaMap&&(st.alphaMap.value=it.alphaMap),it.alphaTest>0&&(st.alphaTest.value=it.alphaTest);let dt;it.map?dt=it.map:it.alphaMap&&(dt=it.alphaMap),dt!==void 0&&(dt.matrixAutoUpdate===!0&&dt.updateMatrix(),st.uvTransform.value.copy(dt.matrix))}function b(st,it){st.diffuse.value.copy(it.color),st.opacity.value=it.opacity,st.rotation.value=it.rotation,it.map&&(st.map.value=it.map),it.alphaMap&&(st.alphaMap.value=it.alphaMap),it.alphaTest>0&&(st.alphaTest.value=it.alphaTest);let ft;it.map?ft=it.map:it.alphaMap&&(ft=it.alphaMap),ft!==void 0&&(ft.matrixAutoUpdate===!0&&ft.updateMatrix(),st.uvTransform.value.copy(ft.matrix))}function k(st,it){it.emissiveMap&&(st.emissiveMap.value=it.emissiveMap)}function j(st,it){st.specular.value.copy(it.specular),st.shininess.value=Math.max(it.shininess,1e-4),it.emissiveMap&&(st.emissiveMap.value=it.emissiveMap),it.bumpMap&&(st.bumpMap.value=it.bumpMap,st.bumpScale.value=it.bumpScale,it.side===BackSide&&(st.bumpScale.value*=-1)),it.normalMap&&(st.normalMap.value=it.normalMap,st.normalScale.value.copy(it.normalScale),it.side===BackSide&&st.normalScale.value.negate()),it.displacementMap&&(st.displacementMap.value=it.displacementMap,st.displacementScale.value=it.displacementScale,st.displacementBias.value=it.displacementBias)}function et(st,it){it.gradientMap&&(st.gradientMap.value=it.gradientMap),it.emissiveMap&&(st.emissiveMap.value=it.emissiveMap),it.bumpMap&&(st.bumpMap.value=it.bumpMap,st.bumpScale.value=it.bumpScale,it.side===BackSide&&(st.bumpScale.value*=-1)),it.normalMap&&(st.normalMap.value=it.normalMap,st.normalScale.value.copy(it.normalScale),it.side===BackSide&&st.normalScale.value.negate()),it.displacementMap&&(st.displacementMap.value=it.displacementMap,st.displacementScale.value=it.displacementScale,st.displacementBias.value=it.displacementBias)}function nt(st,it){st.roughness.value=it.roughness,st.metalness.value=it.metalness,it.roughnessMap&&(st.roughnessMap.value=it.roughnessMap),it.metalnessMap&&(st.metalnessMap.value=it.metalnessMap),it.emissiveMap&&(st.emissiveMap.value=it.emissiveMap),it.bumpMap&&(st.bumpMap.value=it.bumpMap,st.bumpScale.value=it.bumpScale,it.side===BackSide&&(st.bumpScale.value*=-1)),it.normalMap&&(st.normalMap.value=it.normalMap,st.normalScale.value.copy(it.normalScale),it.side===BackSide&&st.normalScale.value.negate()),it.displacementMap&&(st.displacementMap.value=it.displacementMap,st.displacementScale.value=it.displacementScale,st.displacementBias.value=it.displacementBias),s.get(it).envMap&&(st.envMapIntensity.value=it.envMapIntensity)}function tt(st,it,ft){nt(st,it),st.ior.value=it.ior,it.sheen>0&&(st.sheenColor.value.copy(it.sheenColor).multiplyScalar(it.sheen),st.sheenRoughness.value=it.sheenRoughness,it.sheenColorMap&&(st.sheenColorMap.value=it.sheenColorMap),it.sheenRoughnessMap&&(st.sheenRoughnessMap.value=it.sheenRoughnessMap)),it.clearcoat>0&&(st.clearcoat.value=it.clearcoat,st.clearcoatRoughness.value=it.clearcoatRoughness,it.clearcoatMap&&(st.clearcoatMap.value=it.clearcoatMap),it.clearcoatRoughnessMap&&(st.clearcoatRoughnessMap.value=it.clearcoatRoughnessMap),it.clearcoatNormalMap&&(st.clearcoatNormalScale.value.copy(it.clearcoatNormalScale),st.clearcoatNormalMap.value=it.clearcoatNormalMap,it.side===BackSide&&st.clearcoatNormalScale.value.negate())),it.transmission>0&&(st.transmission.value=it.transmission,st.transmissionSamplerMap.value=ft.texture,st.transmissionSamplerSize.value.set(ft.width,ft.height),it.transmissionMap&&(st.transmissionMap.value=it.transmissionMap),st.thickness.value=it.thickness,it.thicknessMap&&(st.thicknessMap.value=it.thicknessMap),st.attenuationDistance.value=it.attenuationDistance,st.attenuationColor.value.copy(it.attenuationColor)),st.specularIntensity.value=it.specularIntensity,st.specularColor.value.copy(it.specularColor),it.specularIntensityMap&&(st.specularIntensityMap.value=it.specularIntensityMap),it.specularColorMap&&(st.specularColorMap.value=it.specularColorMap)}function rt(st,it){it.matcap&&(st.matcap.value=it.matcap),it.bumpMap&&(st.bumpMap.value=it.bumpMap,st.bumpScale.value=it.bumpScale,it.side===BackSide&&(st.bumpScale.value*=-1)),it.normalMap&&(st.normalMap.value=it.normalMap,st.normalScale.value.copy(it.normalScale),it.side===BackSide&&st.normalScale.value.negate()),it.displacementMap&&(st.displacementMap.value=it.displacementMap,st.displacementScale.value=it.displacementScale,st.displacementBias.value=it.displacementBias)}function at(st,it){it.displacementMap&&(st.displacementMap.value=it.displacementMap,st.displacementScale.value=it.displacementScale,st.displacementBias.value=it.displacementBias)}function lt(st,it){it.displacementMap&&(st.displacementMap.value=it.displacementMap,st.displacementScale.value=it.displacementScale,st.displacementBias.value=it.displacementBias),st.referencePosition.value.copy(it.referencePosition),st.nearDistance.value=it.nearDistance,st.farDistance.value=it.farDistance}function ut(st,it){it.bumpMap&&(st.bumpMap.value=it.bumpMap,st.bumpScale.value=it.bumpScale,it.side===BackSide&&(st.bumpScale.value*=-1)),it.normalMap&&(st.normalMap.value=it.normalMap,st.normalScale.value.copy(it.normalScale),it.side===BackSide&&st.normalScale.value.negate()),it.displacementMap&&(st.displacementMap.value=it.displacementMap,st.displacementScale.value=it.displacementScale,st.displacementBias.value=it.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:o}}function createCanvasElement(){const s=createElementNS("canvas");return s.style.display="block",s}function WebGLRenderer(s={}){const e=s.canvas!==void 0?s.canvas:createCanvasElement(),o=s.context!==void 0?s.context:null,a=s.depth!==void 0?s.depth:!0,c=s.stencil!==void 0?s.stencil:!0,d=s.antialias!==void 0?s.antialias:!1,_=s.premultipliedAlpha!==void 0?s.premultipliedAlpha:!0,b=s.preserveDrawingBuffer!==void 0?s.preserveDrawingBuffer:!1,k=s.powerPreference!==void 0?s.powerPreference:"default",j=s.failIfMajorPerformanceCaveat!==void 0?s.failIfMajorPerformanceCaveat:!1;let et;s.context!==void 0?et=o.getContextAttributes().alpha:et=s.alpha!==void 0?s.alpha:!1;let nt=null,tt=null;const rt=[],at=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const lt=this;let ut=!1,st=0,it=0,ft=null,ct=-1,dt=null;const mt=new Vector4,gt=new Vector4;let yt=null,St=e.width,Et=e.height,vt=1,_t=null,bt=null;const At=new Vector4(0,0,St,Et),Rt=new Vector4(0,0,St,Et);let Pt=!1;const Dt=new Frustum;let Ft=!1,Vt=!1,Qt=null;const Lt=new Matrix4,It=new Vector2,Ht=new Vector3,on={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function nn(){return ft===null?vt:1}let jt=o;function Mn(Tt,Gt){for(let qt=0;qt<Tt.length;qt++){const Xt=Tt[qt],tn=e.getContext(Xt,Gt);if(tn!==null)return tn}return null}try{const Tt={alpha:!0,depth:a,stencil:c,antialias:d,premultipliedAlpha:_,preserveDrawingBuffer:b,powerPreference:k,failIfMajorPerformanceCaveat:j};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${REVISION}`),e.addEventListener("webglcontextlost",Bt,!1),e.addEventListener("webglcontextrestored",an,!1),jt===null){const Gt=["webgl2","webgl","experimental-webgl"];if(lt.isWebGL1Renderer===!0&&Gt.shift(),jt=Mn(Gt,Tt),jt===null)throw Mn(Gt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}jt.getShaderPrecisionFormat===void 0&&(jt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Tt){throw console.error("THREE.WebGLRenderer: "+Tt.message),Tt}let gn,fn,pn,_n,$t,sn,rn,vn,cn,Dn,Kt,bn,En,wt,Mt,Ot,zt,Yt,dn,xn,Nt,mn,Ln;function Sn(){gn=new WebGLExtensions(jt),fn=new WebGLCapabilities(jt,gn,s),gn.init(fn),mn=new WebGLUtils(jt,gn,fn),pn=new WebGLState(jt,gn,fn),_n=new WebGLInfo(jt),$t=new WebGLProperties,sn=new WebGLTextures(jt,gn,pn,$t,fn,mn,_n),rn=new WebGLCubeMaps(lt),vn=new WebGLCubeUVMaps(lt),cn=new WebGLAttributes(jt,fn),Ln=new WebGLBindingStates(jt,gn,cn,fn),Dn=new WebGLGeometries(jt,cn,_n,Ln),Kt=new WebGLObjects(jt,Dn,cn,_n),dn=new WebGLMorphtargets(jt,fn,sn),Ot=new WebGLClipping($t),bn=new WebGLPrograms(lt,rn,vn,gn,fn,Ln,Ot),En=new WebGLMaterials($t),wt=new WebGLRenderLists,Mt=new WebGLRenderStates(gn,fn),Yt=new WebGLBackground(lt,rn,pn,Kt,et,_),zt=new WebGLShadowMap(lt,Kt,fn),xn=new WebGLBufferRenderer(jt,gn,_n,fn),Nt=new WebGLIndexedBufferRenderer(jt,gn,_n,fn),_n.programs=bn.programs,lt.capabilities=fn,lt.extensions=gn,lt.properties=$t,lt.renderLists=wt,lt.shadowMap=zt,lt.state=pn,lt.info=_n}Sn();const yn=new WebXRManager(lt,jt);this.xr=yn,this.getContext=function(){return jt},this.getContextAttributes=function(){return jt.getContextAttributes()},this.forceContextLoss=function(){const Tt=gn.get("WEBGL_lose_context");Tt&&Tt.loseContext()},this.forceContextRestore=function(){const Tt=gn.get("WEBGL_lose_context");Tt&&Tt.restoreContext()},this.getPixelRatio=function(){return vt},this.setPixelRatio=function(Tt){Tt!==void 0&&(vt=Tt,this.setSize(St,Et,!1))},this.getSize=function(Tt){return Tt.set(St,Et)},this.setSize=function(Tt,Gt,qt){if(yn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}St=Tt,Et=Gt,e.width=Math.floor(Tt*vt),e.height=Math.floor(Gt*vt),qt!==!1&&(e.style.width=Tt+"px",e.style.height=Gt+"px"),this.setViewport(0,0,Tt,Gt)},this.getDrawingBufferSize=function(Tt){return Tt.set(St*vt,Et*vt).floor()},this.setDrawingBufferSize=function(Tt,Gt,qt){St=Tt,Et=Gt,vt=qt,e.width=Math.floor(Tt*qt),e.height=Math.floor(Gt*qt),this.setViewport(0,0,Tt,Gt)},this.getCurrentViewport=function(Tt){return Tt.copy(mt)},this.getViewport=function(Tt){return Tt.copy(At)},this.setViewport=function(Tt,Gt,qt,Xt){Tt.isVector4?At.set(Tt.x,Tt.y,Tt.z,Tt.w):At.set(Tt,Gt,qt,Xt),pn.viewport(mt.copy(At).multiplyScalar(vt).floor())},this.getScissor=function(Tt){return Tt.copy(Rt)},this.setScissor=function(Tt,Gt,qt,Xt){Tt.isVector4?Rt.set(Tt.x,Tt.y,Tt.z,Tt.w):Rt.set(Tt,Gt,qt,Xt),pn.scissor(gt.copy(Rt).multiplyScalar(vt).floor())},this.getScissorTest=function(){return Pt},this.setScissorTest=function(Tt){pn.setScissorTest(Pt=Tt)},this.setOpaqueSort=function(Tt){_t=Tt},this.setTransparentSort=function(Tt){bt=Tt},this.getClearColor=function(Tt){return Tt.copy(Yt.getClearColor())},this.setClearColor=function(){Yt.setClearColor.apply(Yt,arguments)},this.getClearAlpha=function(){return Yt.getClearAlpha()},this.setClearAlpha=function(){Yt.setClearAlpha.apply(Yt,arguments)},this.clear=function(Tt=!0,Gt=!0,qt=!0){let Xt=0;Tt&&(Xt|=16384),Gt&&(Xt|=256),qt&&(Xt|=1024),jt.clear(Xt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Bt,!1),e.removeEventListener("webglcontextrestored",an,!1),wt.dispose(),Mt.dispose(),$t.dispose(),rn.dispose(),vn.dispose(),Kt.dispose(),Ln.dispose(),bn.dispose(),yn.dispose(),yn.removeEventListener("sessionstart",Fn),yn.removeEventListener("sessionend",ar),Qt&&(Qt.dispose(),Qt=null),Yn.stop()};function Bt(Tt){Tt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ut=!0}function an(){console.log("THREE.WebGLRenderer: Context Restored."),ut=!1;const Tt=_n.autoReset,Gt=zt.enabled,qt=zt.autoUpdate,Xt=zt.needsUpdate,tn=zt.type;Sn(),_n.autoReset=Tt,zt.enabled=Gt,zt.autoUpdate=qt,zt.needsUpdate=Xt,zt.type=tn}function en(Tt){const Gt=Tt.target;Gt.removeEventListener("dispose",en),Cn(Gt)}function Cn(Tt){un(Tt),$t.remove(Tt)}function un(Tt){const Gt=$t.get(Tt).programs;Gt!==void 0&&(Gt.forEach(function(qt){bn.releaseProgram(qt)}),Tt.isShaderMaterial&&bn.releaseShaderCache(Tt))}this.renderBufferDirect=function(Tt,Gt,qt,Xt,tn,Bn){Gt===null&&(Gt=on);const Nn=tn.isMesh&&tn.matrixWorld.determinant()<0,Hn=Er(Tt,Gt,qt,Xt,tn);pn.setMaterial(Xt,Nn);let zn=qt.index;const Zn=qt.attributes.position;if(zn===null){if(Zn===void 0||Zn.count===0)return}else if(zn.count===0)return;let $n=1;Xt.wireframe===!0&&(zn=Dn.getWireframeAttribute(qt),$n=2),Ln.setup(tn,Xt,Hn,qt,zn);let jn,Qn=xn;zn!==null&&(jn=cn.get(zn),Qn=Nt,Qn.setIndex(jn));const $r=zn!==null?zn.count:Zn.count,Vr=qt.drawRange.start*$n,Or=qt.drawRange.count*$n,gr=Bn!==null?Bn.start*$n:0,Wn=Bn!==null?Bn.count*$n:1/0,hn=Math.max(Vr,gr),On=Math.min($r,Vr+Or,gr+Wn)-1,vr=Math.max(0,On-hn+1);if(vr!==0){if(tn.isMesh)Xt.wireframe===!0?(pn.setLineWidth(Xt.wireframeLinewidth*nn()),Qn.setMode(1)):Qn.setMode(4);else if(tn.isLine){let nr=Xt.linewidth;nr===void 0&&(nr=1),pn.setLineWidth(nr*nn()),tn.isLineSegments?Qn.setMode(1):tn.isLineLoop?Qn.setMode(2):Qn.setMode(3)}else tn.isPoints?Qn.setMode(0):tn.isSprite&&Qn.setMode(4);if(tn.isInstancedMesh)Qn.renderInstances(hn,vr,tn.count);else if(qt.isInstancedBufferGeometry){const nr=Math.min(qt.instanceCount,qt._maxInstanceCount);Qn.renderInstances(hn,vr,nr)}else Qn.render(hn,vr)}},this.compile=function(Tt,Gt){tt=Mt.get(Tt),tt.init(),at.push(tt),Tt.traverseVisible(function(qt){qt.isLight&&qt.layers.test(Gt.layers)&&(tt.pushLight(qt),qt.castShadow&&tt.pushShadow(qt))}),tt.setupLights(lt.physicallyCorrectLights),Tt.traverse(function(qt){const Xt=qt.material;if(Xt)if(Array.isArray(Xt))for(let tn=0;tn<Xt.length;tn++){const Bn=Xt[tn];br(Bn,Tt,qt)}else br(Xt,Tt,qt)}),at.pop(),tt=null};let ln=null;function Rn(Tt){ln&&ln(Tt)}function Fn(){Yn.stop()}function ar(){Yn.start()}const Yn=new WebGLAnimation;Yn.setAnimationLoop(Rn),typeof window!="undefined"&&Yn.setContext(window),this.setAnimationLoop=function(Tt){ln=Tt,yn.setAnimationLoop(Tt),Tt===null?Yn.stop():Yn.start()},yn.addEventListener("sessionstart",Fn),yn.addEventListener("sessionend",ar),this.render=function(Tt,Gt){if(Gt!==void 0&&Gt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(ut===!0)return;Tt.autoUpdate===!0&&Tt.updateMatrixWorld(),Gt.parent===null&&Gt.updateMatrixWorld(),yn.enabled===!0&&yn.isPresenting===!0&&(yn.cameraAutoUpdate===!0&&yn.updateCamera(Gt),Gt=yn.getCamera()),Tt.isScene===!0&&Tt.onBeforeRender(lt,Tt,Gt,ft),tt=Mt.get(Tt,at.length),tt.init(),at.push(tt),Lt.multiplyMatrices(Gt.projectionMatrix,Gt.matrixWorldInverse),Dt.setFromProjectionMatrix(Lt),Vt=this.localClippingEnabled,Ft=Ot.init(this.clippingPlanes,Vt,Gt),nt=wt.get(Tt,rt.length),nt.init(),rt.push(nt),er(Tt,Gt,0,lt.sortObjects),nt.finish(),lt.sortObjects===!0&&nt.sort(_t,bt),Ft===!0&&Ot.beginShadows();const qt=tt.state.shadowsArray;if(zt.render(qt,Tt,Gt),Ft===!0&&Ot.endShadows(),this.info.autoReset===!0&&this.info.reset(),Yt.render(nt,Tt),tt.setupLights(lt.physicallyCorrectLights),Gt.isArrayCamera){const Xt=Gt.cameras;for(let tn=0,Bn=Xt.length;tn<Bn;tn++){const Nn=Xt[tn];Lr(nt,Tt,Nn,Nn.viewport)}}else Lr(nt,Tt,Gt);ft!==null&&(sn.updateMultisampleRenderTarget(ft),sn.updateRenderTargetMipmap(ft)),Tt.isScene===!0&&Tt.onAfterRender(lt,Tt,Gt),Ln.resetDefaultState(),ct=-1,dt=null,at.pop(),at.length>0?tt=at[at.length-1]:tt=null,rt.pop(),rt.length>0?nt=rt[rt.length-1]:nt=null};function er(Tt,Gt,qt,Xt){if(Tt.visible===!1)return;if(Tt.layers.test(Gt.layers)){if(Tt.isGroup)qt=Tt.renderOrder;else if(Tt.isLOD)Tt.autoUpdate===!0&&Tt.update(Gt);else if(Tt.isLight)tt.pushLight(Tt),Tt.castShadow&&tt.pushShadow(Tt);else if(Tt.isSprite){if(!Tt.frustumCulled||Dt.intersectsSprite(Tt)){Xt&&Ht.setFromMatrixPosition(Tt.matrixWorld).applyMatrix4(Lt);const Nn=Kt.update(Tt),Hn=Tt.material;Hn.visible&&nt.push(Tt,Nn,Hn,qt,Ht.z,null)}}else if((Tt.isMesh||Tt.isLine||Tt.isPoints)&&(Tt.isSkinnedMesh&&Tt.skeleton.frame!==_n.render.frame&&(Tt.skeleton.update(),Tt.skeleton.frame=_n.render.frame),!Tt.frustumCulled||Dt.intersectsObject(Tt))){Xt&&Ht.setFromMatrixPosition(Tt.matrixWorld).applyMatrix4(Lt);const Nn=Kt.update(Tt),Hn=Tt.material;if(Array.isArray(Hn)){const zn=Nn.groups;for(let Zn=0,$n=zn.length;Zn<$n;Zn++){const jn=zn[Zn],Qn=Hn[jn.materialIndex];Qn&&Qn.visible&&nt.push(Tt,Nn,Qn,qt,Ht.z,jn)}}else Hn.visible&&nt.push(Tt,Nn,Hn,qt,Ht.z,null)}}const Bn=Tt.children;for(let Nn=0,Hn=Bn.length;Nn<Hn;Nn++)er(Bn[Nn],Gt,qt,Xt)}function Lr(Tt,Gt,qt,Xt){const tn=Tt.opaque,Bn=Tt.transmissive,Nn=Tt.transparent;tt.setupLightsView(qt),Bn.length>0&&Kn(tn,Gt,qt),Xt&&pn.viewport(mt.copy(Xt)),tn.length>0&&qn(tn,Gt,qt),Bn.length>0&&qn(Bn,Gt,qt),Nn.length>0&&qn(Nn,Gt,qt),pn.buffers.depth.setTest(!0),pn.buffers.depth.setMask(!0),pn.buffers.color.setMask(!0),pn.setPolygonOffset(!1)}function Kn(Tt,Gt,qt){const Xt=fn.isWebGL2;Qt===null&&(Qt=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:mn.convert(HalfFloatType)!==null?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:Xt&&d===!0?4:0})),lt.getDrawingBufferSize(It),Xt?Qt.setSize(It.x,It.y):Qt.setSize(floorPowerOfTwo(It.x),floorPowerOfTwo(It.y));const tn=lt.getRenderTarget();lt.setRenderTarget(Qt),lt.clear();const Bn=lt.toneMapping;lt.toneMapping=NoToneMapping,qn(Tt,Gt,qt),lt.toneMapping=Bn,sn.updateMultisampleRenderTarget(Qt),sn.updateRenderTargetMipmap(Qt),lt.setRenderTarget(tn)}function qn(Tt,Gt,qt){const Xt=Gt.isScene===!0?Gt.overrideMaterial:null;for(let tn=0,Bn=Tt.length;tn<Bn;tn++){const Nn=Tt[tn],Hn=Nn.object,zn=Nn.geometry,Zn=Xt===null?Nn.material:Xt,$n=Nn.group;Hn.layers.test(qt.layers)&&hr(Hn,Gt,qt,zn,Zn,$n)}}function hr(Tt,Gt,qt,Xt,tn,Bn){Tt.onBeforeRender(lt,Gt,qt,Xt,tn,Bn),Tt.modelViewMatrix.multiplyMatrices(qt.matrixWorldInverse,Tt.matrixWorld),Tt.normalMatrix.getNormalMatrix(Tt.modelViewMatrix),tn.onBeforeRender(lt,Gt,qt,Xt,Tt,Bn),tn.transparent===!0&&tn.side===DoubleSide?(tn.side=BackSide,tn.needsUpdate=!0,lt.renderBufferDirect(qt,Gt,Xt,tn,Tt,Bn),tn.side=FrontSide,tn.needsUpdate=!0,lt.renderBufferDirect(qt,Gt,Xt,tn,Tt,Bn),tn.side=DoubleSide):lt.renderBufferDirect(qt,Gt,Xt,tn,Tt,Bn),Tt.onAfterRender(lt,Gt,qt,Xt,tn,Bn)}function br(Tt,Gt,qt){Gt.isScene!==!0&&(Gt=on);const Xt=$t.get(Tt),tn=tt.state.lights,Bn=tt.state.shadowsArray,Nn=tn.state.version,Hn=bn.getParameters(Tt,tn.state,Bn,Gt,qt),zn=bn.getProgramCacheKey(Hn);let Zn=Xt.programs;Xt.environment=Tt.isMeshStandardMaterial?Gt.environment:null,Xt.fog=Gt.fog,Xt.envMap=(Tt.isMeshStandardMaterial?vn:rn).get(Tt.envMap||Xt.environment),Zn===void 0&&(Tt.addEventListener("dispose",en),Zn=new Map,Xt.programs=Zn);let $n=Zn.get(zn);if($n!==void 0){if(Xt.currentProgram===$n&&Xt.lightsStateVersion===Nn)return tr(Tt,Hn),$n}else Hn.uniforms=bn.getUniforms(Tt),Tt.onBuild(qt,Hn,lt),Tt.onBeforeCompile(Hn,lt),$n=bn.acquireProgram(Hn,zn),Zn.set(zn,$n),Xt.uniforms=Hn.uniforms;const jn=Xt.uniforms;(!Tt.isShaderMaterial&&!Tt.isRawShaderMaterial||Tt.clipping===!0)&&(jn.clippingPlanes=Ot.uniform),tr(Tt,Hn),Xt.needsLights=pr(Tt),Xt.lightsStateVersion=Nn,Xt.needsLights&&(jn.ambientLightColor.value=tn.state.ambient,jn.lightProbe.value=tn.state.probe,jn.directionalLights.value=tn.state.directional,jn.directionalLightShadows.value=tn.state.directionalShadow,jn.spotLights.value=tn.state.spot,jn.spotLightShadows.value=tn.state.spotShadow,jn.rectAreaLights.value=tn.state.rectArea,jn.ltc_1.value=tn.state.rectAreaLTC1,jn.ltc_2.value=tn.state.rectAreaLTC2,jn.pointLights.value=tn.state.point,jn.pointLightShadows.value=tn.state.pointShadow,jn.hemisphereLights.value=tn.state.hemi,jn.directionalShadowMap.value=tn.state.directionalShadowMap,jn.directionalShadowMatrix.value=tn.state.directionalShadowMatrix,jn.spotShadowMap.value=tn.state.spotShadowMap,jn.spotShadowMatrix.value=tn.state.spotShadowMatrix,jn.pointShadowMap.value=tn.state.pointShadowMap,jn.pointShadowMatrix.value=tn.state.pointShadowMatrix);const Qn=$n.getUniforms(),$r=WebGLUniforms.seqWithValue(Qn.seq,jn);return Xt.currentProgram=$n,Xt.uniformsList=$r,$n}function tr(Tt,Gt){const qt=$t.get(Tt);qt.outputEncoding=Gt.outputEncoding,qt.instancing=Gt.instancing,qt.skinning=Gt.skinning,qt.morphTargets=Gt.morphTargets,qt.morphNormals=Gt.morphNormals,qt.morphColors=Gt.morphColors,qt.morphTargetsCount=Gt.morphTargetsCount,qt.numClippingPlanes=Gt.numClippingPlanes,qt.numIntersection=Gt.numClipIntersection,qt.vertexAlphas=Gt.vertexAlphas,qt.vertexTangents=Gt.vertexTangents,qt.toneMapping=Gt.toneMapping}function Er(Tt,Gt,qt,Xt,tn){Gt.isScene!==!0&&(Gt=on),sn.resetTextureUnits();const Bn=Gt.fog,Nn=Xt.isMeshStandardMaterial?Gt.environment:null,Hn=ft===null?lt.outputEncoding:ft.isXRRenderTarget===!0?ft.texture.encoding:LinearEncoding,zn=(Xt.isMeshStandardMaterial?vn:rn).get(Xt.envMap||Nn),Zn=Xt.vertexColors===!0&&!!qt.attributes.color&&qt.attributes.color.itemSize===4,$n=!!Xt.normalMap&&!!qt.attributes.tangent,jn=!!qt.morphAttributes.position,Qn=!!qt.morphAttributes.normal,$r=!!qt.morphAttributes.color,Vr=Xt.toneMapped?lt.toneMapping:NoToneMapping,Or=qt.morphAttributes.position||qt.morphAttributes.normal||qt.morphAttributes.color,gr=Or!==void 0?Or.length:0,Wn=$t.get(Xt),hn=tt.state.lights;if(Ft===!0&&(Vt===!0||Tt!==dt)){const Cr=Tt===dt&&Xt.id===ct;Ot.setState(Xt,Tt,Cr)}let On=!1;Xt.version===Wn.__version?(Wn.needsLights&&Wn.lightsStateVersion!==hn.state.version||Wn.outputEncoding!==Hn||tn.isInstancedMesh&&Wn.instancing===!1||!tn.isInstancedMesh&&Wn.instancing===!0||tn.isSkinnedMesh&&Wn.skinning===!1||!tn.isSkinnedMesh&&Wn.skinning===!0||Wn.envMap!==zn||Xt.fog&&Wn.fog!==Bn||Wn.numClippingPlanes!==void 0&&(Wn.numClippingPlanes!==Ot.numPlanes||Wn.numIntersection!==Ot.numIntersection)||Wn.vertexAlphas!==Zn||Wn.vertexTangents!==$n||Wn.morphTargets!==jn||Wn.morphNormals!==Qn||Wn.morphColors!==$r||Wn.toneMapping!==Vr||fn.isWebGL2===!0&&Wn.morphTargetsCount!==gr)&&(On=!0):(On=!0,Wn.__version=Xt.version);let vr=Wn.currentProgram;On===!0&&(vr=br(Xt,Gt,tn));let nr=!1,dr=!1,Nr=!1;const or=vr.getUniforms(),ur=Wn.uniforms;if(pn.useProgram(vr.program)&&(nr=!0,dr=!0,Nr=!0),Xt.id!==ct&&(ct=Xt.id,dr=!0),nr||dt!==Tt){if(or.setValue(jt,"projectionMatrix",Tt.projectionMatrix),fn.logarithmicDepthBuffer&&or.setValue(jt,"logDepthBufFC",2/(Math.log(Tt.far+1)/Math.LN2)),dt!==Tt&&(dt=Tt,dr=!0,Nr=!0),Xt.isShaderMaterial||Xt.isMeshPhongMaterial||Xt.isMeshToonMaterial||Xt.isMeshStandardMaterial||Xt.envMap){const Cr=or.map.cameraPosition;Cr!==void 0&&Cr.setValue(jt,Ht.setFromMatrixPosition(Tt.matrixWorld))}(Xt.isMeshPhongMaterial||Xt.isMeshToonMaterial||Xt.isMeshLambertMaterial||Xt.isMeshBasicMaterial||Xt.isMeshStandardMaterial||Xt.isShaderMaterial)&&or.setValue(jt,"isOrthographic",Tt.isOrthographicCamera===!0),(Xt.isMeshPhongMaterial||Xt.isMeshToonMaterial||Xt.isMeshLambertMaterial||Xt.isMeshBasicMaterial||Xt.isMeshStandardMaterial||Xt.isShaderMaterial||Xt.isShadowMaterial||tn.isSkinnedMesh)&&or.setValue(jt,"viewMatrix",Tt.matrixWorldInverse)}if(tn.isSkinnedMesh){or.setOptional(jt,tn,"bindMatrix"),or.setOptional(jt,tn,"bindMatrixInverse");const Cr=tn.skeleton;Cr&&(fn.floatVertexTextures?(Cr.boneTexture===null&&Cr.computeBoneTexture(),or.setValue(jt,"boneTexture",Cr.boneTexture,sn),or.setValue(jt,"boneTextureSize",Cr.boneTextureSize)):or.setOptional(jt,Cr,"boneMatrices"))}const eo=qt.morphAttributes;return(eo.position!==void 0||eo.normal!==void 0||eo.color!==void 0&&fn.isWebGL2===!0)&&dn.update(tn,qt,Xt,vr),(dr||Wn.receiveShadow!==tn.receiveShadow)&&(Wn.receiveShadow=tn.receiveShadow,or.setValue(jt,"receiveShadow",tn.receiveShadow)),dr&&(or.setValue(jt,"toneMappingExposure",lt.toneMappingExposure),Wn.needsLights&&Ur(ur,Nr),Bn&&Xt.fog&&En.refreshFogUniforms(ur,Bn),En.refreshMaterialUniforms(ur,Xt,vt,Et,Qt),WebGLUniforms.upload(jt,Wn.uniformsList,ur,sn)),Xt.isShaderMaterial&&Xt.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(jt,Wn.uniformsList,ur,sn),Xt.uniformsNeedUpdate=!1),Xt.isSpriteMaterial&&or.setValue(jt,"center",tn.center),or.setValue(jt,"modelViewMatrix",tn.modelViewMatrix),or.setValue(jt,"normalMatrix",tn.normalMatrix),or.setValue(jt,"modelMatrix",tn.matrixWorld),vr}function Ur(Tt,Gt){Tt.ambientLightColor.needsUpdate=Gt,Tt.lightProbe.needsUpdate=Gt,Tt.directionalLights.needsUpdate=Gt,Tt.directionalLightShadows.needsUpdate=Gt,Tt.pointLights.needsUpdate=Gt,Tt.pointLightShadows.needsUpdate=Gt,Tt.spotLights.needsUpdate=Gt,Tt.spotLightShadows.needsUpdate=Gt,Tt.rectAreaLights.needsUpdate=Gt,Tt.hemisphereLights.needsUpdate=Gt,Tt.directionalShadowMap.needsUpdate=Gt,Tt.directionalShadowMatrix.needsUpdate=Gt,Tt.spotShadowMap.needsUpdate=Gt,Tt.spotShadowMatrix.needsUpdate=Gt,Tt.pointShadowMap.needsUpdate=Gt,Tt.pointShadowMatrix.needsUpdate=Gt}function pr(Tt){return Tt.isMeshLambertMaterial||Tt.isMeshToonMaterial||Tt.isMeshPhongMaterial||Tt.isMeshStandardMaterial||Tt.isShadowMaterial||Tt.isShaderMaterial&&Tt.lights===!0}this.getActiveCubeFace=function(){return st},this.getActiveMipmapLevel=function(){return it},this.getRenderTarget=function(){return ft},this.setRenderTargetTextures=function(Tt,Gt,qt){$t.get(Tt.texture).__webglTexture=Gt,$t.get(Tt.depthTexture).__webglTexture=qt;const Xt=$t.get(Tt);Xt.__hasExternalTextures=!0,Xt.__hasExternalTextures&&(Xt.__autoAllocateDepthBuffer=qt===void 0,Xt.__autoAllocateDepthBuffer||gn.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Tt.useRenderToTexture=!1,Tt.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(Tt,Gt){const qt=$t.get(Tt);qt.__webglFramebuffer=Gt,qt.__useDefaultFramebuffer=Gt===void 0},this.setRenderTarget=function(Tt,Gt=0,qt=0){ft=Tt,st=Gt,it=qt;let Xt=!0;if(Tt){const zn=$t.get(Tt);zn.__useDefaultFramebuffer!==void 0?(pn.bindFramebuffer(36160,null),Xt=!1):zn.__webglFramebuffer===void 0?sn.setupRenderTarget(Tt):zn.__hasExternalTextures&&sn.rebindTextures(Tt,$t.get(Tt.texture).__webglTexture,$t.get(Tt.depthTexture).__webglTexture)}let tn=null,Bn=!1,Nn=!1;if(Tt){const zn=Tt.texture;(zn.isData3DTexture||zn.isDataArrayTexture)&&(Nn=!0);const Zn=$t.get(Tt).__webglFramebuffer;Tt.isWebGLCubeRenderTarget?(tn=Zn[Gt],Bn=!0):fn.isWebGL2&&Tt.samples>0&&sn.useMultisampledRTT(Tt)===!1?tn=$t.get(Tt).__webglMultisampledFramebuffer:tn=Zn,mt.copy(Tt.viewport),gt.copy(Tt.scissor),yt=Tt.scissorTest}else mt.copy(At).multiplyScalar(vt).floor(),gt.copy(Rt).multiplyScalar(vt).floor(),yt=Pt;if(pn.bindFramebuffer(36160,tn)&&fn.drawBuffers&&Xt&&pn.drawBuffers(Tt,tn),pn.viewport(mt),pn.scissor(gt),pn.setScissorTest(yt),Bn){const zn=$t.get(Tt.texture);jt.framebufferTexture2D(36160,36064,34069+Gt,zn.__webglTexture,qt)}else if(Nn){const zn=$t.get(Tt.texture),Zn=Gt||0;jt.framebufferTextureLayer(36160,36064,zn.__webglTexture,qt||0,Zn)}ct=-1},this.readRenderTargetPixels=function(Tt,Gt,qt,Xt,tn,Bn,Nn){if(!(Tt&&Tt.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Hn=$t.get(Tt).__webglFramebuffer;if(Tt.isWebGLCubeRenderTarget&&Nn!==void 0&&(Hn=Hn[Nn]),Hn){pn.bindFramebuffer(36160,Hn);try{const zn=Tt.texture,Zn=zn.format,$n=zn.type;if(Zn!==RGBAFormat&&mn.convert(Zn)!==jt.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const jn=$n===HalfFloatType&&(gn.has("EXT_color_buffer_half_float")||fn.isWebGL2&&gn.has("EXT_color_buffer_float"));if($n!==UnsignedByteType&&mn.convert($n)!==jt.getParameter(35738)&&!($n===FloatType&&(fn.isWebGL2||gn.has("OES_texture_float")||gn.has("WEBGL_color_buffer_float")))&&!jn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}jt.checkFramebufferStatus(36160)===36053?Gt>=0&&Gt<=Tt.width-Xt&&qt>=0&&qt<=Tt.height-tn&&jt.readPixels(Gt,qt,Xt,tn,mn.convert(Zn),mn.convert($n),Bn):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const zn=ft!==null?$t.get(ft).__webglFramebuffer:null;pn.bindFramebuffer(36160,zn)}}},this.copyFramebufferToTexture=function(Tt,Gt,qt=0){if(Gt.isFramebufferTexture!==!0){console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");return}const Xt=Math.pow(2,-qt),tn=Math.floor(Gt.image.width*Xt),Bn=Math.floor(Gt.image.height*Xt);sn.setTexture2D(Gt,0),jt.copyTexSubImage2D(3553,qt,0,0,Tt.x,Tt.y,tn,Bn),pn.unbindTexture()},this.copyTextureToTexture=function(Tt,Gt,qt,Xt=0){const tn=Gt.image.width,Bn=Gt.image.height,Nn=mn.convert(qt.format),Hn=mn.convert(qt.type);sn.setTexture2D(qt,0),jt.pixelStorei(37440,qt.flipY),jt.pixelStorei(37441,qt.premultiplyAlpha),jt.pixelStorei(3317,qt.unpackAlignment),Gt.isDataTexture?jt.texSubImage2D(3553,Xt,Tt.x,Tt.y,tn,Bn,Nn,Hn,Gt.image.data):Gt.isCompressedTexture?jt.compressedTexSubImage2D(3553,Xt,Tt.x,Tt.y,Gt.mipmaps[0].width,Gt.mipmaps[0].height,Nn,Gt.mipmaps[0].data):jt.texSubImage2D(3553,Xt,Tt.x,Tt.y,Nn,Hn,Gt.image),Xt===0&&qt.generateMipmaps&&jt.generateMipmap(3553),pn.unbindTexture()},this.copyTextureToTexture3D=function(Tt,Gt,qt,Xt,tn=0){if(lt.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Bn=Tt.max.x-Tt.min.x+1,Nn=Tt.max.y-Tt.min.y+1,Hn=Tt.max.z-Tt.min.z+1,zn=mn.convert(Xt.format),Zn=mn.convert(Xt.type);let $n;if(Xt.isData3DTexture)sn.setTexture3D(Xt,0),$n=32879;else if(Xt.isDataArrayTexture)sn.setTexture2DArray(Xt,0),$n=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}jt.pixelStorei(37440,Xt.flipY),jt.pixelStorei(37441,Xt.premultiplyAlpha),jt.pixelStorei(3317,Xt.unpackAlignment);const jn=jt.getParameter(3314),Qn=jt.getParameter(32878),$r=jt.getParameter(3316),Vr=jt.getParameter(3315),Or=jt.getParameter(32877),gr=qt.isCompressedTexture?qt.mipmaps[0]:qt.image;jt.pixelStorei(3314,gr.width),jt.pixelStorei(32878,gr.height),jt.pixelStorei(3316,Tt.min.x),jt.pixelStorei(3315,Tt.min.y),jt.pixelStorei(32877,Tt.min.z),qt.isDataTexture||qt.isData3DTexture?jt.texSubImage3D($n,tn,Gt.x,Gt.y,Gt.z,Bn,Nn,Hn,zn,Zn,gr.data):qt.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),jt.compressedTexSubImage3D($n,tn,Gt.x,Gt.y,Gt.z,Bn,Nn,Hn,zn,gr.data)):jt.texSubImage3D($n,tn,Gt.x,Gt.y,Gt.z,Bn,Nn,Hn,zn,Zn,gr),jt.pixelStorei(3314,jn),jt.pixelStorei(32878,Qn),jt.pixelStorei(3316,$r),jt.pixelStorei(3315,Vr),jt.pixelStorei(32877,Or),tn===0&&Xt.generateMipmaps&&jt.generateMipmap($n),pn.unbindTexture()},this.initTexture=function(Tt){sn.setTexture2D(Tt,0),pn.unbindTexture()},this.resetState=function(){st=0,it=0,ft=null,pn.reset(),Ln.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}WebGLRenderer.prototype.isWebGLRenderer=!0;class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class FogExp2{constructor(e,o=25e-5){this.name="",this.color=new Color(e),this.density=o}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}FogExp2.prototype.isFogExp2=!0;class Fog{constructor(e,o=1,a=1e3){this.name="",this.color=new Color(e),this.near=o,this.far=a}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Fog.prototype.isFog=!0;class Scene extends Object3D{constructor(){super();this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,o){return super.copy(e,o),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const o=super.toJSON(e);return this.fog!==null&&(o.object.fog=this.fog.toJSON()),o}}Scene.prototype.isScene=!0;class InterleavedBuffer{constructor(e,o){this.array=e,this.stride=o,this.count=e!==void 0?e.length/o:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=generateUUID$1()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,o,a){e*=this.stride,a*=o.stride;for(let c=0,d=this.stride;c<d;c++)this.array[e+c]=o.array[a+c];return this}set(e,o=0){return this.array.set(e,o),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID$1()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const o=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),a=new this.constructor(o,this.stride);return a.setUsage(this.usage),a}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID$1()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}InterleavedBuffer.prototype.isInterleavedBuffer=!0;const _vector$6=new Vector3;class InterleavedBufferAttribute{constructor(e,o,a,c=!1){this.name="",this.data=e,this.itemSize=o,this.offset=a,this.normalized=c===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let o=0,a=this.data.count;o<a;o++)_vector$6.x=this.getX(o),_vector$6.y=this.getY(o),_vector$6.z=this.getZ(o),_vector$6.applyMatrix4(e),this.setXYZ(o,_vector$6.x,_vector$6.y,_vector$6.z);return this}applyNormalMatrix(e){for(let o=0,a=this.count;o<a;o++)_vector$6.x=this.getX(o),_vector$6.y=this.getY(o),_vector$6.z=this.getZ(o),_vector$6.applyNormalMatrix(e),this.setXYZ(o,_vector$6.x,_vector$6.y,_vector$6.z);return this}transformDirection(e){for(let o=0,a=this.count;o<a;o++)_vector$6.x=this.getX(o),_vector$6.y=this.getY(o),_vector$6.z=this.getZ(o),_vector$6.transformDirection(e),this.setXYZ(o,_vector$6.x,_vector$6.y,_vector$6.z);return this}setX(e,o){return this.data.array[e*this.data.stride+this.offset]=o,this}setY(e,o){return this.data.array[e*this.data.stride+this.offset+1]=o,this}setZ(e,o){return this.data.array[e*this.data.stride+this.offset+2]=o,this}setW(e,o){return this.data.array[e*this.data.stride+this.offset+3]=o,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,o,a){return e=e*this.data.stride+this.offset,this.data.array[e+0]=o,this.data.array[e+1]=a,this}setXYZ(e,o,a,c){return e=e*this.data.stride+this.offset,this.data.array[e+0]=o,this.data.array[e+1]=a,this.data.array[e+2]=c,this}setXYZW(e,o,a,c,d){return e=e*this.data.stride+this.offset,this.data.array[e+0]=o,this.data.array[e+1]=a,this.data.array[e+2]=c,this.data.array[e+3]=d,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const o=[];for(let a=0;a<this.count;a++){const c=a*this.data.stride+this.offset;for(let d=0;d<this.itemSize;d++)o.push(this.data.array[c+d])}return new BufferAttribute(new this.array.constructor(o),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new InterleavedBufferAttribute(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const o=[];for(let a=0;a<this.count;a++){const c=a*this.data.stride+this.offset;for(let d=0;d<this.itemSize;d++)o.push(this.data.array[c+d])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:o,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}InterleavedBufferAttribute.prototype.isInterleavedBufferAttribute=!0;class SpriteMaterial extends Material{constructor(e){super();this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}SpriteMaterial.prototype.isSpriteMaterial=!0;let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(e){super();if(this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const o=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new InterleavedBuffer(o,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(a,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(a,2,3,!1))}this.geometry=_geometry,this.material=e!==void 0?e:new SpriteMaterial,this.center=new Vector2(.5,.5)}raycast(e,o){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const a=this.material.rotation;let c,d;a!==0&&(d=Math.cos(a),c=Math.sin(a));const _=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,_,_worldScale,c,d),transformVertex(_vB.set(.5,-.5,0),_mvPosition,_,_worldScale,c,d),transformVertex(_vC.set(.5,.5,0),_mvPosition,_,_worldScale,c,d),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let b=e.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(b===null&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,_,_worldScale,c,d),_uvB.set(0,1),b=e.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),b===null))return;const k=e.ray.origin.distanceTo(_intersectPoint);k<e.near||k>e.far||o.push({distance:k,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}Sprite.prototype.isSprite=!0;function transformVertex(s,e,o,a,c,d){_alignedPosition.subVectors(s,o).addScalar(.5).multiply(a),c!==void 0?(_rotatedPosition.x=d*_alignedPosition.x-c*_alignedPosition.y,_rotatedPosition.y=c*_alignedPosition.x+d*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),s.copy(e),s.x+=_rotatedPosition.x,s.y+=_rotatedPosition.y,s.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super();this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const o=e.levels;for(let a=0,c=o.length;a<c;a++){const d=o[a];this.addLevel(d.object.clone(),d.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,o=0){o=Math.abs(o);const a=this.levels;let c;for(c=0;c<a.length&&!(o<a[c].distance);c++);return a.splice(c,0,{distance:o,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const o=this.levels;if(o.length>0){let a,c;for(a=1,c=o.length;a<c&&!(e<o[a].distance);a++);return o[a-1].object}return null}raycast(e,o){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const c=e.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(c).raycast(e,o)}}update(e){const o=this.levels;if(o.length>1){_v1$2.setFromMatrixPosition(e.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const a=_v1$2.distanceTo(_v2$1)/e.zoom;o[0].object.visible=!0;let c,d;for(c=1,d=o.length;c<d&&a>=o[c].distance;c++)o[c-1].object.visible=!1,o[c].object.visible=!0;for(this._currentLevel=c-1;c<d;c++)o[c].object.visible=!1}}toJSON(e){const o=super.toJSON(e);this.autoUpdate===!1&&(o.object.autoUpdate=!1),o.object.levels=[];const a=this.levels;for(let c=0,d=a.length;c<d;c++){const _=a[c];o.object.levels.push({object:_.object.uuid,distance:_.distance})}return o}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector$5=new Vector3,_matrix=new Matrix4;class SkinnedMesh extends Mesh{constructor(e,o){super(e,o);this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,o){this.skeleton=e,o===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),o=this.matrixWorld),this.bindMatrix.copy(o),this.bindMatrixInverse.copy(o).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Vector4,o=this.geometry.attributes.skinWeight;for(let a=0,c=o.count;a<c;a++){e.x=o.getX(a),e.y=o.getY(a),e.z=o.getZ(a),e.w=o.getW(a);const d=1/e.manhattanLength();d!==1/0?e.multiplyScalar(d):e.set(1,0,0,0),o.setXYZW(a,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,o){const a=this.skeleton,c=this.geometry;_skinIndex.fromBufferAttribute(c.attributes.skinIndex,e),_skinWeight.fromBufferAttribute(c.attributes.skinWeight,e),_basePosition.copy(o).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(let d=0;d<4;d++){const _=_skinWeight.getComponent(d);if(_!==0){const b=_skinIndex.getComponent(d);_matrix.multiplyMatrices(a.bones[b].matrixWorld,a.boneInverses[b]),o.addScaledVector(_vector$5.copy(_basePosition).applyMatrix4(_matrix),_)}}return o.applyMatrix4(this.bindMatrixInverse)}}SkinnedMesh.prototype.isSkinnedMesh=!0;class Bone extends Object3D{constructor(){super();this.type="Bone"}}Bone.prototype.isBone=!0;class DataTexture extends Texture{constructor(e=null,o=1,a=1,c,d,_,b,k,j=NearestFilter,et=NearestFilter,nt,tt){super(null,_,b,k,j,et,c,d,nt,tt);this.image={data:e,width:o,height:a},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}DataTexture.prototype.isDataTexture=!0;const _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;class Skeleton{constructor(e=[],o=[]){this.uuid=generateUUID$1(),this.bones=e.slice(0),this.boneInverses=o,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,o=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),o.length===0)this.calculateInverses();else if(e.length!==o.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let a=0,c=this.bones.length;a<c;a++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,o=this.bones.length;e<o;e++){const a=new Matrix4;this.bones[e]&&a.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(a)}}pose(){for(let e=0,o=this.bones.length;e<o;e++){const a=this.bones[e];a&&a.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,o=this.bones.length;e<o;e++){const a=this.bones[e];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}update(){const e=this.bones,o=this.boneInverses,a=this.boneMatrices,c=this.boneTexture;for(let d=0,_=e.length;d<_;d++){const b=e[d]?e[d].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(b,o[d]),_offsetMatrix.toArray(a,d*16)}c!==null&&(c.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=ceilPowerOfTwo(e),e=Math.max(e,4);const o=new Float32Array(e*e*4);o.set(this.boneMatrices);const a=new DataTexture(o,e,e,RGBAFormat,FloatType);return a.needsUpdate=!0,this.boneMatrices=o,this.boneTexture=a,this.boneTextureSize=e,this}getBoneByName(e){for(let o=0,a=this.bones.length;o<a;o++){const c=this.bones[o];if(c.name===e)return c}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,o){this.uuid=e.uuid;for(let a=0,c=e.bones.length;a<c;a++){const d=e.bones[a];let _=o[d];_===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",d),_=new Bone),this.bones.push(_),this.boneInverses.push(new Matrix4().fromArray(e.boneInverses[a]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const o=this.bones,a=this.boneInverses;for(let c=0,d=o.length;c<d;c++){const _=o[c];e.bones.push(_.uuid);const b=a[c];e.boneInverses.push(b.toArray())}return e}}class InstancedBufferAttribute extends BufferAttribute{constructor(e,o,a,c=1){typeof a=="number"&&(c=a,a=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));super(e,o,a);this.meshPerAttribute=c}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}InstancedBufferAttribute.prototype.isInstancedBufferAttribute=!0;const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh;class InstancedMesh extends Mesh{constructor(e,o,a){super(e,o);this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(a*16),16),this.instanceColor=null,this.count=a,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,o){o.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,o){o.fromArray(this.instanceMatrix.array,e*16)}raycast(e,o){const a=this.matrixWorld,c=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(let d=0;d<c;d++){this.getMatrixAt(d,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(a,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(e,_instanceIntersects);for(let _=0,b=_instanceIntersects.length;_<b;_++){const k=_instanceIntersects[_];k.instanceId=d,k.object=this,o.push(k)}_instanceIntersects.length=0}}setColorAt(e,o){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3),3)),o.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,o){o.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}InstancedMesh.prototype.isInstancedMesh=!0;class LineBasicMaterial extends Material{constructor(e){super();this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}LineBasicMaterial.prototype.isLineBasicMaterial=!0;const _start$1=new Vector3,_end$1=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere;class Line extends Object3D{constructor(e=new BufferGeometry,o=new LineBasicMaterial){super();this.type="Line",this.geometry=e,this.material=o,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const o=e.attributes.position,a=[0];for(let c=1,d=o.count;c<d;c++)_start$1.fromBufferAttribute(o,c-1),_end$1.fromBufferAttribute(o,c),a[c]=a[c-1],a[c]+=_start$1.distanceTo(_end$1);e.setAttribute("lineDistance",new Float32BufferAttribute(a,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,o){const a=this.geometry,c=this.matrixWorld,d=e.params.Line.threshold,_=a.drawRange;if(a.boundingSphere===null&&a.computeBoundingSphere(),_sphere$1.copy(a.boundingSphere),_sphere$1.applyMatrix4(c),_sphere$1.radius+=d,e.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(c).invert(),_ray$1.copy(e.ray).applyMatrix4(_inverseMatrix$1);const b=d/((this.scale.x+this.scale.y+this.scale.z)/3),k=b*b,j=new Vector3,et=new Vector3,nt=new Vector3,tt=new Vector3,rt=this.isLineSegments?2:1;if(a.isBufferGeometry){const at=a.index,ut=a.attributes.position;if(at!==null){const st=Math.max(0,_.start),it=Math.min(at.count,_.start+_.count);for(let ft=st,ct=it-1;ft<ct;ft+=rt){const dt=at.getX(ft),mt=at.getX(ft+1);if(j.fromBufferAttribute(ut,dt),et.fromBufferAttribute(ut,mt),_ray$1.distanceSqToSegment(j,et,tt,nt)>k)continue;tt.applyMatrix4(this.matrixWorld);const yt=e.ray.origin.distanceTo(tt);yt<e.near||yt>e.far||o.push({distance:yt,point:nt.clone().applyMatrix4(this.matrixWorld),index:ft,face:null,faceIndex:null,object:this})}}else{const st=Math.max(0,_.start),it=Math.min(ut.count,_.start+_.count);for(let ft=st,ct=it-1;ft<ct;ft+=rt){if(j.fromBufferAttribute(ut,ft),et.fromBufferAttribute(ut,ft+1),_ray$1.distanceSqToSegment(j,et,tt,nt)>k)continue;tt.applyMatrix4(this.matrixWorld);const mt=e.ray.origin.distanceTo(tt);mt<e.near||mt>e.far||o.push({distance:mt,point:nt.clone().applyMatrix4(this.matrixWorld),index:ft,face:null,faceIndex:null,object:this})}}}else a.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const o=e.morphAttributes,a=Object.keys(o);if(a.length>0){const c=o[a[0]];if(c!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let d=0,_=c.length;d<_;d++){const b=c[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=d}}}}else{const o=e.morphTargets;o!==void 0&&o.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Line.prototype.isLine=!0;const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(e,o){super(e,o);this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const o=e.attributes.position,a=[];for(let c=0,d=o.count;c<d;c+=2)_start.fromBufferAttribute(o,c),_end.fromBufferAttribute(o,c+1),a[c]=c===0?0:a[c-1],a[c+1]=a[c]+_start.distanceTo(_end);e.setAttribute("lineDistance",new Float32BufferAttribute(a,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}LineSegments.prototype.isLineSegments=!0;class LineLoop extends Line{constructor(e,o){super(e,o);this.type="LineLoop"}}LineLoop.prototype.isLineLoop=!0;class PointsMaterial extends Material{constructor(e){super();this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}PointsMaterial.prototype.isPointsMaterial=!0;const _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(e=new BufferGeometry,o=new PointsMaterial){super();this.type="Points",this.geometry=e,this.material=o,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,o){const a=this.geometry,c=this.matrixWorld,d=e.params.Points.threshold,_=a.drawRange;if(a.boundingSphere===null&&a.computeBoundingSphere(),_sphere.copy(a.boundingSphere),_sphere.applyMatrix4(c),_sphere.radius+=d,e.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(c).invert(),_ray.copy(e.ray).applyMatrix4(_inverseMatrix);const b=d/((this.scale.x+this.scale.y+this.scale.z)/3),k=b*b;if(a.isBufferGeometry){const j=a.index,nt=a.attributes.position;if(j!==null){const tt=Math.max(0,_.start),rt=Math.min(j.count,_.start+_.count);for(let at=tt,lt=rt;at<lt;at++){const ut=j.getX(at);_position$2.fromBufferAttribute(nt,ut),testPoint(_position$2,ut,k,c,e,o,this)}}else{const tt=Math.max(0,_.start),rt=Math.min(nt.count,_.start+_.count);for(let at=tt,lt=rt;at<lt;at++)_position$2.fromBufferAttribute(nt,at),testPoint(_position$2,at,k,c,e,o,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const o=e.morphAttributes,a=Object.keys(o);if(a.length>0){const c=o[a[0]];if(c!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let d=0,_=c.length;d<_;d++){const b=c[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=d}}}}else{const o=e.morphTargets;o!==void 0&&o.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Points.prototype.isPoints=!0;function testPoint(s,e,o,a,c,d,_){const b=_ray.distanceSqToPoint(s);if(b<o){const k=new Vector3;_ray.closestPointToPoint(s,k),k.applyMatrix4(a);const j=c.ray.origin.distanceTo(k);if(j<c.near||j>c.far)return;d.push({distance:j,distanceToRay:Math.sqrt(b),point:k,index:e,face:null,object:_})}}class VideoTexture extends Texture{constructor(e,o,a,c,d,_,b,k,j){super(e,o,a,c,d,_,b,k,j);this.minFilter=_!==void 0?_:LinearFilter,this.magFilter=d!==void 0?d:LinearFilter,this.generateMipmaps=!1;const et=this;function nt(){et.needsUpdate=!0,e.requestVideoFrameCallback(nt)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(nt)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}VideoTexture.prototype.isVideoTexture=!0;class FramebufferTexture extends Texture{constructor(e,o,a){super({width:e,height:o});this.format=a,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}FramebufferTexture.prototype.isFramebufferTexture=!0;class CompressedTexture extends Texture{constructor(e,o,a,c,d,_,b,k,j,et,nt,tt){super(null,_,b,k,j,et,c,d,nt,tt);this.image={width:o,height:a},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}CompressedTexture.prototype.isCompressedTexture=!0;class CanvasTexture extends Texture{constructor(e,o,a,c,d,_,b,k,j){super(e,o,a,c,d,_,b,k,j);this.needsUpdate=!0}}CanvasTexture.prototype.isCanvasTexture=!0;class CircleGeometry extends BufferGeometry{constructor(e=1,o=8,a=0,c=Math.PI*2){super();this.type="CircleGeometry",this.parameters={radius:e,segments:o,thetaStart:a,thetaLength:c},o=Math.max(3,o);const d=[],_=[],b=[],k=[],j=new Vector3,et=new Vector2;_.push(0,0,0),b.push(0,0,1),k.push(.5,.5);for(let nt=0,tt=3;nt<=o;nt++,tt+=3){const rt=a+nt/o*c;j.x=e*Math.cos(rt),j.y=e*Math.sin(rt),_.push(j.x,j.y,j.z),b.push(0,0,1),et.x=(_[tt]/e+1)/2,et.y=(_[tt+1]/e+1)/2,k.push(et.x,et.y)}for(let nt=1;nt<=o;nt++)d.push(nt,nt+1,0);this.setIndex(d),this.setAttribute("position",new Float32BufferAttribute(_,3)),this.setAttribute("normal",new Float32BufferAttribute(b,3)),this.setAttribute("uv",new Float32BufferAttribute(k,2))}static fromJSON(e){return new CircleGeometry(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(e=1,o=1,a=1,c=8,d=1,_=!1,b=0,k=Math.PI*2){super();this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:o,height:a,radialSegments:c,heightSegments:d,openEnded:_,thetaStart:b,thetaLength:k};const j=this;c=Math.floor(c),d=Math.floor(d);const et=[],nt=[],tt=[],rt=[];let at=0;const lt=[],ut=a/2;let st=0;it(),_===!1&&(e>0&&ft(!0),o>0&&ft(!1)),this.setIndex(et),this.setAttribute("position",new Float32BufferAttribute(nt,3)),this.setAttribute("normal",new Float32BufferAttribute(tt,3)),this.setAttribute("uv",new Float32BufferAttribute(rt,2));function it(){const ct=new Vector3,dt=new Vector3;let mt=0;const gt=(o-e)/a;for(let yt=0;yt<=d;yt++){const St=[],Et=yt/d,vt=Et*(o-e)+e;for(let _t=0;_t<=c;_t++){const bt=_t/c,At=bt*k+b,Rt=Math.sin(At),Pt=Math.cos(At);dt.x=vt*Rt,dt.y=-Et*a+ut,dt.z=vt*Pt,nt.push(dt.x,dt.y,dt.z),ct.set(Rt,gt,Pt).normalize(),tt.push(ct.x,ct.y,ct.z),rt.push(bt,1-Et),St.push(at++)}lt.push(St)}for(let yt=0;yt<c;yt++)for(let St=0;St<d;St++){const Et=lt[St][yt],vt=lt[St+1][yt],_t=lt[St+1][yt+1],bt=lt[St][yt+1];et.push(Et,vt,bt),et.push(vt,_t,bt),mt+=6}j.addGroup(st,mt,0),st+=mt}function ft(ct){const dt=at,mt=new Vector2,gt=new Vector3;let yt=0;const St=ct===!0?e:o,Et=ct===!0?1:-1;for(let _t=1;_t<=c;_t++)nt.push(0,ut*Et,0),tt.push(0,Et,0),rt.push(.5,.5),at++;const vt=at;for(let _t=0;_t<=c;_t++){const At=_t/c*k+b,Rt=Math.cos(At),Pt=Math.sin(At);gt.x=St*Pt,gt.y=ut*Et,gt.z=St*Rt,nt.push(gt.x,gt.y,gt.z),tt.push(0,Et,0),mt.x=Rt*.5+.5,mt.y=Pt*.5*Et+.5,rt.push(mt.x,mt.y),at++}for(let _t=0;_t<c;_t++){const bt=dt+_t,At=vt+_t;ct===!0?et.push(At,At+1,bt):et.push(At+1,At,bt),yt+=3}j.addGroup(st,yt,ct===!0?1:2),st+=yt}}static fromJSON(e){return new CylinderGeometry(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(e=1,o=1,a=8,c=1,d=!1,_=0,b=Math.PI*2){super(0,e,o,a,c,d,_,b);this.type="ConeGeometry",this.parameters={radius:e,height:o,radialSegments:a,heightSegments:c,openEnded:d,thetaStart:_,thetaLength:b}}static fromJSON(e){return new ConeGeometry(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(e=[],o=[],a=1,c=0){super();this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:o,radius:a,detail:c};const d=[],_=[];b(c),j(a),et(),this.setAttribute("position",new Float32BufferAttribute(d,3)),this.setAttribute("normal",new Float32BufferAttribute(d.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(_,2)),c===0?this.computeVertexNormals():this.normalizeNormals();function b(it){const ft=new Vector3,ct=new Vector3,dt=new Vector3;for(let mt=0;mt<o.length;mt+=3)rt(o[mt+0],ft),rt(o[mt+1],ct),rt(o[mt+2],dt),k(ft,ct,dt,it)}function k(it,ft,ct,dt){const mt=dt+1,gt=[];for(let yt=0;yt<=mt;yt++){gt[yt]=[];const St=it.clone().lerp(ct,yt/mt),Et=ft.clone().lerp(ct,yt/mt),vt=mt-yt;for(let _t=0;_t<=vt;_t++)_t===0&&yt===mt?gt[yt][_t]=St:gt[yt][_t]=St.clone().lerp(Et,_t/vt)}for(let yt=0;yt<mt;yt++)for(let St=0;St<2*(mt-yt)-1;St++){const Et=Math.floor(St/2);St%2===0?(tt(gt[yt][Et+1]),tt(gt[yt+1][Et]),tt(gt[yt][Et])):(tt(gt[yt][Et+1]),tt(gt[yt+1][Et+1]),tt(gt[yt+1][Et]))}}function j(it){const ft=new Vector3;for(let ct=0;ct<d.length;ct+=3)ft.x=d[ct+0],ft.y=d[ct+1],ft.z=d[ct+2],ft.normalize().multiplyScalar(it),d[ct+0]=ft.x,d[ct+1]=ft.y,d[ct+2]=ft.z}function et(){const it=new Vector3;for(let ft=0;ft<d.length;ft+=3){it.x=d[ft+0],it.y=d[ft+1],it.z=d[ft+2];const ct=ut(it)/2/Math.PI+.5,dt=st(it)/Math.PI+.5;_.push(ct,1-dt)}at(),nt()}function nt(){for(let it=0;it<_.length;it+=6){const ft=_[it+0],ct=_[it+2],dt=_[it+4],mt=Math.max(ft,ct,dt),gt=Math.min(ft,ct,dt);mt>.9&&gt<.1&&(ft<.2&&(_[it+0]+=1),ct<.2&&(_[it+2]+=1),dt<.2&&(_[it+4]+=1))}}function tt(it){d.push(it.x,it.y,it.z)}function rt(it,ft){const ct=it*3;ft.x=e[ct+0],ft.y=e[ct+1],ft.z=e[ct+2]}function at(){const it=new Vector3,ft=new Vector3,ct=new Vector3,dt=new Vector3,mt=new Vector2,gt=new Vector2,yt=new Vector2;for(let St=0,Et=0;St<d.length;St+=9,Et+=6){it.set(d[St+0],d[St+1],d[St+2]),ft.set(d[St+3],d[St+4],d[St+5]),ct.set(d[St+6],d[St+7],d[St+8]),mt.set(_[Et+0],_[Et+1]),gt.set(_[Et+2],_[Et+3]),yt.set(_[Et+4],_[Et+5]),dt.copy(it).add(ft).add(ct).divideScalar(3);const vt=ut(dt);lt(mt,Et+0,it,vt),lt(gt,Et+2,ft,vt),lt(yt,Et+4,ct,vt)}}function lt(it,ft,ct,dt){dt<0&&it.x===1&&(_[ft]=it.x-1),ct.x===0&&ct.z===0&&(_[ft]=dt/2/Math.PI+.5)}function ut(it){return Math.atan2(it.z,-it.x)}function st(it){return Math.atan2(-it.y,Math.sqrt(it.x*it.x+it.z*it.z))}}static fromJSON(e){return new PolyhedronGeometry(e.vertices,e.indices,e.radius,e.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(e=1,o=0){const a=(1+Math.sqrt(5))/2,c=1/a,d=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-c,-a,0,-c,a,0,c,-a,0,c,a,-c,-a,0,-c,a,0,c,-a,0,c,a,0,-a,0,-c,a,0,-c,-a,0,c,a,0,c],_=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(d,_,e,o);this.type="DodecahedronGeometry",this.parameters={radius:e,detail:o}}static fromJSON(e){return new DodecahedronGeometry(e.radius,e.detail)}}const _v0=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(e=null,o=1){super();if(this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:o},e!==null){const c=Math.pow(10,4),d=Math.cos(DEG2RAD*o),_=e.getIndex(),b=e.getAttribute("position"),k=_?_.count:b.count,j=[0,0,0],et=["a","b","c"],nt=new Array(3),tt={},rt=[];for(let at=0;at<k;at+=3){_?(j[0]=_.getX(at),j[1]=_.getX(at+1),j[2]=_.getX(at+2)):(j[0]=at,j[1]=at+1,j[2]=at+2);const{a:lt,b:ut,c:st}=_triangle;if(lt.fromBufferAttribute(b,j[0]),ut.fromBufferAttribute(b,j[1]),st.fromBufferAttribute(b,j[2]),_triangle.getNormal(_normal),nt[0]=`${Math.round(lt.x*c)},${Math.round(lt.y*c)},${Math.round(lt.z*c)}`,nt[1]=`${Math.round(ut.x*c)},${Math.round(ut.y*c)},${Math.round(ut.z*c)}`,nt[2]=`${Math.round(st.x*c)},${Math.round(st.y*c)},${Math.round(st.z*c)}`,!(nt[0]===nt[1]||nt[1]===nt[2]||nt[2]===nt[0]))for(let it=0;it<3;it++){const ft=(it+1)%3,ct=nt[it],dt=nt[ft],mt=_triangle[et[it]],gt=_triangle[et[ft]],yt=`${ct}_${dt}`,St=`${dt}_${ct}`;St in tt&&tt[St]?(_normal.dot(tt[St].normal)<=d&&(rt.push(mt.x,mt.y,mt.z),rt.push(gt.x,gt.y,gt.z)),tt[St]=null):yt in tt||(tt[yt]={index0:j[it],index1:j[ft],normal:_normal.clone()})}}for(const at in tt)if(tt[at]){const{index0:lt,index1:ut}=tt[at];_v0.fromBufferAttribute(b,lt),_v1$1.fromBufferAttribute(b,ut),rt.push(_v0.x,_v0.y,_v0.z),rt.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(rt,3))}}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,o){const a=this.getUtoTmapping(e);return this.getPoint(a,o)}getPoints(e=5){const o=[];for(let a=0;a<=e;a++)o.push(this.getPoint(a/e));return o}getSpacedPoints(e=5){const o=[];for(let a=0;a<=e;a++)o.push(this.getPointAt(a/e));return o}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const o=[];let a,c=this.getPoint(0),d=0;o.push(0);for(let _=1;_<=e;_++)a=this.getPoint(_/e),d+=a.distanceTo(c),o.push(d),c=a;return this.cacheArcLengths=o,o}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,o){const a=this.getLengths();let c=0;const d=a.length;let _;o?_=o:_=e*a[d-1];let b=0,k=d-1,j;for(;b<=k;)if(c=Math.floor(b+(k-b)/2),j=a[c]-_,j<0)b=c+1;else if(j>0)k=c-1;else{k=c;break}if(c=k,a[c]===_)return c/(d-1);const et=a[c],tt=a[c+1]-et,rt=(_-et)/tt;return(c+rt)/(d-1)}getTangent(e,o){let c=e-1e-4,d=e+1e-4;c<0&&(c=0),d>1&&(d=1);const _=this.getPoint(c),b=this.getPoint(d),k=o||(_.isVector2?new Vector2:new Vector3);return k.copy(b).sub(_).normalize(),k}getTangentAt(e,o){const a=this.getUtoTmapping(e);return this.getTangent(a,o)}computeFrenetFrames(e,o){const a=new Vector3,c=[],d=[],_=[],b=new Vector3,k=new Matrix4;for(let rt=0;rt<=e;rt++){const at=rt/e;c[rt]=this.getTangentAt(at,new Vector3)}d[0]=new Vector3,_[0]=new Vector3;let j=Number.MAX_VALUE;const et=Math.abs(c[0].x),nt=Math.abs(c[0].y),tt=Math.abs(c[0].z);et<=j&&(j=et,a.set(1,0,0)),nt<=j&&(j=nt,a.set(0,1,0)),tt<=j&&a.set(0,0,1),b.crossVectors(c[0],a).normalize(),d[0].crossVectors(c[0],b),_[0].crossVectors(c[0],d[0]);for(let rt=1;rt<=e;rt++){if(d[rt]=d[rt-1].clone(),_[rt]=_[rt-1].clone(),b.crossVectors(c[rt-1],c[rt]),b.length()>Number.EPSILON){b.normalize();const at=Math.acos(clamp(c[rt-1].dot(c[rt]),-1,1));d[rt].applyMatrix4(k.makeRotationAxis(b,at))}_[rt].crossVectors(c[rt],d[rt])}if(o===!0){let rt=Math.acos(clamp(d[0].dot(d[e]),-1,1));rt/=e,c[0].dot(b.crossVectors(d[0],d[e]))>0&&(rt=-rt);for(let at=1;at<=e;at++)d[at].applyMatrix4(k.makeRotationAxis(c[at],rt*at)),_[at].crossVectors(c[at],d[at])}return{tangents:c,normals:d,binormals:_}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(e=0,o=0,a=1,c=1,d=0,_=Math.PI*2,b=!1,k=0){super();this.type="EllipseCurve",this.aX=e,this.aY=o,this.xRadius=a,this.yRadius=c,this.aStartAngle=d,this.aEndAngle=_,this.aClockwise=b,this.aRotation=k}getPoint(e,o){const a=o||new Vector2,c=Math.PI*2;let d=this.aEndAngle-this.aStartAngle;const _=Math.abs(d)<Number.EPSILON;for(;d<0;)d+=c;for(;d>c;)d-=c;d<Number.EPSILON&&(_?d=0:d=c),this.aClockwise===!0&&!_&&(d===c?d=-c:d=d-c);const b=this.aStartAngle+e*d;let k=this.aX+this.xRadius*Math.cos(b),j=this.aY+this.yRadius*Math.sin(b);if(this.aRotation!==0){const et=Math.cos(this.aRotation),nt=Math.sin(this.aRotation),tt=k-this.aX,rt=j-this.aY;k=tt*et-rt*nt+this.aX,j=tt*nt+rt*et+this.aY}return a.set(k,j)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}EllipseCurve.prototype.isEllipseCurve=!0;class ArcCurve extends EllipseCurve{constructor(e,o,a,c,d,_){super(e,o,a,a,c,d,_);this.type="ArcCurve"}}ArcCurve.prototype.isArcCurve=!0;function CubicPoly(){let s=0,e=0,o=0,a=0;function c(d,_,b,k){s=d,e=b,o=-3*d+3*_-2*b-k,a=2*d-2*_+b+k}return{initCatmullRom:function(d,_,b,k,j){c(_,b,j*(b-d),j*(k-_))},initNonuniformCatmullRom:function(d,_,b,k,j,et,nt){let tt=(_-d)/j-(b-d)/(j+et)+(b-_)/et,rt=(b-_)/et-(k-_)/(et+nt)+(k-b)/nt;tt*=et,rt*=et,c(_,b,tt,rt)},calc:function(d){const _=d*d,b=_*d;return s+e*d+o*_+a*b}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(e=[],o=!1,a="centripetal",c=.5){super();this.type="CatmullRomCurve3",this.points=e,this.closed=o,this.curveType=a,this.tension=c}getPoint(e,o=new Vector3){const a=o,c=this.points,d=c.length,_=(d-(this.closed?0:1))*e;let b=Math.floor(_),k=_-b;this.closed?b+=b>0?0:(Math.floor(Math.abs(b)/d)+1)*d:k===0&&b===d-1&&(b=d-2,k=1);let j,et;this.closed||b>0?j=c[(b-1)%d]:(tmp.subVectors(c[0],c[1]).add(c[0]),j=tmp);const nt=c[b%d],tt=c[(b+1)%d];if(this.closed||b+2<d?et=c[(b+2)%d]:(tmp.subVectors(c[d-1],c[d-2]).add(c[d-1]),et=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const rt=this.curveType==="chordal"?.5:.25;let at=Math.pow(j.distanceToSquared(nt),rt),lt=Math.pow(nt.distanceToSquared(tt),rt),ut=Math.pow(tt.distanceToSquared(et),rt);lt<1e-4&&(lt=1),at<1e-4&&(at=lt),ut<1e-4&&(ut=lt),px.initNonuniformCatmullRom(j.x,nt.x,tt.x,et.x,at,lt,ut),py.initNonuniformCatmullRom(j.y,nt.y,tt.y,et.y,at,lt,ut),pz.initNonuniformCatmullRom(j.z,nt.z,tt.z,et.z,at,lt,ut)}else this.curveType==="catmullrom"&&(px.initCatmullRom(j.x,nt.x,tt.x,et.x,this.tension),py.initCatmullRom(j.y,nt.y,tt.y,et.y,this.tension),pz.initCatmullRom(j.z,nt.z,tt.z,et.z,this.tension));return a.set(px.calc(k),py.calc(k),pz.calc(k)),a}copy(e){super.copy(e),this.points=[];for(let o=0,a=e.points.length;o<a;o++){const c=e.points[o];this.points.push(c.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let o=0,a=this.points.length;o<a;o++){const c=this.points[o];e.points.push(c.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let o=0,a=e.points.length;o<a;o++){const c=e.points[o];this.points.push(new Vector3().fromArray(c))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;function CatmullRom(s,e,o,a,c){const d=(a-e)*.5,_=(c-o)*.5,b=s*s,k=s*b;return(2*o-2*a+d+_)*k+(-3*o+3*a-2*d-_)*b+d*s+o}function QuadraticBezierP0(s,e){const o=1-s;return o*o*e}function QuadraticBezierP1(s,e){return 2*(1-s)*s*e}function QuadraticBezierP2(s,e){return s*s*e}function QuadraticBezier(s,e,o,a){return QuadraticBezierP0(s,e)+QuadraticBezierP1(s,o)+QuadraticBezierP2(s,a)}function CubicBezierP0(s,e){const o=1-s;return o*o*o*e}function CubicBezierP1(s,e){const o=1-s;return 3*o*o*s*e}function CubicBezierP2(s,e){return 3*(1-s)*s*s*e}function CubicBezierP3(s,e){return s*s*s*e}function CubicBezier(s,e,o,a,c){return CubicBezierP0(s,e)+CubicBezierP1(s,o)+CubicBezierP2(s,a)+CubicBezierP3(s,c)}class CubicBezierCurve extends Curve{constructor(e=new Vector2,o=new Vector2,a=new Vector2,c=new Vector2){super();this.type="CubicBezierCurve",this.v0=e,this.v1=o,this.v2=a,this.v3=c}getPoint(e,o=new Vector2){const a=o,c=this.v0,d=this.v1,_=this.v2,b=this.v3;return a.set(CubicBezier(e,c.x,d.x,_.x,b.x),CubicBezier(e,c.y,d.y,_.y,b.y)),a}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}CubicBezierCurve.prototype.isCubicBezierCurve=!0;class CubicBezierCurve3 extends Curve{constructor(e=new Vector3,o=new Vector3,a=new Vector3,c=new Vector3){super();this.type="CubicBezierCurve3",this.v0=e,this.v1=o,this.v2=a,this.v3=c}getPoint(e,o=new Vector3){const a=o,c=this.v0,d=this.v1,_=this.v2,b=this.v3;return a.set(CubicBezier(e,c.x,d.x,_.x,b.x),CubicBezier(e,c.y,d.y,_.y,b.y),CubicBezier(e,c.z,d.z,_.z,b.z)),a}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;class LineCurve extends Curve{constructor(e=new Vector2,o=new Vector2){super();this.type="LineCurve",this.v1=e,this.v2=o}getPoint(e,o=new Vector2){const a=o;return e===1?a.copy(this.v2):(a.copy(this.v2).sub(this.v1),a.multiplyScalar(e).add(this.v1)),a}getPointAt(e,o){return this.getPoint(e,o)}getTangent(e,o){const a=o||new Vector2;return a.copy(this.v2).sub(this.v1).normalize(),a}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}LineCurve.prototype.isLineCurve=!0;class LineCurve3 extends Curve{constructor(e=new Vector3,o=new Vector3){super();this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=o}getPoint(e,o=new Vector3){const a=o;return e===1?a.copy(this.v2):(a.copy(this.v2).sub(this.v1),a.multiplyScalar(e).add(this.v1)),a}getPointAt(e,o){return this.getPoint(e,o)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class QuadraticBezierCurve extends Curve{constructor(e=new Vector2,o=new Vector2,a=new Vector2){super();this.type="QuadraticBezierCurve",this.v0=e,this.v1=o,this.v2=a}getPoint(e,o=new Vector2){const a=o,c=this.v0,d=this.v1,_=this.v2;return a.set(QuadraticBezier(e,c.x,d.x,_.x),QuadraticBezier(e,c.y,d.y,_.y)),a}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;class QuadraticBezierCurve3 extends Curve{constructor(e=new Vector3,o=new Vector3,a=new Vector3){super();this.type="QuadraticBezierCurve3",this.v0=e,this.v1=o,this.v2=a}getPoint(e,o=new Vector3){const a=o,c=this.v0,d=this.v1,_=this.v2;return a.set(QuadraticBezier(e,c.x,d.x,_.x),QuadraticBezier(e,c.y,d.y,_.y),QuadraticBezier(e,c.z,d.z,_.z)),a}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;class SplineCurve extends Curve{constructor(e=[]){super();this.type="SplineCurve",this.points=e}getPoint(e,o=new Vector2){const a=o,c=this.points,d=(c.length-1)*e,_=Math.floor(d),b=d-_,k=c[_===0?_:_-1],j=c[_],et=c[_>c.length-2?c.length-1:_+1],nt=c[_>c.length-3?c.length-1:_+2];return a.set(CatmullRom(b,k.x,j.x,et.x,nt.x),CatmullRom(b,k.y,j.y,et.y,nt.y)),a}copy(e){super.copy(e),this.points=[];for(let o=0,a=e.points.length;o<a;o++){const c=e.points[o];this.points.push(c.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let o=0,a=this.points.length;o<a;o++){const c=this.points[o];e.points.push(c.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let o=0,a=e.points.length;o<a;o++){const c=e.points[o];this.points.push(new Vector2().fromArray(c))}return this}}SplineCurve.prototype.isSplineCurve=!0;var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super();this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),o=this.curves[this.curves.length-1].getPoint(1);e.equals(o)||this.curves.push(new LineCurve(o,e))}getPoint(e,o){const a=e*this.getLength(),c=this.getCurveLengths();let d=0;for(;d<c.length;){if(c[d]>=a){const _=c[d]-a,b=this.curves[d],k=b.getLength(),j=k===0?0:1-_/k;return b.getPointAt(j,o)}d++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let o=0;for(let a=0,c=this.curves.length;a<c;a++)o+=this.curves[a].getLength(),e.push(o);return this.cacheLengths=e,e}getSpacedPoints(e=40){const o=[];for(let a=0;a<=e;a++)o.push(this.getPoint(a/e));return this.autoClose&&o.push(o[0]),o}getPoints(e=12){const o=[];let a;for(let c=0,d=this.curves;c<d.length;c++){const _=d[c],b=_.isEllipseCurve?e*2:_.isLineCurve||_.isLineCurve3?1:_.isSplineCurve?e*_.points.length:e,k=_.getPoints(b);for(let j=0;j<k.length;j++){const et=k[j];a&&a.equals(et)||(o.push(et),a=et)}}return this.autoClose&&o.length>1&&!o[o.length-1].equals(o[0])&&o.push(o[0]),o}copy(e){super.copy(e),this.curves=[];for(let o=0,a=e.curves.length;o<a;o++){const c=e.curves[o];this.curves.push(c.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let o=0,a=this.curves.length;o<a;o++){const c=this.curves[o];e.curves.push(c.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let o=0,a=e.curves.length;o<a;o++){const c=e.curves[o];this.curves.push(new Curves[c.type]().fromJSON(c))}return this}}class Path extends CurvePath{constructor(e){super();this.type="Path",this.currentPoint=new Vector2,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let o=1,a=e.length;o<a;o++)this.lineTo(e[o].x,e[o].y);return this}moveTo(e,o){return this.currentPoint.set(e,o),this}lineTo(e,o){const a=new LineCurve(this.currentPoint.clone(),new Vector2(e,o));return this.curves.push(a),this.currentPoint.set(e,o),this}quadraticCurveTo(e,o,a,c){const d=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(e,o),new Vector2(a,c));return this.curves.push(d),this.currentPoint.set(a,c),this}bezierCurveTo(e,o,a,c,d,_){const b=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(e,o),new Vector2(a,c),new Vector2(d,_));return this.curves.push(b),this.currentPoint.set(d,_),this}splineThru(e){const o=[this.currentPoint.clone()].concat(e),a=new SplineCurve(o);return this.curves.push(a),this.currentPoint.copy(e[e.length-1]),this}arc(e,o,a,c,d,_){const b=this.currentPoint.x,k=this.currentPoint.y;return this.absarc(e+b,o+k,a,c,d,_),this}absarc(e,o,a,c,d,_){return this.absellipse(e,o,a,a,c,d,_),this}ellipse(e,o,a,c,d,_,b,k){const j=this.currentPoint.x,et=this.currentPoint.y;return this.absellipse(e+j,o+et,a,c,d,_,b,k),this}absellipse(e,o,a,c,d,_,b,k){const j=new EllipseCurve(e,o,a,c,d,_,b,k);if(this.curves.length>0){const nt=j.getPoint(0);nt.equals(this.currentPoint)||this.lineTo(nt.x,nt.y)}this.curves.push(j);const et=j.getPoint(1);return this.currentPoint.copy(et),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Shape extends Path{constructor(e){super(e);this.uuid=generateUUID$1(),this.type="Shape",this.holes=[]}getPointsHoles(e){const o=[];for(let a=0,c=this.holes.length;a<c;a++)o[a]=this.holes[a].getPoints(e);return o}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let o=0,a=e.holes.length;o<a;o++){const c=e.holes[o];this.holes.push(c.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let o=0,a=this.holes.length;o<a;o++){const c=this.holes[o];e.holes.push(c.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let o=0,a=e.holes.length;o<a;o++){const c=e.holes[o];this.holes.push(new Path().fromJSON(c))}return this}}const Earcut={triangulate:function(s,e,o=2){const a=e&&e.length,c=a?e[0]*o:s.length;let d=linkedList(s,0,c,o,!0);const _=[];if(!d||d.next===d.prev)return _;let b,k,j,et,nt,tt,rt;if(a&&(d=eliminateHoles(s,e,d,o)),s.length>80*o){b=j=s[0],k=et=s[1];for(let at=o;at<c;at+=o)nt=s[at],tt=s[at+1],nt<b&&(b=nt),tt<k&&(k=tt),nt>j&&(j=nt),tt>et&&(et=tt);rt=Math.max(j-b,et-k),rt=rt!==0?1/rt:0}return earcutLinked(d,_,o,b,k,rt),_}};function linkedList(s,e,o,a,c){let d,_;if(c===signedArea(s,e,o,a)>0)for(d=e;d<o;d+=a)_=insertNode(d,s[d],s[d+1],_);else for(d=o-a;d>=e;d-=a)_=insertNode(d,s[d],s[d+1],_);return _&&equals(_,_.next)&&(removeNode(_),_=_.next),_}function filterPoints(s,e){if(!s)return s;e||(e=s);let o=s,a;do if(a=!1,!o.steiner&&(equals(o,o.next)||area(o.prev,o,o.next)===0)){if(removeNode(o),o=e=o.prev,o===o.next)break;a=!0}else o=o.next;while(a||o!==e);return e}function earcutLinked(s,e,o,a,c,d,_){if(!s)return;!_&&d&&indexCurve(s,a,c,d);let b=s,k,j;for(;s.prev!==s.next;){if(k=s.prev,j=s.next,d?isEarHashed(s,a,c,d):isEar(s)){e.push(k.i/o),e.push(s.i/o),e.push(j.i/o),removeNode(s),s=j.next,b=j.next;continue}if(s=j,s===b){_?_===1?(s=cureLocalIntersections(filterPoints(s),e,o),earcutLinked(s,e,o,a,c,d,2)):_===2&&splitEarcut(s,e,o,a,c,d):earcutLinked(filterPoints(s),e,o,a,c,d,1);break}}}function isEar(s){const e=s.prev,o=s,a=s.next;if(area(e,o,a)>=0)return!1;let c=s.next.next;for(;c!==s.prev;){if(pointInTriangle(e.x,e.y,o.x,o.y,a.x,a.y,c.x,c.y)&&area(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function isEarHashed(s,e,o,a){const c=s.prev,d=s,_=s.next;if(area(c,d,_)>=0)return!1;const b=c.x<d.x?c.x<_.x?c.x:_.x:d.x<_.x?d.x:_.x,k=c.y<d.y?c.y<_.y?c.y:_.y:d.y<_.y?d.y:_.y,j=c.x>d.x?c.x>_.x?c.x:_.x:d.x>_.x?d.x:_.x,et=c.y>d.y?c.y>_.y?c.y:_.y:d.y>_.y?d.y:_.y,nt=zOrder(b,k,e,o,a),tt=zOrder(j,et,e,o,a);let rt=s.prevZ,at=s.nextZ;for(;rt&&rt.z>=nt&&at&&at.z<=tt;){if(rt!==s.prev&&rt!==s.next&&pointInTriangle(c.x,c.y,d.x,d.y,_.x,_.y,rt.x,rt.y)&&area(rt.prev,rt,rt.next)>=0||(rt=rt.prevZ,at!==s.prev&&at!==s.next&&pointInTriangle(c.x,c.y,d.x,d.y,_.x,_.y,at.x,at.y)&&area(at.prev,at,at.next)>=0))return!1;at=at.nextZ}for(;rt&&rt.z>=nt;){if(rt!==s.prev&&rt!==s.next&&pointInTriangle(c.x,c.y,d.x,d.y,_.x,_.y,rt.x,rt.y)&&area(rt.prev,rt,rt.next)>=0)return!1;rt=rt.prevZ}for(;at&&at.z<=tt;){if(at!==s.prev&&at!==s.next&&pointInTriangle(c.x,c.y,d.x,d.y,_.x,_.y,at.x,at.y)&&area(at.prev,at,at.next)>=0)return!1;at=at.nextZ}return!0}function cureLocalIntersections(s,e,o){let a=s;do{const c=a.prev,d=a.next.next;!equals(c,d)&&intersects(c,a,a.next,d)&&locallyInside(c,d)&&locallyInside(d,c)&&(e.push(c.i/o),e.push(a.i/o),e.push(d.i/o),removeNode(a),removeNode(a.next),a=s=d),a=a.next}while(a!==s);return filterPoints(a)}function splitEarcut(s,e,o,a,c,d){let _=s;do{let b=_.next.next;for(;b!==_.prev;){if(_.i!==b.i&&isValidDiagonal(_,b)){let k=splitPolygon(_,b);_=filterPoints(_,_.next),k=filterPoints(k,k.next),earcutLinked(_,e,o,a,c,d),earcutLinked(k,e,o,a,c,d);return}b=b.next}_=_.next}while(_!==s)}function eliminateHoles(s,e,o,a){const c=[];let d,_,b,k,j;for(d=0,_=e.length;d<_;d++)b=e[d]*a,k=d<_-1?e[d+1]*a:s.length,j=linkedList(s,b,k,a,!1),j===j.next&&(j.steiner=!0),c.push(getLeftmost(j));for(c.sort(compareX),d=0;d<c.length;d++)eliminateHole(c[d],o),o=filterPoints(o,o.next);return o}function compareX(s,e){return s.x-e.x}function eliminateHole(s,e){if(e=findHoleBridge(s,e),e){const o=splitPolygon(e,s);filterPoints(e,e.next),filterPoints(o,o.next)}}function findHoleBridge(s,e){let o=e;const a=s.x,c=s.y;let d=-1/0,_;do{if(c<=o.y&&c>=o.next.y&&o.next.y!==o.y){const tt=o.x+(c-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(tt<=a&&tt>d){if(d=tt,tt===a){if(c===o.y)return o;if(c===o.next.y)return o.next}_=o.x<o.next.x?o:o.next}}o=o.next}while(o!==e);if(!_)return null;if(a===d)return _;const b=_,k=_.x,j=_.y;let et=1/0,nt;o=_;do a>=o.x&&o.x>=k&&a!==o.x&&pointInTriangle(c<j?a:d,c,k,j,c<j?d:a,c,o.x,o.y)&&(nt=Math.abs(c-o.y)/(a-o.x),locallyInside(o,s)&&(nt<et||nt===et&&(o.x>_.x||o.x===_.x&&sectorContainsSector(_,o)))&&(_=o,et=nt)),o=o.next;while(o!==b);return _}function sectorContainsSector(s,e){return area(s.prev,s,e.prev)<0&&area(e.next,s,s.next)<0}function indexCurve(s,e,o,a){let c=s;do c.z===null&&(c.z=zOrder(c.x,c.y,e,o,a)),c.prevZ=c.prev,c.nextZ=c.next,c=c.next;while(c!==s);c.prevZ.nextZ=null,c.prevZ=null,sortLinked(c)}function sortLinked(s){let e,o,a,c,d,_,b,k,j=1;do{for(o=s,s=null,d=null,_=0;o;){for(_++,a=o,b=0,e=0;e<j&&(b++,a=a.nextZ,!!a);e++);for(k=j;b>0||k>0&&a;)b!==0&&(k===0||!a||o.z<=a.z)?(c=o,o=o.nextZ,b--):(c=a,a=a.nextZ,k--),d?d.nextZ=c:s=c,c.prevZ=d,d=c;o=a}d.nextZ=null,j*=2}while(_>1);return s}function zOrder(s,e,o,a,c){return s=32767*(s-o)*c,e=32767*(e-a)*c,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,s|e<<1}function getLeftmost(s){let e=s,o=s;do(e.x<o.x||e.x===o.x&&e.y<o.y)&&(o=e),e=e.next;while(e!==s);return o}function pointInTriangle(s,e,o,a,c,d,_,b){return(c-_)*(e-b)-(s-_)*(d-b)>=0&&(s-_)*(a-b)-(o-_)*(e-b)>=0&&(o-_)*(d-b)-(c-_)*(a-b)>=0}function isValidDiagonal(s,e){return s.next.i!==e.i&&s.prev.i!==e.i&&!intersectsPolygon(s,e)&&(locallyInside(s,e)&&locallyInside(e,s)&&middleInside(s,e)&&(area(s.prev,s,e.prev)||area(s,e.prev,e))||equals(s,e)&&area(s.prev,s,s.next)>0&&area(e.prev,e,e.next)>0)}function area(s,e,o){return(e.y-s.y)*(o.x-e.x)-(e.x-s.x)*(o.y-e.y)}function equals(s,e){return s.x===e.x&&s.y===e.y}function intersects(s,e,o,a){const c=sign(area(s,e,o)),d=sign(area(s,e,a)),_=sign(area(o,a,s)),b=sign(area(o,a,e));return!!(c!==d&&_!==b||c===0&&onSegment(s,o,e)||d===0&&onSegment(s,a,e)||_===0&&onSegment(o,s,a)||b===0&&onSegment(o,e,a))}function onSegment(s,e,o){return e.x<=Math.max(s.x,o.x)&&e.x>=Math.min(s.x,o.x)&&e.y<=Math.max(s.y,o.y)&&e.y>=Math.min(s.y,o.y)}function sign(s){return s>0?1:s<0?-1:0}function intersectsPolygon(s,e){let o=s;do{if(o.i!==s.i&&o.next.i!==s.i&&o.i!==e.i&&o.next.i!==e.i&&intersects(o,o.next,s,e))return!0;o=o.next}while(o!==s);return!1}function locallyInside(s,e){return area(s.prev,s,s.next)<0?area(s,e,s.next)>=0&&area(s,s.prev,e)>=0:area(s,e,s.prev)<0||area(s,s.next,e)<0}function middleInside(s,e){let o=s,a=!1;const c=(s.x+e.x)/2,d=(s.y+e.y)/2;do o.y>d!=o.next.y>d&&o.next.y!==o.y&&c<(o.next.x-o.x)*(d-o.y)/(o.next.y-o.y)+o.x&&(a=!a),o=o.next;while(o!==s);return a}function splitPolygon(s,e){const o=new Node(s.i,s.x,s.y),a=new Node(e.i,e.x,e.y),c=s.next,d=e.prev;return s.next=e,e.prev=s,o.next=c,c.prev=o,a.next=o,o.prev=a,d.next=a,a.prev=d,a}function insertNode(s,e,o,a){const c=new Node(s,e,o);return a?(c.next=a.next,c.prev=a,a.next.prev=c,a.next=c):(c.prev=c,c.next=c),c}function removeNode(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Node(s,e,o){this.i=s,this.x=e,this.y=o,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(s,e,o,a){let c=0;for(let d=e,_=o-a;d<o;d+=a)c+=(s[_]-s[d])*(s[d+1]+s[_+1]),_=d;return c}class ShapeUtils{static area(e){const o=e.length;let a=0;for(let c=o-1,d=0;d<o;c=d++)a+=e[c].x*e[d].y-e[d].x*e[c].y;return a*.5}static isClockWise(e){return ShapeUtils.area(e)<0}static triangulateShape(e,o){const a=[],c=[],d=[];removeDupEndPts(e),addContour(a,e);let _=e.length;o.forEach(removeDupEndPts);for(let k=0;k<o.length;k++)c.push(_),_+=o[k].length,addContour(a,o[k]);const b=Earcut.triangulate(a,c);for(let k=0;k<b.length;k+=3)d.push(b.slice(k,k+3));return d}}function removeDupEndPts(s){const e=s.length;e>2&&s[e-1].equals(s[0])&&s.pop()}function addContour(s,e){for(let o=0;o<e.length;o++)s.push(e[o].x),s.push(e[o].y)}class ExtrudeGeometry extends BufferGeometry{constructor(e=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),o={}){super();this.type="ExtrudeGeometry",this.parameters={shapes:e,options:o},e=Array.isArray(e)?e:[e];const a=this,c=[],d=[];for(let b=0,k=e.length;b<k;b++){const j=e[b];_(j)}this.setAttribute("position",new Float32BufferAttribute(c,3)),this.setAttribute("uv",new Float32BufferAttribute(d,2)),this.computeVertexNormals();function _(b){const k=[],j=o.curveSegments!==void 0?o.curveSegments:12,et=o.steps!==void 0?o.steps:1;let nt=o.depth!==void 0?o.depth:1,tt=o.bevelEnabled!==void 0?o.bevelEnabled:!0,rt=o.bevelThickness!==void 0?o.bevelThickness:.2,at=o.bevelSize!==void 0?o.bevelSize:rt-.1,lt=o.bevelOffset!==void 0?o.bevelOffset:0,ut=o.bevelSegments!==void 0?o.bevelSegments:3;const st=o.extrudePath,it=o.UVGenerator!==void 0?o.UVGenerator:WorldUVGenerator;o.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),nt=o.amount);let ft,ct=!1,dt,mt,gt,yt;st&&(ft=st.getSpacedPoints(et),ct=!0,tt=!1,dt=st.computeFrenetFrames(et,!1),mt=new Vector3,gt=new Vector3,yt=new Vector3),tt||(ut=0,rt=0,at=0,lt=0);const St=b.extractPoints(j);let Et=St.shape;const vt=St.holes;if(!ShapeUtils.isClockWise(Et)){Et=Et.reverse();for(let $t=0,sn=vt.length;$t<sn;$t++){const rn=vt[$t];ShapeUtils.isClockWise(rn)&&(vt[$t]=rn.reverse())}}const bt=ShapeUtils.triangulateShape(Et,vt),At=Et;for(let $t=0,sn=vt.length;$t<sn;$t++){const rn=vt[$t];Et=Et.concat(rn)}function Rt($t,sn,rn){return sn||console.error("THREE.ExtrudeGeometry: vec does not exist"),sn.clone().multiplyScalar(rn).add($t)}const Pt=Et.length,Dt=bt.length;function Ft($t,sn,rn){let vn,cn,Dn;const Kt=$t.x-sn.x,bn=$t.y-sn.y,En=rn.x-$t.x,wt=rn.y-$t.y,Mt=Kt*Kt+bn*bn,Ot=Kt*wt-bn*En;if(Math.abs(Ot)>Number.EPSILON){const zt=Math.sqrt(Mt),Yt=Math.sqrt(En*En+wt*wt),dn=sn.x-bn/zt,xn=sn.y+Kt/zt,Nt=rn.x-wt/Yt,mn=rn.y+En/Yt,Ln=((Nt-dn)*wt-(mn-xn)*En)/(Kt*wt-bn*En);vn=dn+Kt*Ln-$t.x,cn=xn+bn*Ln-$t.y;const Sn=vn*vn+cn*cn;if(Sn<=2)return new Vector2(vn,cn);Dn=Math.sqrt(Sn/2)}else{let zt=!1;Kt>Number.EPSILON?En>Number.EPSILON&&(zt=!0):Kt<-Number.EPSILON?En<-Number.EPSILON&&(zt=!0):Math.sign(bn)===Math.sign(wt)&&(zt=!0),zt?(vn=-bn,cn=Kt,Dn=Math.sqrt(Mt)):(vn=Kt,cn=bn,Dn=Math.sqrt(Mt/2))}return new Vector2(vn/Dn,cn/Dn)}const Vt=[];for(let $t=0,sn=At.length,rn=sn-1,vn=$t+1;$t<sn;$t++,rn++,vn++)rn===sn&&(rn=0),vn===sn&&(vn=0),Vt[$t]=Ft(At[$t],At[rn],At[vn]);const Qt=[];let Lt,It=Vt.concat();for(let $t=0,sn=vt.length;$t<sn;$t++){const rn=vt[$t];Lt=[];for(let vn=0,cn=rn.length,Dn=cn-1,Kt=vn+1;vn<cn;vn++,Dn++,Kt++)Dn===cn&&(Dn=0),Kt===cn&&(Kt=0),Lt[vn]=Ft(rn[vn],rn[Dn],rn[Kt]);Qt.push(Lt),It=It.concat(Lt)}for(let $t=0;$t<ut;$t++){const sn=$t/ut,rn=rt*Math.cos(sn*Math.PI/2),vn=at*Math.sin(sn*Math.PI/2)+lt;for(let cn=0,Dn=At.length;cn<Dn;cn++){const Kt=Rt(At[cn],Vt[cn],vn);Mn(Kt.x,Kt.y,-rn)}for(let cn=0,Dn=vt.length;cn<Dn;cn++){const Kt=vt[cn];Lt=Qt[cn];for(let bn=0,En=Kt.length;bn<En;bn++){const wt=Rt(Kt[bn],Lt[bn],vn);Mn(wt.x,wt.y,-rn)}}}const Ht=at+lt;for(let $t=0;$t<Pt;$t++){const sn=tt?Rt(Et[$t],It[$t],Ht):Et[$t];ct?(gt.copy(dt.normals[0]).multiplyScalar(sn.x),mt.copy(dt.binormals[0]).multiplyScalar(sn.y),yt.copy(ft[0]).add(gt).add(mt),Mn(yt.x,yt.y,yt.z)):Mn(sn.x,sn.y,0)}for(let $t=1;$t<=et;$t++)for(let sn=0;sn<Pt;sn++){const rn=tt?Rt(Et[sn],It[sn],Ht):Et[sn];ct?(gt.copy(dt.normals[$t]).multiplyScalar(rn.x),mt.copy(dt.binormals[$t]).multiplyScalar(rn.y),yt.copy(ft[$t]).add(gt).add(mt),Mn(yt.x,yt.y,yt.z)):Mn(rn.x,rn.y,nt/et*$t)}for(let $t=ut-1;$t>=0;$t--){const sn=$t/ut,rn=rt*Math.cos(sn*Math.PI/2),vn=at*Math.sin(sn*Math.PI/2)+lt;for(let cn=0,Dn=At.length;cn<Dn;cn++){const Kt=Rt(At[cn],Vt[cn],vn);Mn(Kt.x,Kt.y,nt+rn)}for(let cn=0,Dn=vt.length;cn<Dn;cn++){const Kt=vt[cn];Lt=Qt[cn];for(let bn=0,En=Kt.length;bn<En;bn++){const wt=Rt(Kt[bn],Lt[bn],vn);ct?Mn(wt.x,wt.y+ft[et-1].y,ft[et-1].x+rn):Mn(wt.x,wt.y,nt+rn)}}}on(),nn();function on(){const $t=c.length/3;if(tt){let sn=0,rn=Pt*sn;for(let vn=0;vn<Dt;vn++){const cn=bt[vn];gn(cn[2]+rn,cn[1]+rn,cn[0]+rn)}sn=et+ut*2,rn=Pt*sn;for(let vn=0;vn<Dt;vn++){const cn=bt[vn];gn(cn[0]+rn,cn[1]+rn,cn[2]+rn)}}else{for(let sn=0;sn<Dt;sn++){const rn=bt[sn];gn(rn[2],rn[1],rn[0])}for(let sn=0;sn<Dt;sn++){const rn=bt[sn];gn(rn[0]+Pt*et,rn[1]+Pt*et,rn[2]+Pt*et)}}a.addGroup($t,c.length/3-$t,0)}function nn(){const $t=c.length/3;let sn=0;jt(At,sn),sn+=At.length;for(let rn=0,vn=vt.length;rn<vn;rn++){const cn=vt[rn];jt(cn,sn),sn+=cn.length}a.addGroup($t,c.length/3-$t,1)}function jt($t,sn){let rn=$t.length;for(;--rn>=0;){const vn=rn;let cn=rn-1;cn<0&&(cn=$t.length-1);for(let Dn=0,Kt=et+ut*2;Dn<Kt;Dn++){const bn=Pt*Dn,En=Pt*(Dn+1),wt=sn+vn+bn,Mt=sn+cn+bn,Ot=sn+cn+En,zt=sn+vn+En;fn(wt,Mt,Ot,zt)}}}function Mn($t,sn,rn){k.push($t),k.push(sn),k.push(rn)}function gn($t,sn,rn){pn($t),pn(sn),pn(rn);const vn=c.length/3,cn=it.generateTopUV(a,c,vn-3,vn-2,vn-1);_n(cn[0]),_n(cn[1]),_n(cn[2])}function fn($t,sn,rn,vn){pn($t),pn(sn),pn(vn),pn(sn),pn(rn),pn(vn);const cn=c.length/3,Dn=it.generateSideWallUV(a,c,cn-6,cn-3,cn-2,cn-1);_n(Dn[0]),_n(Dn[1]),_n(Dn[3]),_n(Dn[1]),_n(Dn[2]),_n(Dn[3])}function pn($t){c.push(k[$t*3+0]),c.push(k[$t*3+1]),c.push(k[$t*3+2])}function _n($t){d.push($t.x),d.push($t.y)}}}toJSON(){const e=super.toJSON(),o=this.parameters.shapes,a=this.parameters.options;return toJSON$1(o,a,e)}static fromJSON(e,o){const a=[];for(let d=0,_=e.shapes.length;d<_;d++){const b=o[e.shapes[d]];a.push(b)}const c=e.options.extrudePath;return c!==void 0&&(e.options.extrudePath=new Curves[c.type]().fromJSON(c)),new ExtrudeGeometry(a,e.options)}}const WorldUVGenerator={generateTopUV:function(s,e,o,a,c){const d=e[o*3],_=e[o*3+1],b=e[a*3],k=e[a*3+1],j=e[c*3],et=e[c*3+1];return[new Vector2(d,_),new Vector2(b,k),new Vector2(j,et)]},generateSideWallUV:function(s,e,o,a,c,d){const _=e[o*3],b=e[o*3+1],k=e[o*3+2],j=e[a*3],et=e[a*3+1],nt=e[a*3+2],tt=e[c*3],rt=e[c*3+1],at=e[c*3+2],lt=e[d*3],ut=e[d*3+1],st=e[d*3+2];return Math.abs(b-et)<Math.abs(_-j)?[new Vector2(_,1-k),new Vector2(j,1-nt),new Vector2(tt,1-at),new Vector2(lt,1-st)]:[new Vector2(b,1-k),new Vector2(et,1-nt),new Vector2(rt,1-at),new Vector2(ut,1-st)]}};function toJSON$1(s,e,o){if(o.shapes=[],Array.isArray(s))for(let a=0,c=s.length;a<c;a++){const d=s[a];o.shapes.push(d.uuid)}else o.shapes.push(s.uuid);return e.extrudePath!==void 0&&(o.options.extrudePath=e.extrudePath.toJSON()),o}class IcosahedronGeometry extends PolyhedronGeometry{constructor(e=1,o=0){const a=(1+Math.sqrt(5))/2,c=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1],d=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(c,d,e,o);this.type="IcosahedronGeometry",this.parameters={radius:e,detail:o}}static fromJSON(e){return new IcosahedronGeometry(e.radius,e.detail)}}class LatheGeometry extends BufferGeometry{constructor(e=[new Vector2(0,.5),new Vector2(.5,0),new Vector2(0,-.5)],o=12,a=0,c=Math.PI*2){super();this.type="LatheGeometry",this.parameters={points:e,segments:o,phiStart:a,phiLength:c},o=Math.floor(o),c=clamp(c,0,Math.PI*2);const d=[],_=[],b=[],k=[],j=[],et=1/o,nt=new Vector3,tt=new Vector2,rt=new Vector3,at=new Vector3,lt=new Vector3;let ut=0,st=0;for(let it=0;it<=e.length-1;it++)switch(it){case 0:ut=e[it+1].x-e[it].x,st=e[it+1].y-e[it].y,rt.x=st*1,rt.y=-ut,rt.z=st*0,lt.copy(rt),rt.normalize(),k.push(rt.x,rt.y,rt.z);break;case e.length-1:k.push(lt.x,lt.y,lt.z);break;default:ut=e[it+1].x-e[it].x,st=e[it+1].y-e[it].y,rt.x=st*1,rt.y=-ut,rt.z=st*0,at.copy(rt),rt.x+=lt.x,rt.y+=lt.y,rt.z+=lt.z,rt.normalize(),k.push(rt.x,rt.y,rt.z),lt.copy(at)}for(let it=0;it<=o;it++){const ft=a+it*et*c,ct=Math.sin(ft),dt=Math.cos(ft);for(let mt=0;mt<=e.length-1;mt++){nt.x=e[mt].x*ct,nt.y=e[mt].y,nt.z=e[mt].x*dt,_.push(nt.x,nt.y,nt.z),tt.x=it/o,tt.y=mt/(e.length-1),b.push(tt.x,tt.y);const gt=k[3*mt+0]*ct,yt=k[3*mt+1],St=k[3*mt+0]*dt;j.push(gt,yt,St)}}for(let it=0;it<o;it++)for(let ft=0;ft<e.length-1;ft++){const ct=ft+it*e.length,dt=ct,mt=ct+e.length,gt=ct+e.length+1,yt=ct+1;d.push(dt,mt,yt),d.push(gt,yt,mt)}this.setIndex(d),this.setAttribute("position",new Float32BufferAttribute(_,3)),this.setAttribute("uv",new Float32BufferAttribute(b,2)),this.setAttribute("normal",new Float32BufferAttribute(j,3))}static fromJSON(e){return new LatheGeometry(e.points,e.segments,e.phiStart,e.phiLength)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(e=1,o=0){const a=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],c=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(a,c,e,o);this.type="OctahedronGeometry",this.parameters={radius:e,detail:o}}static fromJSON(e){return new OctahedronGeometry(e.radius,e.detail)}}class RingGeometry extends BufferGeometry{constructor(e=.5,o=1,a=8,c=1,d=0,_=Math.PI*2){super();this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:o,thetaSegments:a,phiSegments:c,thetaStart:d,thetaLength:_},a=Math.max(3,a),c=Math.max(1,c);const b=[],k=[],j=[],et=[];let nt=e;const tt=(o-e)/c,rt=new Vector3,at=new Vector2;for(let lt=0;lt<=c;lt++){for(let ut=0;ut<=a;ut++){const st=d+ut/a*_;rt.x=nt*Math.cos(st),rt.y=nt*Math.sin(st),k.push(rt.x,rt.y,rt.z),j.push(0,0,1),at.x=(rt.x/o+1)/2,at.y=(rt.y/o+1)/2,et.push(at.x,at.y)}nt+=tt}for(let lt=0;lt<c;lt++){const ut=lt*(a+1);for(let st=0;st<a;st++){const it=st+ut,ft=it,ct=it+a+1,dt=it+a+2,mt=it+1;b.push(ft,ct,mt),b.push(ct,dt,mt)}}this.setIndex(b),this.setAttribute("position",new Float32BufferAttribute(k,3)),this.setAttribute("normal",new Float32BufferAttribute(j,3)),this.setAttribute("uv",new Float32BufferAttribute(et,2))}static fromJSON(e){return new RingGeometry(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(e=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),o=12){super();this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:o};const a=[],c=[],d=[],_=[];let b=0,k=0;if(Array.isArray(e)===!1)j(e);else for(let et=0;et<e.length;et++)j(e[et]),this.addGroup(b,k,et),b+=k,k=0;this.setIndex(a),this.setAttribute("position",new Float32BufferAttribute(c,3)),this.setAttribute("normal",new Float32BufferAttribute(d,3)),this.setAttribute("uv",new Float32BufferAttribute(_,2));function j(et){const nt=c.length/3,tt=et.extractPoints(o);let rt=tt.shape;const at=tt.holes;ShapeUtils.isClockWise(rt)===!1&&(rt=rt.reverse());for(let ut=0,st=at.length;ut<st;ut++){const it=at[ut];ShapeUtils.isClockWise(it)===!0&&(at[ut]=it.reverse())}const lt=ShapeUtils.triangulateShape(rt,at);for(let ut=0,st=at.length;ut<st;ut++){const it=at[ut];rt=rt.concat(it)}for(let ut=0,st=rt.length;ut<st;ut++){const it=rt[ut];c.push(it.x,it.y,0),d.push(0,0,1),_.push(it.x,it.y)}for(let ut=0,st=lt.length;ut<st;ut++){const it=lt[ut],ft=it[0]+nt,ct=it[1]+nt,dt=it[2]+nt;a.push(ft,ct,dt),k+=3}}}toJSON(){const e=super.toJSON(),o=this.parameters.shapes;return toJSON(o,e)}static fromJSON(e,o){const a=[];for(let c=0,d=e.shapes.length;c<d;c++){const _=o[e.shapes[c]];a.push(_)}return new ShapeGeometry(a,e.curveSegments)}}function toJSON(s,e){if(e.shapes=[],Array.isArray(s))for(let o=0,a=s.length;o<a;o++){const c=s[o];e.shapes.push(c.uuid)}else e.shapes.push(s.uuid);return e}class SphereGeometry extends BufferGeometry{constructor(e=1,o=32,a=16,c=0,d=Math.PI*2,_=0,b=Math.PI){super();this.type="SphereGeometry",this.parameters={radius:e,widthSegments:o,heightSegments:a,phiStart:c,phiLength:d,thetaStart:_,thetaLength:b},o=Math.max(3,Math.floor(o)),a=Math.max(2,Math.floor(a));const k=Math.min(_+b,Math.PI);let j=0;const et=[],nt=new Vector3,tt=new Vector3,rt=[],at=[],lt=[],ut=[];for(let st=0;st<=a;st++){const it=[],ft=st/a;let ct=0;st==0&&_==0?ct=.5/o:st==a&&k==Math.PI&&(ct=-.5/o);for(let dt=0;dt<=o;dt++){const mt=dt/o;nt.x=-e*Math.cos(c+mt*d)*Math.sin(_+ft*b),nt.y=e*Math.cos(_+ft*b),nt.z=e*Math.sin(c+mt*d)*Math.sin(_+ft*b),at.push(nt.x,nt.y,nt.z),tt.copy(nt).normalize(),lt.push(tt.x,tt.y,tt.z),ut.push(mt+ct,1-ft),it.push(j++)}et.push(it)}for(let st=0;st<a;st++)for(let it=0;it<o;it++){const ft=et[st][it+1],ct=et[st][it],dt=et[st+1][it],mt=et[st+1][it+1];(st!==0||_>0)&&rt.push(ft,ct,mt),(st!==a-1||k<Math.PI)&&rt.push(ct,dt,mt)}this.setIndex(rt),this.setAttribute("position",new Float32BufferAttribute(at,3)),this.setAttribute("normal",new Float32BufferAttribute(lt,3)),this.setAttribute("uv",new Float32BufferAttribute(ut,2))}static fromJSON(e){return new SphereGeometry(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(e=1,o=0){const a=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],c=[2,1,0,0,3,2,1,3,0,2,3,1];super(a,c,e,o);this.type="TetrahedronGeometry",this.parameters={radius:e,detail:o}}static fromJSON(e){return new TetrahedronGeometry(e.radius,e.detail)}}class TorusGeometry extends BufferGeometry{constructor(e=1,o=.4,a=8,c=6,d=Math.PI*2){super();this.type="TorusGeometry",this.parameters={radius:e,tube:o,radialSegments:a,tubularSegments:c,arc:d},a=Math.floor(a),c=Math.floor(c);const _=[],b=[],k=[],j=[],et=new Vector3,nt=new Vector3,tt=new Vector3;for(let rt=0;rt<=a;rt++)for(let at=0;at<=c;at++){const lt=at/c*d,ut=rt/a*Math.PI*2;nt.x=(e+o*Math.cos(ut))*Math.cos(lt),nt.y=(e+o*Math.cos(ut))*Math.sin(lt),nt.z=o*Math.sin(ut),b.push(nt.x,nt.y,nt.z),et.x=e*Math.cos(lt),et.y=e*Math.sin(lt),tt.subVectors(nt,et).normalize(),k.push(tt.x,tt.y,tt.z),j.push(at/c),j.push(rt/a)}for(let rt=1;rt<=a;rt++)for(let at=1;at<=c;at++){const lt=(c+1)*rt+at-1,ut=(c+1)*(rt-1)+at-1,st=(c+1)*(rt-1)+at,it=(c+1)*rt+at;_.push(lt,ut,it),_.push(ut,st,it)}this.setIndex(_),this.setAttribute("position",new Float32BufferAttribute(b,3)),this.setAttribute("normal",new Float32BufferAttribute(k,3)),this.setAttribute("uv",new Float32BufferAttribute(j,2))}static fromJSON(e){return new TorusGeometry(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(e=1,o=.4,a=64,c=8,d=2,_=3){super();this.type="TorusKnotGeometry",this.parameters={radius:e,tube:o,tubularSegments:a,radialSegments:c,p:d,q:_},a=Math.floor(a),c=Math.floor(c);const b=[],k=[],j=[],et=[],nt=new Vector3,tt=new Vector3,rt=new Vector3,at=new Vector3,lt=new Vector3,ut=new Vector3,st=new Vector3;for(let ft=0;ft<=a;++ft){const ct=ft/a*d*Math.PI*2;it(ct,d,_,e,rt),it(ct+.01,d,_,e,at),ut.subVectors(at,rt),st.addVectors(at,rt),lt.crossVectors(ut,st),st.crossVectors(lt,ut),lt.normalize(),st.normalize();for(let dt=0;dt<=c;++dt){const mt=dt/c*Math.PI*2,gt=-o*Math.cos(mt),yt=o*Math.sin(mt);nt.x=rt.x+(gt*st.x+yt*lt.x),nt.y=rt.y+(gt*st.y+yt*lt.y),nt.z=rt.z+(gt*st.z+yt*lt.z),k.push(nt.x,nt.y,nt.z),tt.subVectors(nt,rt).normalize(),j.push(tt.x,tt.y,tt.z),et.push(ft/a),et.push(dt/c)}}for(let ft=1;ft<=a;ft++)for(let ct=1;ct<=c;ct++){const dt=(c+1)*(ft-1)+(ct-1),mt=(c+1)*ft+(ct-1),gt=(c+1)*ft+ct,yt=(c+1)*(ft-1)+ct;b.push(dt,mt,yt),b.push(mt,gt,yt)}this.setIndex(b),this.setAttribute("position",new Float32BufferAttribute(k,3)),this.setAttribute("normal",new Float32BufferAttribute(j,3)),this.setAttribute("uv",new Float32BufferAttribute(et,2));function it(ft,ct,dt,mt,gt){const yt=Math.cos(ft),St=Math.sin(ft),Et=dt/ct*ft,vt=Math.cos(Et);gt.x=mt*(2+vt)*.5*yt,gt.y=mt*(2+vt)*St*.5,gt.z=mt*Math.sin(Et)*.5}}static fromJSON(e){return new TorusKnotGeometry(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class TubeGeometry extends BufferGeometry{constructor(e=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),o=64,a=1,c=8,d=!1){super();this.type="TubeGeometry",this.parameters={path:e,tubularSegments:o,radius:a,radialSegments:c,closed:d};const _=e.computeFrenetFrames(o,d);this.tangents=_.tangents,this.normals=_.normals,this.binormals=_.binormals;const b=new Vector3,k=new Vector3,j=new Vector2;let et=new Vector3;const nt=[],tt=[],rt=[],at=[];lt(),this.setIndex(at),this.setAttribute("position",new Float32BufferAttribute(nt,3)),this.setAttribute("normal",new Float32BufferAttribute(tt,3)),this.setAttribute("uv",new Float32BufferAttribute(rt,2));function lt(){for(let ft=0;ft<o;ft++)ut(ft);ut(d===!1?o:0),it(),st()}function ut(ft){et=e.getPointAt(ft/o,et);const ct=_.normals[ft],dt=_.binormals[ft];for(let mt=0;mt<=c;mt++){const gt=mt/c*Math.PI*2,yt=Math.sin(gt),St=-Math.cos(gt);k.x=St*ct.x+yt*dt.x,k.y=St*ct.y+yt*dt.y,k.z=St*ct.z+yt*dt.z,k.normalize(),tt.push(k.x,k.y,k.z),b.x=et.x+a*k.x,b.y=et.y+a*k.y,b.z=et.z+a*k.z,nt.push(b.x,b.y,b.z)}}function st(){for(let ft=1;ft<=o;ft++)for(let ct=1;ct<=c;ct++){const dt=(c+1)*(ft-1)+(ct-1),mt=(c+1)*ft+(ct-1),gt=(c+1)*ft+ct,yt=(c+1)*(ft-1)+ct;at.push(dt,mt,yt),at.push(mt,gt,yt)}}function it(){for(let ft=0;ft<=o;ft++)for(let ct=0;ct<=c;ct++)j.x=ft/o,j.y=ct/c,rt.push(j.x,j.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new TubeGeometry(new Curves[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class WireframeGeometry extends BufferGeometry{constructor(e=null){super();if(this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const o=[],a=new Set,c=new Vector3,d=new Vector3;if(e.index!==null){const _=e.attributes.position,b=e.index;let k=e.groups;k.length===0&&(k=[{start:0,count:b.count,materialIndex:0}]);for(let j=0,et=k.length;j<et;++j){const nt=k[j],tt=nt.start,rt=nt.count;for(let at=tt,lt=tt+rt;at<lt;at+=3)for(let ut=0;ut<3;ut++){const st=b.getX(at+ut),it=b.getX(at+(ut+1)%3);c.fromBufferAttribute(_,st),d.fromBufferAttribute(_,it),isUniqueEdge(c,d,a)===!0&&(o.push(c.x,c.y,c.z),o.push(d.x,d.y,d.z))}}}else{const _=e.attributes.position;for(let b=0,k=_.count/3;b<k;b++)for(let j=0;j<3;j++){const et=3*b+j,nt=3*b+(j+1)%3;c.fromBufferAttribute(_,et),d.fromBufferAttribute(_,nt),isUniqueEdge(c,d,a)===!0&&(o.push(c.x,c.y,c.z),o.push(d.x,d.y,d.z))}}this.setAttribute("position",new Float32BufferAttribute(o,3))}}}function isUniqueEdge(s,e,o){const a=`${s.x},${s.y},${s.z}-${e.x},${e.y},${e.z}`,c=`${e.x},${e.y},${e.z}-${s.x},${s.y},${s.z}`;return o.has(a)===!0||o.has(c)===!0?!1:(o.add(a),o.add(c),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,BoxBufferGeometry:BoxGeometry,CircleGeometry,CircleBufferGeometry:CircleGeometry,ConeGeometry,ConeBufferGeometry:ConeGeometry,CylinderGeometry,CylinderBufferGeometry:CylinderGeometry,DodecahedronGeometry,DodecahedronBufferGeometry:DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,ExtrudeBufferGeometry:ExtrudeGeometry,IcosahedronGeometry,IcosahedronBufferGeometry:IcosahedronGeometry,LatheGeometry,LatheBufferGeometry:LatheGeometry,OctahedronGeometry,OctahedronBufferGeometry:OctahedronGeometry,PlaneGeometry,PlaneBufferGeometry:PlaneGeometry,PolyhedronGeometry,PolyhedronBufferGeometry:PolyhedronGeometry,RingGeometry,RingBufferGeometry:RingGeometry,ShapeGeometry,ShapeBufferGeometry:ShapeGeometry,SphereGeometry,SphereBufferGeometry:SphereGeometry,TetrahedronGeometry,TetrahedronBufferGeometry:TetrahedronGeometry,TorusGeometry,TorusBufferGeometry:TorusGeometry,TorusKnotGeometry,TorusKnotBufferGeometry:TorusKnotGeometry,TubeGeometry,TubeBufferGeometry:TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(e){super();this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}ShadowMaterial.prototype.isShadowMaterial=!0;class RawShaderMaterial extends ShaderMaterial{constructor(e){super(e);this.type="RawShaderMaterial"}}RawShaderMaterial.prototype.isRawShaderMaterial=!0;class MeshStandardMaterial extends Material{constructor(e){super();this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(e){super();this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(o){this.ior=(1+.4*o)/(1-.4*o)}}),this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;class MeshPhongMaterial extends Material{constructor(e){super();this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;class MeshToonMaterial extends Material{constructor(e){super();this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}MeshToonMaterial.prototype.isMeshToonMaterial=!0;class MeshNormalMaterial extends Material{constructor(e){super();this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;class MeshLambertMaterial extends Material{constructor(e){super();this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;class MeshMatcapMaterial extends Material{constructor(e){super();this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;class LineDashedMaterial extends LineBasicMaterial{constructor(e){super();this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}LineDashedMaterial.prototype.isLineDashedMaterial=!0;const materialLib={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};Material.fromType=function(s){return new materialLib[s]};const AnimationUtils={arraySlice:function(s,e,o){return AnimationUtils.isTypedArray(s)?new s.constructor(s.subarray(e,o!==void 0?o:s.length)):s.slice(e,o)},convertArray:function(s,e,o){return!s||!o&&s.constructor===e?s:typeof e.BYTES_PER_ELEMENT=="number"?new e(s):Array.prototype.slice.call(s)},isTypedArray:function(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)},getKeyframeOrder:function(s){function e(c,d){return s[c]-s[d]}const o=s.length,a=new Array(o);for(let c=0;c!==o;++c)a[c]=c;return a.sort(e),a},sortedArray:function(s,e,o){const a=s.length,c=new s.constructor(a);for(let d=0,_=0;_!==a;++d){const b=o[d]*e;for(let k=0;k!==e;++k)c[_++]=s[b+k]}return c},flattenJSON:function(s,e,o,a){let c=1,d=s[0];for(;d!==void 0&&d[a]===void 0;)d=s[c++];if(d===void 0)return;let _=d[a];if(_!==void 0)if(Array.isArray(_))do _=d[a],_!==void 0&&(e.push(d.time),o.push.apply(o,_)),d=s[c++];while(d!==void 0);else if(_.toArray!==void 0)do _=d[a],_!==void 0&&(e.push(d.time),_.toArray(o,o.length)),d=s[c++];while(d!==void 0);else do _=d[a],_!==void 0&&(e.push(d.time),o.push(_)),d=s[c++];while(d!==void 0)},subclip:function(s,e,o,a,c=30){const d=s.clone();d.name=e;const _=[];for(let k=0;k<d.tracks.length;++k){const j=d.tracks[k],et=j.getValueSize(),nt=[],tt=[];for(let rt=0;rt<j.times.length;++rt){const at=j.times[rt]*c;if(!(at<o||at>=a)){nt.push(j.times[rt]);for(let lt=0;lt<et;++lt)tt.push(j.values[rt*et+lt])}}nt.length!==0&&(j.times=AnimationUtils.convertArray(nt,j.times.constructor),j.values=AnimationUtils.convertArray(tt,j.values.constructor),_.push(j))}d.tracks=_;let b=1/0;for(let k=0;k<d.tracks.length;++k)b>d.tracks[k].times[0]&&(b=d.tracks[k].times[0]);for(let k=0;k<d.tracks.length;++k)d.tracks[k].shift(-1*b);return d.resetDuration(),d},makeClipAdditive:function(s,e=0,o=s,a=30){a<=0&&(a=30);const c=o.tracks.length,d=e/a;for(let _=0;_<c;++_){const b=o.tracks[_],k=b.ValueTypeName;if(k==="bool"||k==="string")continue;const j=s.tracks.find(function(st){return st.name===b.name&&st.ValueTypeName===k});if(j===void 0)continue;let et=0;const nt=b.getValueSize();b.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(et=nt/3);let tt=0;const rt=j.getValueSize();j.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(tt=rt/3);const at=b.times.length-1;let lt;if(d<=b.times[0]){const st=et,it=nt-et;lt=AnimationUtils.arraySlice(b.values,st,it)}else if(d>=b.times[at]){const st=at*nt+et,it=st+nt-et;lt=AnimationUtils.arraySlice(b.values,st,it)}else{const st=b.createInterpolant(),it=et,ft=nt-et;st.evaluate(d),lt=AnimationUtils.arraySlice(st.resultBuffer,it,ft)}k==="quaternion"&&new Quaternion().fromArray(lt).normalize().conjugate().toArray(lt);const ut=j.times.length;for(let st=0;st<ut;++st){const it=st*rt+tt;if(k==="quaternion")Quaternion.multiplyQuaternionsFlat(j.values,it,lt,0,j.values,it);else{const ft=rt-tt*2;for(let ct=0;ct<ft;++ct)j.values[it+ct]-=lt[ct]}}}return s.blendMode=AdditiveAnimationBlendMode,s}};class Interpolant{constructor(e,o,a,c){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=c!==void 0?c:new o.constructor(a),this.sampleValues=o,this.valueSize=a,this.settings=null,this.DefaultSettings_={}}evaluate(e){const o=this.parameterPositions;let a=this._cachedIndex,c=o[a],d=o[a-1];e:{t:{let _;n:{r:if(!(e<c)){for(let b=a+2;;){if(c===void 0){if(e<d)break r;return a=o.length,this._cachedIndex=a,this.afterEnd_(a-1,e,d)}if(a===b)break;if(d=c,c=o[++a],e<c)break t}_=o.length;break n}if(!(e>=d)){const b=o[1];e<b&&(a=2,d=b);for(let k=a-2;;){if(d===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,c);if(a===k)break;if(c=d,d=o[--a-1],e>=d)break t}_=a,a=0;break n}break e}for(;a<_;){const b=a+_>>>1;e<o[b]?_=b:a=b+1}if(c=o[a],d=o[a-1],d===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,c);if(c===void 0)return a=o.length,this._cachedIndex=a,this.afterEnd_(a-1,d,e)}this._cachedIndex=a,this.intervalChanged_(a,d,c)}return this.interpolate_(a,d,e,c)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const o=this.resultBuffer,a=this.sampleValues,c=this.valueSize,d=e*c;for(let _=0;_!==c;++_)o[_]=a[d+_];return o}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Interpolant.prototype.beforeStart_=Interpolant.prototype.copySampleValue_;Interpolant.prototype.afterEnd_=Interpolant.prototype.copySampleValue_;class CubicInterpolant extends Interpolant{constructor(e,o,a,c){super(e,o,a,c);this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(e,o,a){const c=this.parameterPositions;let d=e-2,_=e+1,b=c[d],k=c[_];if(b===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:d=e,b=2*o-a;break;case WrapAroundEnding:d=c.length-2,b=o+c[d]-c[d+1];break;default:d=e,b=a}if(k===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:_=e,k=2*a-o;break;case WrapAroundEnding:_=1,k=a+c[1]-c[0];break;default:_=e-1,k=o}const j=(a-o)*.5,et=this.valueSize;this._weightPrev=j/(o-b),this._weightNext=j/(k-a),this._offsetPrev=d*et,this._offsetNext=_*et}interpolate_(e,o,a,c){const d=this.resultBuffer,_=this.sampleValues,b=this.valueSize,k=e*b,j=k-b,et=this._offsetPrev,nt=this._offsetNext,tt=this._weightPrev,rt=this._weightNext,at=(a-o)/(c-o),lt=at*at,ut=lt*at,st=-tt*ut+2*tt*lt-tt*at,it=(1+tt)*ut+(-1.5-2*tt)*lt+(-.5+tt)*at+1,ft=(-1-rt)*ut+(1.5+rt)*lt+.5*at,ct=rt*ut-rt*lt;for(let dt=0;dt!==b;++dt)d[dt]=st*_[et+dt]+it*_[j+dt]+ft*_[k+dt]+ct*_[nt+dt];return d}}class LinearInterpolant extends Interpolant{constructor(e,o,a,c){super(e,o,a,c)}interpolate_(e,o,a,c){const d=this.resultBuffer,_=this.sampleValues,b=this.valueSize,k=e*b,j=k-b,et=(a-o)/(c-o),nt=1-et;for(let tt=0;tt!==b;++tt)d[tt]=_[j+tt]*nt+_[k+tt]*et;return d}}class DiscreteInterpolant extends Interpolant{constructor(e,o,a,c){super(e,o,a,c)}interpolate_(e){return this.copySampleValue_(e-1)}}class KeyframeTrack{constructor(e,o,a,c){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(o===void 0||o.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=AnimationUtils.convertArray(o,this.TimeBufferType),this.values=AnimationUtils.convertArray(a,this.ValueBufferType),this.setInterpolation(c||this.DefaultInterpolation)}static toJSON(e){const o=e.constructor;let a;if(o.toJSON!==this.toJSON)a=o.toJSON(e);else{a={name:e.name,times:AnimationUtils.convertArray(e.times,Array),values:AnimationUtils.convertArray(e.values,Array)};const c=e.getInterpolation();c!==e.DefaultInterpolation&&(a.interpolation=c)}return a.type=e.ValueTypeName,a}InterpolantFactoryMethodDiscrete(e){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new LinearInterpolant(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new CubicInterpolant(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let o;switch(e){case InterpolateDiscrete:o=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:o=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:o=this.InterpolantFactoryMethodSmooth;break}if(o===void 0){const a="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(a);return console.warn("THREE.KeyframeTrack:",a),this}return this.createInterpolant=o,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const o=this.times;for(let a=0,c=o.length;a!==c;++a)o[a]+=e}return this}scale(e){if(e!==1){const o=this.times;for(let a=0,c=o.length;a!==c;++a)o[a]*=e}return this}trim(e,o){const a=this.times,c=a.length;let d=0,_=c-1;for(;d!==c&&a[d]<e;)++d;for(;_!==-1&&a[_]>o;)--_;if(++_,d!==0||_!==c){d>=_&&(_=Math.max(_,1),d=_-1);const b=this.getValueSize();this.times=AnimationUtils.arraySlice(a,d,_),this.values=AnimationUtils.arraySlice(this.values,d*b,_*b)}return this}validate(){let e=!0;const o=this.getValueSize();o-Math.floor(o)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const a=this.times,c=this.values,d=a.length;d===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let _=null;for(let b=0;b!==d;b++){const k=a[b];if(typeof k=="number"&&isNaN(k)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,b,k),e=!1;break}if(_!==null&&_>k){console.error("THREE.KeyframeTrack: Out of order keys.",this,b,k,_),e=!1;break}_=k}if(c!==void 0&&AnimationUtils.isTypedArray(c))for(let b=0,k=c.length;b!==k;++b){const j=c[b];if(isNaN(j)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,b,j),e=!1;break}}return e}optimize(){const e=AnimationUtils.arraySlice(this.times),o=AnimationUtils.arraySlice(this.values),a=this.getValueSize(),c=this.getInterpolation()===InterpolateSmooth,d=e.length-1;let _=1;for(let b=1;b<d;++b){let k=!1;const j=e[b],et=e[b+1];if(j!==et&&(b!==1||j!==e[0]))if(c)k=!0;else{const nt=b*a,tt=nt-a,rt=nt+a;for(let at=0;at!==a;++at){const lt=o[nt+at];if(lt!==o[tt+at]||lt!==o[rt+at]){k=!0;break}}}if(k){if(b!==_){e[_]=e[b];const nt=b*a,tt=_*a;for(let rt=0;rt!==a;++rt)o[tt+rt]=o[nt+rt]}++_}}if(d>0){e[_]=e[d];for(let b=d*a,k=_*a,j=0;j!==a;++j)o[k+j]=o[b+j];++_}return _!==e.length?(this.times=AnimationUtils.arraySlice(e,0,_),this.values=AnimationUtils.arraySlice(o,0,_*a)):(this.times=e,this.values=o),this}clone(){const e=AnimationUtils.arraySlice(this.times,0),o=AnimationUtils.arraySlice(this.values,0),a=this.constructor,c=new a(this.name,e,o);return c.createInterpolant=this.createInterpolant,c}}KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(e,o,a,c){super(e,o,a,c)}interpolate_(e,o,a,c){const d=this.resultBuffer,_=this.sampleValues,b=this.valueSize,k=(a-o)/(c-o);let j=e*b;for(let et=j+b;j!==et;j+=4)Quaternion.slerpFlat(d,0,_,j-b,_,j,k);return d}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(e){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),e)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(e,o=-1,a,c=NormalAnimationBlendMode){this.name=e,this.tracks=a,this.duration=o,this.blendMode=c,this.uuid=generateUUID$1(),this.duration<0&&this.resetDuration()}static parse(e){const o=[],a=e.tracks,c=1/(e.fps||1);for(let _=0,b=a.length;_!==b;++_)o.push(parseKeyframeTrack(a[_]).scale(c));const d=new this(e.name,e.duration,o,e.blendMode);return d.uuid=e.uuid,d}static toJSON(e){const o=[],a=e.tracks,c={name:e.name,duration:e.duration,tracks:o,uuid:e.uuid,blendMode:e.blendMode};for(let d=0,_=a.length;d!==_;++d)o.push(KeyframeTrack.toJSON(a[d]));return c}static CreateFromMorphTargetSequence(e,o,a,c){const d=o.length,_=[];for(let b=0;b<d;b++){let k=[],j=[];k.push((b+d-1)%d,b,(b+1)%d),j.push(0,1,0);const et=AnimationUtils.getKeyframeOrder(k);k=AnimationUtils.sortedArray(k,1,et),j=AnimationUtils.sortedArray(j,1,et),!c&&k[0]===0&&(k.push(d),j.push(j[0])),_.push(new NumberKeyframeTrack(".morphTargetInfluences["+o[b].name+"]",k,j).scale(1/a))}return new this(e,-1,_)}static findByName(e,o){let a=e;if(!Array.isArray(e)){const c=e;a=c.geometry&&c.geometry.animations||c.animations}for(let c=0;c<a.length;c++)if(a[c].name===o)return a[c];return null}static CreateClipsFromMorphTargetSequences(e,o,a){const c={},d=/^([\w-]*?)([\d]+)$/;for(let b=0,k=e.length;b<k;b++){const j=e[b],et=j.name.match(d);if(et&&et.length>1){const nt=et[1];let tt=c[nt];tt||(c[nt]=tt=[]),tt.push(j)}}const _=[];for(const b in c)_.push(this.CreateFromMorphTargetSequence(b,c[b],o,a));return _}static parseAnimation(e,o){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const a=function(nt,tt,rt,at,lt){if(rt.length!==0){const ut=[],st=[];AnimationUtils.flattenJSON(rt,ut,st,at),ut.length!==0&&lt.push(new nt(tt,ut,st))}},c=[],d=e.name||"default",_=e.fps||30,b=e.blendMode;let k=e.length||-1;const j=e.hierarchy||[];for(let nt=0;nt<j.length;nt++){const tt=j[nt].keys;if(!(!tt||tt.length===0))if(tt[0].morphTargets){const rt={};let at;for(at=0;at<tt.length;at++)if(tt[at].morphTargets)for(let lt=0;lt<tt[at].morphTargets.length;lt++)rt[tt[at].morphTargets[lt]]=-1;for(const lt in rt){const ut=[],st=[];for(let it=0;it!==tt[at].morphTargets.length;++it){const ft=tt[at];ut.push(ft.time),st.push(ft.morphTarget===lt?1:0)}c.push(new NumberKeyframeTrack(".morphTargetInfluence["+lt+"]",ut,st))}k=rt.length*_}else{const rt=".bones["+o[nt].name+"]";a(VectorKeyframeTrack,rt+".position",tt,"pos",c),a(QuaternionKeyframeTrack,rt+".quaternion",tt,"rot",c),a(VectorKeyframeTrack,rt+".scale",tt,"scl",c)}}return c.length===0?null:new this(d,k,c,b)}resetDuration(){const e=this.tracks;let o=0;for(let a=0,c=e.length;a!==c;++a){const d=this.tracks[a];o=Math.max(o,d.times[d.times.length-1])}return this.duration=o,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let o=0;o<this.tracks.length;o++)e=e&&this.tracks[o].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let o=0;o<this.tracks.length;o++)e.push(this.tracks[o].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(s){switch(s.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+s)}function parseKeyframeTrack(s){if(s.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=getTrackTypeForValueTypeName(s.type);if(s.times===void 0){const o=[],a=[];AnimationUtils.flattenJSON(s.keys,o,a,"value"),s.times=o,s.values=a}return e.parse!==void 0?e.parse(s):new e(s.name,s.times,s.values,s.interpolation)}const Cache={enabled:!1,files:{},add:function(s,e){this.enabled!==!1&&(this.files[s]=e)},get:function(s){if(this.enabled!==!1)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}};class LoadingManager{constructor(e,o,a){const c=this;let d=!1,_=0,b=0,k;const j=[];this.onStart=void 0,this.onLoad=e,this.onProgress=o,this.onError=a,this.itemStart=function(et){b++,d===!1&&c.onStart!==void 0&&c.onStart(et,_,b),d=!0},this.itemEnd=function(et){_++,c.onProgress!==void 0&&c.onProgress(et,_,b),_===b&&(d=!1,c.onLoad!==void 0&&c.onLoad())},this.itemError=function(et){c.onError!==void 0&&c.onError(et)},this.resolveURL=function(et){return k?k(et):et},this.setURLModifier=function(et){return k=et,this},this.addHandler=function(et,nt){return j.push(et,nt),this},this.removeHandler=function(et){const nt=j.indexOf(et);return nt!==-1&&j.splice(nt,2),this},this.getHandler=function(et){for(let nt=0,tt=j.length;nt<tt;nt+=2){const rt=j[nt],at=j[nt+1];if(rt.global&&(rt.lastIndex=0),rt.test(et))return at}return null}}}const DefaultLoadingManager=new LoadingManager;class Loader$1{constructor(e){this.manager=e!==void 0?e:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,o){const a=this;return new Promise(function(c,d){a.load(e,c,o,d)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const loading={};class FileLoader extends Loader$1{constructor(e){super(e)}load(e,o,a,c){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const d=Cache.get(e);if(d!==void 0)return this.manager.itemStart(e),setTimeout(()=>{o&&o(d),this.manager.itemEnd(e)},0),d;if(loading[e]!==void 0){loading[e].push({onLoad:o,onProgress:a,onError:c});return}loading[e]=[],loading[e].push({onLoad:o,onProgress:a,onError:c});const _=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),b=this.mimeType,k=this.responseType;fetch(_).then(j=>{if(j.status===200||j.status===0){if(j.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||j.body===void 0||j.body.getReader===void 0)return j;const et=loading[e],nt=j.body.getReader(),tt=j.headers.get("Content-Length"),rt=tt?parseInt(tt):0,at=rt!==0;let lt=0;const ut=new ReadableStream({start(st){it();function it(){nt.read().then(({done:ft,value:ct})=>{if(ft)st.close();else{lt+=ct.byteLength;const dt=new ProgressEvent("progress",{lengthComputable:at,loaded:lt,total:rt});for(let mt=0,gt=et.length;mt<gt;mt++){const yt=et[mt];yt.onProgress&&yt.onProgress(dt)}st.enqueue(ct),it()}})}}});return new Response(ut)}else throw Error(`fetch for "${j.url}" responded with ${j.status}: ${j.statusText}`)}).then(j=>{switch(k){case"arraybuffer":return j.arrayBuffer();case"blob":return j.blob();case"document":return j.text().then(et=>new DOMParser().parseFromString(et,b));case"json":return j.json();default:if(b===void 0)return j.text();{const nt=/charset="?([^;"\s]*)"?/i.exec(b),tt=nt&&nt[1]?nt[1].toLowerCase():void 0,rt=new TextDecoder(tt);return j.arrayBuffer().then(at=>rt.decode(at))}}}).then(j=>{Cache.add(e,j);const et=loading[e];delete loading[e];for(let nt=0,tt=et.length;nt<tt;nt++){const rt=et[nt];rt.onLoad&&rt.onLoad(j)}}).catch(j=>{const et=loading[e];if(et===void 0)throw this.manager.itemError(e),j;delete loading[e];for(let nt=0,tt=et.length;nt<tt;nt++){const rt=et[nt];rt.onError&&rt.onError(j)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class AnimationLoader extends Loader$1{constructor(e){super(e)}load(e,o,a,c){const d=this,_=new FileLoader(this.manager);_.setPath(this.path),_.setRequestHeader(this.requestHeader),_.setWithCredentials(this.withCredentials),_.load(e,function(b){try{o(d.parse(JSON.parse(b)))}catch(k){c?c(k):console.error(k),d.manager.itemError(e)}},a,c)}parse(e){const o=[];for(let a=0;a<e.length;a++){const c=AnimationClip.parse(e[a]);o.push(c)}return o}}class CompressedTextureLoader extends Loader$1{constructor(e){super(e)}load(e,o,a,c){const d=this,_=[],b=new CompressedTexture,k=new FileLoader(this.manager);k.setPath(this.path),k.setResponseType("arraybuffer"),k.setRequestHeader(this.requestHeader),k.setWithCredentials(d.withCredentials);let j=0;function et(nt){k.load(e[nt],function(tt){const rt=d.parse(tt,!0);_[nt]={width:rt.width,height:rt.height,format:rt.format,mipmaps:rt.mipmaps},j+=1,j===6&&(rt.mipmapCount===1&&(b.minFilter=LinearFilter),b.image=_,b.format=rt.format,b.needsUpdate=!0,o&&o(b))},a,c)}if(Array.isArray(e))for(let nt=0,tt=e.length;nt<tt;++nt)et(nt);else k.load(e,function(nt){const tt=d.parse(nt,!0);if(tt.isCubemap){const rt=tt.mipmaps.length/tt.mipmapCount;for(let at=0;at<rt;at++){_[at]={mipmaps:[]};for(let lt=0;lt<tt.mipmapCount;lt++)_[at].mipmaps.push(tt.mipmaps[at*tt.mipmapCount+lt]),_[at].format=tt.format,_[at].width=tt.width,_[at].height=tt.height}b.image=_}else b.image.width=tt.width,b.image.height=tt.height,b.mipmaps=tt.mipmaps;tt.mipmapCount===1&&(b.minFilter=LinearFilter),b.format=tt.format,b.needsUpdate=!0,o&&o(b)},a,c);return b}}class ImageLoader extends Loader$1{constructor(e){super(e)}load(e,o,a,c){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const d=this,_=Cache.get(e);if(_!==void 0)return d.manager.itemStart(e),setTimeout(function(){o&&o(_),d.manager.itemEnd(e)},0),_;const b=createElementNS("img");function k(){et(),Cache.add(e,this),o&&o(this),d.manager.itemEnd(e)}function j(nt){et(),c&&c(nt),d.manager.itemError(e),d.manager.itemEnd(e)}function et(){b.removeEventListener("load",k,!1),b.removeEventListener("error",j,!1)}return b.addEventListener("load",k,!1),b.addEventListener("error",j,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(b.crossOrigin=this.crossOrigin),d.manager.itemStart(e),b.src=e,b}}class CubeTextureLoader extends Loader$1{constructor(e){super(e)}load(e,o,a,c){const d=new CubeTexture,_=new ImageLoader(this.manager);_.setCrossOrigin(this.crossOrigin),_.setPath(this.path);let b=0;function k(j){_.load(e[j],function(et){d.images[j]=et,b++,b===6&&(d.needsUpdate=!0,o&&o(d))},void 0,c)}for(let j=0;j<e.length;++j)k(j);return d}}class DataTextureLoader extends Loader$1{constructor(e){super(e)}load(e,o,a,c){const d=this,_=new DataTexture,b=new FileLoader(this.manager);return b.setResponseType("arraybuffer"),b.setRequestHeader(this.requestHeader),b.setPath(this.path),b.setWithCredentials(d.withCredentials),b.load(e,function(k){const j=d.parse(k);!j||(j.image!==void 0?_.image=j.image:j.data!==void 0&&(_.image.width=j.width,_.image.height=j.height,_.image.data=j.data),_.wrapS=j.wrapS!==void 0?j.wrapS:ClampToEdgeWrapping,_.wrapT=j.wrapT!==void 0?j.wrapT:ClampToEdgeWrapping,_.magFilter=j.magFilter!==void 0?j.magFilter:LinearFilter,_.minFilter=j.minFilter!==void 0?j.minFilter:LinearFilter,_.anisotropy=j.anisotropy!==void 0?j.anisotropy:1,j.encoding!==void 0&&(_.encoding=j.encoding),j.flipY!==void 0&&(_.flipY=j.flipY),j.format!==void 0&&(_.format=j.format),j.type!==void 0&&(_.type=j.type),j.mipmaps!==void 0&&(_.mipmaps=j.mipmaps,_.minFilter=LinearMipmapLinearFilter),j.mipmapCount===1&&(_.minFilter=LinearFilter),j.generateMipmaps!==void 0&&(_.generateMipmaps=j.generateMipmaps),_.needsUpdate=!0,o&&o(_,j))},a,c),_}}class TextureLoader extends Loader$1{constructor(e){super(e)}load(e,o,a,c){const d=new Texture,_=new ImageLoader(this.manager);return _.setCrossOrigin(this.crossOrigin),_.setPath(this.path),_.load(e,function(b){d.image=b,d.needsUpdate=!0,o!==void 0&&o(d)},a,c),d}}class Light extends Object3D{constructor(e,o=1){super();this.type="Light",this.color=new Color(e),this.intensity=o}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const o=super.toJSON(e);return o.object.color=this.color.getHex(),o.object.intensity=this.intensity,this.groundColor!==void 0&&(o.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(o.object.distance=this.distance),this.angle!==void 0&&(o.object.angle=this.angle),this.decay!==void 0&&(o.object.decay=this.decay),this.penumbra!==void 0&&(o.object.penumbra=this.penumbra),this.shadow!==void 0&&(o.object.shadow=this.shadow.toJSON()),o}}Light.prototype.isLight=!0;class HemisphereLight extends Light{constructor(e,o,a){super(e,a);this.type="HemisphereLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(o)}copy(e){return Light.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}HemisphereLight.prototype.isHemisphereLight=!0;const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const o=this.camera,a=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(e.matrixWorld),o.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(e.target.matrixWorld),o.lookAt(_lookTarget$1),o.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),a.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),a.multiply(o.projectionMatrix),a.multiply(o.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500));this.focus=1}updateMatrices(e){const o=this.camera,a=RAD2DEG*2*e.angle*this.focus,c=this.mapSize.width/this.mapSize.height,d=e.distance||o.far;(a!==o.fov||c!==o.aspect||d!==o.far)&&(o.fov=a,o.aspect=c,o.far=d,o.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}SpotLightShadow.prototype.isSpotLightShadow=!0;class SpotLight extends Light{constructor(e,o,a=0,c=Math.PI/3,d=0,_=1){super(e,o);this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.distance=a,this.angle=c,this.penumbra=d,this.decay=_,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}SpotLight.prototype.isSpotLight=!0;const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500));this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(e,o=0){const a=this.camera,c=this.matrix,d=e.distance||a.far;d!==a.far&&(a.far=d,a.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(e.matrixWorld),a.position.copy(_lightPositionWorld),_lookTarget.copy(a.position),_lookTarget.add(this._cubeDirections[o]),a.up.copy(this._cubeUps[o]),a.lookAt(_lookTarget),a.updateMatrixWorld(),c.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}PointLightShadow.prototype.isPointLightShadow=!0;class PointLight extends Light{constructor(e,o,a=0,c=1){super(e,o);this.type="PointLight",this.distance=a,this.decay=c,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}PointLight.prototype.isPointLight=!0;class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500))}}DirectionalLightShadow.prototype.isDirectionalLightShadow=!0;class DirectionalLight extends Light{constructor(e,o){super(e,o);this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}DirectionalLight.prototype.isDirectionalLight=!0;class AmbientLight extends Light{constructor(e,o){super(e,o);this.type="AmbientLight"}}AmbientLight.prototype.isAmbientLight=!0;class RectAreaLight extends Light{constructor(e,o,a=10,c=10){super(e,o);this.type="RectAreaLight",this.width=a,this.height=c}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const o=super.toJSON(e);return o.object.width=this.width,o.object.height=this.height,o}}RectAreaLight.prototype.isRectAreaLight=!0;class SphericalHarmonics3{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Vector3)}set(e){for(let o=0;o<9;o++)this.coefficients[o].copy(e[o]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,o){const a=e.x,c=e.y,d=e.z,_=this.coefficients;return o.copy(_[0]).multiplyScalar(.282095),o.addScaledVector(_[1],.488603*c),o.addScaledVector(_[2],.488603*d),o.addScaledVector(_[3],.488603*a),o.addScaledVector(_[4],1.092548*(a*c)),o.addScaledVector(_[5],1.092548*(c*d)),o.addScaledVector(_[6],.315392*(3*d*d-1)),o.addScaledVector(_[7],1.092548*(a*d)),o.addScaledVector(_[8],.546274*(a*a-c*c)),o}getIrradianceAt(e,o){const a=e.x,c=e.y,d=e.z,_=this.coefficients;return o.copy(_[0]).multiplyScalar(.886227),o.addScaledVector(_[1],2*.511664*c),o.addScaledVector(_[2],2*.511664*d),o.addScaledVector(_[3],2*.511664*a),o.addScaledVector(_[4],2*.429043*a*c),o.addScaledVector(_[5],2*.429043*c*d),o.addScaledVector(_[6],.743125*d*d-.247708),o.addScaledVector(_[7],2*.429043*a*d),o.addScaledVector(_[8],.429043*(a*a-c*c)),o}add(e){for(let o=0;o<9;o++)this.coefficients[o].add(e.coefficients[o]);return this}addScaledSH(e,o){for(let a=0;a<9;a++)this.coefficients[a].addScaledVector(e.coefficients[a],o);return this}scale(e){for(let o=0;o<9;o++)this.coefficients[o].multiplyScalar(e);return this}lerp(e,o){for(let a=0;a<9;a++)this.coefficients[a].lerp(e.coefficients[a],o);return this}equals(e){for(let o=0;o<9;o++)if(!this.coefficients[o].equals(e.coefficients[o]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,o=0){const a=this.coefficients;for(let c=0;c<9;c++)a[c].fromArray(e,o+c*3);return this}toArray(e=[],o=0){const a=this.coefficients;for(let c=0;c<9;c++)a[c].toArray(e,o+c*3);return e}static getBasisAt(e,o){const a=e.x,c=e.y,d=e.z;o[0]=.282095,o[1]=.488603*c,o[2]=.488603*d,o[3]=.488603*a,o[4]=1.092548*a*c,o[5]=1.092548*c*d,o[6]=.315392*(3*d*d-1),o[7]=1.092548*a*d,o[8]=.546274*(a*a-c*c)}}SphericalHarmonics3.prototype.isSphericalHarmonics3=!0;class LightProbe extends Light{constructor(e=new SphericalHarmonics3,o=1){super(void 0,o);this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const o=super.toJSON(e);return o.object.sh=this.sh.toArray(),o}}LightProbe.prototype.isLightProbe=!0;class MaterialLoader extends Loader$1{constructor(e){super(e);this.textures={}}load(e,o,a,c){const d=this,_=new FileLoader(d.manager);_.setPath(d.path),_.setRequestHeader(d.requestHeader),_.setWithCredentials(d.withCredentials),_.load(e,function(b){try{o(d.parse(JSON.parse(b)))}catch(k){c?c(k):console.error(k),d.manager.itemError(e)}},a,c)}parse(e){const o=this.textures;function a(d){return o[d]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",d),o[d]}const c=Material.fromType(e.type);if(e.uuid!==void 0&&(c.uuid=e.uuid),e.name!==void 0&&(c.name=e.name),e.color!==void 0&&c.color!==void 0&&c.color.setHex(e.color),e.roughness!==void 0&&(c.roughness=e.roughness),e.metalness!==void 0&&(c.metalness=e.metalness),e.sheen!==void 0&&(c.sheen=e.sheen),e.sheenColor!==void 0&&(c.sheenColor=new Color().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(c.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&c.emissive!==void 0&&c.emissive.setHex(e.emissive),e.specular!==void 0&&c.specular!==void 0&&c.specular.setHex(e.specular),e.specularIntensity!==void 0&&(c.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&c.specularColor!==void 0&&c.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(c.shininess=e.shininess),e.clearcoat!==void 0&&(c.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(c.clearcoatRoughness=e.clearcoatRoughness),e.transmission!==void 0&&(c.transmission=e.transmission),e.thickness!==void 0&&(c.thickness=e.thickness),e.attenuationDistance!==void 0&&(c.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&c.attenuationColor!==void 0&&c.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(c.fog=e.fog),e.flatShading!==void 0&&(c.flatShading=e.flatShading),e.blending!==void 0&&(c.blending=e.blending),e.combine!==void 0&&(c.combine=e.combine),e.side!==void 0&&(c.side=e.side),e.shadowSide!==void 0&&(c.shadowSide=e.shadowSide),e.opacity!==void 0&&(c.opacity=e.opacity),e.transparent!==void 0&&(c.transparent=e.transparent),e.alphaTest!==void 0&&(c.alphaTest=e.alphaTest),e.depthTest!==void 0&&(c.depthTest=e.depthTest),e.depthWrite!==void 0&&(c.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(c.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(c.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(c.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(c.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(c.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(c.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(c.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(c.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(c.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(c.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(c.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(c.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(c.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(c.rotation=e.rotation),e.linewidth!==1&&(c.linewidth=e.linewidth),e.dashSize!==void 0&&(c.dashSize=e.dashSize),e.gapSize!==void 0&&(c.gapSize=e.gapSize),e.scale!==void 0&&(c.scale=e.scale),e.polygonOffset!==void 0&&(c.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(c.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(c.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(c.dithering=e.dithering),e.alphaToCoverage!==void 0&&(c.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(c.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(c.visible=e.visible),e.toneMapped!==void 0&&(c.toneMapped=e.toneMapped),e.userData!==void 0&&(c.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?c.vertexColors=e.vertexColors>0:c.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const d in e.uniforms){const _=e.uniforms[d];switch(c.uniforms[d]={},_.type){case"t":c.uniforms[d].value=a(_.value);break;case"c":c.uniforms[d].value=new Color().setHex(_.value);break;case"v2":c.uniforms[d].value=new Vector2().fromArray(_.value);break;case"v3":c.uniforms[d].value=new Vector3().fromArray(_.value);break;case"v4":c.uniforms[d].value=new Vector4().fromArray(_.value);break;case"m3":c.uniforms[d].value=new Matrix3().fromArray(_.value);break;case"m4":c.uniforms[d].value=new Matrix4().fromArray(_.value);break;default:c.uniforms[d].value=_.value}}if(e.defines!==void 0&&(c.defines=e.defines),e.vertexShader!==void 0&&(c.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(c.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const d in e.extensions)c.extensions[d]=e.extensions[d];if(e.shading!==void 0&&(c.flatShading=e.shading===1),e.size!==void 0&&(c.size=e.size),e.sizeAttenuation!==void 0&&(c.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(c.map=a(e.map)),e.matcap!==void 0&&(c.matcap=a(e.matcap)),e.alphaMap!==void 0&&(c.alphaMap=a(e.alphaMap)),e.bumpMap!==void 0&&(c.bumpMap=a(e.bumpMap)),e.bumpScale!==void 0&&(c.bumpScale=e.bumpScale),e.normalMap!==void 0&&(c.normalMap=a(e.normalMap)),e.normalMapType!==void 0&&(c.normalMapType=e.normalMapType),e.normalScale!==void 0){let d=e.normalScale;Array.isArray(d)===!1&&(d=[d,d]),c.normalScale=new Vector2().fromArray(d)}return e.displacementMap!==void 0&&(c.displacementMap=a(e.displacementMap)),e.displacementScale!==void 0&&(c.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(c.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(c.roughnessMap=a(e.roughnessMap)),e.metalnessMap!==void 0&&(c.metalnessMap=a(e.metalnessMap)),e.emissiveMap!==void 0&&(c.emissiveMap=a(e.emissiveMap)),e.emissiveIntensity!==void 0&&(c.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(c.specularMap=a(e.specularMap)),e.specularIntensityMap!==void 0&&(c.specularIntensityMap=a(e.specularIntensityMap)),e.specularColorMap!==void 0&&(c.specularColorMap=a(e.specularColorMap)),e.envMap!==void 0&&(c.envMap=a(e.envMap)),e.envMapIntensity!==void 0&&(c.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(c.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(c.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(c.lightMap=a(e.lightMap)),e.lightMapIntensity!==void 0&&(c.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(c.aoMap=a(e.aoMap)),e.aoMapIntensity!==void 0&&(c.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(c.gradientMap=a(e.gradientMap)),e.clearcoatMap!==void 0&&(c.clearcoatMap=a(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(c.clearcoatRoughnessMap=a(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(c.clearcoatNormalMap=a(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(c.clearcoatNormalScale=new Vector2().fromArray(e.clearcoatNormalScale)),e.transmissionMap!==void 0&&(c.transmissionMap=a(e.transmissionMap)),e.thicknessMap!==void 0&&(c.thicknessMap=a(e.thicknessMap)),e.sheenColorMap!==void 0&&(c.sheenColorMap=a(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(c.sheenRoughnessMap=a(e.sheenRoughnessMap)),c}setTextures(e){return this.textures=e,this}}class LoaderUtils{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let o="";for(let a=0,c=e.length;a<c;a++)o+=String.fromCharCode(e[a]);try{return decodeURIComponent(escape(o))}catch{return o}}static extractUrlBase(e){const o=e.lastIndexOf("/");return o===-1?"./":e.slice(0,o+1)}static resolveURL(e,o){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(o)&&/^\//.test(e)&&(o=o.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:o+e)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super();this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}InstancedBufferGeometry.prototype.isInstancedBufferGeometry=!0;class BufferGeometryLoader extends Loader$1{constructor(e){super(e)}load(e,o,a,c){const d=this,_=new FileLoader(d.manager);_.setPath(d.path),_.setRequestHeader(d.requestHeader),_.setWithCredentials(d.withCredentials),_.load(e,function(b){try{o(d.parse(JSON.parse(b)))}catch(k){c?c(k):console.error(k),d.manager.itemError(e)}},a,c)}parse(e){const o={},a={};function c(rt,at){if(o[at]!==void 0)return o[at];const ut=rt.interleavedBuffers[at],st=d(rt,ut.buffer),it=getTypedArray(ut.type,st),ft=new InterleavedBuffer(it,ut.stride);return ft.uuid=ut.uuid,o[at]=ft,ft}function d(rt,at){if(a[at]!==void 0)return a[at];const ut=rt.arrayBuffers[at],st=new Uint32Array(ut).buffer;return a[at]=st,st}const _=e.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,b=e.data.index;if(b!==void 0){const rt=getTypedArray(b.type,b.array);_.setIndex(new BufferAttribute(rt,1))}const k=e.data.attributes;for(const rt in k){const at=k[rt];let lt;if(at.isInterleavedBufferAttribute){const ut=c(e.data,at.data);lt=new InterleavedBufferAttribute(ut,at.itemSize,at.offset,at.normalized)}else{const ut=getTypedArray(at.type,at.array),st=at.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;lt=new st(ut,at.itemSize,at.normalized)}at.name!==void 0&&(lt.name=at.name),at.usage!==void 0&&lt.setUsage(at.usage),at.updateRange!==void 0&&(lt.updateRange.offset=at.updateRange.offset,lt.updateRange.count=at.updateRange.count),_.setAttribute(rt,lt)}const j=e.data.morphAttributes;if(j)for(const rt in j){const at=j[rt],lt=[];for(let ut=0,st=at.length;ut<st;ut++){const it=at[ut];let ft;if(it.isInterleavedBufferAttribute){const ct=c(e.data,it.data);ft=new InterleavedBufferAttribute(ct,it.itemSize,it.offset,it.normalized)}else{const ct=getTypedArray(it.type,it.array);ft=new BufferAttribute(ct,it.itemSize,it.normalized)}it.name!==void 0&&(ft.name=it.name),lt.push(ft)}_.morphAttributes[rt]=lt}e.data.morphTargetsRelative&&(_.morphTargetsRelative=!0);const nt=e.data.groups||e.data.drawcalls||e.data.offsets;if(nt!==void 0)for(let rt=0,at=nt.length;rt!==at;++rt){const lt=nt[rt];_.addGroup(lt.start,lt.count,lt.materialIndex)}const tt=e.data.boundingSphere;if(tt!==void 0){const rt=new Vector3;tt.center!==void 0&&rt.fromArray(tt.center),_.boundingSphere=new Sphere(rt,tt.radius)}return e.name&&(_.name=e.name),e.userData&&(_.userData=e.userData),_}}class ObjectLoader extends Loader$1{constructor(e){super(e)}load(e,o,a,c){const d=this,_=this.path===""?LoaderUtils.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||_;const b=new FileLoader(this.manager);b.setPath(this.path),b.setRequestHeader(this.requestHeader),b.setWithCredentials(this.withCredentials),b.load(e,function(k){let j=null;try{j=JSON.parse(k)}catch(nt){c!==void 0&&c(nt),console.error("THREE:ObjectLoader: Can't parse "+e+".",nt.message);return}const et=j.metadata;if(et===void 0||et.type===void 0||et.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}d.parse(j,o)},a,c)}async loadAsync(e,o){const a=this,c=this.path===""?LoaderUtils.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||c;const d=new FileLoader(this.manager);d.setPath(this.path),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials);const _=await d.loadAsync(e,o),b=JSON.parse(_),k=b.metadata;if(k===void 0||k.type===void 0||k.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await a.parseAsync(b)}parse(e,o){const a=this.parseAnimations(e.animations),c=this.parseShapes(e.shapes),d=this.parseGeometries(e.geometries,c),_=this.parseImages(e.images,function(){o!==void 0&&o(j)}),b=this.parseTextures(e.textures,_),k=this.parseMaterials(e.materials,b),j=this.parseObject(e.object,d,k,b,a),et=this.parseSkeletons(e.skeletons,j);if(this.bindSkeletons(j,et),o!==void 0){let nt=!1;for(const tt in _)if(_[tt]instanceof HTMLImageElement){nt=!0;break}nt===!1&&o(j)}return j}async parseAsync(e){const o=this.parseAnimations(e.animations),a=this.parseShapes(e.shapes),c=this.parseGeometries(e.geometries,a),d=await this.parseImagesAsync(e.images),_=this.parseTextures(e.textures,d),b=this.parseMaterials(e.materials,_),k=this.parseObject(e.object,c,b,_,o),j=this.parseSkeletons(e.skeletons,k);return this.bindSkeletons(k,j),k}parseShapes(e){const o={};if(e!==void 0)for(let a=0,c=e.length;a<c;a++){const d=new Shape().fromJSON(e[a]);o[d.uuid]=d}return o}parseSkeletons(e,o){const a={},c={};if(o.traverse(function(d){d.isBone&&(c[d.uuid]=d)}),e!==void 0)for(let d=0,_=e.length;d<_;d++){const b=new Skeleton().fromJSON(e[d],c);a[b.uuid]=b}return a}parseGeometries(e,o){const a={};if(e!==void 0){const c=new BufferGeometryLoader;for(let d=0,_=e.length;d<_;d++){let b;const k=e[d];switch(k.type){case"BufferGeometry":case"InstancedBufferGeometry":b=c.parse(k);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:k.type in Geometries?b=Geometries[k.type].fromJSON(k,o):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${k.type}"`)}b.uuid=k.uuid,k.name!==void 0&&(b.name=k.name),b.isBufferGeometry===!0&&k.userData!==void 0&&(b.userData=k.userData),a[k.uuid]=b}}return a}parseMaterials(e,o){const a={},c={};if(e!==void 0){const d=new MaterialLoader;d.setTextures(o);for(let _=0,b=e.length;_<b;_++){const k=e[_];if(k.type==="MultiMaterial"){const j=[];for(let et=0;et<k.materials.length;et++){const nt=k.materials[et];a[nt.uuid]===void 0&&(a[nt.uuid]=d.parse(nt)),j.push(a[nt.uuid])}c[k.uuid]=j}else a[k.uuid]===void 0&&(a[k.uuid]=d.parse(k)),c[k.uuid]=a[k.uuid]}}return c}parseAnimations(e){const o={};if(e!==void 0)for(let a=0;a<e.length;a++){const c=e[a],d=AnimationClip.parse(c);o[d.uuid]=d}return o}parseImages(e,o){const a=this,c={};let d;function _(k){return a.manager.itemStart(k),d.load(k,function(){a.manager.itemEnd(k)},void 0,function(){a.manager.itemError(k),a.manager.itemEnd(k)})}function b(k){if(typeof k=="string"){const j=k,et=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(j)?j:a.resourcePath+j;return _(et)}else return k.data?{data:getTypedArray(k.type,k.data),width:k.width,height:k.height}:null}if(e!==void 0&&e.length>0){const k=new LoadingManager(o);d=new ImageLoader(k),d.setCrossOrigin(this.crossOrigin);for(let j=0,et=e.length;j<et;j++){const nt=e[j],tt=nt.url;if(Array.isArray(tt)){const rt=[];for(let at=0,lt=tt.length;at<lt;at++){const ut=tt[at],st=b(ut);st!==null&&(st instanceof HTMLImageElement?rt.push(st):rt.push(new DataTexture(st.data,st.width,st.height)))}c[nt.uuid]=new Source(rt)}else{const rt=b(nt.url);c[nt.uuid]=new Source(rt)}}}return c}async parseImagesAsync(e){const o=this,a={};let c;async function d(_){if(typeof _=="string"){const b=_,k=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(b)?b:o.resourcePath+b;return await c.loadAsync(k)}else return _.data?{data:getTypedArray(_.type,_.data),width:_.width,height:_.height}:null}if(e!==void 0&&e.length>0){c=new ImageLoader(this.manager),c.setCrossOrigin(this.crossOrigin);for(let _=0,b=e.length;_<b;_++){const k=e[_],j=k.url;if(Array.isArray(j)){const et=[];for(let nt=0,tt=j.length;nt<tt;nt++){const rt=j[nt],at=await d(rt);at!==null&&(at instanceof HTMLImageElement?et.push(at):et.push(new DataTexture(at.data,at.width,at.height)))}a[k.uuid]=new Source(et)}else{const et=await d(k.url);a[k.uuid]=new Source(et)}}}return a}parseTextures(e,o){function a(d,_){return typeof d=="number"?d:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",d),_[d])}const c={};if(e!==void 0)for(let d=0,_=e.length;d<_;d++){const b=e[d];b.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',b.uuid),o[b.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",b.image);const k=o[b.image],j=k.data;let et;Array.isArray(j)?(et=new CubeTexture,j.length===6&&(et.needsUpdate=!0)):(j&&j.data?et=new DataTexture:et=new Texture,j&&(et.needsUpdate=!0)),et.source=k,et.uuid=b.uuid,b.name!==void 0&&(et.name=b.name),b.mapping!==void 0&&(et.mapping=a(b.mapping,TEXTURE_MAPPING)),b.offset!==void 0&&et.offset.fromArray(b.offset),b.repeat!==void 0&&et.repeat.fromArray(b.repeat),b.center!==void 0&&et.center.fromArray(b.center),b.rotation!==void 0&&(et.rotation=b.rotation),b.wrap!==void 0&&(et.wrapS=a(b.wrap[0],TEXTURE_WRAPPING),et.wrapT=a(b.wrap[1],TEXTURE_WRAPPING)),b.format!==void 0&&(et.format=b.format),b.type!==void 0&&(et.type=b.type),b.encoding!==void 0&&(et.encoding=b.encoding),b.minFilter!==void 0&&(et.minFilter=a(b.minFilter,TEXTURE_FILTER)),b.magFilter!==void 0&&(et.magFilter=a(b.magFilter,TEXTURE_FILTER)),b.anisotropy!==void 0&&(et.anisotropy=b.anisotropy),b.flipY!==void 0&&(et.flipY=b.flipY),b.premultiplyAlpha!==void 0&&(et.premultiplyAlpha=b.premultiplyAlpha),b.unpackAlignment!==void 0&&(et.unpackAlignment=b.unpackAlignment),b.userData!==void 0&&(et.userData=b.userData),c[b.uuid]=et}return c}parseObject(e,o,a,c,d){let _;function b(tt){return o[tt]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",tt),o[tt]}function k(tt){if(tt!==void 0){if(Array.isArray(tt)){const rt=[];for(let at=0,lt=tt.length;at<lt;at++){const ut=tt[at];a[ut]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",ut),rt.push(a[ut])}return rt}return a[tt]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",tt),a[tt]}}function j(tt){return c[tt]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",tt),c[tt]}let et,nt;switch(e.type){case"Scene":_=new Scene,e.background!==void 0&&(Number.isInteger(e.background)?_.background=new Color(e.background):_.background=j(e.background)),e.environment!==void 0&&(_.environment=j(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?_.fog=new Fog(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(_.fog=new FogExp2(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":_=new PerspectiveCamera(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(_.focus=e.focus),e.zoom!==void 0&&(_.zoom=e.zoom),e.filmGauge!==void 0&&(_.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(_.filmOffset=e.filmOffset),e.view!==void 0&&(_.view=Object.assign({},e.view));break;case"OrthographicCamera":_=new OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(_.zoom=e.zoom),e.view!==void 0&&(_.view=Object.assign({},e.view));break;case"AmbientLight":_=new AmbientLight(e.color,e.intensity);break;case"DirectionalLight":_=new DirectionalLight(e.color,e.intensity);break;case"PointLight":_=new PointLight(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":_=new RectAreaLight(e.color,e.intensity,e.width,e.height);break;case"SpotLight":_=new SpotLight(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":_=new HemisphereLight(e.color,e.groundColor,e.intensity);break;case"LightProbe":_=new LightProbe().fromJSON(e);break;case"SkinnedMesh":et=b(e.geometry),nt=k(e.material),_=new SkinnedMesh(et,nt),e.bindMode!==void 0&&(_.bindMode=e.bindMode),e.bindMatrix!==void 0&&_.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(_.skeleton=e.skeleton);break;case"Mesh":et=b(e.geometry),nt=k(e.material),_=new Mesh(et,nt);break;case"InstancedMesh":et=b(e.geometry),nt=k(e.material);const tt=e.count,rt=e.instanceMatrix,at=e.instanceColor;_=new InstancedMesh(et,nt,tt),_.instanceMatrix=new InstancedBufferAttribute(new Float32Array(rt.array),16),at!==void 0&&(_.instanceColor=new InstancedBufferAttribute(new Float32Array(at.array),at.itemSize));break;case"LOD":_=new LOD;break;case"Line":_=new Line(b(e.geometry),k(e.material));break;case"LineLoop":_=new LineLoop(b(e.geometry),k(e.material));break;case"LineSegments":_=new LineSegments(b(e.geometry),k(e.material));break;case"PointCloud":case"Points":_=new Points(b(e.geometry),k(e.material));break;case"Sprite":_=new Sprite(k(e.material));break;case"Group":_=new Group;break;case"Bone":_=new Bone;break;default:_=new Object3D}if(_.uuid=e.uuid,e.name!==void 0&&(_.name=e.name),e.matrix!==void 0?(_.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(_.matrixAutoUpdate=e.matrixAutoUpdate),_.matrixAutoUpdate&&_.matrix.decompose(_.position,_.quaternion,_.scale)):(e.position!==void 0&&_.position.fromArray(e.position),e.rotation!==void 0&&_.rotation.fromArray(e.rotation),e.quaternion!==void 0&&_.quaternion.fromArray(e.quaternion),e.scale!==void 0&&_.scale.fromArray(e.scale)),e.castShadow!==void 0&&(_.castShadow=e.castShadow),e.receiveShadow!==void 0&&(_.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(_.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(_.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(_.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&_.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(_.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(_.visible=e.visible),e.frustumCulled!==void 0&&(_.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(_.renderOrder=e.renderOrder),e.userData!==void 0&&(_.userData=e.userData),e.layers!==void 0&&(_.layers.mask=e.layers),e.children!==void 0){const tt=e.children;for(let rt=0;rt<tt.length;rt++)_.add(this.parseObject(tt[rt],o,a,c,d))}if(e.animations!==void 0){const tt=e.animations;for(let rt=0;rt<tt.length;rt++){const at=tt[rt];_.animations.push(d[at])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(_.autoUpdate=e.autoUpdate);const tt=e.levels;for(let rt=0;rt<tt.length;rt++){const at=tt[rt],lt=_.getObjectByProperty("uuid",at.object);lt!==void 0&&_.addLevel(lt,at.distance)}}return _}bindSkeletons(e,o){Object.keys(o).length!==0&&e.traverse(function(a){if(a.isSkinnedMesh===!0&&a.skeleton!==void 0){const c=o[a.skeleton];c===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",a.skeleton):a.bind(c,a.bindMatrix)}})}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping,CubeUVRefractionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};class ImageBitmapLoader extends Loader$1{constructor(e){super(e);typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,o,a,c){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const d=this,_=Cache.get(e);if(_!==void 0)return d.manager.itemStart(e),setTimeout(function(){o&&o(_),d.manager.itemEnd(e)},0),_;const b={};b.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",b.headers=this.requestHeader,fetch(e,b).then(function(k){return k.blob()}).then(function(k){return createImageBitmap(k,Object.assign(d.options,{colorSpaceConversion:"none"}))}).then(function(k){Cache.add(e,k),o&&o(k),d.manager.itemEnd(e)}).catch(function(k){c&&c(k),d.manager.itemError(e),d.manager.itemEnd(e)}),d.manager.itemStart(e)}}ImageBitmapLoader.prototype.isImageBitmapLoader=!0;let _context;const AudioContext={getContext:function(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context},setContext:function(s){_context=s}};class AudioLoader extends Loader$1{constructor(e){super(e)}load(e,o,a,c){const d=this,_=new FileLoader(this.manager);_.setResponseType("arraybuffer"),_.setPath(this.path),_.setRequestHeader(this.requestHeader),_.setWithCredentials(this.withCredentials),_.load(e,function(b){try{const k=b.slice(0);AudioContext.getContext().decodeAudioData(k,function(et){o(et)})}catch(k){c?c(k):console.error(k),d.manager.itemError(e)}},a,c)}}class HemisphereLightProbe extends LightProbe{constructor(e,o,a=1){super(void 0,a);const c=new Color().set(e),d=new Color().set(o),_=new Vector3(c.r,c.g,c.b),b=new Vector3(d.r,d.g,d.b),k=Math.sqrt(Math.PI),j=k*Math.sqrt(.75);this.sh.coefficients[0].copy(_).add(b).multiplyScalar(k),this.sh.coefficients[1].copy(_).sub(b).multiplyScalar(j)}}HemisphereLightProbe.prototype.isHemisphereLightProbe=!0;class AmbientLightProbe extends LightProbe{constructor(e,o=1){super(void 0,o);const a=new Color().set(e);this.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI))}}AmbientLightProbe.prototype.isAmbientLightProbe=!0;const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const o=this._cache;if(o.focus!==e.focus||o.fov!==e.fov||o.aspect!==e.aspect*this.aspect||o.near!==e.near||o.far!==e.far||o.zoom!==e.zoom||o.eyeSep!==this.eyeSep){o.focus=e.focus,o.fov=e.fov,o.aspect=e.aspect*this.aspect,o.near=e.near,o.far=e.far,o.zoom=e.zoom,o.eyeSep=this.eyeSep,_projectionMatrix.copy(e.projectionMatrix);const c=o.eyeSep/2,d=c*o.near/o.focus,_=o.near*Math.tan(DEG2RAD*o.fov*.5)/o.zoom;let b,k;_eyeLeft.elements[12]=-c,_eyeRight.elements[12]=c,b=-_*o.aspect+d,k=_*o.aspect+d,_projectionMatrix.elements[0]=2*o.near/(k-b),_projectionMatrix.elements[8]=(k+b)/(k-b),this.cameraL.projectionMatrix.copy(_projectionMatrix),b=-_*o.aspect-d,k=_*o.aspect-d,_projectionMatrix.elements[0]=2*o.near/(k-b),_projectionMatrix.elements[8]=(k+b)/(k-b),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(_eyeRight)}}class Clock{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now$1(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const o=now$1();e=(o-this.oldTime)/1e3,this.oldTime=o,this.elapsedTime+=e}return e}}function now$1(){return(typeof performance=="undefined"?Date:performance).now()}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_orientation$1=new Vector3;class AudioListener extends Object3D{constructor(){super();this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const o=this.context.listener,a=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_orientation$1.set(0,0,-1).applyQuaternion(_quaternion$1),o.positionX){const c=this.context.currentTime+this.timeDelta;o.positionX.linearRampToValueAtTime(_position$1.x,c),o.positionY.linearRampToValueAtTime(_position$1.y,c),o.positionZ.linearRampToValueAtTime(_position$1.z,c),o.forwardX.linearRampToValueAtTime(_orientation$1.x,c),o.forwardY.linearRampToValueAtTime(_orientation$1.y,c),o.forwardZ.linearRampToValueAtTime(_orientation$1.z,c),o.upX.linearRampToValueAtTime(a.x,c),o.upY.linearRampToValueAtTime(a.y,c),o.upZ.linearRampToValueAtTime(a.z,c)}else o.setPosition(_position$1.x,_position$1.y,_position$1.z),o.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z,a.x,a.y,a.z)}}class Audio extends Object3D{constructor(e){super();this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const o=this.context.createBufferSource();return o.buffer=this.buffer,o.loop=this.loop,o.loopStart=this.loopStart,o.loopEnd=this.loopEnd,o.onended=this.onEnded.bind(this),o.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=o,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,o=this.filters.length;e<o;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,o=this.filters.length;e<o;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const _position=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio{constructor(e){super(e);this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,o,a){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=o,this.panner.coneOuterGain=a,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const o=this.panner;if(o.positionX){const a=this.context.currentTime+this.listener.timeDelta;o.positionX.linearRampToValueAtTime(_position.x,a),o.positionY.linearRampToValueAtTime(_position.y,a),o.positionZ.linearRampToValueAtTime(_position.z,a),o.orientationX.linearRampToValueAtTime(_orientation.x,a),o.orientationY.linearRampToValueAtTime(_orientation.y,a),o.orientationZ.linearRampToValueAtTime(_orientation.z,a)}else o.setPosition(_position.x,_position.y,_position.z),o.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor(e,o=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=o,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const o=this.getFrequencyData();for(let a=0;a<o.length;a++)e+=o[a];return e/o.length}}class PropertyMixer{constructor(e,o,a){this.binding=e,this.valueSize=a;let c,d,_;switch(o){case"quaternion":c=this._slerp,d=this._slerpAdditive,_=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(a*6),this._workIndex=5;break;case"string":case"bool":c=this._select,d=this._select,_=this._setAdditiveIdentityOther,this.buffer=new Array(a*5);break;default:c=this._lerp,d=this._lerpAdditive,_=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(a*5)}this._mixBufferRegion=c,this._mixBufferRegionAdditive=d,this._setIdentity=_,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,o){const a=this.buffer,c=this.valueSize,d=e*c+c;let _=this.cumulativeWeight;if(_===0){for(let b=0;b!==c;++b)a[d+b]=a[b];_=o}else{_+=o;const b=o/_;this._mixBufferRegion(a,d,0,b,c)}this.cumulativeWeight=_}accumulateAdditive(e){const o=this.buffer,a=this.valueSize,c=a*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(o,c,0,e,a),this.cumulativeWeightAdditive+=e}apply(e){const o=this.valueSize,a=this.buffer,c=e*o+o,d=this.cumulativeWeight,_=this.cumulativeWeightAdditive,b=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,d<1){const k=o*this._origIndex;this._mixBufferRegion(a,c,k,1-d,o)}_>0&&this._mixBufferRegionAdditive(a,c,this._addIndex*o,1,o);for(let k=o,j=o+o;k!==j;++k)if(a[k]!==a[k+o]){b.setValue(a,c);break}}saveOriginalState(){const e=this.binding,o=this.buffer,a=this.valueSize,c=a*this._origIndex;e.getValue(o,c);for(let d=a,_=c;d!==_;++d)o[d]=o[c+d%a];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,o=e+this.valueSize;for(let a=e;a<o;a++)this.buffer[a]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,o=this._addIndex*this.valueSize;for(let a=0;a<this.valueSize;a++)this.buffer[o+a]=this.buffer[e+a]}_select(e,o,a,c,d){if(c>=.5)for(let _=0;_!==d;++_)e[o+_]=e[a+_]}_slerp(e,o,a,c){Quaternion.slerpFlat(e,o,e,o,e,a,c)}_slerpAdditive(e,o,a,c,d){const _=this._workIndex*d;Quaternion.multiplyQuaternionsFlat(e,_,e,o,e,a),Quaternion.slerpFlat(e,o,e,o,e,_,c)}_lerp(e,o,a,c,d){const _=1-c;for(let b=0;b!==d;++b){const k=o+b;e[k]=e[k]*_+e[a+b]*c}}_lerpAdditive(e,o,a,c,d){for(let _=0;_!==d;++_){const b=o+_;e[b]=e[b]+e[a+_]*c}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones"];class Composite{constructor(e,o,a){const c=a||PropertyBinding.parseTrackName(o);this._targetGroup=e,this._bindings=e.subscribe_(o,c)}getValue(e,o){this.bind();const a=this._targetGroup.nCachedObjects_,c=this._bindings[a];c!==void 0&&c.getValue(e,o)}setValue(e,o){const a=this._bindings;for(let c=this._targetGroup.nCachedObjects_,d=a.length;c!==d;++c)a[c].setValue(e,o)}bind(){const e=this._bindings;for(let o=this._targetGroup.nCachedObjects_,a=e.length;o!==a;++o)e[o].bind()}unbind(){const e=this._bindings;for(let o=this._targetGroup.nCachedObjects_,a=e.length;o!==a;++o)e[o].unbind()}}class PropertyBinding{constructor(e,o,a){this.path=o,this.parsedPath=a||PropertyBinding.parseTrackName(o),this.node=PropertyBinding.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,o,a){return e&&e.isAnimationObjectGroup?new PropertyBinding.Composite(e,o,a):new PropertyBinding(e,o,a)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(e){const o=_trackRe.exec(e);if(o===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const a={nodeName:o[2],objectName:o[3],objectIndex:o[4],propertyName:o[5],propertyIndex:o[6]},c=a.nodeName&&a.nodeName.lastIndexOf(".");if(c!==void 0&&c!==-1){const d=a.nodeName.substring(c+1);_supportedObjectNames.indexOf(d)!==-1&&(a.nodeName=a.nodeName.substring(0,c),a.objectName=d)}if(a.propertyName===null||a.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return a}static findNode(e,o){if(o===void 0||o===""||o==="."||o===-1||o===e.name||o===e.uuid)return e;if(e.skeleton){const a=e.skeleton.getBoneByName(o);if(a!==void 0)return a}if(e.children){const a=function(d){for(let _=0;_<d.length;_++){const b=d[_];if(b.name===o||b.uuid===o)return b;const k=a(b.children);if(k)return k}return null},c=a(e.children);if(c)return c}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,o){e[o]=this.targetObject[this.propertyName]}_getValue_array(e,o){const a=this.resolvedProperty;for(let c=0,d=a.length;c!==d;++c)e[o++]=a[c]}_getValue_arrayElement(e,o){e[o]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,o){this.resolvedProperty.toArray(e,o)}_setValue_direct(e,o){this.targetObject[this.propertyName]=e[o]}_setValue_direct_setNeedsUpdate(e,o){this.targetObject[this.propertyName]=e[o],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,o){this.targetObject[this.propertyName]=e[o],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,o){const a=this.resolvedProperty;for(let c=0,d=a.length;c!==d;++c)a[c]=e[o++]}_setValue_array_setNeedsUpdate(e,o){const a=this.resolvedProperty;for(let c=0,d=a.length;c!==d;++c)a[c]=e[o++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,o){const a=this.resolvedProperty;for(let c=0,d=a.length;c!==d;++c)a[c]=e[o++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,o){this.resolvedProperty[this.propertyIndex]=e[o]}_setValue_arrayElement_setNeedsUpdate(e,o){this.resolvedProperty[this.propertyIndex]=e[o],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,o){this.resolvedProperty[this.propertyIndex]=e[o],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,o){this.resolvedProperty.fromArray(e,o)}_setValue_fromArray_setNeedsUpdate(e,o){this.resolvedProperty.fromArray(e,o),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,o){this.resolvedProperty.fromArray(e,o),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,o){this.bind(),this.getValue(e,o)}_setValue_unbound(e,o){this.bind(),this.setValue(e,o)}bind(){let e=this.node;const o=this.parsedPath,a=o.objectName,c=o.propertyName;let d=o.propertyIndex;if(e||(e=PropertyBinding.findNode(this.rootNode,o.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(a){let j=o.objectIndex;switch(a){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let et=0;et<e.length;et++)if(e[et].name===j){j=et;break}break;default:if(e[a]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[a]}if(j!==void 0){if(e[j]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[j]}}const _=e[c];if(_===void 0){const j=o.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+j+"."+c+" but it wasn't found.",e);return}let b=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?b=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(b=this.Versioning.MatrixWorldNeedsUpdate);let k=this.BindingType.Direct;if(d!==void 0){if(c==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[d]!==void 0&&(d=e.morphTargetDictionary[d])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}k=this.BindingType.ArrayElement,this.resolvedProperty=_,this.propertyIndex=d}else _.fromArray!==void 0&&_.toArray!==void 0?(k=this.BindingType.HasFromToArray,this.resolvedProperty=_):Array.isArray(_)?(k=this.BindingType.EntireArray,this.resolvedProperty=_):this.propertyName=c;this.getValue=this.GetterByBindingType[k],this.setValue=this.SetterByBindingTypeAndVersioning[k][b]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.uuid=generateUUID$1(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let a=0,c=arguments.length;a!==c;++a)e[arguments[a].uuid]=a;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const o=this;this.stats={objects:{get total(){return o._objects.length},get inUse(){return this.total-o.nCachedObjects_}},get bindingsPerObject(){return o._bindings.length}}}add(){const e=this._objects,o=this._indicesByUUID,a=this._paths,c=this._parsedPaths,d=this._bindings,_=d.length;let b,k=e.length,j=this.nCachedObjects_;for(let et=0,nt=arguments.length;et!==nt;++et){const tt=arguments[et],rt=tt.uuid;let at=o[rt];if(at===void 0){at=k++,o[rt]=at,e.push(tt);for(let lt=0,ut=_;lt!==ut;++lt)d[lt].push(new PropertyBinding(tt,a[lt],c[lt]))}else if(at<j){b=e[at];const lt=--j,ut=e[lt];o[ut.uuid]=at,e[at]=ut,o[rt]=lt,e[lt]=tt;for(let st=0,it=_;st!==it;++st){const ft=d[st],ct=ft[lt];let dt=ft[at];ft[at]=ct,dt===void 0&&(dt=new PropertyBinding(tt,a[st],c[st])),ft[lt]=dt}}else e[at]!==b&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=j}remove(){const e=this._objects,o=this._indicesByUUID,a=this._bindings,c=a.length;let d=this.nCachedObjects_;for(let _=0,b=arguments.length;_!==b;++_){const k=arguments[_],j=k.uuid,et=o[j];if(et!==void 0&&et>=d){const nt=d++,tt=e[nt];o[tt.uuid]=et,e[et]=tt,o[j]=nt,e[nt]=k;for(let rt=0,at=c;rt!==at;++rt){const lt=a[rt],ut=lt[nt],st=lt[et];lt[et]=ut,lt[nt]=st}}}this.nCachedObjects_=d}uncache(){const e=this._objects,o=this._indicesByUUID,a=this._bindings,c=a.length;let d=this.nCachedObjects_,_=e.length;for(let b=0,k=arguments.length;b!==k;++b){const j=arguments[b],et=j.uuid,nt=o[et];if(nt!==void 0)if(delete o[et],nt<d){const tt=--d,rt=e[tt],at=--_,lt=e[at];o[rt.uuid]=nt,e[nt]=rt,o[lt.uuid]=tt,e[tt]=lt,e.pop();for(let ut=0,st=c;ut!==st;++ut){const it=a[ut],ft=it[tt],ct=it[at];it[nt]=ft,it[tt]=ct,it.pop()}}else{const tt=--_,rt=e[tt];tt>0&&(o[rt.uuid]=nt),e[nt]=rt,e.pop();for(let at=0,lt=c;at!==lt;++at){const ut=a[at];ut[nt]=ut[tt],ut.pop()}}}this.nCachedObjects_=d}subscribe_(e,o){const a=this._bindingsIndicesByPath;let c=a[e];const d=this._bindings;if(c!==void 0)return d[c];const _=this._paths,b=this._parsedPaths,k=this._objects,j=k.length,et=this.nCachedObjects_,nt=new Array(j);c=d.length,a[e]=c,_.push(e),b.push(o),d.push(nt);for(let tt=et,rt=k.length;tt!==rt;++tt){const at=k[tt];nt[tt]=new PropertyBinding(at,e,o)}return nt}unsubscribe_(e){const o=this._bindingsIndicesByPath,a=o[e];if(a!==void 0){const c=this._paths,d=this._parsedPaths,_=this._bindings,b=_.length-1,k=_[b],j=e[b];o[j]=a,_[a]=k,_.pop(),d[a]=d[b],d.pop(),c[a]=c[b],c.pop()}}}AnimationObjectGroup.prototype.isAnimationObjectGroup=!0;class AnimationAction{constructor(e,o,a=null,c=o.blendMode){this._mixer=e,this._clip=o,this._localRoot=a,this.blendMode=c;const d=o.tracks,_=d.length,b=new Array(_),k={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let j=0;j!==_;++j){const et=d[j].createInterpolant(null);b[j]=et,et.settings=k}this._interpolantSettings=k,this._interpolants=b,this._propertyBindings=new Array(_),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,o){return this.loop=e,this.repetitions=o,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,o,a){if(e.fadeOut(o),this.fadeIn(o),a){const c=this._clip.duration,d=e._clip.duration,_=d/c,b=c/d;e.warp(1,_,o),this.warp(b,1,o)}return this}crossFadeTo(e,o,a){return e.crossFadeFrom(this,o,a)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,o,a){const c=this._mixer,d=c.time,_=this.timeScale;let b=this._timeScaleInterpolant;b===null&&(b=c._lendControlInterpolant(),this._timeScaleInterpolant=b);const k=b.parameterPositions,j=b.sampleValues;return k[0]=d,k[1]=d+a,j[0]=e/_,j[1]=o/_,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,o,a,c){if(!this.enabled){this._updateWeight(e);return}const d=this._startTime;if(d!==null){const k=(e-d)*a;if(k<0||a===0)return;this._startTime=null,o=a*k}o*=this._updateTimeScale(e);const _=this._updateTime(o),b=this._updateWeight(e);if(b>0){const k=this._interpolants,j=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let et=0,nt=k.length;et!==nt;++et)k[et].evaluate(_),j[et].accumulateAdditive(b);break;case NormalAnimationBlendMode:default:for(let et=0,nt=k.length;et!==nt;++et)k[et].evaluate(_),j[et].accumulate(c,b)}}}_updateWeight(e){let o=0;if(this.enabled){o=this.weight;const a=this._weightInterpolant;if(a!==null){const c=a.evaluate(e)[0];o*=c,e>a.parameterPositions[1]&&(this.stopFading(),c===0&&(this.enabled=!1))}}return this._effectiveWeight=o,o}_updateTimeScale(e){let o=0;if(!this.paused){o=this.timeScale;const a=this._timeScaleInterpolant;a!==null&&(o*=a.evaluate(e)[0],e>a.parameterPositions[1]&&(this.stopWarping(),o===0?this.paused=!0:this.timeScale=o))}return this._effectiveTimeScale=o,o}_updateTime(e){const o=this._clip.duration,a=this.loop;let c=this.time+e,d=this._loopCount;const _=a===LoopPingPong;if(e===0)return d===-1?c:_&&(d&1)===1?o-c:c;if(a===LoopOnce){d===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(c>=o)c=o;else if(c<0)c=0;else{this.time=c;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=c,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(d===-1&&(e>=0?(d=0,this._setEndings(!0,this.repetitions===0,_)):this._setEndings(this.repetitions===0,!0,_)),c>=o||c<0){const b=Math.floor(c/o);c-=o*b,d+=Math.abs(b);const k=this.repetitions-d;if(k<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,c=e>0?o:0,this.time=c,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(k===1){const j=e<0;this._setEndings(j,!j,_)}else this._setEndings(!1,!1,_);this._loopCount=d,this.time=c,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:b})}}else this.time=c;if(_&&(d&1)===1)return o-c}return c}_setEndings(e,o,a){const c=this._interpolantSettings;a?(c.endingStart=ZeroSlopeEnding,c.endingEnd=ZeroSlopeEnding):(e?c.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:c.endingStart=WrapAroundEnding,o?c.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:c.endingEnd=WrapAroundEnding)}_scheduleFading(e,o,a){const c=this._mixer,d=c.time;let _=this._weightInterpolant;_===null&&(_=c._lendControlInterpolant(),this._weightInterpolant=_);const b=_.parameterPositions,k=_.sampleValues;return b[0]=d,k[0]=o,b[1]=d+e,k[1]=a,this}}class AnimationMixer extends EventDispatcher{constructor(e){super();this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,o){const a=e._localRoot||this._root,c=e._clip.tracks,d=c.length,_=e._propertyBindings,b=e._interpolants,k=a.uuid,j=this._bindingsByRootAndName;let et=j[k];et===void 0&&(et={},j[k]=et);for(let nt=0;nt!==d;++nt){const tt=c[nt],rt=tt.name;let at=et[rt];if(at!==void 0)++at.referenceCount,_[nt]=at;else{if(at=_[nt],at!==void 0){at._cacheIndex===null&&(++at.referenceCount,this._addInactiveBinding(at,k,rt));continue}const lt=o&&o._propertyBindings[nt].binding.parsedPath;at=new PropertyMixer(PropertyBinding.create(a,rt,lt),tt.ValueTypeName,tt.getValueSize()),++at.referenceCount,this._addInactiveBinding(at,k,rt),_[nt]=at}b[nt].resultBuffer=at.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const a=(e._localRoot||this._root).uuid,c=e._clip.uuid,d=this._actionsByClip[c];this._bindAction(e,d&&d.knownActions[0]),this._addInactiveAction(e,c,a)}const o=e._propertyBindings;for(let a=0,c=o.length;a!==c;++a){const d=o[a];d.useCount++===0&&(this._lendBinding(d),d.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const o=e._propertyBindings;for(let a=0,c=o.length;a!==c;++a){const d=o[a];--d.useCount===0&&(d.restoreOriginalState(),this._takeBackBinding(d))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const o=e._cacheIndex;return o!==null&&o<this._nActiveActions}_addInactiveAction(e,o,a){const c=this._actions,d=this._actionsByClip;let _=d[o];if(_===void 0)_={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,d[o]=_;else{const b=_.knownActions;e._byClipCacheIndex=b.length,b.push(e)}e._cacheIndex=c.length,c.push(e),_.actionByRoot[a]=e}_removeInactiveAction(e){const o=this._actions,a=o[o.length-1],c=e._cacheIndex;a._cacheIndex=c,o[c]=a,o.pop(),e._cacheIndex=null;const d=e._clip.uuid,_=this._actionsByClip,b=_[d],k=b.knownActions,j=k[k.length-1],et=e._byClipCacheIndex;j._byClipCacheIndex=et,k[et]=j,k.pop(),e._byClipCacheIndex=null;const nt=b.actionByRoot,tt=(e._localRoot||this._root).uuid;delete nt[tt],k.length===0&&delete _[d],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const o=e._propertyBindings;for(let a=0,c=o.length;a!==c;++a){const d=o[a];--d.referenceCount===0&&this._removeInactiveBinding(d)}}_lendAction(e){const o=this._actions,a=e._cacheIndex,c=this._nActiveActions++,d=o[c];e._cacheIndex=c,o[c]=e,d._cacheIndex=a,o[a]=d}_takeBackAction(e){const o=this._actions,a=e._cacheIndex,c=--this._nActiveActions,d=o[c];e._cacheIndex=c,o[c]=e,d._cacheIndex=a,o[a]=d}_addInactiveBinding(e,o,a){const c=this._bindingsByRootAndName,d=this._bindings;let _=c[o];_===void 0&&(_={},c[o]=_),_[a]=e,e._cacheIndex=d.length,d.push(e)}_removeInactiveBinding(e){const o=this._bindings,a=e.binding,c=a.rootNode.uuid,d=a.path,_=this._bindingsByRootAndName,b=_[c],k=o[o.length-1],j=e._cacheIndex;k._cacheIndex=j,o[j]=k,o.pop(),delete b[d],Object.keys(b).length===0&&delete _[c]}_lendBinding(e){const o=this._bindings,a=e._cacheIndex,c=this._nActiveBindings++,d=o[c];e._cacheIndex=c,o[c]=e,d._cacheIndex=a,o[a]=d}_takeBackBinding(e){const o=this._bindings,a=e._cacheIndex,c=--this._nActiveBindings,d=o[c];e._cacheIndex=c,o[c]=e,d._cacheIndex=a,o[a]=d}_lendControlInterpolant(){const e=this._controlInterpolants,o=this._nActiveControlInterpolants++;let a=e[o];return a===void 0&&(a=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),a.__cacheIndex=o,e[o]=a),a}_takeBackControlInterpolant(e){const o=this._controlInterpolants,a=e.__cacheIndex,c=--this._nActiveControlInterpolants,d=o[c];e.__cacheIndex=c,o[c]=e,d.__cacheIndex=a,o[a]=d}clipAction(e,o,a){const c=o||this._root,d=c.uuid;let _=typeof e=="string"?AnimationClip.findByName(c,e):e;const b=_!==null?_.uuid:e,k=this._actionsByClip[b];let j=null;if(a===void 0&&(_!==null?a=_.blendMode:a=NormalAnimationBlendMode),k!==void 0){const nt=k.actionByRoot[d];if(nt!==void 0&&nt.blendMode===a)return nt;j=k.knownActions[0],_===null&&(_=j._clip)}if(_===null)return null;const et=new AnimationAction(this,_,o,a);return this._bindAction(et,j),this._addInactiveAction(et,b,d),et}existingAction(e,o){const a=o||this._root,c=a.uuid,d=typeof e=="string"?AnimationClip.findByName(a,e):e,_=d?d.uuid:e,b=this._actionsByClip[_];return b!==void 0&&b.actionByRoot[c]||null}stopAllAction(){const e=this._actions,o=this._nActiveActions;for(let a=o-1;a>=0;--a)e[a].stop();return this}update(e){e*=this.timeScale;const o=this._actions,a=this._nActiveActions,c=this.time+=e,d=Math.sign(e),_=this._accuIndex^=1;for(let j=0;j!==a;++j)o[j]._update(c,e,d,_);const b=this._bindings,k=this._nActiveBindings;for(let j=0;j!==k;++j)b[j].apply(_);return this}setTime(e){this.time=0;for(let o=0;o<this._actions.length;o++)this._actions[o].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const o=this._actions,a=e.uuid,c=this._actionsByClip,d=c[a];if(d!==void 0){const _=d.knownActions;for(let b=0,k=_.length;b!==k;++b){const j=_[b];this._deactivateAction(j);const et=j._cacheIndex,nt=o[o.length-1];j._cacheIndex=null,j._byClipCacheIndex=null,nt._cacheIndex=et,o[et]=nt,o.pop(),this._removeInactiveBindingsForAction(j)}delete c[a]}}uncacheRoot(e){const o=e.uuid,a=this._actionsByClip;for(const _ in a){const b=a[_].actionByRoot,k=b[o];k!==void 0&&(this._deactivateAction(k),this._removeInactiveAction(k))}const c=this._bindingsByRootAndName,d=c[o];if(d!==void 0)for(const _ in d){const b=d[_];b.restoreOriginalState(),this._removeInactiveBinding(b)}}uncacheAction(e,o){const a=this.existingAction(e,o);a!==null&&(this._deactivateAction(a),this._removeInactiveAction(a))}}AnimationMixer.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Uniform{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(e,o,a=1){super(e,o);this.meshPerAttribute=a}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const o=super.clone(e);return o.meshPerAttribute=this.meshPerAttribute,o}toJSON(e){const o=super.toJSON(e);return o.isInstancedInterleavedBuffer=!0,o.meshPerAttribute=this.meshPerAttribute,o}}InstancedInterleavedBuffer.prototype.isInstancedInterleavedBuffer=!0;class GLBufferAttribute{constructor(e,o,a,c,d){this.buffer=e,this.type=o,this.itemSize=a,this.elementSize=c,this.count=d,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,o){return this.type=e,this.elementSize=o,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}GLBufferAttribute.prototype.isGLBufferAttribute=!0;class Raycaster{constructor(e,o,a=0,c=1/0){this.ray=new Ray(e,o),this.near=a,this.far=c,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,o){this.ray.set(e,o)}setFromCamera(e,o){o.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(o.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(o).sub(this.ray.origin).normalize(),this.camera=o):o.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(o.near+o.far)/(o.near-o.far)).unproject(o),this.ray.direction.set(0,0,-1).transformDirection(o.matrixWorld),this.camera=o):console.error("THREE.Raycaster: Unsupported camera type: "+o.type)}intersectObject(e,o=!0,a=[]){return intersectObject(e,this,a,o),a.sort(ascSort),a}intersectObjects(e,o=!0,a=[]){for(let c=0,d=e.length;c<d;c++)intersectObject(e[c],this,a,o);return a.sort(ascSort),a}}function ascSort(s,e){return s.distance-e.distance}function intersectObject(s,e,o,a){if(s.layers.test(e.layers)&&s.raycast(e,o),a===!0){const c=s.children;for(let d=0,_=c.length;d<_;d++)intersectObject(c[d],e,o,!0)}}class Spherical{constructor(e=1,o=0,a=0){return this.radius=e,this.phi=o,this.theta=a,this}set(e,o,a){return this.radius=e,this.phi=o,this.theta=a,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,o,a){return this.radius=Math.sqrt(e*e+o*o+a*a),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,a),this.phi=Math.acos(clamp(o/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(e=1,o=0,a=0){return this.radius=e,this.theta=o,this.y=a,this}set(e,o,a){return this.radius=e,this.theta=o,this.y=a,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,o,a){return this.radius=Math.sqrt(e*e+a*a),this.theta=Math.atan2(e,a),this.y=o,this}clone(){return new this.constructor().copy(this)}}const _vector$4=new Vector2;class Box2{constructor(e=new Vector2(1/0,1/0),o=new Vector2(-1/0,-1/0)){this.min=e,this.max=o}set(e,o){return this.min.copy(e),this.max.copy(o),this}setFromPoints(e){this.makeEmpty();for(let o=0,a=e.length;o<a;o++)this.expandByPoint(e[o]);return this}setFromCenterAndSize(e,o){const a=_vector$4.copy(o).multiplyScalar(.5);return this.min.copy(e).sub(a),this.max.copy(e).add(a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,o){return o.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,o){return o.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return _vector$4.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Box2.prototype.isBox2=!0;const _startP=new Vector3,_startEnd=new Vector3;class Line3{constructor(e=new Vector3,o=new Vector3){this.start=e,this.end=o}set(e,o){return this.start.copy(e),this.end.copy(o),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,o){return this.delta(o).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,o){_startP.subVectors(e,this.start),_startEnd.subVectors(this.end,this.start);const a=_startEnd.dot(_startEnd);let d=_startEnd.dot(_startP)/a;return o&&(d=clamp(d,0,1)),d}closestPointToPoint(e,o,a){const c=this.closestPointToPointParameter(e,o);return this.delta(a).multiplyScalar(c).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(e,o){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=o;const a=new BufferGeometry,c=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let _=0,b=1,k=32;_<k;_++,b++){const j=_/k*Math.PI*2,et=b/k*Math.PI*2;c.push(Math.cos(j),Math.sin(j),1,Math.cos(et),Math.sin(et),1)}a.setAttribute("position",new Float32BufferAttribute(c,3));const d=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(a,d),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,o=e*Math.tan(this.light.angle);this.cone.scale.set(o,o,e),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(e){const o=getBoneList(e),a=new BufferGeometry,c=[],d=[],_=new Color(0,0,1),b=new Color(0,1,0);for(let j=0;j<o.length;j++){const et=o[j];et.parent&&et.parent.isBone&&(c.push(0,0,0),c.push(0,0,0),d.push(_.r,_.g,_.b),d.push(b.r,b.g,b.b))}a.setAttribute("position",new Float32BufferAttribute(c,3)),a.setAttribute("color",new Float32BufferAttribute(d,3));const k=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(a,k);this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=o,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const o=this.bones,a=this.geometry,c=a.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let d=0,_=0;d<o.length;d++){const b=o[d];b.parent&&b.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,b.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),c.setXYZ(_,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,b.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),c.setXYZ(_+1,_vector$2.x,_vector$2.y,_vector$2.z),_+=2)}a.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function getBoneList(s){const e=[];s.isBone===!0&&e.push(s);for(let o=0;o<s.children.length;o++)e.push.apply(e,getBoneList(s.children[o]));return e}class PointLightHelper extends Mesh{constructor(e,o,a){const c=new SphereGeometry(o,4,2),d=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(c,d);this.light=e,this.light.updateMatrixWorld(),this.color=a,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color,_color2=new Color;class HemisphereLightHelper extends Object3D{constructor(e,o,a){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=a;const c=new OctahedronGeometry(o);c.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const d=c.getAttribute("position"),_=new Float32Array(d.count*3);c.setAttribute("color",new BufferAttribute(_,3)),this.add(new Mesh(c,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const o=e.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let a=0,c=o.count;a<c;a++){const d=a<c/2?_color1:_color2;o.setXYZ(a,d.r,d.g,d.b)}o.needsUpdate=!0}e.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(e=10,o=10,a=4473924,c=8947848){a=new Color(a),c=new Color(c);const d=o/2,_=e/o,b=e/2,k=[],j=[];for(let tt=0,rt=0,at=-b;tt<=o;tt++,at+=_){k.push(-b,0,at,b,0,at),k.push(at,0,-b,at,0,b);const lt=tt===d?a:c;lt.toArray(j,rt),rt+=3,lt.toArray(j,rt),rt+=3,lt.toArray(j,rt),rt+=3,lt.toArray(j,rt),rt+=3}const et=new BufferGeometry;et.setAttribute("position",new Float32BufferAttribute(k,3)),et.setAttribute("color",new Float32BufferAttribute(j,3));const nt=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(et,nt);this.type="GridHelper"}}class PolarGridHelper extends LineSegments{constructor(e=10,o=16,a=8,c=64,d=4473924,_=8947848){d=new Color(d),_=new Color(_);const b=[],k=[];for(let nt=0;nt<=o;nt++){const tt=nt/o*(Math.PI*2),rt=Math.sin(tt)*e,at=Math.cos(tt)*e;b.push(0,0,0),b.push(rt,0,at);const lt=nt&1?d:_;k.push(lt.r,lt.g,lt.b),k.push(lt.r,lt.g,lt.b)}for(let nt=0;nt<=a;nt++){const tt=nt&1?d:_,rt=e-e/a*nt;for(let at=0;at<c;at++){let lt=at/c*(Math.PI*2),ut=Math.sin(lt)*rt,st=Math.cos(lt)*rt;b.push(ut,0,st),k.push(tt.r,tt.g,tt.b),lt=(at+1)/c*(Math.PI*2),ut=Math.sin(lt)*rt,st=Math.cos(lt)*rt,b.push(ut,0,st),k.push(tt.r,tt.g,tt.b)}}const j=new BufferGeometry;j.setAttribute("position",new Float32BufferAttribute(b,3)),j.setAttribute("color",new Float32BufferAttribute(k,3));const et=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(j,et);this.type="PolarGridHelper"}}const _v1=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(e,o,a){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=a,o===void 0&&(o=1);let c=new BufferGeometry;c.setAttribute("position",new Float32BufferAttribute([-o,o,0,o,o,0,o,-o,0,-o,-o,0,-o,o,0],3));const d=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(c,d),this.add(this.lightPlane),c=new BufferGeometry,c.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(c,d),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){_v1.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1),this.lightPlane.lookAt(_v2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(e){const o=new BufferGeometry,a=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),c=[],d=[],_={},b=new Color(16755200),k=new Color(16711680),j=new Color(43775),et=new Color(16777215),nt=new Color(3355443);tt("n1","n2",b),tt("n2","n4",b),tt("n4","n3",b),tt("n3","n1",b),tt("f1","f2",b),tt("f2","f4",b),tt("f4","f3",b),tt("f3","f1",b),tt("n1","f1",b),tt("n2","f2",b),tt("n3","f3",b),tt("n4","f4",b),tt("p","n1",k),tt("p","n2",k),tt("p","n3",k),tt("p","n4",k),tt("u1","u2",j),tt("u2","u3",j),tt("u3","u1",j),tt("c","t",et),tt("p","c",nt),tt("cn1","cn2",nt),tt("cn3","cn4",nt),tt("cf1","cf2",nt),tt("cf3","cf4",nt);function tt(at,lt,ut){rt(at,ut),rt(lt,ut)}function rt(at,lt){c.push(0,0,0),d.push(lt.r,lt.g,lt.b),_[at]===void 0&&(_[at]=[]),_[at].push(c.length/3-1)}o.setAttribute("position",new Float32BufferAttribute(c,3)),o.setAttribute("color",new Float32BufferAttribute(d,3));super(o,a);this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=_,this.update()}update(){const e=this.geometry,o=this.pointMap,a=1,c=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",o,e,_camera,0,0,-1),setPoint("t",o,e,_camera,0,0,1),setPoint("n1",o,e,_camera,-a,-c,-1),setPoint("n2",o,e,_camera,a,-c,-1),setPoint("n3",o,e,_camera,-a,c,-1),setPoint("n4",o,e,_camera,a,c,-1),setPoint("f1",o,e,_camera,-a,-c,1),setPoint("f2",o,e,_camera,a,-c,1),setPoint("f3",o,e,_camera,-a,c,1),setPoint("f4",o,e,_camera,a,c,1),setPoint("u1",o,e,_camera,a*.7,c*1.1,-1),setPoint("u2",o,e,_camera,-a*.7,c*1.1,-1),setPoint("u3",o,e,_camera,0,c*2,-1),setPoint("cf1",o,e,_camera,-a,0,1),setPoint("cf2",o,e,_camera,a,0,1),setPoint("cf3",o,e,_camera,0,-c,1),setPoint("cf4",o,e,_camera,0,c,1),setPoint("cn1",o,e,_camera,-a,0,-1),setPoint("cn2",o,e,_camera,a,0,-1),setPoint("cn3",o,e,_camera,0,-c,-1),setPoint("cn4",o,e,_camera,0,c,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(s,e,o,a,c,d,_){_vector.set(c,d,_).unproject(a);const b=e[s];if(b!==void 0){const k=o.getAttribute("position");for(let j=0,et=b.length;j<et;j++)k.setXYZ(b[j],_vector.x,_vector.y,_vector.z)}}const _box=new Box3;class BoxHelper extends LineSegments{constructor(e,o=16776960){const a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),c=new Float32Array(8*3),d=new BufferGeometry;d.setIndex(new BufferAttribute(a,1)),d.setAttribute("position",new BufferAttribute(c,3));super(d,new LineBasicMaterial({color:o,toneMapped:!1}));this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box.setFromObject(this.object),_box.isEmpty())return;const o=_box.min,a=_box.max,c=this.geometry.attributes.position,d=c.array;d[0]=a.x,d[1]=a.y,d[2]=a.z,d[3]=o.x,d[4]=a.y,d[5]=a.z,d[6]=o.x,d[7]=o.y,d[8]=a.z,d[9]=a.x,d[10]=o.y,d[11]=a.z,d[12]=a.x,d[13]=a.y,d[14]=o.z,d[15]=o.x,d[16]=a.y,d[17]=o.z,d[18]=o.x,d[19]=o.y,d[20]=o.z,d[21]=a.x,d[22]=o.y,d[23]=o.z,c.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return LineSegments.prototype.copy.call(this,e),this.object=e.object,this}}class Box3Helper extends LineSegments{constructor(e,o=16776960){const a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),c=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],d=new BufferGeometry;d.setIndex(new BufferAttribute(a,1)),d.setAttribute("position",new Float32BufferAttribute(c,3));super(d,new LineBasicMaterial({color:o,toneMapped:!1}));this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const o=this.box;o.isEmpty()||(o.getCenter(this.position),o.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class PlaneHelper extends Line{constructor(e,o=1,a=16776960){const c=a,d=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],_=new BufferGeometry;_.setAttribute("position",new Float32BufferAttribute(d,3)),_.computeBoundingSphere();super(_,new LineBasicMaterial({color:c,toneMapped:!1}));this.type="PlaneHelper",this.plane=e,this.size=o;const b=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],k=new BufferGeometry;k.setAttribute("position",new Float32BufferAttribute(b,3)),k.computeBoundingSphere(),this.add(new Mesh(k,new MeshBasicMaterial({color:c,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let o=-this.plane.constant;Math.abs(o)<1e-8&&(o=1e-8),this.scale.set(.5*this.size,.5*this.size,o),this.children[0].material.side=o<0?BackSide:FrontSide,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(e=new Vector3(0,0,1),o=new Vector3(0,0,0),a=1,c=16776960,d=a*.2,_=d*.2){super();this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(o),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:c,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:c,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(a,d,_)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(e.z,0,-e.x).normalize();const o=Math.acos(e.y);this.quaternion.setFromAxisAngle(_axis,o)}}setLength(e,o=e*.2,a=o*.2){this.line.scale.set(1,Math.max(1e-4,e-o),1),this.line.updateMatrix(),this.cone.scale.set(a,o,a),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class AxesHelper extends LineSegments{constructor(e=1){const o=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],a=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],c=new BufferGeometry;c.setAttribute("position",new Float32BufferAttribute(o,3)),c.setAttribute("color",new Float32BufferAttribute(a,3));const d=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(c,d);this.type="AxesHelper"}setColors(e,o,a){const c=new Color,d=this.geometry.attributes.color.array;return c.set(e),c.toArray(d,0),c.toArray(d,3),c.set(o),c.toArray(d,6),c.toArray(d,9),c.set(a),c.toArray(d,12),c.toArray(d,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(e,o){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,o),this}lineTo(e,o){return this.currentPath.lineTo(e,o),this}quadraticCurveTo(e,o,a,c){return this.currentPath.quadraticCurveTo(e,o,a,c),this}bezierCurveTo(e,o,a,c,d,_){return this.currentPath.bezierCurveTo(e,o,a,c,d,_),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,o){function a(it){const ft=[];for(let ct=0,dt=it.length;ct<dt;ct++){const mt=it[ct],gt=new Shape;gt.curves=mt.curves,ft.push(gt)}return ft}function c(it,ft){const ct=ft.length;let dt=!1;for(let mt=ct-1,gt=0;gt<ct;mt=gt++){let yt=ft[mt],St=ft[gt],Et=St.x-yt.x,vt=St.y-yt.y;if(Math.abs(vt)>Number.EPSILON){if(vt<0&&(yt=ft[gt],Et=-Et,St=ft[mt],vt=-vt),it.y<yt.y||it.y>St.y)continue;if(it.y===yt.y){if(it.x===yt.x)return!0}else{const _t=vt*(it.x-yt.x)-Et*(it.y-yt.y);if(_t===0)return!0;if(_t<0)continue;dt=!dt}}else{if(it.y!==yt.y)continue;if(St.x<=it.x&&it.x<=yt.x||yt.x<=it.x&&it.x<=St.x)return!0}}return dt}const d=ShapeUtils.isClockWise,_=this.subPaths;if(_.length===0)return[];if(o===!0)return a(_);let b,k,j;const et=[];if(_.length===1)return k=_[0],j=new Shape,j.curves=k.curves,et.push(j),et;let nt=!d(_[0].getPoints());nt=e?!nt:nt;const tt=[],rt=[];let at=[],lt=0,ut;rt[lt]=void 0,at[lt]=[];for(let it=0,ft=_.length;it<ft;it++)k=_[it],ut=k.getPoints(),b=d(ut),b=e?!b:b,b?(!nt&&rt[lt]&&lt++,rt[lt]={s:new Shape,p:ut},rt[lt].s.curves=k.curves,nt&&lt++,at[lt]=[]):at[lt].push({h:k,p:ut[0]});if(!rt[0])return a(_);if(rt.length>1){let it=!1,ft=0;for(let ct=0,dt=rt.length;ct<dt;ct++)tt[ct]=[];for(let ct=0,dt=rt.length;ct<dt;ct++){const mt=at[ct];for(let gt=0;gt<mt.length;gt++){const yt=mt[gt];let St=!0;for(let Et=0;Et<rt.length;Et++)c(yt.p,rt[Et].p)&&(ct!==Et&&ft++,St?(St=!1,tt[Et].push(yt)):it=!0);St&&tt[ct].push(yt)}}ft>0&&it===!1&&(at=tt)}let st;for(let it=0,ft=rt.length;it<ft;it++){j=rt[it].s,et.push(j),st=at[it];for(let ct=0,dt=st.length;ct<dt;ct++)j.holes.push(st[ct].h)}return et}}const _floatView=new Float32Array(1),_int32View=new Int32Array(_floatView.buffer);class DataUtils{static toHalfFloat(e){e>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),e=65504),_floatView[0]=e;const o=_int32View[0];let a=o>>16&32768,c=o>>12&2047;const d=o>>23&255;return d<103?a:d>142?(a|=31744,a|=(d==255?0:1)&&o&8388607,a):d<113?(c|=2048,a|=(c>>114-d)+(c>>113-d&1),a):(a|=d-112<<10|c>>1,a+=c&1,a)}}const LineStrip=0,LinePieces=1,NoColors=0,FaceColors=1,VertexColors=2;function MeshFaceMaterial(s){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),s}function MultiMaterial(s=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),s.isMultiMaterial=!0,s.materials=s,s.clone=function(){return s.slice()},s}function PointCloud(s,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(s,e)}function Particle(s){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(s)}function ParticleSystem(s,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(s,e)}function PointCloudMaterial(s){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(s)}function ParticleBasicMaterial(s){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(s)}function ParticleSystemMaterial(s){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(s)}function Vertex(s,e,o){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Vector3(s,e,o)}function DynamicBufferAttribute(s,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new BufferAttribute(s,e).setUsage(DynamicDrawUsage)}function Int8Attribute(s,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Int8BufferAttribute(s,e)}function Uint8Attribute(s,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Uint8BufferAttribute(s,e)}function Uint8ClampedAttribute(s,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Uint8ClampedBufferAttribute(s,e)}function Int16Attribute(s,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Int16BufferAttribute(s,e)}function Uint16Attribute(s,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Uint16BufferAttribute(s,e)}function Int32Attribute(s,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Int32BufferAttribute(s,e)}function Uint32Attribute(s,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Uint32BufferAttribute(s,e)}function Float32Attribute(s,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Float32BufferAttribute(s,e)}function Float64Attribute(s,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Float64BufferAttribute(s,e)}Curve.create=function(s,e){return console.log("THREE.Curve.create() has been deprecated"),s.prototype=Object.create(Curve.prototype),s.prototype.constructor=s,s.prototype.getPoint=e,s};Path.prototype.fromPoints=function(s){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(s)};function AxisHelper(s){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new AxesHelper(s)}function BoundingBoxHelper(s,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(s,e)}function EdgesHelper(s,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(s.geometry),new LineBasicMaterial({color:e!==void 0?e:16777215}))}GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};SkeletonHelper.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function WireframeHelper(s,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(s.geometry),new LineBasicMaterial({color:e!==void 0?e:16777215}))}Loader$1.prototype.extractUrlBase=function(s){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(s)};Loader$1.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function XHRLoader(s){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(s)}function BinaryTextureLoader(s){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(s)}Box2.prototype.center=function(s){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(s)};Box2.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Box2.prototype.isIntersectionBox=function(s){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(s)};Box2.prototype.size=function(s){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(s)};Box3.prototype.center=function(s){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(s)};Box3.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Box3.prototype.isIntersectionBox=function(s){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(s)};Box3.prototype.isIntersectionSphere=function(s){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(s)};Box3.prototype.size=function(s){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(s)};Euler.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")};Sphere.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Frustum.prototype.setFromMatrix=function(s){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(s)};Line3.prototype.center=function(s){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(s)};Matrix3.prototype.flattenToArrayOffset=function(s,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(s,e)};Matrix3.prototype.multiplyVector3=function(s){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),s.applyMatrix3(this)};Matrix3.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};Matrix3.prototype.applyToBufferAttribute=function(s){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),s.applyMatrix3(this)};Matrix3.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};Matrix3.prototype.getInverse=function(s){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(s).invert()};Matrix4.prototype.extractPosition=function(s){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(s)};Matrix4.prototype.flattenToArrayOffset=function(s,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(s,e)};Matrix4.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Vector3().setFromMatrixColumn(this,3)};Matrix4.prototype.setRotationFromQuaternion=function(s){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(s)};Matrix4.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};Matrix4.prototype.multiplyVector3=function(s){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)};Matrix4.prototype.multiplyVector4=function(s){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)};Matrix4.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};Matrix4.prototype.rotateAxis=function(s){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),s.transformDirection(this)};Matrix4.prototype.crossVector=function(s){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)};Matrix4.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};Matrix4.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};Matrix4.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};Matrix4.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};Matrix4.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};Matrix4.prototype.applyToBufferAttribute=function(s){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)};Matrix4.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};Matrix4.prototype.makeFrustum=function(s,e,o,a,c,d){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(s,e,a,o,c,d)};Matrix4.prototype.getInverse=function(s){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(s).invert()};Plane.prototype.isIntersectionLine=function(s){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(s)};Quaternion.prototype.multiplyVector3=function(s){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),s.applyQuaternion(this)};Quaternion.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};Ray.prototype.isIntersectionBox=function(s){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(s)};Ray.prototype.isIntersectionPlane=function(s){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(s)};Ray.prototype.isIntersectionSphere=function(s){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(s)};Triangle.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};Triangle.prototype.barycoordFromPoint=function(s,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(s,e)};Triangle.prototype.midpoint=function(s){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(s)};Triangle.prototypenormal=function(s){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(s)};Triangle.prototype.plane=function(s){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(s)};Triangle.barycoordFromPoint=function(s,e,o,a,c){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(s,e,o,a,c)};Triangle.normal=function(s,e,o,a){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(s,e,o,a)};Shape.prototype.extractAllPoints=function(s){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(s)};Shape.prototype.extrude=function(s){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,s)};Shape.prototype.makeGeometry=function(s){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,s)};Vector2.prototype.fromAttribute=function(s,e,o){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(s,e,o)};Vector2.prototype.distanceToManhattan=function(s){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(s)};Vector2.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Vector3.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};Vector3.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};Vector3.prototype.getPositionFromMatrix=function(s){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(s)};Vector3.prototype.getScaleFromMatrix=function(s){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(s)};Vector3.prototype.getColumnFromMatrix=function(s,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,s)};Vector3.prototype.applyProjection=function(s){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(s)};Vector3.prototype.fromAttribute=function(s,e,o){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(s,e,o)};Vector3.prototype.distanceToManhattan=function(s){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(s)};Vector3.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Vector4.prototype.fromAttribute=function(s,e,o){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(s,e,o)};Vector4.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Object3D.prototype.getChildByName=function(s){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(s)};Object3D.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};Object3D.prototype.translate=function(s,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,s)};Object3D.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};Object3D.prototype.applyMatrix=function(s){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(s)};Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(s){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=s}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Mesh.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),TrianglesDrawMode},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};PerspectiveCamera.prototype.setLens=function(s,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(s)};Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(s){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=s}},shadowCameraLeft:{set:function(s){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=s}},shadowCameraRight:{set:function(s){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=s}},shadowCameraTop:{set:function(s){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=s}},shadowCameraBottom:{set:function(s){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=s}},shadowCameraNear:{set:function(s){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=s}},shadowCameraFar:{set:function(s){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=s}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(s){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=s}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(s){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=s}},shadowMapHeight:{set:function(s){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=s}}});Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(DynamicDrawUsage)}}});BufferAttribute.prototype.setDynamic=function(s){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(s===!0?DynamicDrawUsage:StaticDrawUsage),this};BufferAttribute.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},BufferAttribute.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};BufferGeometry.prototype.addIndex=function(s){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(s)};BufferGeometry.prototype.addAttribute=function(s,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(s,new BufferAttribute(arguments[1],arguments[2]))):s==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(s,e)};BufferGeometry.prototype.addDrawCall=function(s,e,o){o!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(s,e)};BufferGeometry.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};BufferGeometry.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};BufferGeometry.prototype.removeAttribute=function(s){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(s)};BufferGeometry.prototype.applyMatrix=function(s){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(s)};Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});InterleavedBuffer.prototype.setDynamic=function(s){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(s===!0?DynamicDrawUsage:StaticDrawUsage),this};InterleavedBuffer.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};ExtrudeGeometry.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};ExtrudeGeometry.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};ExtrudeGeometry.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};Scene.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Uniform.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this};Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(s){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=s===FlatShading}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(s){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=s}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(s){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=s}}});WebGLRenderer.prototype.clearTarget=function(s,e,o,a){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(s),this.clear(e,o,a)};WebGLRenderer.prototype.animate=function(s){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(s)};WebGLRenderer.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};WebGLRenderer.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};WebGLRenderer.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};WebGLRenderer.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};WebGLRenderer.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};WebGLRenderer.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};WebGLRenderer.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};WebGLRenderer.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};WebGLRenderer.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};WebGLRenderer.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};WebGLRenderer.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};WebGLRenderer.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};WebGLRenderer.prototype.enableScissorTest=function(s){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(s)};WebGLRenderer.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};WebGLRenderer.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};WebGLRenderer.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};WebGLRenderer.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};WebGLRenderer.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};WebGLRenderer.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};WebGLRenderer.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};WebGLRenderer.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};WebGLRenderer.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};WebGLRenderer.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(s){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=s}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(s){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=s}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(s){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=s===!0?sRGBEncoding:LinearEncoding}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function WebGLRenderTargetCube(s,e,o){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new WebGLCubeRenderTarget(s,o)}Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(s){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=s}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(s){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=s}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(s){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=s}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(s){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=s}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(s){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=s}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(s){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=s}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(s){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=s}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(s){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=s}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(s){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=s}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(s){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=s}}});Audio.prototype.load=function(s){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new AudioLoader().load(s,function(a){e.setBuffer(a)}),this};AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};CubeCamera.prototype.updateCubeMap=function(s,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(s,e)};CubeCamera.prototype.clear=function(s,e,o,a){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(s,e,o,a)};ImageUtils.crossOrigin=void 0;ImageUtils.loadTexture=function(s,e,o,a){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const c=new TextureLoader;c.setCrossOrigin(this.crossOrigin);const d=c.load(s,o,void 0,a);return e&&(d.mapping=e),d};ImageUtils.loadTextureCube=function(s,e,o,a){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const c=new CubeTextureLoader;c.setCrossOrigin(this.crossOrigin);const d=c.load(s,o,void 0,a);return e&&(d.mapping=e),d};ImageUtils.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ImageUtils.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function CanvasRenderer(){console.error("THREE.CanvasRenderer has been removed")}function JSONLoader(){console.error("THREE.JSONLoader has been removed.")}const SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function LensFlare(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}function ParametricGeometry(){return console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),new BufferGeometry}function TextGeometry(){return console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),new BufferGeometry}function FontLoader(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function Font(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function ImmediateRenderObject(){console.error("THREE.ImmediateRenderObject has been removed.")}function WebGLMultisampleRenderTarget(s,e,o){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.');const a=new WebGLRenderTarget(s,e,o);return a.samples=4,a}function DataTexture2DArray(s,e,o,a){return console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),new DataArrayTexture(s,e,o,a)}function DataTexture3D(s,e,o,a){return console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),new Data3DTexture(s,e,o,a)}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);var THREE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,AxisHelper,BackSide,BasicDepthPacking,BasicShadowMap,BinaryTextureLoader,Bone,BooleanKeyframeTrack,BoundingBoxHelper,Box2,Box3,Box3Helper,BoxBufferGeometry:BoxGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasRenderer,CanvasTexture,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry:CircleGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,Color,ColorKeyframeTrack,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry:ConeGeometry,ConeGeometry,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubeUVRefractionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderBufferGeometry:CylinderGeometry,CylinderGeometry,Cylindrical,Data3DTexture,DataArrayTexture,DataTexture,DataTexture2DArray,DataTexture3D,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DodecahedronBufferGeometry:DodecahedronGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicBufferAttribute,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EdgesHelper,EllipseCurve,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeBufferGeometry:ExtrudeGeometry,ExtrudeGeometry,FaceColors,FileLoader,FlatShading,Float16BufferAttribute,Float32Attribute,Float32BufferAttribute,Float64Attribute,Float64BufferAttribute,FloatType,Fog,FogExp2,Font,FontLoader,FramebufferTexture,FrontSide,Frustum,GLBufferAttribute,GLSL1,GLSL3,GreaterDepth,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry:IcosahedronGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,ImmediateRenderObject,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16Attribute,Int16BufferAttribute,Int32Attribute,Int32BufferAttribute,Int8Attribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,JSONLoader,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry:LatheGeometry,LatheGeometry,Layers,LensFlare,LessDepth,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LinePieces,LineSegments,LineStrip,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearToneMapping,Loader:Loader$1,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,Math:MathUtils,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshFaceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiMaterial,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverDepth,NeverStencilFunc,NoBlending,NoColors,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry:OctahedronGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,ParametricGeometry,Particle,ParticleBasicMaterial,ParticleSystem,ParticleSystemMaterial,Path,PerspectiveCamera,Plane,PlaneBufferGeometry:PlaneGeometry,PlaneGeometry,PlaneHelper,PointCloud,PointCloudMaterial,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry:PolyhedronGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBFormat,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry:RingGeometry,RingGeometry,Scene,SceneUtils,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry:ShapeGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,SmoothShading,Sphere,SphereBufferGeometry:SphereGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry:TetrahedronGeometry,TetrahedronGeometry,TextGeometry,Texture,TextureLoader,TorusBufferGeometry:TorusGeometry,TorusGeometry,TorusKnotBufferGeometry:TorusKnotGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry:TubeGeometry,TubeGeometry,UVMapping,Uint16Attribute,Uint16BufferAttribute,Uint32Attribute,Uint32BufferAttribute,Uint8Attribute,Uint8BufferAttribute,Uint8ClampedAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,Vertex,VertexColors,VideoTexture,WebGL1Renderer,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCubeRenderTarget,WebGLMultipleRenderTargets,WebGLMultisampleRenderTarget,WebGLRenderTarget,WebGLRenderTargetCube,WebGLRenderer,WebGLUtils,WireframeGeometry,WireframeHelper,WrapAroundEnding,XHRLoader,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,_SRGBAFormat,sRGBEncoding},Symbol.toStringTag,{value:"Module"}));function createStore$1(s){let e;const o=new Set,a=(j,et)=>{const nt=typeof j=="function"?j(e):j;if(nt!==e){const tt=e;e=et?nt:Object.assign({},e,nt),o.forEach(rt=>rt(e,tt))}},c=()=>e,d=(j,et=c,nt=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let tt=et(e);function rt(){const at=et(e);if(!nt(tt,at)){const lt=tt;j(tt=at,lt)}}return o.add(rt),()=>o.delete(rt)},k={setState:a,getState:c,subscribe:(j,et,nt)=>et||nt?d(j,et,nt):(o.add(j),()=>o.delete(j)),destroy:()=>o.clear()};return e=s(a,c,k),k}const isSSR=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),useIsomorphicLayoutEffect$1=isSSR?react.exports.useEffect:react.exports.useLayoutEffect;function create(s){const e=typeof s=="function"?createStore$1(s):s,o=(a=e.getState,c=Object.is)=>{const[,d]=react.exports.useReducer(ut=>ut+1,0),_=e.getState(),b=react.exports.useRef(_),k=react.exports.useRef(a),j=react.exports.useRef(c),et=react.exports.useRef(!1),nt=react.exports.useRef();nt.current===void 0&&(nt.current=a(_));let tt,rt=!1;(b.current!==_||k.current!==a||j.current!==c||et.current)&&(tt=a(_),rt=!c(nt.current,tt)),useIsomorphicLayoutEffect$1(()=>{rt&&(nt.current=tt),b.current=_,k.current=a,j.current=c,et.current=!1});const at=react.exports.useRef(_);useIsomorphicLayoutEffect$1(()=>{const ut=()=>{try{const it=e.getState(),ft=k.current(it);j.current(nt.current,ft)||(b.current=it,nt.current=ft,d())}catch{et.current=!0,d()}},st=e.subscribe(ut);return e.getState()!==at.current&&ut(),st},[]);const lt=rt?tt:nt.current;return react.exports.useDebugValue(lt),lt};return Object.assign(o,e),o[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const a=[o,e];return{next(){const c=a.length<=0;return{value:a.shift(),done:c}}}},o}var reactReconciler={exports:{}},reactReconciler_production_min={exports:{}};/** @license React v0.26.2
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){s.exports=function(o){var a={},c=objectAssign,d=react.exports,_=scheduler.exports;function b($){for(var _e="https://reactjs.org/docs/error-decoder.html?invariant="+$,ot=1;ot<arguments.length;ot++)_e+="&args[]="+encodeURIComponent(arguments[ot]);return"Minified React error #"+$+"; visit "+_e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=60103,et=60106,nt=60107,tt=60108,rt=60114,at=60109,lt=60110,ut=60112,st=60113,it=60120,ft=60115,ct=60116,dt=60121,mt=60129,gt=60130,yt=60131;if(typeof Symbol=="function"&&Symbol.for){var St=Symbol.for;j=St("react.element"),et=St("react.portal"),nt=St("react.fragment"),tt=St("react.strict_mode"),rt=St("react.profiler"),at=St("react.provider"),lt=St("react.context"),ut=St("react.forward_ref"),st=St("react.suspense"),it=St("react.suspense_list"),ft=St("react.memo"),ct=St("react.lazy"),dt=St("react.block"),St("react.scope"),mt=St("react.debug_trace_mode"),gt=St("react.offscreen"),yt=St("react.legacy_hidden")}var Et=typeof Symbol=="function"&&Symbol.iterator;function vt($){return $===null||typeof $!="object"?null:($=Et&&$[Et]||$["@@iterator"],typeof $=="function"?$:null)}function _t($){if($==null)return null;if(typeof $=="function")return $.displayName||$.name||null;if(typeof $=="string")return $;switch($){case nt:return"Fragment";case et:return"Portal";case rt:return"Profiler";case tt:return"StrictMode";case st:return"Suspense";case it:return"SuspenseList"}if(typeof $=="object")switch($.$$typeof){case lt:return($.displayName||"Context")+".Consumer";case at:return($._context.displayName||"Context")+".Provider";case ut:var _e=$.render;return _e=_e.displayName||_e.name||"",$.displayName||(_e!==""?"ForwardRef("+_e+")":"ForwardRef");case ft:return _t($.type);case dt:return _t($._render);case ct:_e=$._payload,$=$._init;try{return _t($(_e))}catch{}}return null}function bt($){var _e=$,ot=$;if($.alternate)for(;_e.return;)_e=_e.return;else{$=_e;do _e=$,(_e.flags&1026)!==0&&(ot=_e.return),$=_e.return;while($)}return _e.tag===3?ot:null}function At($){if(bt($)!==$)throw Error(b(188))}function Rt($){var _e=$.alternate;if(!_e){if(_e=bt($),_e===null)throw Error(b(188));return _e!==$?null:$}for(var ot=$,ht=_e;;){var pt=ot.return;if(pt===null)break;var xt=pt.alternate;if(xt===null){if(ht=pt.return,ht!==null){ot=ht;continue}break}if(pt.child===xt.child){for(xt=pt.child;xt;){if(xt===ot)return At(pt),$;if(xt===ht)return At(pt),_e;xt=xt.sibling}throw Error(b(188))}if(ot.return!==ht.return)ot=pt,ht=xt;else{for(var Ct=!1,kt=pt.child;kt;){if(kt===ot){Ct=!0,ot=pt,ht=xt;break}if(kt===ht){Ct=!0,ht=pt,ot=xt;break}kt=kt.sibling}if(!Ct){for(kt=xt.child;kt;){if(kt===ot){Ct=!0,ot=xt,ht=pt;break}if(kt===ht){Ct=!0,ht=xt,ot=pt;break}kt=kt.sibling}if(!Ct)throw Error(b(189))}}if(ot.alternate!==ht)throw Error(b(190))}if(ot.tag!==3)throw Error(b(188));return ot.stateNode.current===ot?$:_e}function Pt($){if($=Rt($),!$)return null;for(var _e=$;;){if(_e.tag===5||_e.tag===6)return _e;if(_e.child)_e.child.return=_e,_e=_e.child;else{if(_e===$)break;for(;!_e.sibling;){if(!_e.return||_e.return===$)return null;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}}return null}function Dt($){if($=Rt($),!$)return null;for(var _e=$;;){if(_e.tag===5||_e.tag===6)return _e;if(_e.child&&_e.tag!==4)_e.child.return=_e,_e=_e.child;else{if(_e===$)break;for(;!_e.sibling;){if(!_e.return||_e.return===$)return null;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}}return null}function Ft($,_e){for(var ot=$.alternate;_e!==null;){if(_e===$||_e===ot)return!0;_e=_e.return}return!1}var Vt=o.getPublicInstance,Qt=o.getRootHostContext,Lt=o.getChildHostContext,It=o.prepareForCommit,Ht=o.resetAfterCommit,on=o.createInstance,nn=o.appendInitialChild,jt=o.finalizeInitialChildren,Mn=o.prepareUpdate,gn=o.shouldSetTextContent,fn=o.createTextInstance,pn=o.scheduleTimeout,_n=o.cancelTimeout,$t=o.noTimeout,sn=o.isPrimaryRenderer,rn=o.supportsMutation,vn=o.supportsPersistence,cn=o.supportsHydration,Dn=o.getInstanceFromNode,Kt=o.makeOpaqueHydratingObject,bn=o.makeClientId,En=o.beforeActiveInstanceBlur,wt=o.afterActiveInstanceBlur,Mt=o.preparePortalMount,Ot=o.supportsTestSelectors,zt=o.findFiberRoot,Yt=o.getBoundingRect,dn=o.getTextContent,xn=o.isHiddenSubtree,Nt=o.matchAccessibilityRole,mn=o.setFocusIfFocusable,Ln=o.setupIntersectionObserver,Sn=o.appendChild,yn=o.appendChildToContainer,Bt=o.commitTextUpdate,an=o.commitMount,en=o.commitUpdate,Cn=o.insertBefore,un=o.insertInContainerBefore,ln=o.removeChild,Rn=o.removeChildFromContainer,Fn=o.resetTextContent,ar=o.hideInstance,Yn=o.hideTextInstance,er=o.unhideInstance,Lr=o.unhideTextInstance,Kn=o.clearContainer,qn=o.cloneInstance,hr=o.createContainerChildSet,br=o.appendChildToContainerChildSet,tr=o.finalizeContainerChildren,Er=o.replaceContainerChildren,Ur=o.cloneHiddenInstance,pr=o.cloneHiddenTextInstance,Tt=o.canHydrateInstance,Gt=o.canHydrateTextInstance,qt=o.isSuspenseInstancePending,Xt=o.isSuspenseInstanceFallback,tn=o.getNextHydratableSibling,Bn=o.getFirstHydratableChild,Nn=o.hydrateInstance,Hn=o.hydrateTextInstance,zn=o.getNextHydratableInstanceAfterSuspenseInstance,Zn=o.commitHydratedContainer,$n=o.commitHydratedSuspenseInstance,jn;function Qn($){if(jn===void 0)try{throw Error()}catch(ot){var _e=ot.stack.trim().match(/\n( *(at )?)/);jn=_e&&_e[1]||""}return`
`+jn+$}var $r=!1;function Vr($,_e){if(!$||$r)return"";$r=!0;var ot=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_e)if(_e=function(){throw Error()},Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(Zt){var ht=Zt}Reflect.construct($,[],_e)}else{try{_e.call()}catch(Zt){ht=Zt}$.call(_e.prototype)}else{try{throw Error()}catch(Zt){ht=Zt}$()}}catch(Zt){if(Zt&&ht&&typeof Zt.stack=="string"){for(var pt=Zt.stack.split(`
`),xt=ht.stack.split(`
`),Ct=pt.length-1,kt=xt.length-1;1<=Ct&&0<=kt&&pt[Ct]!==xt[kt];)kt--;for(;1<=Ct&&0<=kt;Ct--,kt--)if(pt[Ct]!==xt[kt]){if(Ct!==1||kt!==1)do if(Ct--,kt--,0>kt||pt[Ct]!==xt[kt])return`
`+pt[Ct].replace(" at new "," at ");while(1<=Ct&&0<=kt);break}}}finally{$r=!1,Error.prepareStackTrace=ot}return($=$?$.displayName||$.name:"")?Qn($):""}var Or=[],gr=-1;function Wn($){return{current:$}}function hn($){0>gr||($.current=Or[gr],Or[gr]=null,gr--)}function On($,_e){gr++,Or[gr]=$.current,$.current=_e}var vr={},nr=Wn(vr),dr=Wn(!1),Nr=vr;function or($,_e){var ot=$.type.contextTypes;if(!ot)return vr;var ht=$.stateNode;if(ht&&ht.__reactInternalMemoizedUnmaskedChildContext===_e)return ht.__reactInternalMemoizedMaskedChildContext;var pt={},xt;for(xt in ot)pt[xt]=_e[xt];return ht&&($=$.stateNode,$.__reactInternalMemoizedUnmaskedChildContext=_e,$.__reactInternalMemoizedMaskedChildContext=pt),pt}function ur($){return $=$.childContextTypes,$!=null}function eo(){hn(dr),hn(nr)}function Cr($,_e,ot){if(nr.current!==vr)throw Error(b(168));On(nr,_e),On(dr,ot)}function ys($,_e,ot){var ht=$.stateNode;if($=_e.childContextTypes,typeof ht.getChildContext!="function")return ot;ht=ht.getChildContext();for(var pt in ht)if(!(pt in $))throw Error(b(108,_t(_e)||"Unknown",pt));return c({},ot,ht)}function Po($){return $=($=$.stateNode)&&$.__reactInternalMemoizedMergedChildContext||vr,Nr=nr.current,On(nr,$),On(dr,dr.current),!0}function _s($,_e,ot){var ht=$.stateNode;if(!ht)throw Error(b(169));ot?($=ys($,_e,Nr),ht.__reactInternalMemoizedMergedChildContext=$,hn(dr),hn(nr),On(nr,$)):hn(dr),On(dr,ot)}var yo=null,to=null,Fo=_.unstable_now;Fo();var Do=0,rr=8;function no($){if((1&$)!==0)return rr=15,1;if((2&$)!==0)return rr=14,2;if((4&$)!==0)return rr=13,4;var _e=24&$;return _e!==0?(rr=12,_e):($&32)!==0?(rr=11,32):(_e=192&$,_e!==0?(rr=10,_e):($&256)!==0?(rr=9,256):(_e=3584&$,_e!==0?(rr=8,_e):($&4096)!==0?(rr=7,4096):(_e=4186112&$,_e!==0?(rr=6,_e):(_e=62914560&$,_e!==0?(rr=5,_e):$&67108864?(rr=4,67108864):($&134217728)!==0?(rr=3,134217728):(_e=805306368&$,_e!==0?(rr=2,_e):(1073741824&$)!==0?(rr=1,1073741824):(rr=8,$))))))}function qo($){switch($){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Pl($){switch($){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(b(358,$))}}function lo($,_e){var ot=$.pendingLanes;if(ot===0)return rr=0;var ht=0,pt=0,xt=$.expiredLanes,Ct=$.suspendedLanes,kt=$.pingedLanes;if(xt!==0)ht=xt,pt=rr=15;else if(xt=ot&134217727,xt!==0){var Zt=xt&~Ct;Zt!==0?(ht=no(Zt),pt=rr):(kt&=xt,kt!==0&&(ht=no(kt),pt=rr))}else xt=ot&~Ct,xt!==0?(ht=no(xt),pt=rr):kt!==0&&(ht=no(kt),pt=rr);if(ht===0)return 0;if(ht=31-Yr(ht),ht=ot&((0>ht?0:1<<ht)<<1)-1,_e!==0&&_e!==ht&&(_e&Ct)===0){if(no(_e),pt<=rr)return _e;rr=pt}if(_e=$.entangledLanes,_e!==0)for($=$.entanglements,_e&=ht;0<_e;)ot=31-Yr(_e),pt=1<<ot,ht|=$[ot],_e&=~pt;return ht}function Yo($){return $=$.pendingLanes&-1073741825,$!==0?$:$&1073741824?1073741824:0}function uo($,_e){switch($){case 15:return 1;case 14:return 2;case 12:return $=_o(24&~_e),$===0?uo(10,_e):$;case 10:return $=_o(192&~_e),$===0?uo(8,_e):$;case 8:return $=_o(3584&~_e),$===0&&($=_o(4186112&~_e),$===0&&($=512)),$;case 2:return _e=_o(805306368&~_e),_e===0&&(_e=268435456),_e}throw Error(b(358,$))}function _o($){return $&-$}function Bo($){for(var _e=[],ot=0;31>ot;ot++)_e.push($);return _e}function xo($,_e,ot){$.pendingLanes|=_e;var ht=_e-1;$.suspendedLanes&=ht,$.pingedLanes&=ht,$=$.eventTimes,_e=31-Yr(_e),$[_e]=ot}var Yr=Math.clz32?Math.clz32:xs,Ys=Math.log,Zs=Math.LN2;function xs($){return $===0?32:31-(Ys($)/Zs|0)|0}var Zo=_.unstable_runWithPriority,os=_.unstable_scheduleCallback,Io=_.unstable_cancelCallback,ko=_.unstable_shouldYield,So=_.unstable_requestPaint,wo=_.unstable_now,Js=_.unstable_getCurrentPriorityLevel,co=_.unstable_ImmediatePriority,ss=_.unstable_UserBlockingPriority,as=_.unstable_NormalPriority,Ss=_.unstable_LowPriority,Uo=_.unstable_IdlePriority,Oo={},Qs=So!==void 0?So:function(){},yr=null,No=null,Jo=!1,ws=wo(),_r=1e4>ws?wo:function(){return wo()-ws};function ro(){switch(Js()){case co:return 99;case ss:return 98;case as:return 97;case Ss:return 96;case Uo:return 95;default:throw Error(b(332))}}function Ms($){switch($){case 99:return co;case 98:return ss;case 97:return as;case 96:return Ss;case 95:return Uo;default:throw Error(b(332))}}function Gr($,_e){return $=Ms($),Zo($,_e)}function io($,_e,ot){return $=Ms($),os($,_e,ot)}function xr(){if(No!==null){var $=No;No=null,Io($)}bs()}function bs(){if(!Jo&&yr!==null){Jo=!0;var $=0;try{var _e=yr;Gr(99,function(){for(;$<_e.length;$++){var ot=_e[$];do ot=ot(!0);while(ot!==null)}}),yr=null}catch(ot){throw yr!==null&&(yr=yr.slice($+1)),os(co,xr),ot}finally{Jo=!1}}}var Es=k.ReactCurrentBatchConfig;function Ts($,_e){return $===_e&&($!==0||1/$===1/_e)||$!==$&&_e!==_e}var Pr=typeof Object.is=="function"?Object.is:Ts,Ks=Object.prototype.hasOwnProperty;function fo($,_e){if(Pr($,_e))return!0;if(typeof $!="object"||$===null||typeof _e!="object"||_e===null)return!1;var ot=Object.keys($),ht=Object.keys(_e);if(ot.length!==ht.length)return!1;for(ht=0;ht<ot.length;ht++)if(!Ks.call(_e,ot[ht])||!Pr($[ot[ht]],_e[ot[ht]]))return!1;return!0}function ls($){switch($.tag){case 5:return Qn($.type);case 16:return Qn("Lazy");case 13:return Qn("Suspense");case 19:return Qn("SuspenseList");case 0:case 2:case 15:return $=Vr($.type,!1),$;case 11:return $=Vr($.type.render,!1),$;case 22:return $=Vr($.type._render,!1),$;case 1:return $=Vr($.type,!0),$;default:return""}}function cr($,_e){if($&&$.defaultProps){_e=c({},_e),$=$.defaultProps;for(var ot in $)_e[ot]===void 0&&(_e[ot]=$[ot]);return _e}return _e}var us=Wn(null),Mo=null,oo=null,Qo=null;function As(){Qo=oo=Mo=null}function bo($,_e){$=$.type._context,sn?(On(us,$._currentValue),$._currentValue=_e):(On(us,$._currentValue2),$._currentValue2=_e)}function Tr($){var _e=us.current;hn(us),$=$.type._context,sn?$._currentValue=_e:$._currentValue2=_e}function Hr($,_e){for(;$!==null;){var ot=$.alternate;if(($.childLanes&_e)===_e){if(ot===null||(ot.childLanes&_e)===_e)break;ot.childLanes|=_e}else $.childLanes|=_e,ot!==null&&(ot.childLanes|=_e);$=$.return}}function Sr($,_e){Mo=$,Qo=oo=null,$=$.dependencies,$!==null&&$.firstContext!==null&&(($.lanes&_e)!==0&&(ao=!0),$.firstContext=null)}function wr($,_e){if(Qo!==$&&_e!==!1&&_e!==0)if((typeof _e!="number"||_e===1073741823)&&(Qo=$,_e=1073741823),_e={context:$,observedBits:_e,next:null},oo===null){if(Mo===null)throw Error(b(308));oo=_e,Mo.dependencies={lanes:0,firstContext:_e,responders:null}}else oo=oo.next=_e;return sn?$._currentValue:$._currentValue2}var so=!1;function Fl($){$.updateQueue={baseState:$.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Mu($,_e){$=$.updateQueue,_e.updateQueue===$&&(_e.updateQueue={baseState:$.baseState,firstBaseUpdate:$.firstBaseUpdate,lastBaseUpdate:$.lastBaseUpdate,shared:$.shared,effects:$.effects})}function Go($,_e){return{eventTime:$,lane:_e,tag:0,payload:null,callback:null,next:null}}function zo($,_e){if($=$.updateQueue,$!==null){$=$.shared;var ot=$.pending;ot===null?_e.next=_e:(_e.next=ot.next,ot.next=_e),$.pending=_e}}function bu($,_e){var ot=$.updateQueue,ht=$.alternate;if(ht!==null&&(ht=ht.updateQueue,ot===ht)){var pt=null,xt=null;if(ot=ot.firstBaseUpdate,ot!==null){do{var Ct={eventTime:ot.eventTime,lane:ot.lane,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null};xt===null?pt=xt=Ct:xt=xt.next=Ct,ot=ot.next}while(ot!==null);xt===null?pt=xt=_e:xt=xt.next=_e}else pt=xt=_e;ot={baseState:ht.baseState,firstBaseUpdate:pt,lastBaseUpdate:xt,shared:ht.shared,effects:ht.effects},$.updateQueue=ot;return}$=ot.lastBaseUpdate,$===null?ot.firstBaseUpdate=_e:$.next=_e,ot.lastBaseUpdate=_e}function Cs($,_e,ot,ht){var pt=$.updateQueue;so=!1;var xt=pt.firstBaseUpdate,Ct=pt.lastBaseUpdate,kt=pt.shared.pending;if(kt!==null){pt.shared.pending=null;var Zt=kt,wn=Zt.next;Zt.next=null,Ct===null?xt=wn:Ct.next=wn,Ct=Zt;var In=$.alternate;if(In!==null){In=In.updateQueue;var Gn=In.lastBaseUpdate;Gn!==Ct&&(Gn===null?In.firstBaseUpdate=wn:Gn.next=wn,In.lastBaseUpdate=Zt)}}if(xt!==null){Gn=pt.baseState,Ct=0,In=wn=Zt=null;do{kt=xt.lane;var An=xt.eventTime;if((ht&kt)===kt){In!==null&&(In=In.next={eventTime:An,lane:0,tag:xt.tag,payload:xt.payload,callback:xt.callback,next:null});e:{var sr=$,fr=xt;switch(kt=_e,An=ot,fr.tag){case 1:if(sr=fr.payload,typeof sr=="function"){Gn=sr.call(An,Gn,kt);break e}Gn=sr;break e;case 3:sr.flags=sr.flags&-4097|64;case 0:if(sr=fr.payload,kt=typeof sr=="function"?sr.call(An,Gn,kt):sr,kt==null)break e;Gn=c({},Gn,kt);break e;case 2:so=!0}}xt.callback!==null&&($.flags|=32,kt=pt.effects,kt===null?pt.effects=[xt]:kt.push(xt))}else An={eventTime:An,lane:kt,tag:xt.tag,payload:xt.payload,callback:xt.callback,next:null},In===null?(wn=In=An,Zt=Gn):In=In.next=An,Ct|=kt;if(xt=xt.next,xt===null){if(kt=pt.shared.pending,kt===null)break;xt=kt.next,kt.next=null,pt.lastBaseUpdate=kt,pt.shared.pending=null}}while(1);In===null&&(Zt=Gn),pt.baseState=Zt,pt.firstBaseUpdate=wn,pt.lastBaseUpdate=In,Vs|=Ct,$.lanes=Ct,$.memoizedState=Gn}}function Eu($,_e,ot){if($=_e.effects,_e.effects=null,$!==null)for(_e=0;_e<$.length;_e++){var ht=$[_e],pt=ht.callback;if(pt!==null){if(ht.callback=null,ht=ot,typeof pt!="function")throw Error(b(191,pt));pt.call(ht)}}}var Tu=new d.Component().refs;function ga($,_e,ot,ht){_e=$.memoizedState,ot=ot(ht,_e),ot=ot==null?_e:c({},_e,ot),$.memoizedState=ot,$.lanes===0&&($.updateQueue.baseState=ot)}var va={isMounted:function($){return($=$._reactInternals)?bt($)===$:!1},enqueueSetState:function($,_e,ot){$=$._reactInternals;var ht=Xr(),pt=Wo($),xt=Go(ht,pt);xt.payload=_e,ot!=null&&(xt.callback=ot),zo($,xt),Ro($,pt,ht)},enqueueReplaceState:function($,_e,ot){$=$._reactInternals;var ht=Xr(),pt=Wo($),xt=Go(ht,pt);xt.tag=1,xt.payload=_e,ot!=null&&(xt.callback=ot),zo($,xt),Ro($,pt,ht)},enqueueForceUpdate:function($,_e){$=$._reactInternals;var ot=Xr(),ht=Wo($),pt=Go(ot,ht);pt.tag=2,_e!=null&&(pt.callback=_e),zo($,pt),Ro($,ht,ot)}};function Au($,_e,ot,ht,pt,xt,Ct){return $=$.stateNode,typeof $.shouldComponentUpdate=="function"?$.shouldComponentUpdate(ht,xt,Ct):_e.prototype&&_e.prototype.isPureReactComponent?!fo(ot,ht)||!fo(pt,xt):!0}function Cu($,_e,ot){var ht=!1,pt=vr,xt=_e.contextType;return typeof xt=="object"&&xt!==null?xt=wr(xt):(pt=ur(_e)?Nr:nr.current,ht=_e.contextTypes,xt=(ht=ht!=null)?or($,pt):vr),_e=new _e(ot,xt),$.memoizedState=_e.state!==null&&_e.state!==void 0?_e.state:null,_e.updater=va,$.stateNode=_e,_e._reactInternals=$,ht&&($=$.stateNode,$.__reactInternalMemoizedUnmaskedChildContext=pt,$.__reactInternalMemoizedMaskedChildContext=xt),_e}function Ru($,_e,ot,ht){$=_e.state,typeof _e.componentWillReceiveProps=="function"&&_e.componentWillReceiveProps(ot,ht),typeof _e.UNSAFE_componentWillReceiveProps=="function"&&_e.UNSAFE_componentWillReceiveProps(ot,ht),_e.state!==$&&va.enqueueReplaceState(_e,_e.state,null)}function Dl($,_e,ot,ht){var pt=$.stateNode;pt.props=ot,pt.state=$.memoizedState,pt.refs=Tu,Fl($);var xt=_e.contextType;typeof xt=="object"&&xt!==null?pt.context=wr(xt):(xt=ur(_e)?Nr:nr.current,pt.context=or($,xt)),Cs($,ot,pt,ht),pt.state=$.memoizedState,xt=_e.getDerivedStateFromProps,typeof xt=="function"&&(ga($,_e,xt,ot),pt.state=$.memoizedState),typeof _e.getDerivedStateFromProps=="function"||typeof pt.getSnapshotBeforeUpdate=="function"||typeof pt.UNSAFE_componentWillMount!="function"&&typeof pt.componentWillMount!="function"||(_e=pt.state,typeof pt.componentWillMount=="function"&&pt.componentWillMount(),typeof pt.UNSAFE_componentWillMount=="function"&&pt.UNSAFE_componentWillMount(),_e!==pt.state&&va.enqueueReplaceState(pt,pt.state,null),Cs($,ot,pt,ht),pt.state=$.memoizedState),typeof pt.componentDidMount=="function"&&($.flags|=4)}var _a=Array.isArray;function Rs($,_e,ot){if($=ot.ref,$!==null&&typeof $!="function"&&typeof $!="object"){if(ot._owner){if(ot=ot._owner,ot){if(ot.tag!==1)throw Error(b(309));var ht=ot.stateNode}if(!ht)throw Error(b(147,$));var pt=""+$;return _e!==null&&_e.ref!==null&&typeof _e.ref=="function"&&_e.ref._stringRef===pt?_e.ref:(_e=function(xt){var Ct=ht.refs;Ct===Tu&&(Ct=ht.refs={}),xt===null?delete Ct[pt]:Ct[pt]=xt},_e._stringRef=pt,_e)}if(typeof $!="string")throw Error(b(284));if(!ot._owner)throw Error(b(290,$))}return $}function el($,_e){if($.type!=="textarea")throw Error(b(31,Object.prototype.toString.call(_e)==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":_e))}function Lu($){function _e(Wt,Ut){if($){var Jt=Wt.lastEffect;Jt!==null?(Jt.nextEffect=Ut,Wt.lastEffect=Ut):Wt.firstEffect=Wt.lastEffect=Ut,Ut.nextEffect=null,Ut.flags=8}}function ot(Wt,Ut){if(!$)return null;for(;Ut!==null;)_e(Wt,Ut),Ut=Ut.sibling;return null}function ht(Wt,Ut){for(Wt=new Map;Ut!==null;)Ut.key!==null?Wt.set(Ut.key,Ut):Wt.set(Ut.index,Ut),Ut=Ut.sibling;return Wt}function pt(Wt,Ut){return Wt=Xo(Wt,Ut),Wt.index=0,Wt.sibling=null,Wt}function xt(Wt,Ut,Jt){return Wt.index=Jt,$?(Jt=Wt.alternate,Jt!==null?(Jt=Jt.index,Jt<Ut?(Wt.flags=2,Ut):Jt):(Wt.flags=2,Ut)):Ut}function Ct(Wt){return $&&Wt.alternate===null&&(Wt.flags=2),Wt}function kt(Wt,Ut,Jt,Tn){return Ut===null||Ut.tag!==6?(Ut=Su(Jt,Wt.mode,Tn),Ut.return=Wt,Ut):(Ut=pt(Ut,Jt),Ut.return=Wt,Ut)}function Zt(Wt,Ut,Jt,Tn){return Ut!==null&&Ut.elementType===Jt.type?(Tn=pt(Ut,Jt.props),Tn.ref=Rs(Wt,Ut,Jt),Tn.return=Wt,Tn):(Tn=Cl(Jt.type,Jt.key,Jt.props,null,Wt.mode,Tn),Tn.ref=Rs(Wt,Ut,Jt),Tn.return=Wt,Tn)}function wn(Wt,Ut,Jt,Tn){return Ut===null||Ut.tag!==4||Ut.stateNode.containerInfo!==Jt.containerInfo||Ut.stateNode.implementation!==Jt.implementation?(Ut=wu(Jt,Wt.mode,Tn),Ut.return=Wt,Ut):(Ut=pt(Ut,Jt.children||[]),Ut.return=Wt,Ut)}function In(Wt,Ut,Jt,Tn,kn){return Ut===null||Ut.tag!==7?(Ut=vs(Jt,Wt.mode,Tn,kn),Ut.return=Wt,Ut):(Ut=pt(Ut,Jt),Ut.return=Wt,Ut)}function Gn(Wt,Ut,Jt){if(typeof Ut=="string"||typeof Ut=="number")return Ut=Su(""+Ut,Wt.mode,Jt),Ut.return=Wt,Ut;if(typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case j:return Jt=Cl(Ut.type,Ut.key,Ut.props,null,Wt.mode,Jt),Jt.ref=Rs(Wt,null,Ut),Jt.return=Wt,Jt;case et:return Ut=wu(Ut,Wt.mode,Jt),Ut.return=Wt,Ut}if(_a(Ut)||vt(Ut))return Ut=vs(Ut,Wt.mode,Jt,null),Ut.return=Wt,Ut;el(Wt,Ut)}return null}function An(Wt,Ut,Jt,Tn){var kn=Ut!==null?Ut.key:null;if(typeof Jt=="string"||typeof Jt=="number")return kn!==null?null:kt(Wt,Ut,""+Jt,Tn);if(typeof Jt=="object"&&Jt!==null){switch(Jt.$$typeof){case j:return Jt.key===kn?Jt.type===nt?In(Wt,Ut,Jt.props.children,Tn,kn):Zt(Wt,Ut,Jt,Tn):null;case et:return Jt.key===kn?wn(Wt,Ut,Jt,Tn):null}if(_a(Jt)||vt(Jt))return kn!==null?null:In(Wt,Ut,Jt,Tn,null);el(Wt,Jt)}return null}function sr(Wt,Ut,Jt,Tn,kn){if(typeof Tn=="string"||typeof Tn=="number")return Wt=Wt.get(Jt)||null,kt(Ut,Wt,""+Tn,kn);if(typeof Tn=="object"&&Tn!==null){switch(Tn.$$typeof){case j:return Wt=Wt.get(Tn.key===null?Jt:Tn.key)||null,Tn.type===nt?In(Ut,Wt,Tn.props.children,kn,Tn.key):Zt(Ut,Wt,Tn,kn);case et:return Wt=Wt.get(Tn.key===null?Jt:Tn.key)||null,wn(Ut,Wt,Tn,kn)}if(_a(Tn)||vt(Tn))return Wt=Wt.get(Jt)||null,In(Ut,Wt,Tn,kn,null);el(Ut,Tn)}return null}function fr(Wt,Ut,Jt,Tn){for(var kn=null,lr=null,Vn=Ut,ir=Ut=0,Ar=null;Vn!==null&&ir<Jt.length;ir++){Vn.index>ir?(Ar=Vn,Vn=null):Ar=Vn.sibling;var Jn=An(Wt,Vn,Jt[ir],Tn);if(Jn===null){Vn===null&&(Vn=Ar);break}$&&Vn&&Jn.alternate===null&&_e(Wt,Vn),Ut=xt(Jn,Ut,ir),lr===null?kn=Jn:lr.sibling=Jn,lr=Jn,Vn=Ar}if(ir===Jt.length)return ot(Wt,Vn),kn;if(Vn===null){for(;ir<Jt.length;ir++)Vn=Gn(Wt,Jt[ir],Tn),Vn!==null&&(Ut=xt(Vn,Ut,ir),lr===null?kn=Vn:lr.sibling=Vn,lr=Vn);return kn}for(Vn=ht(Wt,Vn);ir<Jt.length;ir++)Ar=sr(Vn,Wt,ir,Jt[ir],Tn),Ar!==null&&($&&Ar.alternate!==null&&Vn.delete(Ar.key===null?ir:Ar.key),Ut=xt(Ar,Ut,ir),lr===null?kn=Ar:lr.sibling=Ar,lr=Ar);return $&&Vn.forEach(function($o){return _e(Wt,$o)}),kn}function Kr(Wt,Ut,Jt,Tn){var kn=vt(Jt);if(typeof kn!="function")throw Error(b(150));if(Jt=kn.call(Jt),Jt==null)throw Error(b(151));for(var lr=kn=null,Vn=Ut,ir=Ut=0,Ar=null,Jn=Jt.next();Vn!==null&&!Jn.done;ir++,Jn=Jt.next()){Vn.index>ir?(Ar=Vn,Vn=null):Ar=Vn.sibling;var $o=An(Wt,Vn,Jn.value,Tn);if($o===null){Vn===null&&(Vn=Ar);break}$&&Vn&&$o.alternate===null&&_e(Wt,Vn),Ut=xt($o,Ut,ir),lr===null?kn=$o:lr.sibling=$o,lr=$o,Vn=Ar}if(Jn.done)return ot(Wt,Vn),kn;if(Vn===null){for(;!Jn.done;ir++,Jn=Jt.next())Jn=Gn(Wt,Jn.value,Tn),Jn!==null&&(Ut=xt(Jn,Ut,ir),lr===null?kn=Jn:lr.sibling=Jn,lr=Jn);return kn}for(Vn=ht(Wt,Vn);!Jn.done;ir++,Jn=Jt.next())Jn=sr(Vn,Wt,ir,Jn.value,Tn),Jn!==null&&($&&Jn.alternate!==null&&Vn.delete(Jn.key===null?ir:Jn.key),Ut=xt(Jn,Ut,ir),lr===null?kn=Jn:lr.sibling=Jn,lr=Jn);return $&&Vn.forEach(function(sm){return _e(Wt,sm)}),kn}return function(Wt,Ut,Jt,Tn){var kn=typeof Jt=="object"&&Jt!==null&&Jt.type===nt&&Jt.key===null;kn&&(Jt=Jt.props.children);var lr=typeof Jt=="object"&&Jt!==null;if(lr)switch(Jt.$$typeof){case j:e:{for(lr=Jt.key,kn=Ut;kn!==null;){if(kn.key===lr){switch(kn.tag){case 7:if(Jt.type===nt){ot(Wt,kn.sibling),Ut=pt(kn,Jt.props.children),Ut.return=Wt,Wt=Ut;break e}break;default:if(kn.elementType===Jt.type){ot(Wt,kn.sibling),Ut=pt(kn,Jt.props),Ut.ref=Rs(Wt,kn,Jt),Ut.return=Wt,Wt=Ut;break e}}ot(Wt,kn);break}else _e(Wt,kn);kn=kn.sibling}Jt.type===nt?(Ut=vs(Jt.props.children,Wt.mode,Tn,Jt.key),Ut.return=Wt,Wt=Ut):(Tn=Cl(Jt.type,Jt.key,Jt.props,null,Wt.mode,Tn),Tn.ref=Rs(Wt,Ut,Jt),Tn.return=Wt,Wt=Tn)}return Ct(Wt);case et:e:{for(kn=Jt.key;Ut!==null;){if(Ut.key===kn)if(Ut.tag===4&&Ut.stateNode.containerInfo===Jt.containerInfo&&Ut.stateNode.implementation===Jt.implementation){ot(Wt,Ut.sibling),Ut=pt(Ut,Jt.children||[]),Ut.return=Wt,Wt=Ut;break e}else{ot(Wt,Ut);break}else _e(Wt,Ut);Ut=Ut.sibling}Ut=wu(Jt,Wt.mode,Tn),Ut.return=Wt,Wt=Ut}return Ct(Wt)}if(typeof Jt=="string"||typeof Jt=="number")return Jt=""+Jt,Ut!==null&&Ut.tag===6?(ot(Wt,Ut.sibling),Ut=pt(Ut,Jt),Ut.return=Wt,Wt=Ut):(ot(Wt,Ut),Ut=Su(Jt,Wt.mode,Tn),Ut.return=Wt,Wt=Ut),Ct(Wt);if(_a(Jt))return fr(Wt,Ut,Jt,Tn);if(vt(Jt))return Kr(Wt,Ut,Jt,Tn);if(lr&&el(Wt,Jt),typeof Jt=="undefined"&&!kn)switch(Wt.tag){case 1:case 22:case 0:case 11:case 15:throw Error(b(152,_t(Wt.type)||"Component"))}return ot(Wt,Ut)}}var tl=Lu(!0),Pu=Lu(!1),Ls={},Zr=Wn(Ls),Ps=Wn(Ls),cs=Wn(Ls);function ho($){if($===Ls)throw Error(b(174));return $}function Bl($,_e){On(cs,_e),On(Ps,$),On(Zr,Ls),$=Qt(_e),hn(Zr),On(Zr,$)}function fs(){hn(Zr),hn(Ps),hn(cs)}function Fu($){var _e=ho(cs.current),ot=ho(Zr.current);_e=Lt(ot,$.type,_e),ot!==_e&&(On(Ps,$),On(Zr,_e))}function Il($){Ps.current===$&&(hn(Zr),hn(Ps))}var mr=Wn(0);function nl($){for(var _e=$;_e!==null;){if(_e.tag===13){var ot=_e.memoizedState;if(ot!==null&&(ot=ot.dehydrated,ot===null||qt(ot)||Xt(ot)))return _e}else if(_e.tag===19&&_e.memoizedProps.revealOrder!==void 0){if((_e.flags&64)!==0)return _e}else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===$)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===$)return null;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}return null}var Eo=null,Ko=null,po=!1;function Du($,_e){var ot=Qr(5,null,null,0);ot.elementType="DELETED",ot.type="DELETED",ot.stateNode=_e,ot.return=$,ot.flags=8,$.lastEffect!==null?($.lastEffect.nextEffect=ot,$.lastEffect=ot):$.firstEffect=$.lastEffect=ot}function Bu($,_e){switch($.tag){case 5:return _e=Tt(_e,$.type,$.pendingProps),_e!==null?($.stateNode=_e,!0):!1;case 6:return _e=Gt(_e,$.pendingProps),_e!==null?($.stateNode=_e,!0):!1;case 13:return!1;default:return!1}}function kl($){if(po){var _e=Ko;if(_e){var ot=_e;if(!Bu($,_e)){if(_e=tn(ot),!_e||!Bu($,_e)){$.flags=$.flags&-1025|2,po=!1,Eo=$;return}Du(Eo,ot)}Eo=$,Ko=Bn(_e)}else $.flags=$.flags&-1025|2,po=!1,Eo=$}}function Iu($){for($=$.return;$!==null&&$.tag!==5&&$.tag!==3&&$.tag!==13;)$=$.return;Eo=$}function rl($){if(!cn||$!==Eo)return!1;if(!po)return Iu($),po=!0,!1;var _e=$.type;if($.tag!==5||_e!=="head"&&_e!=="body"&&!gn(_e,$.memoizedProps))for(_e=Ko;_e;)Du($,_e),_e=tn(_e);if(Iu($),$.tag===13){if(!cn)throw Error(b(316));if($=$.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(b(317));Ko=zn($)}else Ko=Eo?tn($.stateNode):null;return!0}function Ul(){cn&&(Ko=Eo=null,po=!1)}var ds=[];function Ol(){for(var $=0;$<ds.length;$++){var _e=ds[$];sn?_e._workInProgressVersionPrimary=null:_e._workInProgressVersionSecondary=null}ds.length=0}var Fs=k.ReactCurrentDispatcher,Jr=k.ReactCurrentBatchConfig,Ds=0,Mr=null,Ir=null,Fr=null,il=!1,Bs=!1;function Wr(){throw Error(b(321))}function Nl($,_e){if(_e===null)return!1;for(var ot=0;ot<_e.length&&ot<$.length;ot++)if(!Pr($[ot],_e[ot]))return!1;return!0}function Gl($,_e,ot,ht,pt,xt){if(Ds=xt,Mr=_e,_e.memoizedState=null,_e.updateQueue=null,_e.lanes=0,Fs.current=$===null||$.memoizedState===null?Dp:Bp,$=ot(ht,pt),Bs){xt=0;do{if(Bs=!1,!(25>xt))throw Error(b(301));xt+=1,Fr=Ir=null,_e.updateQueue=null,Fs.current=Ip,$=ot(ht,pt)}while(Bs)}if(Fs.current=ll,_e=Ir!==null&&Ir.next!==null,Ds=0,Fr=Ir=Mr=null,il=!1,_e)throw Error(b(300));return $}function es(){var $={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?Mr.memoizedState=Fr=$:Fr=Fr.next=$,Fr}function ts(){if(Ir===null){var $=Mr.alternate;$=$!==null?$.memoizedState:null}else $=Ir.next;var _e=Fr===null?Mr.memoizedState:Fr.next;if(_e!==null)Fr=_e,Ir=$;else{if($===null)throw Error(b(310));Ir=$,$={memoizedState:Ir.memoizedState,baseState:Ir.baseState,baseQueue:Ir.baseQueue,queue:Ir.queue,next:null},Fr===null?Mr.memoizedState=Fr=$:Fr=Fr.next=$}return Fr}function mo($,_e){return typeof _e=="function"?_e($):_e}function Is($){var _e=ts(),ot=_e.queue;if(ot===null)throw Error(b(311));ot.lastRenderedReducer=$;var ht=Ir,pt=ht.baseQueue,xt=ot.pending;if(xt!==null){if(pt!==null){var Ct=pt.next;pt.next=xt.next,xt.next=Ct}ht.baseQueue=pt=xt,ot.pending=null}if(pt!==null){pt=pt.next,ht=ht.baseState;var kt=Ct=xt=null,Zt=pt;do{var wn=Zt.lane;if((Ds&wn)===wn)kt!==null&&(kt=kt.next={lane:0,action:Zt.action,eagerReducer:Zt.eagerReducer,eagerState:Zt.eagerState,next:null}),ht=Zt.eagerReducer===$?Zt.eagerState:$(ht,Zt.action);else{var In={lane:wn,action:Zt.action,eagerReducer:Zt.eagerReducer,eagerState:Zt.eagerState,next:null};kt===null?(Ct=kt=In,xt=ht):kt=kt.next=In,Mr.lanes|=wn,Vs|=wn}Zt=Zt.next}while(Zt!==null&&Zt!==pt);kt===null?xt=ht:kt.next=Ct,Pr(ht,_e.memoizedState)||(ao=!0),_e.memoizedState=ht,_e.baseState=xt,_e.baseQueue=kt,ot.lastRenderedState=ht}return[_e.memoizedState,ot.dispatch]}function ks($){var _e=ts(),ot=_e.queue;if(ot===null)throw Error(b(311));ot.lastRenderedReducer=$;var ht=ot.dispatch,pt=ot.pending,xt=_e.memoizedState;if(pt!==null){ot.pending=null;var Ct=pt=pt.next;do xt=$(xt,Ct.action),Ct=Ct.next;while(Ct!==pt);Pr(xt,_e.memoizedState)||(ao=!0),_e.memoizedState=xt,_e.baseQueue===null&&(_e.baseState=xt),ot.lastRenderedState=xt}return[xt,ht]}function ku($,_e,ot){var ht=_e._getVersion;ht=ht(_e._source);var pt=sn?_e._workInProgressVersionPrimary:_e._workInProgressVersionSecondary;if(pt!==null?$=pt===ht:($=$.mutableReadLanes,($=(Ds&$)===$)&&(sn?_e._workInProgressVersionPrimary=ht:_e._workInProgressVersionSecondary=ht,ds.push(_e))),$)return ot(_e._source);throw ds.push(_e),Error(b(350))}function Uu($,_e,ot,ht){var pt=zr;if(pt===null)throw Error(b(349));var xt=_e._getVersion,Ct=xt(_e._source),kt=Fs.current,Zt=kt.useState(function(){return ku(pt,_e,ot)}),wn=Zt[1],In=Zt[0];Zt=Fr;var Gn=$.memoizedState,An=Gn.refs,sr=An.getSnapshot,fr=Gn.source;Gn=Gn.subscribe;var Kr=Mr;return $.memoizedState={refs:An,source:_e,subscribe:ht},kt.useEffect(function(){An.getSnapshot=ot,An.setSnapshot=wn;var Wt=xt(_e._source);if(!Pr(Ct,Wt)){Wt=ot(_e._source),Pr(In,Wt)||(wn(Wt),Wt=Wo(Kr),pt.mutableReadLanes|=Wt&pt.pendingLanes),Wt=pt.mutableReadLanes,pt.entangledLanes|=Wt;for(var Ut=pt.entanglements,Jt=Wt;0<Jt;){var Tn=31-Yr(Jt),kn=1<<Tn;Ut[Tn]|=Wt,Jt&=~kn}}},[ot,_e,ht]),kt.useEffect(function(){return ht(_e._source,function(){var Wt=An.getSnapshot,Ut=An.setSnapshot;try{Ut(Wt(_e._source));var Jt=Wo(Kr);pt.mutableReadLanes|=Jt&pt.pendingLanes}catch(Tn){Ut(function(){throw Tn})}})},[_e,ht]),Pr(sr,ot)&&Pr(fr,_e)&&Pr(Gn,ht)||($={pending:null,dispatch:null,lastRenderedReducer:mo,lastRenderedState:In},$.dispatch=wn=Wl.bind(null,Mr,$),Zt.queue=$,Zt.baseQueue=null,In=ku(pt,_e,ot),Zt.memoizedState=Zt.baseState=In),In}function Ou($,_e,ot){var ht=ts();return Uu(ht,$,_e,ot)}function Us($){var _e=es();return typeof $=="function"&&($=$()),_e.memoizedState=_e.baseState=$,$=_e.queue={pending:null,dispatch:null,lastRenderedReducer:mo,lastRenderedState:$},$=$.dispatch=Wl.bind(null,Mr,$),[_e.memoizedState,$]}function ol($,_e,ot,ht){return $={tag:$,create:_e,destroy:ot,deps:ht,next:null},_e=Mr.updateQueue,_e===null?(_e={lastEffect:null},Mr.updateQueue=_e,_e.lastEffect=$.next=$):(ot=_e.lastEffect,ot===null?_e.lastEffect=$.next=$:(ht=ot.next,ot.next=$,$.next=ht,_e.lastEffect=$)),$}function Nu($){var _e=es();return $={current:$},_e.memoizedState=$}function sl(){return ts().memoizedState}function zl($,_e,ot,ht){var pt=es();Mr.flags|=$,pt.memoizedState=ol(1|_e,ot,void 0,ht===void 0?null:ht)}function Vl($,_e,ot,ht){var pt=ts();ht=ht===void 0?null:ht;var xt=void 0;if(Ir!==null){var Ct=Ir.memoizedState;if(xt=Ct.destroy,ht!==null&&Nl(ht,Ct.deps)){ol(_e,ot,xt,ht);return}}Mr.flags|=$,pt.memoizedState=ol(1|_e,ot,xt,ht)}function Gu($,_e){return zl(516,4,$,_e)}function al($,_e){return Vl(516,4,$,_e)}function zu($,_e){return Vl(4,2,$,_e)}function Vu($,_e){if(typeof _e=="function")return $=$(),_e($),function(){_e(null)};if(_e!=null)return $=$(),_e.current=$,function(){_e.current=null}}function Hu($,_e,ot){return ot=ot!=null?ot.concat([$]):null,Vl(4,2,Vu.bind(null,_e,$),ot)}function Hl(){}function Wu($,_e){var ot=ts();_e=_e===void 0?null:_e;var ht=ot.memoizedState;return ht!==null&&_e!==null&&Nl(_e,ht[1])?ht[0]:(ot.memoizedState=[$,_e],$)}function ju($,_e){var ot=ts();_e=_e===void 0?null:_e;var ht=ot.memoizedState;return ht!==null&&_e!==null&&Nl(_e,ht[1])?ht[0]:($=$(),ot.memoizedState=[$,_e],$)}function Fp($,_e){var ot=ro();Gr(98>ot?98:ot,function(){$(!0)}),Gr(97<ot?97:ot,function(){var ht=Jr.transition;Jr.transition=1;try{$(!1),_e()}finally{Jr.transition=ht}})}function Wl($,_e,ot){var ht=Xr(),pt=Wo($),xt={lane:pt,action:ot,eagerReducer:null,eagerState:null,next:null},Ct=_e.pending;if(Ct===null?xt.next=xt:(xt.next=Ct.next,Ct.next=xt),_e.pending=xt,Ct=$.alternate,$===Mr||Ct!==null&&Ct===Mr)Bs=il=!0;else{if($.lanes===0&&(Ct===null||Ct.lanes===0)&&(Ct=_e.lastRenderedReducer,Ct!==null))try{var kt=_e.lastRenderedState,Zt=Ct(kt,ot);if(xt.eagerReducer=Ct,xt.eagerState=Zt,Pr(Zt,kt))return}catch{}finally{}Ro($,pt,ht)}}var ll={readContext:wr,useCallback:Wr,useContext:Wr,useEffect:Wr,useImperativeHandle:Wr,useLayoutEffect:Wr,useMemo:Wr,useReducer:Wr,useRef:Wr,useState:Wr,useDebugValue:Wr,useDeferredValue:Wr,useTransition:Wr,useMutableSource:Wr,useOpaqueIdentifier:Wr,unstable_isNewReconciler:!1},Dp={readContext:wr,useCallback:function($,_e){return es().memoizedState=[$,_e===void 0?null:_e],$},useContext:wr,useEffect:Gu,useImperativeHandle:function($,_e,ot){return ot=ot!=null?ot.concat([$]):null,zl(4,2,Vu.bind(null,_e,$),ot)},useLayoutEffect:function($,_e){return zl(4,2,$,_e)},useMemo:function($,_e){var ot=es();return _e=_e===void 0?null:_e,$=$(),ot.memoizedState=[$,_e],$},useReducer:function($,_e,ot){var ht=es();return _e=ot!==void 0?ot(_e):_e,ht.memoizedState=ht.baseState=_e,$=ht.queue={pending:null,dispatch:null,lastRenderedReducer:$,lastRenderedState:_e},$=$.dispatch=Wl.bind(null,Mr,$),[ht.memoizedState,$]},useRef:Nu,useState:Us,useDebugValue:Hl,useDeferredValue:function($){var _e=Us($),ot=_e[0],ht=_e[1];return Gu(function(){var pt=Jr.transition;Jr.transition=1;try{ht($)}finally{Jr.transition=pt}},[$]),ot},useTransition:function(){var $=Us(!1),_e=$[0];return $=Fp.bind(null,$[1]),Nu($),[$,_e]},useMutableSource:function($,_e,ot){var ht=es();return ht.memoizedState={refs:{getSnapshot:_e,setSnapshot:null},source:$,subscribe:ot},Uu(ht,$,_e,ot)},useOpaqueIdentifier:function(){if(po){var $=!1,_e=Kt(function(){throw $||($=!0,ot(bn())),Error(b(355))}),ot=Us(_e)[1];return(Mr.mode&2)===0&&(Mr.flags|=516,ol(5,function(){ot(bn())},void 0,null)),_e}return _e=bn(),Us(_e),_e},unstable_isNewReconciler:!1},Bp={readContext:wr,useCallback:Wu,useContext:wr,useEffect:al,useImperativeHandle:Hu,useLayoutEffect:zu,useMemo:ju,useReducer:Is,useRef:sl,useState:function(){return Is(mo)},useDebugValue:Hl,useDeferredValue:function($){var _e=Is(mo),ot=_e[0],ht=_e[1];return al(function(){var pt=Jr.transition;Jr.transition=1;try{ht($)}finally{Jr.transition=pt}},[$]),ot},useTransition:function(){var $=Is(mo)[0];return[sl().current,$]},useMutableSource:Ou,useOpaqueIdentifier:function(){return Is(mo)[0]},unstable_isNewReconciler:!1},Ip={readContext:wr,useCallback:Wu,useContext:wr,useEffect:al,useImperativeHandle:Hu,useLayoutEffect:zu,useMemo:ju,useReducer:ks,useRef:sl,useState:function(){return ks(mo)},useDebugValue:Hl,useDeferredValue:function($){var _e=ks(mo),ot=_e[0],ht=_e[1];return al(function(){var pt=Jr.transition;Jr.transition=1;try{ht($)}finally{Jr.transition=pt}},[$]),ot},useTransition:function(){var $=ks(mo)[0];return[sl().current,$]},useMutableSource:Ou,useOpaqueIdentifier:function(){return ks(mo)[0]},unstable_isNewReconciler:!1},kp=k.ReactCurrentOwner,ao=!1;function jr($,_e,ot,ht){_e.child=$===null?Pu(_e,null,ot,ht):tl(_e,$.child,ot,ht)}function Xu($,_e,ot,ht,pt){ot=ot.render;var xt=_e.ref;return Sr(_e,pt),ht=Gl($,_e,ot,ht,xt,pt),$!==null&&!ao?(_e.updateQueue=$.updateQueue,_e.flags&=-517,$.lanes&=~pt,To($,_e,pt)):(_e.flags|=1,jr($,_e,ht,pt),_e.child)}function $u($,_e,ot,ht,pt,xt){if($===null){var Ct=ot.type;return typeof Ct=="function"&&!_u(Ct)&&Ct.defaultProps===void 0&&ot.compare===null&&ot.defaultProps===void 0?(_e.tag=15,_e.type=Ct,qu($,_e,Ct,ht,pt,xt)):($=Cl(ot.type,null,ht,_e,_e.mode,xt),$.ref=_e.ref,$.return=_e,_e.child=$)}return Ct=$.child,(pt&xt)===0&&(pt=Ct.memoizedProps,ot=ot.compare,ot=ot!==null?ot:fo,ot(pt,ht)&&$.ref===_e.ref)?To($,_e,xt):(_e.flags|=1,$=Xo(Ct,ht),$.ref=_e.ref,$.return=_e,_e.child=$)}function qu($,_e,ot,ht,pt,xt){if($!==null&&fo($.memoizedProps,ht)&&$.ref===_e.ref)if(ao=!1,(xt&pt)!==0)($.flags&16384)!==0&&(ao=!0);else return _e.lanes=$.lanes,To($,_e,xt);return Xl($,_e,ot,ht,xt)}function jl($,_e,ot){var ht=_e.pendingProps,pt=ht.children,xt=$!==null?$.memoizedState:null;if(ht.mode==="hidden"||ht.mode==="unstable-defer-without-hiding")if((_e.mode&4)===0)_e.memoizedState={baseLanes:0},El(_e,ot);else if((ot&1073741824)!==0)_e.memoizedState={baseLanes:0},El(_e,xt!==null?xt.baseLanes:ot);else return $=xt!==null?xt.baseLanes|ot:ot,_e.lanes=_e.childLanes=1073741824,_e.memoizedState={baseLanes:$},El(_e,$),null;else xt!==null?(ht=xt.baseLanes|ot,_e.memoizedState=null):ht=ot,El(_e,ht);return jr($,_e,pt,ot),_e.child}function Yu($,_e){var ot=_e.ref;($===null&&ot!==null||$!==null&&$.ref!==ot)&&(_e.flags|=128)}function Xl($,_e,ot,ht,pt){var xt=ur(ot)?Nr:nr.current;return xt=or(_e,xt),Sr(_e,pt),ot=Gl($,_e,ot,ht,xt,pt),$!==null&&!ao?(_e.updateQueue=$.updateQueue,_e.flags&=-517,$.lanes&=~pt,To($,_e,pt)):(_e.flags|=1,jr($,_e,ot,pt),_e.child)}function Zu($,_e,ot,ht,pt){if(ur(ot)){var xt=!0;Po(_e)}else xt=!1;if(Sr(_e,pt),_e.stateNode===null)$!==null&&($.alternate=null,_e.alternate=null,_e.flags|=2),Cu(_e,ot,ht),Dl(_e,ot,ht,pt),ht=!0;else if($===null){var Ct=_e.stateNode,kt=_e.memoizedProps;Ct.props=kt;var Zt=Ct.context,wn=ot.contextType;typeof wn=="object"&&wn!==null?wn=wr(wn):(wn=ur(ot)?Nr:nr.current,wn=or(_e,wn));var In=ot.getDerivedStateFromProps,Gn=typeof In=="function"||typeof Ct.getSnapshotBeforeUpdate=="function";Gn||typeof Ct.UNSAFE_componentWillReceiveProps!="function"&&typeof Ct.componentWillReceiveProps!="function"||(kt!==ht||Zt!==wn)&&Ru(_e,Ct,ht,wn),so=!1;var An=_e.memoizedState;Ct.state=An,Cs(_e,ht,Ct,pt),Zt=_e.memoizedState,kt!==ht||An!==Zt||dr.current||so?(typeof In=="function"&&(ga(_e,ot,In,ht),Zt=_e.memoizedState),(kt=so||Au(_e,ot,kt,ht,An,Zt,wn))?(Gn||typeof Ct.UNSAFE_componentWillMount!="function"&&typeof Ct.componentWillMount!="function"||(typeof Ct.componentWillMount=="function"&&Ct.componentWillMount(),typeof Ct.UNSAFE_componentWillMount=="function"&&Ct.UNSAFE_componentWillMount()),typeof Ct.componentDidMount=="function"&&(_e.flags|=4)):(typeof Ct.componentDidMount=="function"&&(_e.flags|=4),_e.memoizedProps=ht,_e.memoizedState=Zt),Ct.props=ht,Ct.state=Zt,Ct.context=wn,ht=kt):(typeof Ct.componentDidMount=="function"&&(_e.flags|=4),ht=!1)}else{Ct=_e.stateNode,Mu($,_e),kt=_e.memoizedProps,wn=_e.type===_e.elementType?kt:cr(_e.type,kt),Ct.props=wn,Gn=_e.pendingProps,An=Ct.context,Zt=ot.contextType,typeof Zt=="object"&&Zt!==null?Zt=wr(Zt):(Zt=ur(ot)?Nr:nr.current,Zt=or(_e,Zt));var sr=ot.getDerivedStateFromProps;(In=typeof sr=="function"||typeof Ct.getSnapshotBeforeUpdate=="function")||typeof Ct.UNSAFE_componentWillReceiveProps!="function"&&typeof Ct.componentWillReceiveProps!="function"||(kt!==Gn||An!==Zt)&&Ru(_e,Ct,ht,Zt),so=!1,An=_e.memoizedState,Ct.state=An,Cs(_e,ht,Ct,pt);var fr=_e.memoizedState;kt!==Gn||An!==fr||dr.current||so?(typeof sr=="function"&&(ga(_e,ot,sr,ht),fr=_e.memoizedState),(wn=so||Au(_e,ot,wn,ht,An,fr,Zt))?(In||typeof Ct.UNSAFE_componentWillUpdate!="function"&&typeof Ct.componentWillUpdate!="function"||(typeof Ct.componentWillUpdate=="function"&&Ct.componentWillUpdate(ht,fr,Zt),typeof Ct.UNSAFE_componentWillUpdate=="function"&&Ct.UNSAFE_componentWillUpdate(ht,fr,Zt)),typeof Ct.componentDidUpdate=="function"&&(_e.flags|=4),typeof Ct.getSnapshotBeforeUpdate=="function"&&(_e.flags|=256)):(typeof Ct.componentDidUpdate!="function"||kt===$.memoizedProps&&An===$.memoizedState||(_e.flags|=4),typeof Ct.getSnapshotBeforeUpdate!="function"||kt===$.memoizedProps&&An===$.memoizedState||(_e.flags|=256),_e.memoizedProps=ht,_e.memoizedState=fr),Ct.props=ht,Ct.state=fr,Ct.context=Zt,ht=wn):(typeof Ct.componentDidUpdate!="function"||kt===$.memoizedProps&&An===$.memoizedState||(_e.flags|=4),typeof Ct.getSnapshotBeforeUpdate!="function"||kt===$.memoizedProps&&An===$.memoizedState||(_e.flags|=256),ht=!1)}return $l($,_e,ot,ht,xt,pt)}function $l($,_e,ot,ht,pt,xt){Yu($,_e);var Ct=(_e.flags&64)!==0;if(!ht&&!Ct)return pt&&_s(_e,ot,!1),To($,_e,xt);ht=_e.stateNode,kp.current=_e;var kt=Ct&&typeof ot.getDerivedStateFromError!="function"?null:ht.render();return _e.flags|=1,$!==null&&Ct?(_e.child=tl(_e,$.child,null,xt),_e.child=tl(_e,null,kt,xt)):jr($,_e,kt,xt),_e.memoizedState=ht.state,pt&&_s(_e,ot,!0),_e.child}function Ju($){var _e=$.stateNode;_e.pendingContext?Cr($,_e.pendingContext,_e.pendingContext!==_e.context):_e.context&&Cr($,_e.context,!1),Bl($,_e.containerInfo)}var ul={dehydrated:null,retryLane:0};function Qu($,_e,ot){var ht=_e.pendingProps,pt=mr.current,xt=!1,Ct;return(Ct=(_e.flags&64)!==0)||(Ct=$!==null&&$.memoizedState===null?!1:(pt&2)!==0),Ct?(xt=!0,_e.flags&=-65):$!==null&&$.memoizedState===null||ht.fallback===void 0||ht.unstable_avoidThisFallback===!0||(pt|=1),On(mr,pt&1),$===null?(ht.fallback!==void 0&&kl(_e),$=ht.children,pt=ht.fallback,xt?($=Ku(_e,$,pt,ot),_e.child.memoizedState={baseLanes:ot},_e.memoizedState=ul,$):typeof ht.unstable_expectedLoadTime=="number"?($=Ku(_e,$,pt,ot),_e.child.memoizedState={baseLanes:ot},_e.memoizedState=ul,_e.lanes=33554432,$):(ot=xu({mode:"visible",children:$},_e.mode,ot,null),ot.return=_e,_e.child=ot)):$.memoizedState!==null?xt?(ht=_f($,_e,ht.children,ht.fallback,ot),xt=_e.child,pt=$.child.memoizedState,xt.memoizedState=pt===null?{baseLanes:ot}:{baseLanes:pt.baseLanes|ot},xt.childLanes=$.childLanes&~ot,_e.memoizedState=ul,ht):(ot=_c($,_e,ht.children,ot),_e.memoizedState=null,ot):xt?(ht=_f($,_e,ht.children,ht.fallback,ot),xt=_e.child,pt=$.child.memoizedState,xt.memoizedState=pt===null?{baseLanes:ot}:{baseLanes:pt.baseLanes|ot},xt.childLanes=$.childLanes&~ot,_e.memoizedState=ul,ht):(ot=_c($,_e,ht.children,ot),_e.memoizedState=null,ot)}function Ku($,_e,ot,ht){var pt=$.mode,xt=$.child;return _e={mode:"hidden",children:_e},(pt&2)===0&&xt!==null?(xt.childLanes=0,xt.pendingProps=_e):xt=xu(_e,pt,0,null),ot=vs(ot,pt,ht,null),xt.return=$,ot.return=$,xt.sibling=ot,$.child=xt,ot}function _c($,_e,ot,ht){var pt=$.child;return $=pt.sibling,ot=Xo(pt,{mode:"visible",children:ot}),(_e.mode&2)===0&&(ot.lanes=ht),ot.return=_e,ot.sibling=null,$!==null&&($.nextEffect=null,$.flags=8,_e.firstEffect=_e.lastEffect=$),_e.child=ot}function _f($,_e,ot,ht,pt){var xt=_e.mode,Ct=$.child;$=Ct.sibling;var kt={mode:"hidden",children:ot};return(xt&2)===0&&_e.child!==Ct?(ot=_e.child,ot.childLanes=0,ot.pendingProps=kt,Ct=ot.lastEffect,Ct!==null?(_e.firstEffect=ot.firstEffect,_e.lastEffect=Ct,Ct.nextEffect=null):_e.firstEffect=_e.lastEffect=null):ot=Xo(Ct,kt),$!==null?ht=Xo($,ht):(ht=vs(ht,xt,pt,null),ht.flags|=2),ht.return=_e,ot.return=_e,ot.sibling=ht,_e.child=ot,ht}function _d($,_e){$.lanes|=_e;var ot=$.alternate;ot!==null&&(ot.lanes|=_e),Hr($.return,_e)}function ql($,_e,ot,ht,pt,xt){var Ct=$.memoizedState;Ct===null?$.memoizedState={isBackwards:_e,rendering:null,renderingStartTime:0,last:ht,tail:ot,tailMode:pt,lastEffect:xt}:(Ct.isBackwards=_e,Ct.rendering=null,Ct.renderingStartTime=0,Ct.last=ht,Ct.tail=ot,Ct.tailMode=pt,Ct.lastEffect=xt)}function _h($,_e,ot){var ht=_e.pendingProps,pt=ht.revealOrder,xt=ht.tail;if(jr($,_e,ht.children,ot),ht=mr.current,(ht&2)!==0)ht=ht&1|2,_e.flags|=64;else{if($!==null&&($.flags&64)!==0)e:for($=_e.child;$!==null;){if($.tag===13)$.memoizedState!==null&&_d($,ot);else if($.tag===19)_d($,ot);else if($.child!==null){$.child.return=$,$=$.child;continue}if($===_e)break e;for(;$.sibling===null;){if($.return===null||$.return===_e)break e;$=$.return}$.sibling.return=$.return,$=$.sibling}ht&=1}if(On(mr,ht),(_e.mode&2)===0)_e.memoizedState=null;else switch(pt){case"forwards":for(ot=_e.child,pt=null;ot!==null;)$=ot.alternate,$!==null&&nl($)===null&&(pt=ot),ot=ot.sibling;ot=pt,ot===null?(pt=_e.child,_e.child=null):(pt=ot.sibling,ot.sibling=null),ql(_e,!1,pt,ot,xt,_e.lastEffect);break;case"backwards":for(ot=null,pt=_e.child,_e.child=null;pt!==null;){if($=pt.alternate,$!==null&&nl($)===null){_e.child=pt;break}$=pt.sibling,pt.sibling=ot,ot=pt,pt=$}ql(_e,!0,ot,null,xt,_e.lastEffect);break;case"together":ql(_e,!1,null,null,void 0,_e.lastEffect);break;default:_e.memoizedState=null}return _e.child}function To($,_e,ot){if($!==null&&(_e.dependencies=$.dependencies),Vs|=_e.lanes,(ot&_e.childLanes)!==0){if($!==null&&_e.child!==$.child)throw Error(b(153));if(_e.child!==null){for($=_e.child,ot=Xo($,$.pendingProps),_e.child=ot,ot.return=_e;$.sibling!==null;)$=$.sibling,ot=ot.sibling=Xo($,$.pendingProps),ot.return=_e;ot.sibling=null}return _e.child}return null}function go($){$.flags|=4}var Os,Ns,cl,fl;if(rn)Os=function($,_e){for(var ot=_e.child;ot!==null;){if(ot.tag===5||ot.tag===6)nn($,ot.stateNode);else if(ot.tag!==4&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===_e)break;for(;ot.sibling===null;){if(ot.return===null||ot.return===_e)return;ot=ot.return}ot.sibling.return=ot.return,ot=ot.sibling}},Ns=function(){},cl=function($,_e,ot,ht,pt){if($=$.memoizedProps,$!==ht){var xt=_e.stateNode,Ct=ho(Zr.current);ot=Mn(xt,ot,$,ht,pt,Ct),(_e.updateQueue=ot)&&go(_e)}},fl=function($,_e,ot,ht){ot!==ht&&go(_e)};else if(vn){Os=function($,_e,ot,ht){for(var pt=_e.child;pt!==null;){if(pt.tag===5){var xt=pt.stateNode;ot&&ht&&(xt=Ur(xt,pt.type,pt.memoizedProps,pt)),nn($,xt)}else if(pt.tag===6)xt=pt.stateNode,ot&&ht&&(xt=pr(xt,pt.memoizedProps,pt)),nn($,xt);else if(pt.tag!==4){if(pt.tag===13&&(pt.flags&4)!==0&&(xt=pt.memoizedState!==null)){var Ct=pt.child;if(Ct!==null&&(Ct.child!==null&&(Ct.child.return=Ct,Os($,Ct,!0,xt)),xt=Ct.sibling,xt!==null)){xt.return=pt,pt=xt;continue}}if(pt.child!==null){pt.child.return=pt,pt=pt.child;continue}}if(pt===_e)break;for(;pt.sibling===null;){if(pt.return===null||pt.return===_e)return;pt=pt.return}pt.sibling.return=pt.return,pt=pt.sibling}};var ep=function($,_e,ot,ht){for(var pt=_e.child;pt!==null;){if(pt.tag===5){var xt=pt.stateNode;ot&&ht&&(xt=Ur(xt,pt.type,pt.memoizedProps,pt)),br($,xt)}else if(pt.tag===6)xt=pt.stateNode,ot&&ht&&(xt=pr(xt,pt.memoizedProps,pt)),br($,xt);else if(pt.tag!==4){if(pt.tag===13&&(pt.flags&4)!==0&&(xt=pt.memoizedState!==null)){var Ct=pt.child;if(Ct!==null&&(Ct.child!==null&&(Ct.child.return=Ct,ep($,Ct,!0,xt)),xt=Ct.sibling,xt!==null)){xt.return=pt,pt=xt;continue}}if(pt.child!==null){pt.child.return=pt,pt=pt.child;continue}}if(pt===_e)break;for(;pt.sibling===null;){if(pt.return===null||pt.return===_e)return;pt=pt.return}pt.sibling.return=pt.return,pt=pt.sibling}};Ns=function($){var _e=$.stateNode;if($.firstEffect!==null){var ot=_e.containerInfo,ht=hr(ot);ep(ht,$,!1,!1),_e.pendingChildren=ht,go($),tr(ot,ht)}},cl=function($,_e,ot,ht,pt){var xt=$.stateNode,Ct=$.memoizedProps;if(($=_e.firstEffect===null)&&Ct===ht)_e.stateNode=xt;else{var kt=_e.stateNode,Zt=ho(Zr.current),wn=null;Ct!==ht&&(wn=Mn(kt,ot,Ct,ht,pt,Zt)),$&&wn===null?_e.stateNode=xt:(xt=qn(xt,wn,ot,Ct,ht,_e,$,kt),jt(xt,ot,ht,pt,Zt)&&go(_e),_e.stateNode=xt,$?go(_e):Os(xt,_e,!1,!1))}},fl=function($,_e,ot,ht){ot!==ht?($=ho(cs.current),ot=ho(Zr.current),_e.stateNode=fn(ht,$,ot,_e),go(_e)):_e.stateNode=$.stateNode}}else Ns=function(){},cl=function(){},fl=function(){};function Gs($,_e){if(!po)switch($.tailMode){case"hidden":_e=$.tail;for(var ot=null;_e!==null;)_e.alternate!==null&&(ot=_e),_e=_e.sibling;ot===null?$.tail=null:ot.sibling=null;break;case"collapsed":ot=$.tail;for(var ht=null;ot!==null;)ot.alternate!==null&&(ht=ot),ot=ot.sibling;ht===null?_e||$.tail===null?$.tail=null:$.tail.sibling=null:ht.sibling=null}}function Up($,_e,ot){var ht=_e.pendingProps;switch(_e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ur(_e.type)&&eo(),null;case 3:return fs(),hn(dr),hn(nr),Ol(),ht=_e.stateNode,ht.pendingContext&&(ht.context=ht.pendingContext,ht.pendingContext=null),($===null||$.child===null)&&(rl(_e)?go(_e):ht.hydrate||(_e.flags|=256)),Ns(_e),null;case 5:Il(_e);var pt=ho(cs.current);if(ot=_e.type,$!==null&&_e.stateNode!=null)cl($,_e,ot,ht,pt),$.ref!==_e.ref&&(_e.flags|=128);else{if(!ht){if(_e.stateNode===null)throw Error(b(166));return null}if($=ho(Zr.current),rl(_e)){if(!cn)throw Error(b(175));$=Nn(_e.stateNode,_e.type,_e.memoizedProps,pt,$,_e),_e.updateQueue=$,$!==null&&go(_e)}else{var xt=on(ot,ht,pt,$,_e);Os(xt,_e,!1,!1),_e.stateNode=xt,jt(xt,ot,ht,pt,$)&&go(_e)}_e.ref!==null&&(_e.flags|=128)}return null;case 6:if($&&_e.stateNode!=null)fl($,_e,$.memoizedProps,ht);else{if(typeof ht!="string"&&_e.stateNode===null)throw Error(b(166));if($=ho(cs.current),pt=ho(Zr.current),rl(_e)){if(!cn)throw Error(b(176));Hn(_e.stateNode,_e.memoizedProps,_e)&&go(_e)}else _e.stateNode=fn(ht,$,pt,_e)}return null;case 13:return hn(mr),ht=_e.memoizedState,(_e.flags&64)!==0?(_e.lanes=ot,_e):(ht=ht!==null,pt=!1,$===null?_e.memoizedProps.fallback!==void 0&&rl(_e):pt=$.memoizedState!==null,ht&&!pt&&(_e.mode&2)!==0&&($===null&&_e.memoizedProps.unstable_avoidThisFallback!==!0||(mr.current&1)!==0?Dr===0&&(Dr=3):((Dr===0||Dr===3)&&(Dr=4),zr===null||(Vs&134217727)===0&&(ps&134217727)===0||ms(zr,kr))),vn&&ht&&(_e.flags|=4),rn&&(ht||pt)&&(_e.flags|=4),null);case 4:return fs(),Ns(_e),$===null&&Mt(_e.stateNode.containerInfo),null;case 10:return Tr(_e),null;case 17:return ur(_e.type)&&eo(),null;case 19:if(hn(mr),ht=_e.memoizedState,ht===null)return null;if(pt=(_e.flags&64)!==0,xt=ht.rendering,xt===null)if(pt)Gs(ht,!1);else{if(Dr!==0||$!==null&&($.flags&64)!==0)for($=_e.child;$!==null;){if(xt=nl($),xt!==null){for(_e.flags|=64,Gs(ht,!1),$=xt.updateQueue,$!==null&&(_e.updateQueue=$,_e.flags|=4),ht.lastEffect===null&&(_e.firstEffect=null),_e.lastEffect=ht.lastEffect,$=ot,ht=_e.child;ht!==null;)pt=ht,ot=$,pt.flags&=2,pt.nextEffect=null,pt.firstEffect=null,pt.lastEffect=null,xt=pt.alternate,xt===null?(pt.childLanes=0,pt.lanes=ot,pt.child=null,pt.memoizedProps=null,pt.memoizedState=null,pt.updateQueue=null,pt.dependencies=null,pt.stateNode=null):(pt.childLanes=xt.childLanes,pt.lanes=xt.lanes,pt.child=xt.child,pt.memoizedProps=xt.memoizedProps,pt.memoizedState=xt.memoizedState,pt.updateQueue=xt.updateQueue,pt.type=xt.type,ot=xt.dependencies,pt.dependencies=ot===null?null:{lanes:ot.lanes,firstContext:ot.firstContext}),ht=ht.sibling;return On(mr,mr.current&1|2),_e.child}$=$.sibling}ht.tail!==null&&_r()>cu&&(_e.flags|=64,pt=!0,Gs(ht,!1),_e.lanes=33554432)}else{if(!pt)if($=nl(xt),$!==null){if(_e.flags|=64,pt=!0,$=$.updateQueue,$!==null&&(_e.updateQueue=$,_e.flags|=4),Gs(ht,!0),ht.tail===null&&ht.tailMode==="hidden"&&!xt.alternate&&!po)return _e=_e.lastEffect=ht.lastEffect,_e!==null&&(_e.nextEffect=null),null}else 2*_r()-ht.renderingStartTime>cu&&ot!==1073741824&&(_e.flags|=64,pt=!0,Gs(ht,!1),_e.lanes=33554432);ht.isBackwards?(xt.sibling=_e.child,_e.child=xt):($=ht.last,$!==null?$.sibling=xt:_e.child=xt,ht.last=xt)}return ht.tail!==null?($=ht.tail,ht.rendering=$,ht.tail=$.sibling,ht.lastEffect=_e.lastEffect,ht.renderingStartTime=_r(),$.sibling=null,_e=mr.current,On(mr,pt?_e&1|2:_e&1),$):null;case 23:case 24:return gu(),$!==null&&$.memoizedState!==null!=(_e.memoizedState!==null)&&ht.mode!=="unstable-defer-without-hiding"&&(_e.flags|=4),null}throw Error(b(156,_e.tag))}function Op($){switch($.tag){case 1:ur($.type)&&eo();var _e=$.flags;return _e&4096?($.flags=_e&-4097|64,$):null;case 3:if(fs(),hn(dr),hn(nr),Ol(),_e=$.flags,(_e&64)!==0)throw Error(b(285));return $.flags=_e&-4097|64,$;case 5:return Il($),null;case 13:return hn(mr),_e=$.flags,_e&4096?($.flags=_e&-4097|64,$):null;case 19:return hn(mr),null;case 4:return fs(),null;case 10:return Tr($),null;case 23:case 24:return gu(),null;default:return null}}function Yl($,_e){try{var ot="",ht=_e;do ot+=ls(ht),ht=ht.return;while(ht);var pt=ot}catch(xt){pt=`
Error generating stack: `+xt.message+`
`+xt.stack}return{value:$,source:_e,stack:pt}}function Zl($,_e){try{console.error(_e.value)}catch(ot){setTimeout(function(){throw ot})}}var Np=typeof WeakMap=="function"?WeakMap:Map;function tp($,_e,ot){ot=Go(-1,ot),ot.tag=3,ot.payload={element:null};var ht=_e.value;return ot.callback=function(){Sl||(Sl=!0,fu=ht),Zl($,_e)},ot}function np($,_e,ot){ot=Go(-1,ot),ot.tag=3;var ht=$.type.getDerivedStateFromError;if(typeof ht=="function"){var pt=_e.value;ot.payload=function(){return Zl($,_e),ht(pt)}}var xt=$.stateNode;return xt!==null&&typeof xt.componentDidCatch=="function"&&(ot.callback=function(){typeof ht!="function"&&(vo===null?vo=new Set([this]):vo.add(this),Zl($,_e));var Ct=_e.stack;this.componentDidCatch(_e.value,{componentStack:Ct!==null?Ct:""})}),ot}var Gp=typeof WeakSet=="function"?WeakSet:Set;function rp($){var _e=$.ref;if(_e!==null)if(typeof _e=="function")try{_e(null)}catch(ot){jo($,ot)}else _e.current=null}function zp($,_e){switch(_e.tag){case 0:case 11:case 15:case 22:return;case 1:if(_e.flags&256&&$!==null){var ot=$.memoizedProps,ht=$.memoizedState;$=_e.stateNode,_e=$.getSnapshotBeforeUpdate(_e.elementType===_e.type?ot:cr(_e.type,ot),ht),$.__reactInternalSnapshotBeforeUpdate=_e}return;case 3:rn&&_e.flags&256&&Kn(_e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(b(163))}function ip($,_e){if(_e=_e.updateQueue,_e=_e!==null?_e.lastEffect:null,_e!==null){var ot=_e=_e.next;do{if((ot.tag&$)===$){var ht=ot.destroy;ot.destroy=void 0,ht!==void 0&&ht()}ot=ot.next}while(ot!==_e)}}function Vp($,_e,ot){switch(ot.tag){case 0:case 11:case 15:case 22:if(_e=ot.updateQueue,_e=_e!==null?_e.lastEffect:null,_e!==null){$=_e=_e.next;do{if(($.tag&3)===3){var ht=$.create;$.destroy=ht()}$=$.next}while($!==_e)}if(_e=ot.updateQueue,_e=_e!==null?_e.lastEffect:null,_e!==null){$=_e=_e.next;do{var pt=$;ht=pt.next,pt=pt.tag,(pt&4)!==0&&(pt&1)!==0&&(Sp(ot,$),Jp(ot,$)),$=ht}while($!==_e)}return;case 1:$=ot.stateNode,ot.flags&4&&(_e===null?$.componentDidMount():(ht=ot.elementType===ot.type?_e.memoizedProps:cr(ot.type,_e.memoizedProps),$.componentDidUpdate(ht,_e.memoizedState,$.__reactInternalSnapshotBeforeUpdate))),_e=ot.updateQueue,_e!==null&&Eu(ot,_e,$);return;case 3:if(_e=ot.updateQueue,_e!==null){if($=null,ot.child!==null)switch(ot.child.tag){case 5:$=Vt(ot.child.stateNode);break;case 1:$=ot.child.stateNode}Eu(ot,_e,$)}return;case 5:$=ot.stateNode,_e===null&&ot.flags&4&&an($,ot.type,ot.memoizedProps,ot);return;case 6:return;case 4:return;case 12:return;case 13:cn&&ot.memoizedState===null&&(ot=ot.alternate,ot!==null&&(ot=ot.memoizedState,ot!==null&&(ot=ot.dehydrated,ot!==null&&$n(ot))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(b(163))}function op($,_e){if(rn)for(var ot=$;;){if(ot.tag===5){var ht=ot.stateNode;_e?ar(ht):er(ot.stateNode,ot.memoizedProps)}else if(ot.tag===6)ht=ot.stateNode,_e?Yn(ht):Lr(ht,ot.memoizedProps);else if((ot.tag!==23&&ot.tag!==24||ot.memoizedState===null||ot===$)&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===$)break;for(;ot.sibling===null;){if(ot.return===null||ot.return===$)return;ot=ot.return}ot.sibling.return=ot.return,ot=ot.sibling}}function sp($,_e){if(to&&typeof to.onCommitFiberUnmount=="function")try{to.onCommitFiberUnmount(yo,_e)}catch{}switch(_e.tag){case 0:case 11:case 14:case 15:case 22:if($=_e.updateQueue,$!==null&&($=$.lastEffect,$!==null)){var ot=$=$.next;do{var ht=ot,pt=ht.destroy;if(ht=ht.tag,pt!==void 0)if((ht&4)!==0)Sp(_e,ot);else{ht=_e;try{pt()}catch(xt){jo(ht,xt)}}ot=ot.next}while(ot!==$)}break;case 1:if(rp(_e),$=_e.stateNode,typeof $.componentWillUnmount=="function")try{$.props=_e.memoizedProps,$.state=_e.memoizedState,$.componentWillUnmount()}catch(xt){jo(_e,xt)}break;case 5:rp(_e);break;case 4:rn?fp($,_e):vn&&vn&&(_e=_e.stateNode.containerInfo,$=hr(_e),Er(_e,$))}}function ap($,_e){for(var ot=_e;;)if(sp($,ot),ot.child===null||rn&&ot.tag===4){if(ot===_e)break;for(;ot.sibling===null;){if(ot.return===null||ot.return===_e)return;ot=ot.return}ot.sibling.return=ot.return,ot=ot.sibling}else ot.child.return=ot,ot=ot.child}function lp($){$.alternate=null,$.child=null,$.dependencies=null,$.firstEffect=null,$.lastEffect=null,$.memoizedProps=null,$.memoizedState=null,$.pendingProps=null,$.return=null,$.updateQueue=null}function up($){return $.tag===5||$.tag===3||$.tag===4}function cp($){if(rn){e:{for(var _e=$.return;_e!==null;){if(up(_e))break e;_e=_e.return}throw Error(b(160))}var ot=_e;switch(_e=ot.stateNode,ot.tag){case 5:var ht=!1;break;case 3:_e=_e.containerInfo,ht=!0;break;case 4:_e=_e.containerInfo,ht=!0;break;default:throw Error(b(161))}ot.flags&16&&(Fn(_e),ot.flags&=-17);e:t:for(ot=$;;){for(;ot.sibling===null;){if(ot.return===null||up(ot.return)){ot=null;break e}ot=ot.return}for(ot.sibling.return=ot.return,ot=ot.sibling;ot.tag!==5&&ot.tag!==6&&ot.tag!==18;){if(ot.flags&2||ot.child===null||ot.tag===4)continue t;ot.child.return=ot,ot=ot.child}if(!(ot.flags&2)){ot=ot.stateNode;break e}}ht?Jl($,ot,_e):Ql($,ot,_e)}}function Jl($,_e,ot){var ht=$.tag,pt=ht===5||ht===6;if(pt)$=pt?$.stateNode:$.stateNode.instance,_e?un(ot,$,_e):yn(ot,$);else if(ht!==4&&($=$.child,$!==null))for(Jl($,_e,ot),$=$.sibling;$!==null;)Jl($,_e,ot),$=$.sibling}function Ql($,_e,ot){var ht=$.tag,pt=ht===5||ht===6;if(pt)$=pt?$.stateNode:$.stateNode.instance,_e?Cn(ot,$,_e):Sn(ot,$);else if(ht!==4&&($=$.child,$!==null))for(Ql($,_e,ot),$=$.sibling;$!==null;)Ql($,_e,ot),$=$.sibling}function fp($,_e){for(var ot=_e,ht=!1,pt,xt;;){if(!ht){ht=ot.return;e:for(;;){if(ht===null)throw Error(b(160));switch(pt=ht.stateNode,ht.tag){case 5:xt=!1;break e;case 3:pt=pt.containerInfo,xt=!0;break e;case 4:pt=pt.containerInfo,xt=!0;break e}ht=ht.return}ht=!0}if(ot.tag===5||ot.tag===6)ap($,ot),xt?Rn(pt,ot.stateNode):ln(pt,ot.stateNode);else if(ot.tag===4){if(ot.child!==null){pt=ot.stateNode.containerInfo,xt=!0,ot.child.return=ot,ot=ot.child;continue}}else if(sp($,ot),ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===_e)break;for(;ot.sibling===null;){if(ot.return===null||ot.return===_e)return;ot=ot.return,ot.tag===4&&(ht=!1)}ot.sibling.return=ot.return,ot=ot.sibling}}function Kl($,_e){if(rn){switch(_e.tag){case 0:case 11:case 14:case 15:case 22:ip(3,_e);return;case 1:return;case 5:var ot=_e.stateNode;if(ot!=null){var ht=_e.memoizedProps;$=$!==null?$.memoizedProps:ht;var pt=_e.type,xt=_e.updateQueue;_e.updateQueue=null,xt!==null&&en(ot,xt,pt,$,ht,_e)}return;case 6:if(_e.stateNode===null)throw Error(b(162));ot=_e.memoizedProps,Bt(_e.stateNode,$!==null?$.memoizedProps:ot,ot);return;case 3:cn&&(_e=_e.stateNode,_e.hydrate&&(_e.hydrate=!1,Zn(_e.containerInfo)));return;case 12:return;case 13:dp(_e),dl(_e);return;case 19:dl(_e);return;case 17:return;case 23:case 24:op(_e,_e.memoizedState!==null);return}throw Error(b(163))}switch(_e.tag){case 0:case 11:case 14:case 15:case 22:ip(3,_e);return;case 12:return;case 13:dp(_e),dl(_e);return;case 19:dl(_e);return;case 3:cn&&(ot=_e.stateNode,ot.hydrate&&(ot.hydrate=!1,Zn(ot.containerInfo)));break;case 23:case 24:return}e:if(vn){switch(_e.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:_e=_e.stateNode,Er(_e.containerInfo,_e.pendingChildren);break e}throw Error(b(163))}}function dp($){$.memoizedState!==null&&(uu=_r(),rn&&op($.child,!0))}function dl($){var _e=$.updateQueue;if(_e!==null){$.updateQueue=null;var ot=$.stateNode;ot===null&&(ot=$.stateNode=new Gp),_e.forEach(function(ht){var pt=em.bind(null,$,ht);ot.has(ht)||(ot.add(ht),ht.then(pt,pt))})}}function Hp($,_e){return $!==null&&($=$.memoizedState,$===null||$.dehydrated!==null)?(_e=_e.memoizedState,_e!==null&&_e.dehydrated===null):!1}var hl=0,pl=1,ml=2,gl=3,vl=4;if(typeof Symbol=="function"&&Symbol.for){var zs=Symbol.for;hl=zs("selector.component"),pl=zs("selector.has_pseudo_class"),ml=zs("selector.role"),gl=zs("selector.test_id"),vl=zs("selector.text")}function eu($){var _e=Dn($);if(_e!=null){if(typeof _e.memoizedProps["data-testname"]!="string")throw Error(b(364));return _e}if($=zt($),$===null)throw Error(b(362));return $.stateNode.current}function tu($,_e){switch(_e.$$typeof){case hl:if($.type===_e.value)return!0;break;case pl:e:{_e=_e.value,$=[$,0];for(var ot=0;ot<$.length;){var ht=$[ot++],pt=$[ot++],xt=_e[pt];if(ht.tag!==5||!xn(ht)){for(;xt!=null&&tu(ht,xt);)pt++,xt=_e[pt];if(pt===_e.length){_e=!0;break e}else for(ht=ht.child;ht!==null;)$.push(ht,pt),ht=ht.sibling}}_e=!1}return _e;case ml:if($.tag===5&&Nt($.stateNode,_e.value))return!0;break;case vl:if(($.tag===5||$.tag===6)&&($=dn($),$!==null&&0<=$.indexOf(_e.value)))return!0;break;case gl:if($.tag===5&&($=$.memoizedProps["data-testname"],typeof $=="string"&&$.toLowerCase()===_e.value.toLowerCase()))return!0;break;default:throw Error(b(365,_e))}return!1}function nu($){switch($.$$typeof){case hl:return"<"+(_t($.value)||"Unknown")+">";case pl:return":has("+(nu($)||"")+")";case ml:return'[role="'+$.value+'"]';case vl:return'"'+$.value+'"';case gl:return'[data-testname="'+$.value+'"]';default:throw Error(b(365,$))}}function hp($,_e){var ot=[];$=[$,0];for(var ht=0;ht<$.length;){var pt=$[ht++],xt=$[ht++],Ct=_e[xt];if(pt.tag!==5||!xn(pt)){for(;Ct!=null&&tu(pt,Ct);)xt++,Ct=_e[xt];if(xt===_e.length)ot.push(pt);else for(pt=pt.child;pt!==null;)$.push(pt,xt),pt=pt.sibling}}return ot}function ru($,_e){if(!Ot)throw Error(b(363));$=eu($),$=hp($,_e),_e=[],$=Array.from($);for(var ot=0;ot<$.length;){var ht=$[ot++];if(ht.tag===5)xn(ht)||_e.push(ht.stateNode);else for(ht=ht.child;ht!==null;)$.push(ht),ht=ht.sibling}return _e}var yl=null;function Wp($){if(yl===null)try{var _e=("require"+Math.random()).slice(0,7);yl=(s&&s[_e]).call(s,"timers").setImmediate}catch{yl=function(ht){var pt=new MessageChannel;pt.port1.onmessage=ht,pt.port2.postMessage(void 0)}}return yl($)}var jp=Math.ceil,_l=k.ReactCurrentDispatcher,iu=k.ReactCurrentOwner,ou=k.IsSomeRendererActing,Un=0,zr=null,Rr=null,kr=0,ns=0,su=Wn(0),Dr=0,xl=null,hs=0,Vs=0,ps=0,au=0,lu=null,uu=0,cu=1/0;function Vo(){cu=_r()+500}var Pn=null,Sl=!1,fu=null,vo=null,Ho=!1,Hs=null,Ws=90,du=[],hu=[],Ao=null,js=0,pu=null,wl=-1,Co=0,Ml=0,Xs=null,$s=!1;function Xr(){return(Un&48)!==0?_r():wl!==-1?wl:wl=_r()}function Wo($){if($=$.mode,($&2)===0)return 1;if(($&4)===0)return ro()===99?1:2;if(Co===0&&(Co=hs),Es.transition!==0){Ml!==0&&(Ml=lu!==null?lu.pendingLanes:0),$=Co;var _e=4186112&~Ml;return _e&=-_e,_e===0&&($=4186112&~$,_e=$&-$,_e===0&&(_e=8192)),_e}return $=ro(),(Un&4)!==0&&$===98?$=uo(12,Co):($=qo($),$=uo($,Co)),$}function Ro($,_e,ot){if(50<js)throw js=0,pu=null,Error(b(185));if($=bl($,_e),$===null)return null;xo($,_e,ot),$===zr&&(ps|=_e,Dr===4&&ms($,kr));var ht=ro();_e===1?(Un&8)!==0&&(Un&48)===0?mu($):(qr($,ot),Un===0&&(Vo(),xr())):((Un&4)===0||ht!==98&&ht!==99||(Ao===null?Ao=new Set([$]):Ao.add($)),qr($,ot)),lu=$}function bl($,_e){$.lanes|=_e;var ot=$.alternate;for(ot!==null&&(ot.lanes|=_e),ot=$,$=$.return;$!==null;)$.childLanes|=_e,ot=$.alternate,ot!==null&&(ot.childLanes|=_e),ot=$,$=$.return;return ot.tag===3?ot.stateNode:null}function qr($,_e){for(var ot=$.callbackNode,ht=$.suspendedLanes,pt=$.pingedLanes,xt=$.expirationTimes,Ct=$.pendingLanes;0<Ct;){var kt=31-Yr(Ct),Zt=1<<kt,wn=xt[kt];if(wn===-1){if((Zt&ht)===0||(Zt&pt)!==0){wn=_e,no(Zt);var In=rr;xt[kt]=10<=In?wn+250:6<=In?wn+5e3:-1}}else wn<=_e&&($.expiredLanes|=Zt);Ct&=~Zt}if(ht=lo($,$===zr?kr:0),_e=rr,ht===0)ot!==null&&(ot!==Oo&&Io(ot),$.callbackNode=null,$.callbackPriority=0);else{if(ot!==null){if($.callbackPriority===_e)return;ot!==Oo&&Io(ot)}_e===15?(ot=mu.bind(null,$),yr===null?(yr=[ot],No=os(co,bs)):yr.push(ot),ot=Oo):_e===14?ot=io(99,mu.bind(null,$)):(ot=Pl(_e),ot=io(ot,pp.bind(null,$))),$.callbackPriority=_e,$.callbackNode=ot}}function pp($){if(wl=-1,Ml=Co=0,(Un&48)!==0)throw Error(b(327));var _e=$.callbackNode;if(Lo()&&$.callbackNode!==_e)return null;var ot=lo($,$===zr?kr:0);if(ot===0)return null;var ht=ot,pt=Un;Un|=16;var xt=yp();(zr!==$||kr!==ht)&&(Vo(),gs($,ht));do try{qp();break}catch(kt){vp($,kt)}while(1);if(As(),_l.current=xt,Un=pt,Rr!==null?ht=0:(zr=null,kr=0,ht=Dr),(hs&ps)!==0)gs($,0);else if(ht!==0){if(ht===2&&(Un|=64,$.hydrate&&($.hydrate=!1,Kn($.containerInfo)),ot=Yo($),ot!==0&&(ht=qs($,ot))),ht===1)throw _e=xl,gs($,0),ms($,ot),qr($,_r()),_e;switch($.finishedWork=$.current.alternate,$.finishedLanes=ot,ht){case 0:case 1:throw Error(b(345));case 2:rs($);break;case 3:if(ms($,ot),(ot&62914560)===ot&&(ht=uu+500-_r(),10<ht)){if(lo($,0)!==0)break;if(pt=$.suspendedLanes,(pt&ot)!==ot){Xr(),$.pingedLanes|=$.suspendedLanes&pt;break}$.timeoutHandle=pn(rs.bind(null,$),ht);break}rs($);break;case 4:if(ms($,ot),(ot&4186112)===ot)break;for(ht=$.eventTimes,pt=-1;0<ot;){var Ct=31-Yr(ot);xt=1<<Ct,Ct=ht[Ct],Ct>pt&&(pt=Ct),ot&=~xt}if(ot=pt,ot=_r()-ot,ot=(120>ot?120:480>ot?480:1080>ot?1080:1920>ot?1920:3e3>ot?3e3:4320>ot?4320:1960*jp(ot/1960))-ot,10<ot){$.timeoutHandle=pn(rs.bind(null,$),ot);break}rs($);break;case 5:rs($);break;default:throw Error(b(329))}}return qr($,_r()),$.callbackNode===_e?pp.bind(null,$):null}function ms($,_e){for(_e&=~au,_e&=~ps,$.suspendedLanes|=_e,$.pingedLanes&=~_e,$=$.expirationTimes;0<_e;){var ot=31-Yr(_e),ht=1<<ot;$[ot]=-1,_e&=~ht}}function mu($){if((Un&48)!==0)throw Error(b(327));if(Lo(),$===zr&&($.expiredLanes&kr)!==0){var _e=kr,ot=qs($,_e);(hs&ps)!==0&&(_e=lo($,_e),ot=qs($,_e))}else _e=lo($,0),ot=qs($,_e);if($.tag!==0&&ot===2&&(Un|=64,$.hydrate&&($.hydrate=!1,Kn($.containerInfo)),_e=Yo($),_e!==0&&(ot=qs($,_e))),ot===1)throw ot=xl,gs($,0),ms($,_e),qr($,_r()),ot;return $.finishedWork=$.current.alternate,$.finishedLanes=_e,rs($),qr($,_r()),null}function Xp(){if(Ao!==null){var $=Ao;Ao=null,$.forEach(function(_e){_e.expiredLanes|=24&_e.pendingLanes,qr(_e,_r())})}xr()}function mp($,_e){var ot=Un;Un|=1;try{return $(_e)}finally{Un=ot,Un===0&&(Vo(),xr())}}function gp($,_e){var ot=Un;if((ot&48)!==0)return $(_e);Un|=1;try{if($)return Gr(99,$.bind(null,_e))}finally{Un=ot,xr()}}function El($,_e){On(su,ns),ns|=_e,hs|=_e}function gu(){ns=su.current,hn(su)}function gs($,_e){$.finishedWork=null,$.finishedLanes=0;var ot=$.timeoutHandle;if(ot!==$t&&($.timeoutHandle=$t,_n(ot)),Rr!==null)for(ot=Rr.return;ot!==null;){var ht=ot;switch(ht.tag){case 1:ht=ht.type.childContextTypes,ht!=null&&eo();break;case 3:fs(),hn(dr),hn(nr),Ol();break;case 5:Il(ht);break;case 4:fs();break;case 13:hn(mr);break;case 19:hn(mr);break;case 10:Tr(ht);break;case 23:case 24:gu()}ot=ot.return}zr=$,Rr=Xo($.current,null),kr=ns=hs=_e,Dr=0,xl=null,au=ps=Vs=0}function vp($,_e){do{var ot=Rr;try{if(As(),Fs.current=ll,il){for(var ht=Mr.memoizedState;ht!==null;){var pt=ht.queue;pt!==null&&(pt.pending=null),ht=ht.next}il=!1}if(Ds=0,Fr=Ir=Mr=null,Bs=!1,iu.current=null,ot===null||ot.return===null){Dr=1,xl=_e,Rr=null;break}e:{var xt=$,Ct=ot.return,kt=ot,Zt=_e;if(_e=kr,kt.flags|=2048,kt.firstEffect=kt.lastEffect=null,Zt!==null&&typeof Zt=="object"&&typeof Zt.then=="function"){var wn=Zt;if((kt.mode&2)===0){var In=kt.alternate;In?(kt.updateQueue=In.updateQueue,kt.memoizedState=In.memoizedState,kt.lanes=In.lanes):(kt.updateQueue=null,kt.memoizedState=null)}var Gn=(mr.current&1)!==0,An=Ct;do{var sr;if(sr=An.tag===13){var fr=An.memoizedState;if(fr!==null)sr=fr.dehydrated!==null;else{var Kr=An.memoizedProps;sr=Kr.fallback===void 0?!1:Kr.unstable_avoidThisFallback!==!0?!0:!Gn}}if(sr){var Wt=An.updateQueue;if(Wt===null){var Ut=new Set;Ut.add(wn),An.updateQueue=Ut}else Wt.add(wn);if((An.mode&2)===0){if(An.flags|=64,kt.flags|=16384,kt.flags&=-2981,kt.tag===1)if(kt.alternate===null)kt.tag=17;else{var Jt=Go(-1,1);Jt.tag=2,zo(kt,Jt)}kt.lanes|=1;break e}Zt=void 0,kt=_e;var Tn=xt.pingCache;if(Tn===null?(Tn=xt.pingCache=new Np,Zt=new Set,Tn.set(wn,Zt)):(Zt=Tn.get(wn),Zt===void 0&&(Zt=new Set,Tn.set(wn,Zt))),!Zt.has(kt)){Zt.add(kt);var kn=Kp.bind(null,xt,wn,kt);wn.then(kn,kn)}An.flags|=4096,An.lanes=_e;break e}An=An.return}while(An!==null);Zt=Error((_t(kt.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Dr!==5&&(Dr=2),Zt=Yl(Zt,kt),An=Ct;do{switch(An.tag){case 3:xt=Zt,An.flags|=4096,_e&=-_e,An.lanes|=_e;var lr=tp(An,xt,_e);bu(An,lr);break e;case 1:xt=Zt;var Vn=An.type,ir=An.stateNode;if((An.flags&64)===0&&(typeof Vn.getDerivedStateFromError=="function"||ir!==null&&typeof ir.componentDidCatch=="function"&&(vo===null||!vo.has(ir)))){An.flags|=4096,_e&=-_e,An.lanes|=_e;var Ar=np(An,xt,_e);bu(An,Ar);break e}}An=An.return}while(An!==null)}xp(ot)}catch(Jn){_e=Jn,Rr===ot&&ot!==null&&(Rr=ot=ot.return);continue}break}while(1)}function yp(){var $=_l.current;return _l.current=ll,$===null?ll:$}function qs($,_e){var ot=Un;Un|=16;var ht=yp();zr===$&&kr===_e||gs($,_e);do try{$p();break}catch(pt){vp($,pt)}while(1);if(As(),Un=ot,_l.current=ht,Rr!==null)throw Error(b(261));return zr=null,kr=0,Dr}function $p(){for(;Rr!==null;)_p(Rr)}function qp(){for(;Rr!==null&&!ko();)_p(Rr)}function _p($){var _e=Mp($.alternate,$,ns);$.memoizedProps=$.pendingProps,_e===null?xp($):Rr=_e,iu.current=null}function xp($){var _e=$;do{var ot=_e.alternate;if($=_e.return,(_e.flags&2048)===0){if(ot=Up(ot,_e,ns),ot!==null){Rr=ot;return}if(ot=_e,ot.tag!==24&&ot.tag!==23||ot.memoizedState===null||(ns&1073741824)!==0||(ot.mode&4)===0){for(var ht=0,pt=ot.child;pt!==null;)ht|=pt.lanes|pt.childLanes,pt=pt.sibling;ot.childLanes=ht}$!==null&&($.flags&2048)===0&&($.firstEffect===null&&($.firstEffect=_e.firstEffect),_e.lastEffect!==null&&($.lastEffect!==null&&($.lastEffect.nextEffect=_e.firstEffect),$.lastEffect=_e.lastEffect),1<_e.flags&&($.lastEffect!==null?$.lastEffect.nextEffect=_e:$.firstEffect=_e,$.lastEffect=_e))}else{if(ot=Op(_e),ot!==null){ot.flags&=2047,Rr=ot;return}$!==null&&($.firstEffect=$.lastEffect=null,$.flags|=2048)}if(_e=_e.sibling,_e!==null){Rr=_e;return}Rr=_e=$}while(_e!==null);Dr===0&&(Dr=5)}function rs($){var _e=ro();return Gr(99,Yp.bind(null,$,_e)),null}function Yp($,_e){do Lo();while(Hs!==null);if((Un&48)!==0)throw Error(b(327));var ot=$.finishedWork;if(ot===null)return null;if($.finishedWork=null,$.finishedLanes=0,ot===$.current)throw Error(b(177));$.callbackNode=null;var ht=ot.lanes|ot.childLanes,pt=ht,xt=$.pendingLanes&~pt;$.pendingLanes=pt,$.suspendedLanes=0,$.pingedLanes=0,$.expiredLanes&=pt,$.mutableReadLanes&=pt,$.entangledLanes&=pt,pt=$.entanglements;for(var Ct=$.eventTimes,kt=$.expirationTimes;0<xt;){var Zt=31-Yr(xt),wn=1<<Zt;pt[Zt]=0,Ct[Zt]=-1,kt[Zt]=-1,xt&=~wn}if(Ao!==null&&(ht&24)===0&&Ao.has($)&&Ao.delete($),$===zr&&(Rr=zr=null,kr=0),1<ot.flags?ot.lastEffect!==null?(ot.lastEffect.nextEffect=ot,ht=ot.firstEffect):ht=ot:ht=ot.firstEffect,ht!==null){pt=Un,Un|=32,iu.current=null,Xs=It($.containerInfo),$s=!1,Pn=ht;do try{Zp()}catch(Ut){if(Pn===null)throw Error(b(330));jo(Pn,Ut),Pn=Pn.nextEffect}while(Pn!==null);Xs=null,Pn=ht;do try{for(Ct=$;Pn!==null;){var In=Pn.flags;if(In&16&&rn&&Fn(Pn.stateNode),In&128){var Gn=Pn.alternate;if(Gn!==null){var An=Gn.ref;An!==null&&(typeof An=="function"?An(null):An.current=null)}}switch(In&1038){case 2:cp(Pn),Pn.flags&=-3;break;case 6:cp(Pn),Pn.flags&=-3,Kl(Pn.alternate,Pn);break;case 1024:Pn.flags&=-1025;break;case 1028:Pn.flags&=-1025,Kl(Pn.alternate,Pn);break;case 4:Kl(Pn.alternate,Pn);break;case 8:kt=Ct,xt=Pn,rn?fp(kt,xt):ap(kt,xt);var sr=xt.alternate;lp(xt),sr!==null&&lp(sr)}Pn=Pn.nextEffect}}catch(Ut){if(Pn===null)throw Error(b(330));jo(Pn,Ut),Pn=Pn.nextEffect}while(Pn!==null);$s&&wt(),Ht($.containerInfo),$.current=ot,Pn=ht;do try{for(In=$;Pn!==null;){var fr=Pn.flags;if(fr&36&&Vp(In,Pn.alternate,Pn),fr&128){Gn=void 0;var Kr=Pn.ref;if(Kr!==null){var Wt=Pn.stateNode;switch(Pn.tag){case 5:Gn=Vt(Wt);break;default:Gn=Wt}typeof Kr=="function"?Kr(Gn):Kr.current=Gn}}Pn=Pn.nextEffect}}catch(Ut){if(Pn===null)throw Error(b(330));jo(Pn,Ut),Pn=Pn.nextEffect}while(Pn!==null);Pn=null,Qs(),Un=pt}else $.current=ot;if(Ho)Ho=!1,Hs=$,Ws=_e;else for(Pn=ht;Pn!==null;)_e=Pn.nextEffect,Pn.nextEffect=null,Pn.flags&8&&(fr=Pn,fr.sibling=null,fr.stateNode=null),Pn=_e;if(ht=$.pendingLanes,ht===0&&(vo=null),ht===1?$===pu?js++:(js=0,pu=$):js=0,ot=ot.stateNode,to&&typeof to.onCommitFiberRoot=="function")try{to.onCommitFiberRoot(yo,ot,void 0,(ot.current.flags&64)===64)}catch{}if(qr($,_r()),Sl)throw Sl=!1,$=fu,fu=null,$;return(Un&8)!==0||xr(),null}function Zp(){for(;Pn!==null;){var $=Pn.alternate;$s||Xs===null||((Pn.flags&8)!==0?Ft(Pn,Xs)&&($s=!0,En()):Pn.tag===13&&Hp($,Pn)&&Ft(Pn,Xs)&&($s=!0,En()));var _e=Pn.flags;(_e&256)!==0&&zp($,Pn),(_e&512)===0||Ho||(Ho=!0,io(97,function(){return Lo(),null})),Pn=Pn.nextEffect}}function Lo(){if(Ws!==90){var $=97<Ws?97:Ws;return Ws=90,Gr($,Qp)}return!1}function Jp($,_e){du.push(_e,$),Ho||(Ho=!0,io(97,function(){return Lo(),null}))}function Sp($,_e){hu.push(_e,$),Ho||(Ho=!0,io(97,function(){return Lo(),null}))}function Qp(){if(Hs===null)return!1;var $=Hs;if(Hs=null,(Un&48)!==0)throw Error(b(331));var _e=Un;Un|=32;var ot=hu;hu=[];for(var ht=0;ht<ot.length;ht+=2){var pt=ot[ht],xt=ot[ht+1],Ct=pt.destroy;if(pt.destroy=void 0,typeof Ct=="function")try{Ct()}catch(Zt){if(xt===null)throw Error(b(330));jo(xt,Zt)}}for(ot=du,du=[],ht=0;ht<ot.length;ht+=2){pt=ot[ht],xt=ot[ht+1];try{var kt=pt.create;pt.destroy=kt()}catch(Zt){if(xt===null)throw Error(b(330));jo(xt,Zt)}}for(kt=$.current.firstEffect;kt!==null;)$=kt.nextEffect,kt.nextEffect=null,kt.flags&8&&(kt.sibling=null,kt.stateNode=null),kt=$;return Un=_e,xr(),!0}function wp($,_e,ot){_e=Yl(ot,_e),_e=tp($,_e,1),zo($,_e),_e=Xr(),$=bl($,1),$!==null&&(xo($,1,_e),qr($,_e))}function jo($,_e){if($.tag===3)wp($,$,_e);else for(var ot=$.return;ot!==null;){if(ot.tag===3){wp(ot,$,_e);break}else if(ot.tag===1){var ht=ot.stateNode;if(typeof ot.type.getDerivedStateFromError=="function"||typeof ht.componentDidCatch=="function"&&(vo===null||!vo.has(ht))){$=Yl(_e,$);var pt=np(ot,$,1);if(zo(ot,pt),pt=Xr(),ot=bl(ot,1),ot!==null)xo(ot,1,pt),qr(ot,pt);else if(typeof ht.componentDidCatch=="function"&&(vo===null||!vo.has(ht)))try{ht.componentDidCatch(_e,$)}catch{}break}}ot=ot.return}}function Kp($,_e,ot){var ht=$.pingCache;ht!==null&&ht.delete(_e),_e=Xr(),$.pingedLanes|=$.suspendedLanes&ot,zr===$&&(kr&ot)===ot&&(Dr===4||Dr===3&&(kr&62914560)===kr&&500>_r()-uu?gs($,0):au|=ot),qr($,_e)}function em($,_e){var ot=$.stateNode;ot!==null&&ot.delete(_e),_e=0,_e===0&&(_e=$.mode,(_e&2)===0?_e=1:(_e&4)===0?_e=ro()===99?1:2:(Co===0&&(Co=hs),_e=_o(62914560&~Co),_e===0&&(_e=4194304))),ot=Xr(),$=bl($,_e),$!==null&&(xo($,_e,ot),qr($,ot))}var Mp;Mp=function($,_e,ot){var ht=_e.lanes;if($!==null)if($.memoizedProps!==_e.pendingProps||dr.current)ao=!0;else if((ot&ht)!==0)ao=($.flags&16384)!==0;else{switch(ao=!1,_e.tag){case 3:Ju(_e),Ul();break;case 5:Fu(_e);break;case 1:ur(_e.type)&&Po(_e);break;case 4:Bl(_e,_e.stateNode.containerInfo);break;case 10:bo(_e,_e.memoizedProps.value);break;case 13:if(_e.memoizedState!==null)return(ot&_e.child.childLanes)!==0?Qu($,_e,ot):(On(mr,mr.current&1),_e=To($,_e,ot),_e!==null?_e.sibling:null);On(mr,mr.current&1);break;case 19:if(ht=(ot&_e.childLanes)!==0,($.flags&64)!==0){if(ht)return _h($,_e,ot);_e.flags|=64}var pt=_e.memoizedState;if(pt!==null&&(pt.rendering=null,pt.tail=null,pt.lastEffect=null),On(mr,mr.current),ht)break;return null;case 23:case 24:return _e.lanes=0,jl($,_e,ot)}return To($,_e,ot)}else ao=!1;switch(_e.lanes=0,_e.tag){case 2:if(ht=_e.type,$!==null&&($.alternate=null,_e.alternate=null,_e.flags|=2),$=_e.pendingProps,pt=or(_e,nr.current),Sr(_e,ot),pt=Gl(null,_e,ht,$,pt,ot),_e.flags|=1,typeof pt=="object"&&pt!==null&&typeof pt.render=="function"&&pt.$$typeof===void 0){if(_e.tag=1,_e.memoizedState=null,_e.updateQueue=null,ur(ht)){var xt=!0;Po(_e)}else xt=!1;_e.memoizedState=pt.state!==null&&pt.state!==void 0?pt.state:null,Fl(_e);var Ct=ht.getDerivedStateFromProps;typeof Ct=="function"&&ga(_e,ht,Ct,$),pt.updater=va,_e.stateNode=pt,pt._reactInternals=_e,Dl(_e,ht,$,ot),_e=$l(null,_e,ht,!0,xt,ot)}else _e.tag=0,jr(null,_e,pt,ot),_e=_e.child;return _e;case 16:pt=_e.elementType;e:{switch($!==null&&($.alternate=null,_e.alternate=null,_e.flags|=2),$=_e.pendingProps,xt=pt._init,pt=xt(pt._payload),_e.type=pt,xt=_e.tag=nm(pt),$=cr(pt,$),xt){case 0:_e=Xl(null,_e,pt,$,ot);break e;case 1:_e=Zu(null,_e,pt,$,ot);break e;case 11:_e=Xu(null,_e,pt,$,ot);break e;case 14:_e=$u(null,_e,pt,cr(pt.type,$),ht,ot);break e}throw Error(b(306,pt,""))}return _e;case 0:return ht=_e.type,pt=_e.pendingProps,pt=_e.elementType===ht?pt:cr(ht,pt),Xl($,_e,ht,pt,ot);case 1:return ht=_e.type,pt=_e.pendingProps,pt=_e.elementType===ht?pt:cr(ht,pt),Zu($,_e,ht,pt,ot);case 3:if(Ju(_e),ht=_e.updateQueue,$===null||ht===null)throw Error(b(282));if(ht=_e.pendingProps,pt=_e.memoizedState,pt=pt!==null?pt.element:null,Mu($,_e),Cs(_e,ht,null,ot),ht=_e.memoizedState.element,ht===pt)Ul(),_e=To($,_e,ot);else{if(pt=_e.stateNode,(xt=pt.hydrate)&&(cn?(Ko=Bn(_e.stateNode.containerInfo),Eo=_e,xt=po=!0):xt=!1),xt){if(cn&&($=pt.mutableSourceEagerHydrationData,$!=null))for(pt=0;pt<$.length;pt+=2)xt=$[pt],Ct=$[pt+1],sn?xt._workInProgressVersionPrimary=Ct:xt._workInProgressVersionSecondary=Ct,ds.push(xt);for(ot=Pu(_e,null,ht,ot),_e.child=ot;ot;)ot.flags=ot.flags&-3|1024,ot=ot.sibling}else jr($,_e,ht,ot),Ul();_e=_e.child}return _e;case 5:return Fu(_e),$===null&&kl(_e),ht=_e.type,pt=_e.pendingProps,xt=$!==null?$.memoizedProps:null,Ct=pt.children,gn(ht,pt)?Ct=null:xt!==null&&gn(ht,xt)&&(_e.flags|=16),Yu($,_e),jr($,_e,Ct,ot),_e.child;case 6:return $===null&&kl(_e),null;case 13:return Qu($,_e,ot);case 4:return Bl(_e,_e.stateNode.containerInfo),ht=_e.pendingProps,$===null?_e.child=tl(_e,null,ht,ot):jr($,_e,ht,ot),_e.child;case 11:return ht=_e.type,pt=_e.pendingProps,pt=_e.elementType===ht?pt:cr(ht,pt),Xu($,_e,ht,pt,ot);case 7:return jr($,_e,_e.pendingProps,ot),_e.child;case 8:return jr($,_e,_e.pendingProps.children,ot),_e.child;case 12:return jr($,_e,_e.pendingProps.children,ot),_e.child;case 10:e:{if(ht=_e.type._context,pt=_e.pendingProps,Ct=_e.memoizedProps,xt=pt.value,bo(_e,xt),Ct!==null){var kt=Ct.value;if(xt=Pr(kt,xt)?0:(typeof ht._calculateChangedBits=="function"?ht._calculateChangedBits(kt,xt):1073741823)|0,xt===0){if(Ct.children===pt.children&&!dr.current){_e=To($,_e,ot);break e}}else for(kt=_e.child,kt!==null&&(kt.return=_e);kt!==null;){var Zt=kt.dependencies;if(Zt!==null){Ct=kt.child;for(var wn=Zt.firstContext;wn!==null;){if(wn.context===ht&&(wn.observedBits&xt)!==0){kt.tag===1&&(wn=Go(-1,ot&-ot),wn.tag=2,zo(kt,wn)),kt.lanes|=ot,wn=kt.alternate,wn!==null&&(wn.lanes|=ot),Hr(kt.return,ot),Zt.lanes|=ot;break}wn=wn.next}}else Ct=kt.tag===10&&kt.type===_e.type?null:kt.child;if(Ct!==null)Ct.return=kt;else for(Ct=kt;Ct!==null;){if(Ct===_e){Ct=null;break}if(kt=Ct.sibling,kt!==null){kt.return=Ct.return,Ct=kt;break}Ct=Ct.return}kt=Ct}}jr($,_e,pt.children,ot),_e=_e.child}return _e;case 9:return pt=_e.type,xt=_e.pendingProps,ht=xt.children,Sr(_e,ot),pt=wr(pt,xt.unstable_observedBits),ht=ht(pt),_e.flags|=1,jr($,_e,ht,ot),_e.child;case 14:return pt=_e.type,xt=cr(pt,_e.pendingProps),xt=cr(pt.type,xt),$u($,_e,pt,xt,ht,ot);case 15:return qu($,_e,_e.type,_e.pendingProps,ht,ot);case 17:return ht=_e.type,pt=_e.pendingProps,pt=_e.elementType===ht?pt:cr(ht,pt),$!==null&&($.alternate=null,_e.alternate=null,_e.flags|=2),_e.tag=1,ur(ht)?($=!0,Po(_e)):$=!1,Sr(_e,ot),Cu(_e,ht,pt),Dl(_e,ht,pt,ot),$l(null,_e,ht,!0,$,ot);case 19:return _h($,_e,ot);case 23:return jl($,_e,ot);case 24:return jl($,_e,ot)}throw Error(b(156,_e.tag))};var Tl={current:!1},vu=_.unstable_flushAllWithoutAsserting,bp=typeof vu=="function";function yu(){if(vu!==void 0)return vu();for(var $=!1;Lo();)$=!0;return $}function Ep($){try{yu(),Wp(function(){yu()?Ep($):$()})}catch(_e){$(_e)}}var Al=0,Tp=!1;function tm($,_e,ot,ht){this.tag=$,this.key=ot,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ht,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Qr($,_e,ot,ht){return new tm($,_e,ot,ht)}function _u($){return $=$.prototype,!(!$||!$.isReactComponent)}function nm($){if(typeof $=="function")return _u($)?1:0;if($!=null){if($=$.$$typeof,$===ut)return 11;if($===ft)return 14}return 2}function Xo($,_e){var ot=$.alternate;return ot===null?(ot=Qr($.tag,_e,$.key,$.mode),ot.elementType=$.elementType,ot.type=$.type,ot.stateNode=$.stateNode,ot.alternate=$,$.alternate=ot):(ot.pendingProps=_e,ot.type=$.type,ot.flags=0,ot.nextEffect=null,ot.firstEffect=null,ot.lastEffect=null),ot.childLanes=$.childLanes,ot.lanes=$.lanes,ot.child=$.child,ot.memoizedProps=$.memoizedProps,ot.memoizedState=$.memoizedState,ot.updateQueue=$.updateQueue,_e=$.dependencies,ot.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext},ot.sibling=$.sibling,ot.index=$.index,ot.ref=$.ref,ot}function Cl($,_e,ot,ht,pt,xt){var Ct=2;if(ht=$,typeof $=="function")_u($)&&(Ct=1);else if(typeof $=="string")Ct=5;else e:switch($){case nt:return vs(ot.children,pt,xt,_e);case mt:Ct=8,pt|=16;break;case tt:Ct=8,pt|=1;break;case rt:return $=Qr(12,ot,_e,pt|8),$.elementType=rt,$.type=rt,$.lanes=xt,$;case st:return $=Qr(13,ot,_e,pt),$.type=st,$.elementType=st,$.lanes=xt,$;case it:return $=Qr(19,ot,_e,pt),$.elementType=it,$.lanes=xt,$;case gt:return xu(ot,pt,xt,_e);case yt:return $=Qr(24,ot,_e,pt),$.elementType=yt,$.lanes=xt,$;default:if(typeof $=="object"&&$!==null)switch($.$$typeof){case at:Ct=10;break e;case lt:Ct=9;break e;case ut:Ct=11;break e;case ft:Ct=14;break e;case ct:Ct=16,ht=null;break e;case dt:Ct=22;break e}throw Error(b(130,$==null?$:typeof $,""))}return _e=Qr(Ct,ot,_e,pt),_e.elementType=$,_e.type=ht,_e.lanes=xt,_e}function vs($,_e,ot,ht){return $=Qr(7,$,ht,_e),$.lanes=ot,$}function xu($,_e,ot,ht){return $=Qr(23,$,ht,_e),$.elementType=gt,$.lanes=ot,$}function Su($,_e,ot){return $=Qr(6,$,null,_e),$.lanes=ot,$}function wu($,_e,ot){return _e=Qr(4,$.children!==null?$.children:[],$.key,_e),_e.lanes=ot,_e.stateNode={containerInfo:$.containerInfo,pendingChildren:null,implementation:$.implementation},_e}function rm($,_e,ot){this.tag=_e,this.containerInfo=$,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=$t,this.pendingContext=this.context=null,this.hydrate=ot,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bo(0),this.expirationTimes=Bo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bo(0),cn&&(this.mutableSourceEagerHydrationData=null)}function Ap($){var _e=$._reactInternals;if(_e===void 0)throw typeof $.render=="function"?Error(b(188)):Error(b(268,Object.keys($)));return $=Pt(_e),$===null?null:$.stateNode}function Cp($,_e){if($=$.memoizedState,$!==null&&$.dehydrated!==null){var ot=$.retryLane;$.retryLane=ot!==0&&ot<_e?ot:_e}}function Rl($,_e){Cp($,_e),($=$.alternate)&&Cp($,_e)}function im($){return $=Pt($),$===null?null:$.stateNode}function om(){return null}return a.IsThisRendererActing=Tl,a.act=function($){function _e(){Al--,ou.current=ot,Tl.current=ht}Tp===!1&&(Tp=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected.")),Al++;var ot=ou.current,ht=Tl.current;ou.current=!0,Tl.current=!0;try{var pt=mp($)}catch(xt){throw _e(),xt}if(pt!==null&&typeof pt=="object"&&typeof pt.then=="function")return{then:function(xt,Ct){pt.then(function(){1<Al||bp===!0&&ot===!0?(_e(),xt()):Ep(function(kt){_e(),kt?Ct(kt):xt()})},function(kt){_e(),Ct(kt)})}};try{Al!==1||bp!==!1&&ot!==!1||yu(),_e()}catch(xt){throw _e(),xt}return{then:function(xt){xt()}}},a.attemptContinuousHydration=function($){if($.tag===13){var _e=Xr();Ro($,67108864,_e),Rl($,67108864)}},a.attemptHydrationAtCurrentPriority=function($){if($.tag===13){var _e=Xr(),ot=Wo($);Ro($,ot,_e),Rl($,ot)}},a.attemptSynchronousHydration=function($){switch($.tag){case 3:var _e=$.stateNode;if(_e.hydrate){var ot=no(_e.pendingLanes);_e.expiredLanes|=ot&_e.pendingLanes,qr(_e,_r()),(Un&48)===0&&(Vo(),xr())}break;case 13:var ht=Xr();gp(function(){return Ro($,1,ht)}),Rl($,4)}},a.attemptUserBlockingHydration=function($){if($.tag===13){var _e=Xr();Ro($,4,_e),Rl($,4)}},a.batchedEventUpdates=function($,_e){var ot=Un;Un|=2;try{return $(_e)}finally{Un=ot,Un===0&&(Vo(),xr())}},a.batchedUpdates=mp,a.createComponentSelector=function($){return{$$typeof:hl,value:$}},a.createContainer=function($,_e,ot){return $=new rm($,_e,ot),_e=Qr(3,null,null,_e===2?7:_e===1?3:0),$.current=_e,_e.stateNode=$,Fl(_e),$},a.createHasPsuedoClassSelector=function($){return{$$typeof:pl,value:$}},a.createPortal=function($,_e,ot){var ht=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:et,key:ht==null?null:""+ht,children:$,containerInfo:_e,implementation:ot}},a.createRoleSelector=function($){return{$$typeof:ml,value:$}},a.createTestNameSelector=function($){return{$$typeof:gl,value:$}},a.createTextSelector=function($){return{$$typeof:vl,value:$}},a.deferredUpdates=function($){return Gr(97,$)},a.discreteUpdates=function($,_e,ot,ht,pt){var xt=Un;Un|=4;try{return Gr(98,$.bind(null,_e,ot,ht,pt))}finally{Un=xt,Un===0&&(Vo(),xr())}},a.findAllNodes=ru,a.findBoundingRects=function($,_e){if(!Ot)throw Error(b(363));_e=ru($,_e),$=[];for(var ot=0;ot<_e.length;ot++)$.push(Yt(_e[ot]));for(_e=$.length-1;0<_e;_e--){ot=$[_e];for(var ht=ot.x,pt=ht+ot.width,xt=ot.y,Ct=xt+ot.height,kt=_e-1;0<=kt;kt--)if(_e!==kt){var Zt=$[kt],wn=Zt.x,In=wn+Zt.width,Gn=Zt.y,An=Gn+Zt.height;if(ht>=wn&&xt>=Gn&&pt<=In&&Ct<=An){$.splice(_e,1);break}else if(ht!==wn||ot.width!==Zt.width||An<xt||Gn>Ct){if(!(xt!==Gn||ot.height!==Zt.height||In<ht||wn>pt)){wn>ht&&(Zt.width+=wn-ht,Zt.x=ht),In<pt&&(Zt.width=pt-wn),$.splice(_e,1);break}}else{Gn>xt&&(Zt.height+=Gn-xt,Zt.y=xt),An<Ct&&(Zt.height=Ct-Gn),$.splice(_e,1);break}}}return $},a.findHostInstance=Ap,a.findHostInstanceWithNoPortals=function($){return $=Dt($),$===null?null:$.tag===20?$.stateNode.instance:$.stateNode},a.findHostInstanceWithWarning=function($){return Ap($)},a.flushControlled=function($){var _e=Un;Un|=1;try{Gr(99,$)}finally{Un=_e,Un===0&&(Vo(),xr())}},a.flushDiscreteUpdates=function(){(Un&49)===0&&(Xp(),Lo())},a.flushPassiveEffects=Lo,a.flushSync=gp,a.focusWithin=function($,_e){if(!Ot)throw Error(b(363));for($=eu($),_e=hp($,_e),_e=Array.from(_e),$=0;$<_e.length;){var ot=_e[$++];if(!xn(ot)){if(ot.tag===5&&mn(ot.stateNode))return!0;for(ot=ot.child;ot!==null;)_e.push(ot),ot=ot.sibling}}return!1},a.getCurrentUpdateLanePriority=function(){return Do},a.getFindAllNodesFailureDescription=function($,_e){if(!Ot)throw Error(b(363));var ot=0,ht=[];$=[eu($),0];for(var pt=0;pt<$.length;){var xt=$[pt++],Ct=$[pt++],kt=_e[Ct];if((xt.tag!==5||!xn(xt))&&(tu(xt,kt)&&(ht.push(nu(kt)),Ct++,Ct>ot&&(ot=Ct)),Ct<_e.length))for(xt=xt.child;xt!==null;)$.push(xt,Ct),xt=xt.sibling}if(ot<_e.length){for($=[];ot<_e.length;ot++)$.push(nu(_e[ot]));return`findAllNodes was able to match part of the selector:
  `+(ht.join(" > ")+`

No matching component was found for:
  `)+$.join(" > ")}return null},a.getPublicRootInstance=function($){if($=$.current,!$.child)return null;switch($.child.tag){case 5:return Vt($.child.stateNode);default:return $.child.stateNode}},a.injectIntoDevTools=function($){if($={bundleType:$.bundleType,version:$.version,rendererPackageName:$.rendererPackageName,rendererConfig:$.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:im,findFiberByHostInstance:$.findFiberByHostInstance||om,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")$=!1;else{var _e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_e.isDisabled&&_e.supportsFiber)try{yo=_e.inject($),to=_e}catch{}$=!0}return $},a.observeVisibleRects=function($,_e,ot,ht){if(!Ot)throw Error(b(363));$=ru($,_e);var pt=Ln($,ot,ht).disconnect;return{disconnect:function(){pt()}}},a.registerMutableSourceForHydration=function($,_e){var ot=_e._getVersion;ot=ot(_e._source),$.mutableSourceEagerHydrationData==null?$.mutableSourceEagerHydrationData=[_e,ot]:$.mutableSourceEagerHydrationData.push(_e,ot)},a.runWithPriority=function($,_e){var ot=Do;try{return Do=$,_e()}finally{Do=ot}},a.shouldSuspend=function(){return!1},a.unbatchedUpdates=function($,_e){var ot=Un;Un&=-2,Un|=8;try{return $(_e)}finally{Un=ot,Un===0&&(Vo(),xr())}},a.updateContainer=function($,_e,ot,ht){var pt=_e.current,xt=Xr(),Ct=Wo(pt);e:if(ot){ot=ot._reactInternals;t:{if(bt(ot)!==ot||ot.tag!==1)throw Error(b(170));var kt=ot;do{switch(kt.tag){case 3:kt=kt.stateNode.context;break t;case 1:if(ur(kt.type)){kt=kt.stateNode.__reactInternalMemoizedMergedChildContext;break t}}kt=kt.return}while(kt!==null);throw Error(b(171))}if(ot.tag===1){var Zt=ot.type;if(ur(Zt)){ot=ys(ot,Zt,kt);break e}}ot=kt}else ot=vr;return _e.context===null?_e.context=ot:_e.pendingContext=ot,_e=Go(xt,Ct),_e.payload={element:$},ht=ht===void 0?null:ht,ht!==null&&(_e.callback=ht),zo(pt,_e),Ro(pt,Ct,xt),Ct},a}})(reactReconciler_production_min);reactReconciler.exports=reactReconciler_production_min.exports;var Reconciler=reactReconciler.exports,fastDeepEqual=function s(e,o){if(e===o)return!0;if(e&&o&&typeof e=="object"&&typeof o=="object"){if(e.constructor!==o.constructor)return!1;var a,c,d;if(Array.isArray(e)){if(a=e.length,a!=o.length)return!1;for(c=a;c--!==0;)if(!s(e[c],o[c]))return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if(d=Object.keys(e),a=d.length,a!==Object.keys(o).length)return!1;for(c=a;c--!==0;)if(!Object.prototype.hasOwnProperty.call(o,d[c]))return!1;for(c=a;c--!==0;){var _=d[c];if(!s(e[_],o[_]))return!1}return!0}return e!==e&&o!==o};const globalCache$1=[];function handleAsset(s,e,o,a=0,c=!1){for(const _ of e)if(fastDeepEqual(o,_.args)){if(c)return;if(_.error)throw _.error;if(_.response)return _.response;throw _.promise}const d={args:o,promise:s(...o).then(_=>d.response=_!=null?_:!0).catch(_=>d.error=_!=null?_:"unknown error").then(()=>{a>0&&setTimeout(()=>{const _=e.indexOf(d);_!==-1&&e.splice(_,1)},a)})};if(e.push(d),!c)throw d.promise}function clear(s,...e){if(e===void 0||e.length===0)s.splice(0,s.length);else{const o=s.find(a=>fastDeepEqual(e,a.args));if(o){const a=s.indexOf(o);a!==-1&&s.splice(a,1)}}}function useAsset(s,...e){return handleAsset(s,globalCache$1,e,useAsset.lifespan)}useAsset.lifespan=0;useAsset.clear=(...s)=>clear(globalCache$1,...s);useAsset.preload=(s,...e)=>void handleAsset(s,globalCache$1,e,useAsset.lifespan,!0);useAsset.peek=(...s)=>{var e;return(e=globalCache$1.find(o=>fastDeepEqual(s,o.args)))==null?void 0:e.response};function mergeRefs(s){return function(e){s.forEach(function(o){typeof o=="function"?o(e):o!=null&&(o.current=e)})}}function debounce(s,e,o){var a,c,d,_,b;e==null&&(e=100);function k(){var et=Date.now()-_;et<e&&et>=0?a=setTimeout(k,e-et):(a=null,o||(b=s.apply(d,c),d=c=null))}var j=function(){d=this,c=arguments,_=Date.now();var et=o&&!a;return a||(a=setTimeout(k,e)),et&&(b=s.apply(d,c),d=c=null),b};return j.clear=function(){a&&(clearTimeout(a),a=null)},j.flush=function(){a&&(b=s.apply(d,c),d=c=null,clearTimeout(a),a=null)},j}debounce.debounce=debounce;var debounce_1=debounce;function useMeasure(s){let{debounce:e,scroll:o,polyfill:a,offsetSize:c}=s===void 0?{debounce:0,scroll:!1,offsetSize:!1}:s;const d=a||(typeof window=="undefined"?class{}:window.ResizeObserver);if(!d)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[_,b]=react.exports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),k=react.exports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:_}),j=e?typeof e=="number"?e:e.scroll:null,et=e?typeof e=="number"?e:e.resize:null,nt=react.exports.useRef(!1);react.exports.useEffect(()=>(nt.current=!0,()=>void(nt.current=!1)));const[tt,rt,at]=react.exports.useMemo(()=>{const it=()=>{if(!k.current.element)return;const{left:ft,top:ct,width:dt,height:mt,bottom:gt,right:yt,x:St,y:Et}=k.current.element.getBoundingClientRect(),vt={left:ft,top:ct,width:dt,height:mt,bottom:gt,right:yt,x:St,y:Et};k.current.element instanceof HTMLElement&&c&&(vt.height=k.current.element.offsetHeight,vt.width=k.current.element.offsetWidth),Object.freeze(vt),nt.current&&!areBoundsEqual(k.current.lastBounds,vt)&&b(k.current.lastBounds=vt)};return[it,et?debounce_1(it,et):it,j?debounce_1(it,j):it]},[b,c,j,et]);function lt(){k.current.scrollContainers&&(k.current.scrollContainers.forEach(it=>it.removeEventListener("scroll",at,!0)),k.current.scrollContainers=null),k.current.resizeObserver&&(k.current.resizeObserver.disconnect(),k.current.resizeObserver=null)}function ut(){!k.current.element||(k.current.resizeObserver=new d(at),k.current.resizeObserver.observe(k.current.element),o&&k.current.scrollContainers&&k.current.scrollContainers.forEach(it=>it.addEventListener("scroll",at,{capture:!0,passive:!0})))}const st=it=>{!it||it===k.current.element||(lt(),k.current.element=it,k.current.scrollContainers=findScrollContainers(it),ut())};return useOnWindowScroll(at,Boolean(o)),useOnWindowResize(rt),react.exports.useEffect(()=>{lt(),ut()},[o,at,rt]),react.exports.useEffect(()=>lt,[]),[st,_,tt]}function useOnWindowResize(s){react.exports.useEffect(()=>{const e=s;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[s])}function useOnWindowScroll(s,e){react.exports.useEffect(()=>{if(e){const o=s;return window.addEventListener("scroll",o,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",o,!0)}},[s,e])}function findScrollContainers(s){const e=[];if(!s||s===document.body)return e;const{overflow:o,overflowX:a,overflowY:c}=window.getComputedStyle(s);return[o,a,c].some(d=>d==="auto"||d==="scroll")&&e.push(s),[...e,...findScrollContainers(s.parentElement)]}const keys=["x","y","top","bottom","left","right","width","height"],areBoundsEqual=(s,e)=>keys.every(o=>s[o]===e[o]),is={obj:s=>s===Object(s)&&!is.arr(s)&&typeof s!="function",fun:s=>typeof s=="function",str:s=>typeof s=="string",num:s=>typeof s=="number",und:s=>s===void 0,arr:s=>Array.isArray(s),equ(s,e){if(typeof s!=typeof e||!!s!=!!e)return!1;if(is.str(s)||is.num(s)||is.obj(s))return s===e;if(is.arr(s)&&s==e)return!0;let o;for(o in s)if(!(o in e))return!1;for(o in e)if(s[o]!==e[o])return!1;return is.und(o)?s===e:!0}};function makeId(s){return(s.eventObject||s.object).uuid+"/"+s.index+s.instanceId}function releaseInternalPointerCapture(s,e,o,a){const c=o.get(e);c&&(o.delete(e),o.size===0&&(s.delete(a),c.target.releasePointerCapture(a)))}function removeInteractivity(s,e){const{internal:o}=s.getState();o.interaction=o.interaction.filter(a=>a!==e),o.initialHits=o.initialHits.filter(a=>a!==e),o.hovered.forEach((a,c)=>{(a.eventObject===e||a.object===e)&&o.hovered.delete(c)}),o.capturedMap.forEach((a,c)=>{releaseInternalPointerCapture(o.capturedMap,e,a,c)})}function createEvents(s){const e=new Vector3;function o(nt){var tt,rt,at,lt;const ut=s.getState(),{raycaster:st,mouse:it,camera:ft,size:ct}=ut,dt=st.computeOffsets==null?void 0:st.computeOffsets(nt,ut),mt=(tt=dt==null?void 0:dt.offsetX)!=null?tt:nt.offsetX,gt=(rt=dt==null?void 0:dt.offsetY)!=null?rt:nt.offsetY,yt=(at=dt==null?void 0:dt.width)!=null?at:ct.width,St=(lt=dt==null?void 0:dt.height)!=null?lt:ct.height;it.set(mt/yt*2-1,-(gt/St)*2+1),st.setFromCamera(it,ft)}function a(nt){const{internal:tt}=s.getState(),rt=nt.offsetX-tt.initialClick[0],at=nt.offsetY-tt.initialClick[1];return Math.round(Math.sqrt(rt*rt+at*at))}function c(nt){return nt.filter(tt=>["Move","Over","Enter","Out","Leave"].some(rt=>{var at;return(at=tt.__r3f)==null?void 0:at.handlers["onPointer"+rt]}))}function d(nt){const tt=s.getState(),{raycaster:rt,internal:at}=tt;if(!rt.enabled)return[];const lt=new Set,ut=[],st=nt?nt(at.interaction):at.interaction;let it=rt.intersectObjects(st,!0).filter(ct=>{const dt=makeId(ct);return lt.has(dt)?!1:(lt.add(dt),!0)});rt.filter&&(it=rt.filter(it,tt));for(const ct of it){let dt=ct.object;for(;dt;){var ft;(ft=dt.__r3f)!=null&&ft.eventCount&&ut.push(Br(Xn({},ct),{eventObject:dt})),dt=dt.parent}}return ut}function _(nt,tt){const{internal:rt}=s.getState();if("pointerId"in tt&&rt.capturedMap.has(tt.pointerId))for(let at of rt.capturedMap.get(tt.pointerId).values())nt.push(at.intersection);return nt}function b(nt,tt,rt,at){const{raycaster:lt,mouse:ut,camera:st,internal:it}=s.getState();if(nt.length){const ft=e.set(ut.x,ut.y,0).unproject(st),ct={stopped:!1};for(const dt of nt){const mt=vt=>{var _t,bt;return(_t=(bt=it.capturedMap.get(vt))==null?void 0:bt.has(dt.eventObject))!=null?_t:!1},gt=vt=>{const _t={intersection:dt,target:tt.target};it.capturedMap.has(vt)?it.capturedMap.get(vt).set(dt.eventObject,_t):it.capturedMap.set(vt,new Map([[dt.eventObject,_t]])),tt.target.setPointerCapture(vt)},yt=vt=>{const _t=it.capturedMap.get(vt);_t&&releaseInternalPointerCapture(it.capturedMap,dt.eventObject,_t,vt)};let St={};for(let vt in tt){let _t=tt[vt];typeof _t!="function"&&(St[vt]=_t)}let Et=Br(Xn(Xn({},dt),St),{spaceX:ut.x,spaceY:ut.y,intersections:nt,stopped:ct.stopped,delta:rt,unprojectedPoint:ft,ray:lt.ray,camera:st,stopPropagation:()=>{const vt="pointerId"in tt&&it.capturedMap.get(tt.pointerId);if((!vt||vt.has(dt.eventObject))&&(Et.stopped=ct.stopped=!0,it.hovered.size&&Array.from(it.hovered.values()).find(_t=>_t.eventObject===dt.eventObject))){const _t=nt.slice(0,nt.indexOf(dt));k([..._t,dt])}},target:{hasPointerCapture:mt,setPointerCapture:gt,releasePointerCapture:yt},currentTarget:{hasPointerCapture:mt,setPointerCapture:gt,releasePointerCapture:yt},sourceEvent:tt,nativeEvent:tt});if(at(Et),ct.stopped===!0)break}}return nt}function k(nt){const{internal:tt}=s.getState();Array.from(tt.hovered.values()).forEach(rt=>{if(!nt.length||!nt.find(at=>at.object===rt.object&&at.index===rt.index&&at.instanceId===rt.instanceId)){const lt=rt.eventObject.__r3f,ut=lt==null?void 0:lt.handlers;if(tt.hovered.delete(makeId(rt)),lt!=null&&lt.eventCount){const st=Br(Xn({},rt),{intersections:nt||[]});ut.onPointerOut==null||ut.onPointerOut(st),ut.onPointerLeave==null||ut.onPointerLeave(st)}}})}const j=nt=>{switch(nt){case"onPointerLeave":case"onPointerCancel":return()=>k([]);case"onLostPointerCapture":return tt=>{const{internal:rt}=s.getState();"pointerId"in tt&&!rt.capturedMap.has(tt.pointerId)&&(rt.capturedMap.delete(tt.pointerId),k([]))}}return tt=>{const{onPointerMissed:rt,internal:at}=s.getState();o(tt),at.lastEvent.current=tt;const lt=nt==="onPointerMove",ut=nt==="onClick"||nt==="onContextMenu"||nt==="onDoubleClick",it=_(d(lt?c:void 0),tt),ft=ut?a(tt):0;nt==="onPointerDown"&&(at.initialClick=[tt.offsetX,tt.offsetY],at.initialHits=it.map(ct=>ct.eventObject)),ut&&!it.length&&ft<=2&&(et(tt,at.interaction),rt&&rt(tt)),lt&&k(it),b(it,tt,ft,ct=>{const dt=ct.eventObject,mt=dt.__r3f,gt=mt==null?void 0:mt.handlers;if(!!(mt!=null&&mt.eventCount))if(lt){if(gt.onPointerOver||gt.onPointerEnter||gt.onPointerOut||gt.onPointerLeave){const yt=makeId(ct),St=at.hovered.get(yt);St?St.stopped&&ct.stopPropagation():(at.hovered.set(yt,ct),gt.onPointerOver==null||gt.onPointerOver(ct),gt.onPointerEnter==null||gt.onPointerEnter(ct))}gt.onPointerMove==null||gt.onPointerMove(ct)}else{const yt=gt[nt];yt?(!ut||at.initialHits.includes(dt))&&(et(tt,at.interaction.filter(St=>!at.initialHits.includes(St))),yt(ct)):ut&&at.initialHits.includes(dt)&&et(tt,at.interaction.filter(St=>!at.initialHits.includes(St)))}})}};function et(nt,tt){tt.forEach(rt=>{var at;return(at=rt.__r3f)==null||at.handlers.onPointerMissed==null?void 0:at.handlers.onPointerMissed(nt)})}return{handlePointer:j}}const isDiffSet=s=>s&&!!s.memoized&&!!s.changes,isStore=s=>s&&!!s.getState,getContainer=(s,e)=>{var o,a;return{root:isStore(s)?s:(o=(a=s.__r3f)==null?void 0:a.root)!=null?o:e.__r3f.root,container:isStore(s)?s.getState().scene:s}},DEFAULT="__default",EMPTY={};let catalogue={},extend=s=>void(catalogue=Xn(Xn({},catalogue),s));function checkShallow(s,e){return!!(is.arr(s)&&is.equ(s,e)||s===e)}function prepare(s,e){const o=s;return(e!=null&&e.primitive||!o.__r3f)&&(o.__r3f=Xn({root:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},e)),s}function createRenderer(s){function e(tt,mt,yt={},dt=!1){var gt=mt,{children:rt,key:at,ref:lt}=gt,ut=_i(gt,["children","key","ref"]);var St=yt,{children:st,key:it,ref:ft}=St,ct=_i(St,["children","key","ref"]);var Et;const vt=(Et=tt==null?void 0:tt.__r3f)!=null?Et:{},_t=Object.entries(ut),bt=[];if(dt){const Rt=Object.keys(ct);for(let Pt=0;Pt<Rt.length;Pt++)ut.hasOwnProperty(Rt[Pt])||_t.unshift([Rt[Pt],DEFAULT+"remove"])}_t.forEach(([Rt,Pt])=>{var Dt;if((Dt=tt.__r3f)!=null&&Dt.primitive&&Rt==="object"||checkShallow(Pt,ct[Rt]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(Rt))return bt.push([Rt,Pt,!0,[]]);let Ft=[];Rt.includes("-")&&(Ft=Rt.split("-")),bt.push([Rt,Pt,!1,Ft])});const At=Xn({},ut);return vt.memoizedProps&&vt.memoizedProps.args&&(At.args=vt.memoizedProps.args),vt.memoizedProps&&vt.memoizedProps.attach&&(At.attach=vt.memoizedProps.attach),{accumulative:dt,memoized:At,changes:bt}}function o(tt,rt){var at,lt,ut;const st=(at=tt==null?void 0:tt.__r3f)!=null?at:{},it=st.root,ft=(lt=it==null||it.getState==null?void 0:it.getState())!=null?lt:{},{memoized:ct,changes:dt}=isDiffSet(rt)?rt:e(tt,rt),mt=st.eventCount;if(tt.__r3f&&(tt.__r3f.memoizedProps=ct),dt.forEach(([gt,yt,St,Et])=>{var vt;let _t=tt,bt=_t[gt];if(Et.length&&(bt=Et.reduce((Rt,Pt)=>Rt[Pt],tt),!(bt&&bt.set))){const[Rt,...Pt]=Et.reverse();_t=Pt.reverse().reduce((Dt,Ft)=>Dt[Ft],tt),gt=Rt}if(yt===DEFAULT+"remove")if(bt&&bt.constructor)yt=new bt.constructor(ct.args);else if(_t.constructor){const Rt=new _t.constructor(_t.__r3f.memoizedProps.args);yt=Rt[bt],Rt.dispose&&Rt.dispose()}else yt=0;const At=(ft==null||(vt=ft.gl)==null?void 0:vt.outputEncoding)===LinearEncoding;if(St)yt?st.handlers[gt]=yt:delete st.handlers[gt],st.eventCount=Object.keys(st.handlers).length;else if(bt&&bt.set&&(bt.copy||bt instanceof Layers)){if(Array.isArray(yt))bt.fromArray?bt.fromArray(yt):bt.set(...yt);else if(bt.copy&&yt&&yt.constructor&&bt.constructor.name===yt.constructor.name)bt.copy(yt);else if(yt!==void 0){const Rt=bt instanceof Color;!Rt&&bt.setScalar?bt.setScalar(yt):bt instanceof Layers&&yt instanceof Layers?bt.mask=yt.mask:bt.set(yt),!At&&Rt&&bt.convertSRGBToLinear()}}else _t[gt]=yt,!At&&_t[gt]instanceof Texture&&(_t[gt].encoding=sRGBEncoding);a(tt)}),st.parent&&ft.internal&&tt.raycast&&mt!==st.eventCount){const gt=ft.internal.interaction.indexOf(tt);gt>-1&&ft.internal.interaction.splice(gt,1),st.eventCount&&ft.internal.interaction.push(tt)}return dt.length&&(ut=tt.__r3f)!=null&&ut.parent&&c(tt),tt}function a(tt){var rt,at;const lt=(rt=tt.__r3f)==null||(at=rt.root)==null||at.getState==null?void 0:at.getState();lt&&lt.internal.frames===0&&lt.invalidate()}function c(tt){tt.onUpdate==null||tt.onUpdate(tt)}function d(tt,it,lt,ut,st){var ft=it,{args:rt=[]}=ft,at=_i(ft,["args"]);let ct=`${tt[0].toUpperCase()}${tt.slice(1)}`,dt;if(!isStore(lt)&&st){const mt=gt=>gt.return?mt(gt.return):gt.stateNode&&gt.stateNode.containerInfo;lt=mt(st)}if(!lt||!isStore(lt))throw`No valid root for ${ct}!`;if(tt==="primitive"){if(at.object===void 0)throw"Primitives without 'object' are invalid!";const mt=at.object;dt=prepare(mt,{root:lt,primitive:!0})}else{const mt=catalogue[ct]||THREE[ct];if(!mt)throw`${ct} is not part of the THREE namespace! Did you forget to extend? See: https://github.com/pmndrs/react-three-fiber/blob/master/markdown/api.md#using-3rd-party-objects-declaratively`;if(!Array.isArray(rt))throw"The args prop must be an array!";dt=prepare(new mt(...rt),{root:lt,memoizedProps:{args:rt.length===0?null:rt}})}return"attachFns"in at||(ct.endsWith("Geometry")?at=Xn({attach:"geometry"},at):ct.endsWith("Material")&&(at=Xn({attach:"material"},at))),o(dt,at),dt}function _(tt,rt){let at=!1;if(rt){if(rt.attachArray)is.arr(tt[rt.attachArray])||(tt[rt.attachArray]=[]),tt[rt.attachArray].push(rt);else if(rt.attachObject)is.obj(tt[rt.attachObject[0]])||(tt[rt.attachObject[0]]={}),tt[rt.attachObject[0]][rt.attachObject[1]]=rt;else if(rt.attach&&!is.fun(rt.attach))tt[rt.attach]=rt;else if(is.arr(rt.attachFns)){const[lt]=rt.attachFns;is.str(lt)&&is.fun(tt[lt])?tt[lt](rt):is.fun(lt)&&lt(rt,tt)}else rt.isObject3D&&tt.isObject3D&&(tt.add(rt),at=!0);at||tt.__r3f.objects.push(rt),rt.__r3f||prepare(rt,{}),rt.__r3f.parent=tt,c(rt),a(rt)}}function b(tt,rt,at){let lt=!1;if(rt){if(rt.attachArray){const ut=tt[rt.attachArray];is.arr(ut)||(tt[rt.attachArray]=[]),ut.splice(ut.indexOf(at),0,rt)}else{if(rt.attachObject||rt.attach&&!is.fun(rt.attach))return _(tt,rt);if(rt.isObject3D&&tt.isObject3D){rt.parent=tt,rt.dispatchEvent({type:"added"});const ut=tt.children.filter(it=>it!==rt),st=ut.indexOf(at);tt.children=[...ut.slice(0,st),rt,...ut.slice(st)],lt=!0}}lt||tt.__r3f.objects.push(rt),rt.__r3f||prepare(rt,{}),rt.__r3f.parent=tt,c(rt),a(rt)}}function k(tt,rt,at=!1){tt&&[...tt].forEach(lt=>j(rt,lt,at))}function j(tt,rt,at){if(rt){var lt,ut;if(rt.__r3f&&(rt.__r3f.parent=null),(lt=tt.__r3f)!=null&&lt.objects&&(tt.__r3f.objects=tt.__r3f.objects.filter(dt=>dt!==rt)),rt.attachArray)tt[rt.attachArray]=tt[rt.attachArray].filter(dt=>dt!==rt);else if(rt.attachObject)delete tt[rt.attachObject[0]][rt.attachObject[1]];else if(rt.attach&&!is.fun(rt.attach)&&tt[rt.attach]===rt)tt[rt.attach]=null;else if(is.arr(rt.attachFns)){const[,dt]=rt.attachFns;is.str(dt)&&is.fun(tt[dt])?tt[dt](rt):is.fun(dt)&&dt(rt,tt)}else if(rt.isObject3D&&tt.isObject3D){var st;tt.remove(rt),(st=rt.__r3f)!=null&&st.root&&removeInteractivity(rt.__r3f.root,rt)}const ft=(ut=rt.__r3f)==null?void 0:ut.primitive,ct=at===void 0?rt.dispose!==null&&!ft:at;if(!ft){var it;k((it=rt.__r3f)==null?void 0:it.objects,rt,ct),k(rt.children,rt,ct)}rt.__r3f&&(delete rt.__r3f.root,delete rt.__r3f.objects,delete rt.__r3f.handlers,delete rt.__r3f.memoizedProps,ft||delete rt.__r3f),ct&&rt.dispose&&rt.type!=="Scene"&&scheduler.exports.unstable_runWithPriority(scheduler.exports.unstable_IdlePriority,()=>{try{rt.dispose()}catch{}}),a(tt)}}function et(tt,rt,at,lt){var ut;const st=(ut=tt.__r3f)==null?void 0:ut.parent;if(!st)return;const it=d(rt,at,tt.__r3f.root);rt!=="primitive"&&tt.children&&(tt.children.forEach(ft=>_(it,ft)),tt.children=[]),tt.__r3f.objects.forEach(ft=>_(it,ft)),tt.__r3f.objects=[],j(st,tt),_(st,it),it.raycast&&it.__r3f.eventCount&&it.__r3f.root.getState().internal.interaction.push(it),[lt,lt.alternate].forEach(ft=>{ft!==null&&(ft.stateNode=it,ft.ref&&(typeof ft.ref=="function"?ft.ref(it):ft.ref.current=it))})}return{reconciler:Reconciler({now:scheduler.exports.unstable_now,createInstance:d,removeChild:j,appendChild:_,appendInitialChild:_,insertBefore:b,warnsIfNotActing:!0,supportsMutation:!0,isPrimaryRenderer:!1,scheduleTimeout:is.fun(setTimeout)?setTimeout:void 0,cancelTimeout:is.fun(clearTimeout)?clearTimeout:void 0,setTimeout:is.fun(setTimeout)?setTimeout:void 0,clearTimeout:is.fun(clearTimeout)?clearTimeout:void 0,noTimeout:-1,appendChildToContainer:(tt,rt)=>{const{container:at,root:lt}=getContainer(tt,rt);at.__r3f.root=lt,_(at,rt)},removeChildFromContainer:(tt,rt)=>j(getContainer(tt,rt).container,rt),insertInContainerBefore:(tt,rt,at)=>b(getContainer(tt,rt).container,rt,at),prepareUpdate(tt,rt,at,lt){if(tt.__r3f.primitive&&lt.object&&lt.object!==tt)return[!0];{const ut=lt,{args:it=[],children:ft}=ut,ct=_i(ut,["args","children"]),st=at,{args:dt=[],children:mt}=st,gt=_i(st,["args","children"]);if(!Array.isArray(it))throw"The args prop must be an array!";if(it.some((St,Et)=>St!==dt[Et]))return[!0];const yt=e(tt,ct,gt,!0);if(yt.changes.length)return[!1,yt];if(tt.attach&&typeof tt.attach!="function"){const Et=tt.__r3f.parent;Et&&Et[tt.attach]!==tt&&_(Et,tt)}return null}},commitUpdate(tt,[rt,at],lt,ut,st,it){rt?et(tt,lt,st,it):o(tt,at)},hideInstance(tt){tt.isObject3D&&(tt.visible=!1,a(tt))},unhideInstance(tt,rt){(tt.isObject3D&&rt.visible==null||rt.visible)&&(tt.visible=!0,a(tt))},hideTextInstance(){throw new Error("Text is not allowed in the R3F tree.")},getPublicInstance(tt){return tt},getRootHostContext(tt){return EMPTY},getChildHostContext(tt){return tt},createTextInstance(){},finalizeInitialChildren(tt){var rt;return!!((rt=tt==null?void 0:tt.__r3f)!=null?rt:{}).handlers},commitMount(tt){var rt;const at=(rt=tt==null?void 0:tt.__r3f)!=null?rt:{};tt.raycast&&at.handlers&&at.eventCount&&tt.__r3f.root.getState().internal.interaction.push(tt)},shouldDeprioritizeSubtree(){return!1},prepareForCommit(){return null},preparePortalMount(tt){prepare(tt)},resetAfterCommit(){},shouldSetTextContent(){return!1},clearContainer(){return!1}}),applyProps:o}}const isRenderer=s=>!!(s!=null&&s.render),isOrthographicCamera=s=>s&&s.isOrthographicCamera;function calculateDpr(s){return Array.isArray(s)?Math.min(Math.max(s[0],window.devicePixelRatio),s[1]):s}const context=react.exports.createContext(null),createStore=(s,e,o,a)=>{const{gl:c,size:d,shadows:_=!1,linear:b=!1,flat:k=!1,vr:j=!1,orthographic:et=!1,frameloop:nt="always",dpr:tt=1,performance:rt,clock:at=new Clock,raycaster:lt,camera:ut,onPointerMissed:st}=a;_&&(c.shadowMap.enabled=!0,typeof _=="object"?Object.assign(c.shadowMap,_):c.shadowMap.type=PCFSoftShadowMap),b&&(c.outputEncoding=LinearEncoding),k&&(c.toneMapping=NoToneMapping),nt==="never"&&(at.stop(),at.elapsedTime=0);const it=create((mt,gt)=>{const yt=new Raycaster,Qt=lt||{},{params:St}=Qt,Et=_i(Qt,["params"]);s(yt,Br(Xn({enabled:!0},Et),{params:Xn(Xn({},yt.params),St)}));const vt=ut instanceof Camera,_t=vt?ut:et?new OrthographicCamera(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);vt||(_t.position.z=5,ut&&s(_t,ut),ut!=null&&ut.rotation||_t.lookAt(0,0,0));const bt=calculateDpr(tt),At=new Vector3,Rt=new Vector3,Pt=new Vector3;function Dt(Lt=gt().camera,It=Rt,Ht=gt().size){const{width:on,height:nn}=Ht,jt=on/nn;It instanceof Vector3?Pt.copy(It):Pt.set(...It);const Mn=Lt.getWorldPosition(At).distanceTo(Pt);if(isOrthographicCamera(Lt))return{width:on/Lt.zoom,height:nn/Lt.zoom,factor:1,distance:Mn,aspect:jt};{const gn=Lt.fov*Math.PI/180,fn=2*Math.tan(gn/2)*Mn,pn=fn*(on/nn);return{width:pn,height:fn,factor:on/pn,distance:Mn,aspect:jt}}}let Ft;const Vt=Lt=>mt(It=>({performance:Br(Xn({},It.performance),{current:Lt})}));return{gl:c,set:mt,get:gt,invalidate:()=>e(gt()),advance:(Lt,It)=>o(Lt,It,gt()),linear:b,flat:k,scene:prepare(new Scene),camera:_t,controls:null,raycaster:yt,clock:at,mouse:new Vector2,vr:j,frameloop:nt,onPointerMissed:st,performance:Br(Xn({current:1,min:.5,max:1,debounce:200},rt),{regress:()=>{const Lt=gt();Ft&&clearTimeout(Ft),Lt.performance.current!==Lt.performance.min&&Vt(Lt.performance.min),Ft=setTimeout(()=>Vt(gt().performance.max),Lt.performance.debounce)}}),size:{width:0,height:0},viewport:{initialDpr:bt,dpr:bt,width:0,height:0,aspect:0,distance:0,factor:0,getCurrentViewport:Dt},setSize:(Lt,It)=>{const Ht={width:Lt,height:It};mt(on=>({size:Ht,viewport:Xn(Xn({},on.viewport),Dt(_t,Rt,Ht))}))},setDpr:Lt=>mt(It=>({viewport:Br(Xn({},It.viewport),{dpr:calculateDpr(Lt)})})),setFrameloop:(Lt="always")=>mt(()=>({frameloop:Lt})),events:{connected:!1},internal:{active:!1,priority:0,frames:0,lastProps:a,lastEvent:react.exports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(Lt,It=0)=>(mt(({internal:Ht})=>({internal:Br(Xn({},Ht),{priority:Ht.priority+(It>0?1:0),subscribers:[...Ht.subscribers,{ref:Lt,priority:It}].sort((on,nn)=>on.priority-nn.priority)})})),()=>{mt(({internal:Ht})=>({internal:Br(Xn({},Ht),{priority:Ht.priority-(It>0?1:0),subscribers:Ht.subscribers.filter(on=>on.ref!==Lt)})}))})}}}),ft=it.getState();let ct=ft.size,dt=ft.viewport.dpr;return it.subscribe(()=>{const{camera:mt,size:gt,viewport:yt,internal:St}=it.getState();(gt!==ct||yt.dpr!==dt)&&(!mt.manual&&!(St.lastProps.camera instanceof Camera)&&(isOrthographicCamera(mt)?(mt.left=gt.width/-2,mt.right=gt.width/2,mt.top=gt.height/2,mt.bottom=gt.height/-2):mt.aspect=gt.width/gt.height,mt.updateProjectionMatrix(),mt.updateMatrixWorld()),c.setPixelRatio(yt.dpr),c.setSize(gt.width,gt.height),ct=gt,dt=yt.dpr)}),d&&ft.setSize(d.width,d.height),it.subscribe(mt=>e(mt)),it};let i,globalEffects=[],globalAfterEffects=[],globalTailEffects=[];function run(s,e){for(i=0;i<s.length;i++)s[i](e)}function render$1(s,e){let o=e.clock.getDelta();for(e.frameloop==="never"&&typeof s=="number"&&(o=s-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=s),i=0;i<e.internal.subscribers.length;i++)e.internal.subscribers[i].ref.current(e,o);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function createLoop(s){let e=!1,o;function a(_){if(e=!0,o=0,run(globalEffects,_),s.forEach(b=>{const k=b.store.getState();k.internal.active&&(k.frameloop==="always"||k.internal.frames>0)&&(o+=render$1(_,k))}),run(globalAfterEffects,_),o>0)return requestAnimationFrame(a);run(globalTailEffects,_),e=!1}function c(_){if(!_)return s.forEach(b=>c(b.store.getState()));_.vr||!_.internal.active||_.frameloop==="never"||(_.internal.frames=Math.min(60,_.internal.frames+1),e||(e=!0,requestAnimationFrame(a)))}function d(_,b=!0,k){b&&run(globalEffects,_),k?render$1(_,k):s.forEach(j=>render$1(_,j.store.getState())),b&&run(globalAfterEffects,_)}return{loop:a,invalidate:c,advance:d}}function createPointerEvents(s){const{handlePointer:e}=createEvents(s),o={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};return{connected:!1,handlers:Object.keys(o).reduce((a,c)=>Br(Xn({},a),{[c]:e(c)}),{}),connect:a=>{var c;const{set:d,events:_}=s.getState();_.disconnect==null||_.disconnect(),d(b=>({events:Br(Xn({},b.events),{connected:a})})),Object.entries((c=_==null?void 0:_.handlers)!=null?c:[]).forEach(([b,k])=>{const[j,et]=o[b];a.addEventListener(j,k,{passive:et})})},disconnect:()=>{const{set:a,events:c}=s.getState();if(c.connected){var d;Object.entries((d=c.handlers)!=null?d:[]).forEach(([_,b])=>{if(c&&c.connected instanceof HTMLElement){const[k]=o[_];c.connected.removeEventListener(k,b)}}),a(_=>({events:Br(Xn({},_.events),{connected:!1})}))}}}}const useIsomorphicLayoutEffect=typeof window!="undefined"?react.exports.useLayoutEffect:react.exports.useEffect;function Block({set:s}){return useIsomorphicLayoutEffect(()=>(s(new Promise(()=>null)),()=>s(!1)),[]),null}class ErrorBoundary extends react.exports.Component{constructor(...e){super(...e);this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}ErrorBoundary.getDerivedStateFromError=()=>({error:!0});const Canvas=react.exports.forwardRef(function(nt,et){var tt=nt,{children:e,fallback:o,tabIndex:a,resize:c,id:d,style:_,className:b,events:k}=tt,j=_i(tt,["children","fallback","tabIndex","resize","id","style","className","events"]);const[rt,{width:at,height:lt}]=useMeasure(Xn({scroll:!0,debounce:{scroll:50,resize:0}},c)),ut=react.exports.useRef(null),[st,it]=react.exports.useState(!1),[ft,ct]=react.exports.useState(!1);if(st)throw st;if(ft)throw ft;return useIsomorphicLayoutEffect(()=>{at>0&&lt>0&&render(react.exports.createElement(ErrorBoundary,{set:ct},react.exports.createElement(react.exports.Suspense,{fallback:react.exports.createElement(Block,{set:it})},e)),ut.current,Br(Xn({},j),{size:{width:at,height:lt},events:k||createPointerEvents}))},[at,lt,e]),useIsomorphicLayoutEffect(()=>{const dt=ut.current;return()=>unmountComponentAtNode(dt)},[]),react.exports.createElement("div",{ref:rt,id:d,className:b,tabIndex:a,style:Xn({position:"relative",width:"100%",height:"100%",overflow:"hidden"},_)},react.exports.createElement("canvas",{ref:mergeRefs([ut,et]),style:{display:"block"}},o))});function useStore(){const s=react.exports.useContext(context);if(!s)throw"R3F hooks can only be used within the Canvas component!";return s}function useThree(s=o=>o,e){return useStore()(s,e)}function useFrame(s,e=0){const o=useStore().getState().internal.subscribe,a=react.exports.useRef(s);return react.exports.useLayoutEffect(()=>void(a.current=s),[s]),react.exports.useLayoutEffect(()=>o(a,e),[e,o]),null}function buildGraph(s){const e={nodes:{},materials:{}};return s&&s.traverse(o=>{o.name&&(e.nodes[o.name]=o),o.material&&!e.materials[o.material.name]&&(e.materials[o.material.name]=o.material)}),e}function loadingFn(s,e){return function(o,...a){const c=new o;return s&&s(c),Promise.all(a.map(d=>new Promise((_,b)=>c.load(d,k=>{k.scene&&Object.assign(k,buildGraph(k.scene)),_(k)},e,k=>b(`Could not load ${d}: ${k.message}`)))))}}function useLoader(s,e,o,a){const c=Array.isArray(e)?e:[e],d=useAsset(loadingFn(o,a),s,...c);return Array.isArray(e)?d:d[0]}useLoader.preload=function(s,e,o){const a=Array.isArray(e)?e:[e];return useAsset.preload(loadingFn(o),s,...a)};useLoader.clear=function(s,e){const o=Array.isArray(e)?e:[e];return useAsset.clear(s,...o)};const roots=new Map,modes=["legacy","blocking","concurrent"],{invalidate,advance}=createLoop(roots),{reconciler,applyProps}=createRenderer(),createRendererInstance=(s,e)=>{const o=typeof s=="function"?s(e):s;if(isRenderer(o))return o;const a=new WebGLRenderer(Xn({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0},s));return a.outputEncoding=sRGBEncoding,a.toneMapping=ACESFilmicToneMapping,s&&applyProps(a,s),a};function render(s,e,k={}){var j=k,{gl:o,size:a,mode:c=modes[1],events:d,onCreated:_}=j,b=_i(j,["gl","size","mode","events","onCreated"]);var et;if(!a){var nt,tt,rt,at;a={width:(nt=(tt=e.parentElement)==null?void 0:tt.clientWidth)!=null?nt:0,height:(rt=(at=e.parentElement)==null?void 0:at.clientHeight)!=null?rt:0}}let lt=roots.get(e),ut=lt==null?void 0:lt.fiber,st=lt==null?void 0:lt.store,it=(et=st)==null?void 0:et.getState();if(ut&&it&&(b.dpr!==void 0&&!is.equ(it.viewport.dpr,calculateDpr(b.dpr))&&it.setDpr(b.dpr),(it.size.width!==a.width||it.size.height!==a.height)&&it.setSize(a.width,a.height),it.frameloop!==b.frameloop&&it.setFrameloop(b.frameloop),b.linear!==it.internal.lastProps.linear&&(unmountComponentAtNode(e),ut=void 0)),!ut){const ft=createRendererInstance(o,e);b.vr&&(ft.xr.enabled=!0,ft.setAnimationLoop(dt=>advance(dt,!0))),st=createStore(applyProps,invalidate,advance,Xn({gl:ft,size:a},b));const ct=st.getState();ut=reconciler.createContainer(st,modes.indexOf(c),!1,null),roots.set(e,{fiber:ut,store:st}),d&&ct.set({events:d(st)})}if(st&&ut)return reconciler.updateContainer(react.exports.createElement(Provider,{store:st,element:s,onCreated:_,target:e}),ut,null,()=>{}),st;throw"Error creating root!"}function Provider({store:s,element:e,onCreated:o,target:a}){return react.exports.useEffect(()=>{const c=s.getState();c.set(d=>({internal:Br(Xn({},d.internal),{active:!0})})),c.events.connect==null||c.events.connect(a),o&&o(c)},[]),react.exports.createElement(context.Provider,{value:s},e)}function unmountComponentAtNode(s,e){const o=roots.get(s),a=o==null?void 0:o.fiber;if(a){const c=o==null?void 0:o.store.getState();c&&(c.internal.active=!1),reconciler.updateContainer(null,a,null,()=>{c&&setTimeout(()=>{var d,_,b;c.events.disconnect==null||c.events.disconnect(),(d=c.gl)==null||(_=d.renderLists)==null||_.dispose==null||_.dispose(),(b=c.gl)==null||b.forceContextLoss==null||b.forceContextLoss(),dispose(c),roots.delete(s),e&&e(s)},500)})}}function dispose(s){s.dispose&&s.type!=="Scene"&&s.dispose();for(const a in s){var e,o;(e=(o=a).dispose)==null||e.call(o),delete s[a]}}reconciler.act;reconciler.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:"17.0.2"});function _extends(){return _extends=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=o[a])}return s},_extends.apply(this,arguments)}function useCursor(s,e="pointer",o="auto"){react.exports.useEffect(()=>{if(s)return document.body.style.cursor=e,()=>void(document.body.style.cursor=o)},[s])}let saveLastTotalLoaded=0;const useProgress=create(s=>(DefaultLoadingManager.onStart=(e,o,a)=>{s({active:!0,item:e,loaded:o,total:a,progress:(o-saveLastTotalLoaded)/(a-saveLastTotalLoaded)*100})},DefaultLoadingManager.onLoad=()=>{s({active:!1})},DefaultLoadingManager.onError=e=>s(o=>({errors:[...o.errors,e]})),DefaultLoadingManager.onProgress=(e,o,a)=>{o===a&&(saveLastTotalLoaded=a),s({active:!0,item:e,loaded:o,total:a,progress:(o-saveLastTotalLoaded)/(a-saveLastTotalLoaded)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),defaultDataInterpolation=s=>`Loading ${s.toFixed(2)}%`;function Loader({containerStyles:s,innerStyles:e,barStyles:o,dataStyles:a,dataInterpolation:c=defaultDataInterpolation,initialState:d=_=>_}){const{active:_,progress:b}=useProgress(),k=react.exports.useRef(0),j=react.exports.useRef(0),et=react.exports.useRef(null),[nt,tt]=react.exports.useState(d(_));react.exports.useEffect(()=>{let at;return _!==nt&&(at=setTimeout(()=>tt(_),300)),()=>clearTimeout(at)},[nt,_]);const rt=react.exports.useCallback(()=>{!et.current||(k.current+=(b-k.current)/2,(k.current>.95*b||b===100)&&(k.current=b),et.current.innerText=c(k.current),k.current<b&&(j.current=requestAnimationFrame(rt)))},[c,b]);return react.exports.useEffect(()=>(rt(),()=>cancelAnimationFrame(j.current)),[rt]),nt?react.exports.createElement("div",{style:Xn(Br(Xn({},styles.container),{opacity:_?1:0}),s)},react.exports.createElement("div",null,react.exports.createElement("div",{style:Xn(Xn({},styles.inner),e)},react.exports.createElement("div",{style:Xn(Br(Xn({},styles.bar),{transform:`scaleX(${b/100})`}),o)}),react.exports.createElement("span",{ref:et,style:Xn(Xn({},styles.data),a)})))):null}const styles={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function _defineProperty(s,e,o){return e in s?Object.defineProperty(s,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[e]=o,s}const targetPosition=new Vector3;class FirstPersonControls$1 extends EventDispatcher{constructor(e,o){super();_defineProperty(this,"object",void 0),_defineProperty(this,"domElement",void 0),_defineProperty(this,"enabled",!0),_defineProperty(this,"movementSpeed",1),_defineProperty(this,"lookSpeed",.005),_defineProperty(this,"lookVertical",!0),_defineProperty(this,"autoForward",!1),_defineProperty(this,"activeLook",!0),_defineProperty(this,"heightSpeed",!1),_defineProperty(this,"heightCoef",1),_defineProperty(this,"heightMin",0),_defineProperty(this,"heightMax",1),_defineProperty(this,"constrainVertical",!1),_defineProperty(this,"verticalMin",0),_defineProperty(this,"verticalMax",Math.PI),_defineProperty(this,"mouseDragOn",!1),_defineProperty(this,"autoSpeedFactor",0),_defineProperty(this,"mouseX",0),_defineProperty(this,"mouseY",0),_defineProperty(this,"moveForward",!1),_defineProperty(this,"moveBackward",!1),_defineProperty(this,"moveLeft",!1),_defineProperty(this,"moveRight",!1),_defineProperty(this,"moveUp",!1),_defineProperty(this,"moveDown",!1),_defineProperty(this,"viewHalfX",0),_defineProperty(this,"viewHalfY",0),_defineProperty(this,"lat",0),_defineProperty(this,"lon",0),_defineProperty(this,"lookDirection",new Vector3),_defineProperty(this,"spherical",new Spherical),_defineProperty(this,"target",new Vector3),_defineProperty(this,"connect",a=>{a.setAttribute("tabindex","-1"),a.style.touchAction="none",a.addEventListener("contextmenu",this.contextmenu),a.addEventListener("mousemove",this.onMouseMove),a.addEventListener("mousedown",this.onMouseDown),a.addEventListener("mouseup",this.onMouseUp),this.domElement=a,window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.handleResize()}),_defineProperty(this,"dispose",()=>{var a,c,d,_;(a=this.domElement)===null||a===void 0||a.removeEventListener("contextmenu",this.contextmenu),(c=this.domElement)===null||c===void 0||c.removeEventListener("mousedown",this.onMouseDown),(d=this.domElement)===null||d===void 0||d.removeEventListener("mousemove",this.onMouseMove),(_=this.domElement)===null||_===void 0||_.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}),_defineProperty(this,"handleResize",()=>{this.domElement&&(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)}),_defineProperty(this,"onMouseDown",a=>{var c;if((c=this.domElement)===null||c===void 0||c.focus(),this.activeLook)switch(a.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0;break}this.mouseDragOn=!0}),_defineProperty(this,"onMouseUp",a=>{if(this.activeLook)switch(a.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1;break}this.mouseDragOn=!1}),_defineProperty(this,"onMouseMove",a=>{this.domElement&&(this.mouseX=a.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=a.pageY-this.domElement.offsetTop-this.viewHalfY)}),_defineProperty(this,"onKeyDown",a=>{switch(a.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0;break}}),_defineProperty(this,"onKeyUp",a=>{switch(a.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1;break}}),_defineProperty(this,"lookAt",(a,c,d)=>(a instanceof Vector3?this.target.copy(a):c&&d&&this.target.set(a,c,d),this.object.lookAt(this.target),this.setOrientation(),this)),_defineProperty(this,"update",a=>{if(!this.enabled)return;if(this.heightSpeed){const nt=MathUtils.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=a*(nt*this.heightCoef)}else this.autoSpeedFactor=0;const c=a*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(c+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(c),this.moveLeft&&this.object.translateX(-c),this.moveRight&&this.object.translateX(c),this.moveUp&&this.object.translateY(c),this.moveDown&&this.object.translateY(-c);let d=a*this.lookSpeed;this.activeLook||(d=0);let _=1;this.constrainVertical&&(_=Math.PI/(this.verticalMax-this.verticalMin)),this.lon-=this.mouseX*d,this.lookVertical&&(this.lat-=this.mouseY*d*_),this.lat=Math.max(-85,Math.min(85,this.lat));let b=MathUtils.degToRad(90-this.lat);const k=MathUtils.degToRad(this.lon);this.constrainVertical&&(b=MathUtils.mapLinear(b,0,Math.PI,this.verticalMin,this.verticalMax));const j=this.object.position;targetPosition.setFromSphericalCoords(1,b,k).add(j),this.object.lookAt(targetPosition)}),_defineProperty(this,"contextmenu",a=>a.preventDefault()),_defineProperty(this,"setOrientation",()=>{this.lookDirection.set(0,0,-1).applyQuaternion(this.object.quaternion),this.spherical.setFromVector3(this.lookDirection),this.lat=90-MathUtils.radToDeg(this.spherical.phi),this.lon=MathUtils.radToDeg(this.spherical.theta)}),this.object=e,this.domElement=o,this.setOrientation(),o&&this.connect(o)}}class RGBELoader extends DataTextureLoader{constructor(e){super(e);this.type=HalfFloatType}parse(e){const b=function(ft,ct){switch(ft){case 1:console.error("THREE.RGBELoader Read Error: "+(ct||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(ct||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(ct||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(ct||""))}return-1},nt=`
`,tt=function(ft,ct,dt){ct=ct||1024;let gt=ft.pos,yt=-1,St=0,Et="",vt=String.fromCharCode.apply(null,new Uint16Array(ft.subarray(gt,gt+128)));for(;0>(yt=vt.indexOf(nt))&&St<ct&&gt<ft.byteLength;)Et+=vt,St+=vt.length,gt+=128,vt+=String.fromCharCode.apply(null,new Uint16Array(ft.subarray(gt,gt+128)));return-1<yt?(dt!==!1&&(ft.pos+=St+yt+1),Et+vt.slice(0,yt)):!1},rt=function(ft){const ct=/^#\?(\S+)/,dt=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,mt=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,gt=/^\s*FORMAT=(\S+)\s*$/,yt=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,St={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Et,vt;if(ft.pos>=ft.byteLength||!(Et=tt(ft)))return b(1,"no header found");if(!(vt=Et.match(ct)))return b(3,"bad initial token");for(St.valid|=1,St.programtype=vt[1],St.string+=Et+`
`;Et=tt(ft),Et!==!1;){if(St.string+=Et+`
`,Et.charAt(0)==="#"){St.comments+=Et+`
`;continue}if((vt=Et.match(dt))&&(St.gamma=parseFloat(vt[1],10)),(vt=Et.match(mt))&&(St.exposure=parseFloat(vt[1],10)),(vt=Et.match(gt))&&(St.valid|=2,St.format=vt[1]),(vt=Et.match(yt))&&(St.valid|=4,St.height=parseInt(vt[1],10),St.width=parseInt(vt[2],10)),St.valid&2&&St.valid&4)break}return St.valid&2?St.valid&4?St:b(3,"missing image size specifier"):b(3,"missing format specifier")},at=function(ft,ct,dt){const mt=ct;if(mt<8||mt>32767||ft[0]!==2||ft[1]!==2||ft[2]&128)return new Uint8Array(ft);if(mt!==(ft[2]<<8|ft[3]))return b(3,"wrong scanline width");const gt=new Uint8Array(4*ct*dt);if(!gt.length)return b(4,"unable to allocate buffer space");let yt=0,St=0;const Et=4*mt,vt=new Uint8Array(4),_t=new Uint8Array(Et);let bt=dt;for(;bt>0&&St<ft.byteLength;){if(St+4>ft.byteLength)return b(1);if(vt[0]=ft[St++],vt[1]=ft[St++],vt[2]=ft[St++],vt[3]=ft[St++],vt[0]!=2||vt[1]!=2||(vt[2]<<8|vt[3])!=mt)return b(3,"bad rgbe scanline format");let At=0,Rt;for(;At<Et&&St<ft.byteLength;){Rt=ft[St++];const Dt=Rt>128;if(Dt&&(Rt-=128),Rt===0||At+Rt>Et)return b(3,"bad scanline data");if(Dt){const Ft=ft[St++];for(let Vt=0;Vt<Rt;Vt++)_t[At++]=Ft}else _t.set(ft.subarray(St,St+Rt),At),At+=Rt,St+=Rt}const Pt=mt;for(let Dt=0;Dt<Pt;Dt++){let Ft=0;gt[yt]=_t[Dt+Ft],Ft+=mt,gt[yt+1]=_t[Dt+Ft],Ft+=mt,gt[yt+2]=_t[Dt+Ft],Ft+=mt,gt[yt+3]=_t[Dt+Ft],yt+=4}bt--}return gt},lt=function(ft,ct,dt,mt){const gt=ft[ct+3],yt=Math.pow(2,gt-128)/255;dt[mt+0]=ft[ct+0]*yt,dt[mt+1]=ft[ct+1]*yt,dt[mt+2]=ft[ct+2]*yt,dt[mt+3]=1},ut=function(ft,ct,dt,mt){const gt=ft[ct+3],yt=Math.pow(2,gt-128)/255;dt[mt+0]=DataUtils.toHalfFloat(Math.min(ft[ct+0]*yt,65504)),dt[mt+1]=DataUtils.toHalfFloat(Math.min(ft[ct+1]*yt,65504)),dt[mt+2]=DataUtils.toHalfFloat(Math.min(ft[ct+2]*yt,65504)),dt[mt+3]=DataUtils.toHalfFloat(1)},st=new Uint8Array(e);st.pos=0;const it=rt(st);if(it!==-1){const ft=it.width,ct=it.height,dt=at(st.subarray(st.pos),ft,ct);if(dt!==-1){let mt,gt,yt,St;switch(this.type){case FloatType:St=dt.length/4;const Et=new Float32Array(St*4);for(let _t=0;_t<St;_t++)lt(dt,_t*4,Et,_t*4);mt=Et,yt=FloatType;break;case HalfFloatType:St=dt.length/4;const vt=new Uint16Array(St*4);for(let _t=0;_t<St;_t++)ut(dt,_t*4,vt,_t*3);mt=vt,yt=HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:ft,height:ct,data:mt,header:it.string,gamma:it.gamma,exposure:it.exposure,format:gt,type:yt}}}return null}setDataType(e){return this.type=e,this}load(e,o,a,c){function d(_,b){switch(_.type){case FloatType:_.encoding=LinearEncoding,_.minFilter=LinearFilter,_.magFilter=LinearFilter,_.generateMipmaps=!1,_.flipY=!0;break;case HalfFloatType:_.encoding=LinearEncoding,_.minFilter=LinearFilter,_.magFilter=LinearFilter,_.generateMipmaps=!1,_.flipY=!0;break}o&&o(_,b)}return super.load(e,d,a,c)}}function BespokeThenable(){var s=0,e=[],o,a=0,c=0;function d(st,it){var ft=BespokeThenable();function ct(){var dt=s>0?st:it;if(lt(dt))try{var mt=dt(o);mt===ft&&at();var gt=tt(mt);gt?gt.call(mt,ft.resolve,ft.reject):ft.resolve(mt)}catch(yt){ft.reject(yt)}else ft[s>0?"resolve":"reject"](o)}return e.push(ct),s&&j(),ft}var _=rt(function(st){c||k(1,st)}),b=rt(function(st){c||k(-1,st)});function k(st,it){c++;var ft=0;try{it===ut&&at();var ct=st>0&&tt(it);ct?ct.call(it,rt(function(dt){ft++,k(1,dt)}),rt(function(dt){ft++,k(-1,dt)})):(s=st,o=it,j())}catch(dt){!s&&!ft&&k(-1,dt)}}function j(){a||(setTimeout(et,0),a=1)}function et(){var st=e;a=0,e=[],st.forEach(nt)}function nt(st){st()}function tt(st){var it=st&&(lt(st)||typeof st=="object")&&st.then;return lt(it)&&it}function rt(st){var it=0;return function(){for(var ft=[],ct=arguments.length;ct--;)ft[ct]=arguments[ct];it++||st.apply(this,ft)}}function at(){throw new TypeError("Chaining cycle detected")}var lt=function(st){return typeof st=="function"},ut={then:d,resolve:_,reject:b};return ut}function NativePromiseThenable(){var s,e,o=new Promise(function(a,c){s=a,e=c});return{then:o.then.bind(o),resolve:s,reject:e}}BespokeThenable.all=NativePromiseThenable.all=function(s){var e=0,o=[],a=DefaultThenable();return s.length===0?a.resolve([]):s.forEach(function(c,d){var _=DefaultThenable();_.resolve(c),_.then(function(b){e++,o[d]=b,e===s.length&&a.resolve(o)},a.reject)}),a};var DefaultThenable=typeof Promise=="function"?NativePromiseThenable:BespokeThenable;function workerBootstrap(){var s=Object.create(null);function e(c,d){var _=c.id,b=c.name,k=c.dependencies;k===void 0&&(k=[]);var j=c.init;j===void 0&&(j=function(){});var et=c.getTransferables;if(et===void 0&&(et=null),!s[_])try{k=k.map(function(tt){return tt&&tt.isWorkerModule&&(e(tt,function(rt){if(rt instanceof Error)throw rt}),tt=s[tt.id].value),tt}),j=a("<"+b+">.init",j),et&&(et=a("<"+b+">.getTransferables",et));var nt=null;typeof j=="function"?nt=j.apply(void 0,k):console.error("worker module init function failed to rehydrate"),s[_]={id:_,value:nt,getTransferables:et},d(nt)}catch(tt){tt&&tt.noLog||console.error(tt),d(tt)}}function o(c,d){var _,b=c.id,k=c.args;(!s[b]||typeof s[b].value!="function")&&d(new Error("Worker module "+b+": not found or its 'init' did not return a function"));try{var j=(_=s[b]).value.apply(_,k);j&&typeof j.then=="function"?j.then(et,function(nt){return d(nt instanceof Error?nt:new Error(""+nt))}):et(j)}catch(nt){d(nt)}function et(nt){try{var tt=s[b].getTransferables&&s[b].getTransferables(nt);(!tt||!Array.isArray(tt)||!tt.length)&&(tt=void 0),d(nt,tt)}catch(rt){console.error(rt),d(rt)}}}function a(c,d){var _=void 0;self.troikaDefine=function(k){return _=k};var b=URL.createObjectURL(new Blob(["/** "+c.replace(/\*/g,"")+` **/

troikaDefine(
`+d+`
)`],{type:"application/javascript"}));try{importScripts(b)}catch(k){console.error(k)}return URL.revokeObjectURL(b),delete self.troikaDefine,_}self.addEventListener("message",function(c){var d=c.data,_=d.messageId,b=d.action,k=d.data;try{b==="registerModule"&&e(k,function(j){j instanceof Error?postMessage({messageId:_,success:!1,error:j.message}):postMessage({messageId:_,success:!0,result:{isCallable:typeof j=="function"}})}),b==="callModule"&&o(k,function(j,et){j instanceof Error?postMessage({messageId:_,success:!1,error:j.message}):postMessage({messageId:_,success:!0,result:j},et||void 0)})}catch(j){postMessage({messageId:_,success:!1,error:j.stack})}})}function defineMainThreadModule(s){var e=function(){for(var o=[],a=arguments.length;a--;)o[a]=arguments[a];return e._getInitResult().then(function(c){if(typeof c=="function")return c.apply(void 0,o);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var o=s.dependencies,a=s.init;o=Array.isArray(o)?o.map(function(d){return d&&d._getInitResult?d._getInitResult():d}):[];var c=DefaultThenable.all(o).then(function(d){return a.apply(null,d)});return e._getInitResult=function(){return c},c},e}var supportsWorkers=function(){var s=!1;if(typeof window!="undefined"&&typeof window.document!="undefined")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),s=!0}catch(o){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+o.message+"]")}return supportsWorkers=function(){return s},s},_workerModuleId=0,_messageId=0,_allowInitAsString=!1,workers=Object.create(null),registeredModules=Object.create(null),openRequests=Object.create(null);function defineWorkerModule(s){if((!s||typeof s.init!="function")&&!_allowInitAsString)throw new Error("requires `options.init` function");var e=s.dependencies,o=s.init,a=s.getTransferables,c=s.workerId;if(!supportsWorkers())return defineMainThreadModule(s);c==null&&(c="#default");var d="workerModule"+ ++_workerModuleId,_=s.name||d,b=null;e=e&&e.map(function(j){return typeof j=="function"&&!j.workerModuleData&&(_allowInitAsString=!0,j=defineWorkerModule({workerId:c,name:"<"+_+"> function dependency: "+j.name,init:`function(){return (
`+stringifyFunction(j)+`
)}`}),_allowInitAsString=!1),j&&j.workerModuleData&&(j=j.workerModuleData),j});function k(){for(var j=[],et=arguments.length;et--;)j[et]=arguments[et];if(!b){b=callWorker(c,"registerModule",k.workerModuleData);var nt=function(){b=null,registeredModules[c].delete(nt)};(registeredModules[c]||(registeredModules[c]=new Set)).add(nt)}return b.then(function(tt){var rt=tt.isCallable;if(rt)return callWorker(c,"callModule",{id:d,args:j});throw new Error("Worker module function was called but `init` did not return a callable function")})}return k.workerModuleData={isWorkerModule:!0,id:d,name:_,dependencies:e,init:stringifyFunction(o),getTransferables:a&&stringifyFunction(a)},k}function terminateWorker(s){registeredModules[s]&&registeredModules[s].forEach(function(e){e()}),workers[s]&&(workers[s].terminate(),delete workers[s])}function stringifyFunction(s){var e=s.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function getWorker(s){var e=workers[s];if(!e){var o=stringifyFunction(workerBootstrap);e=workers[s]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+s.replace(/\*/g,"")+` **/

;(`+o+")()"],{type:"application/javascript"}))),e.onmessage=function(a){var c=a.data,d=c.messageId,_=openRequests[d];if(!_)throw new Error("WorkerModule response with empty or unknown messageId");delete openRequests[d],_(c)}}return e}function callWorker(s,e,o){var a=DefaultThenable(),c=++_messageId;return openRequests[c]=function(d){d.success?a.resolve(d.result):a.reject(new Error("Error in worker "+e+" call: "+d.error))},getWorker(s).postMessage({messageId:c,action:e,data:o}),a}var ThenableWorkerModule=defineWorkerModule({name:"Thenable",dependencies:[DefaultThenable],init:function(s){return s}});function bidiFactory(){var s=function(e){var o={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},a={},c={};a.L=1,c[1]="L",Object.keys(o).forEach(function(Kt,bn){a[Kt]=1<<bn+1,c[a[Kt]]=Kt}),Object.freeze(a);var d=a.LRI|a.RLI|a.FSI,_=a.L|a.R|a.AL,b=a.B|a.S|a.WS|a.ON|a.FSI|a.LRI|a.RLI|a.PDI,k=a.BN|a.RLE|a.LRE|a.RLO|a.LRO|a.PDF,j=a.S|a.WS|a.B|d|a.PDI|k,et=null;function nt(){if(!et){et=new Map;var Kt=function(En){if(o.hasOwnProperty(En)){var wt=0;o[En].split(",").forEach(function(Mt){var Ot=Mt.split("+"),zt=Ot[0],Yt=Ot[1];zt=parseInt(zt,36),Yt=Yt?parseInt(Yt,36):0,et.set(wt+=zt,a[En]);for(var dn=0;dn<Yt;dn++)et.set(++wt,a[En])})}};for(var bn in o)Kt(bn)}}function tt(Kt){return nt(),et.get(Kt.codePointAt(0))||a.L}function rt(Kt){return c[tt(Kt)]}var at={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function lt(Kt,bn){var En=36,wt=0,Mt=new Map,Ot=bn&&new Map,zt;return Kt.split(",").forEach(function Yt(dn){if(dn.indexOf("+")!==-1)for(var xn=+dn;xn--;)Yt(zt);else{zt=dn;var Nt=dn.split(">"),mn=Nt[0],Ln=Nt[1];mn=String.fromCodePoint(wt+=parseInt(mn,En)),Ln=String.fromCodePoint(wt+=parseInt(Ln,En)),Mt.set(mn,Ln),bn&&Ot.set(Ln,mn)}}),{map:Mt,reverseMap:Ot}}var ut,st,it;function ft(){if(!ut){var Kt=lt(at.pairs,!0),bn=Kt.map,En=Kt.reverseMap;ut=bn,st=En,it=lt(at.canonical,!1).map}}function ct(Kt){return ft(),ut.get(Kt)||null}function dt(Kt){return ft(),st.get(Kt)||null}function mt(Kt){return ft(),it.get(Kt)||null}var gt=a.L,yt=a.R,St=a.EN,Et=a.ES,vt=a.ET,_t=a.AN,bt=a.CS,At=a.B,Rt=a.S,Pt=a.ON,Dt=a.BN,Ft=a.NSM,Vt=a.AL,Qt=a.LRO,Lt=a.RLO,It=a.LRE,Ht=a.RLE,on=a.PDF,nn=a.LRI,jt=a.RLI,Mn=a.FSI,gn=a.PDI;function fn(Kt,bn){for(var En=125,wt=new Uint32Array(Kt.length),Mt=0;Mt<Kt.length;Mt++)wt[Mt]=tt(Kt[Mt]);var Ot=new Map;function zt(Tr,Hr){var Sr=wt[Tr];wt[Tr]=Hr,Ot.set(Sr,Ot.get(Sr)-1),Sr&b&&Ot.set(b,Ot.get(b)-1),Ot.set(Hr,(Ot.get(Hr)||0)+1),Hr&b&&Ot.set(b,(Ot.get(b)||0)+1)}for(var Yt=new Uint8Array(Kt.length),dn=new Map,xn=[],Nt=null,mn=0;mn<Kt.length;mn++)Nt||xn.push(Nt={start:mn,end:Kt.length-1,level:bn==="rtl"?1:bn==="ltr"?0:Qo(mn,!1)}),wt[mn]&At&&(Nt.end=mn,Nt=null);for(var Ln=Ht|It|Lt|Qt|d|gn|on|At,Sn=function(Tr){return Tr+(Tr&1?1:2)},yn=function(Tr){return Tr+(Tr&1?2:1)},Bt=0;Bt<xn.length;Bt++){Nt=xn[Bt];var an=[{_level:Nt.level,_override:0,_isolate:0}],en=void 0,Cn=0,un=0,ln=0;Ot.clear();for(var Rn=Nt.start;Rn<=Nt.end;Rn++){var Fn=wt[Rn];if(en=an[an.length-1],Ot.set(Fn,(Ot.get(Fn)||0)+1),Fn&b&&Ot.set(b,(Ot.get(b)||0)+1),Fn&Ln)if(Fn&(Ht|It)){Yt[Rn]=en._level;var ar=(Fn===Ht?yn:Sn)(en._level);ar<=En&&!Cn&&!un?an.push({_level:ar,_override:0,_isolate:0}):Cn||un++}else if(Fn&(Lt|Qt)){Yt[Rn]=en._level;var Yn=(Fn===Lt?yn:Sn)(en._level);Yn<=En&&!Cn&&!un?an.push({_level:Yn,_override:Fn&Lt?yt:gt,_isolate:0}):Cn||un++}else if(Fn&d){Fn&Mn&&(Fn=Qo(Rn+1,!0)===1?jt:nn),Yt[Rn]=en._level,en._override&&zt(Rn,en._override);var er=(Fn===jt?yn:Sn)(en._level);er<=En&&Cn===0&&un===0?(ln++,an.push({_level:er,_override:0,_isolate:1,_isolInitIndex:Rn})):Cn++}else if(Fn&gn){if(Cn>0)Cn--;else if(ln>0){for(un=0;!an[an.length-1]._isolate;)an.pop();var Lr=an[an.length-1]._isolInitIndex;Lr!=null&&(dn.set(Lr,Rn),dn.set(Rn,Lr)),an.pop(),ln--}en=an[an.length-1],Yt[Rn]=en._level,en._override&&zt(Rn,en._override)}else Fn&on?(Cn===0&&(un>0?un--:!en._isolate&&an.length>1&&(an.pop(),en=an[an.length-1])),Yt[Rn]=en._level):Fn&At&&(Yt[Rn]=Nt.level);else Yt[Rn]=en._level,en._override&&Fn!==Dt&&zt(Rn,en._override)}for(var Kn=[],qn=null,hr=Nt.start;hr<=Nt.end;hr++){var br=wt[hr];if(!(br&k)){var tr=Yt[hr],Er=br&d,Ur=br===gn;qn&&tr===qn._level?(qn._end=hr,qn._endsWithIsolInit=Er):Kn.push(qn={_start:hr,_end:hr,_level:tr,_startsWithPDI:Ur,_endsWithIsolInit:Er})}}for(var pr=[],Tt=0;Tt<Kn.length;Tt++){var Gt=Kn[Tt];if(!Gt._startsWithPDI||Gt._startsWithPDI&&!dn.has(Gt._start)){for(var qt=[qn=Gt],Xt=void 0;qn&&qn._endsWithIsolInit&&(Xt=dn.get(qn._end))!=null;)for(var tn=Tt+1;tn<Kn.length;tn++)if(Kn[tn]._start===Xt){qt.push(qn=Kn[tn]);break}for(var Bn=[],Nn=0;Nn<qt.length;Nn++)for(var Hn=qt[Nn],zn=Hn._start;zn<=Hn._end;zn++)Bn.push(zn);for(var Zn=Yt[Bn[0]],$n=Nt.level,jn=Bn[0]-1;jn>=0;jn--)if(!(wt[jn]&k)){$n=Yt[jn];break}var Qn=Bn[Bn.length-1],$r=Yt[Qn],Vr=Nt.level;if(!(wt[Qn]&d)){for(var Or=Qn+1;Or<=Nt.end;Or++)if(!(wt[Or]&k)){Vr=Yt[Or];break}}pr.push({_seqIndices:Bn,_sosType:Math.max($n,Zn)%2?yt:gt,_eosType:Math.max(Vr,$r)%2?yt:gt})}}for(var gr=0;gr<pr.length;gr++){var Wn=pr[gr],hn=Wn._seqIndices,On=Wn._sosType,vr=Wn._eosType;if(Ot.get(Ft))for(var nr=0;nr<hn.length;nr++){var dr=hn[nr];if(wt[dr]&Ft){for(var Nr=On,or=nr-1;or>=0;or--)if(!(wt[hn[or]]&k)){Nr=wt[hn[or]];break}zt(dr,Nr&(d|gn)?Pt:Nr)}}if(Ot.get(St))for(var ur=0;ur<hn.length;ur++){var eo=hn[ur];if(wt[eo]&St)for(var Cr=ur-1;Cr>=-1;Cr--){var ys=Cr===-1?On:wt[hn[Cr]];if(ys&_){ys===Vt&&zt(eo,_t);break}}}if(Ot.get(Vt))for(var Po=0;Po<hn.length;Po++){var _s=hn[Po];wt[_s]&Vt&&zt(_s,yt)}if(Ot.get(Et)||Ot.get(bt))for(var yo=1;yo<hn.length-1;yo++){var to=hn[yo];if(wt[to]&(Et|bt)){for(var Fo=0,Do=0,rr=yo-1;rr>=0&&(Fo=wt[hn[rr]],!!(Fo&k));rr--);for(var no=yo+1;no<hn.length&&(Do=wt[hn[no]],!!(Do&k));no++);Fo===Do&&(wt[to]===Et?Fo===St:Fo&(St|_t))&&zt(to,Fo)}}if(Ot.get(St))for(var qo=0;qo<hn.length;qo++){var Pl=hn[qo];if(wt[Pl]&St){for(var lo=qo-1;lo>=0&&wt[hn[lo]]&(vt|k);lo--)zt(hn[lo],St);for(var Yo=qo+1;Yo<hn.length&&wt[hn[Yo]]&(vt|k);Yo++)zt(hn[Yo],St)}}if(Ot.get(vt)||Ot.get(Et)||Ot.get(bt))for(var uo=0;uo<hn.length;uo++){var _o=hn[uo];if(wt[_o]&(vt|Et|bt)){zt(_o,Pt);for(var Bo=uo-1;Bo>=0&&wt[hn[Bo]]&k;Bo--)zt(hn[Bo],Pt);for(var xo=uo+1;xo<hn.length&&wt[hn[xo]]&k;xo++)zt(hn[xo],Pt)}}if(Ot.get(St))for(var Yr=0,Ys=On;Yr<hn.length;Yr++){var Zs=hn[Yr],xs=wt[Zs];xs&St?Ys===gt&&zt(Zs,gt):xs&_&&(Ys=xs)}if(Ot.get(b)){var Zo=yt|St|_t,os=Zo|gt,Io=[];{for(var ko=[],So=0;So<hn.length;So++)if(wt[hn[So]]&b){var wo=Kt[hn[So]],Js=void 0;if(ct(wo)!==null)if(ko.length<63)ko.push({char:wo,seqIndex:So});else break;else if((Js=dt(wo))!==null)for(var co=ko.length-1;co>=0;co--){var ss=ko[co].char;if(ss===Js||ss===dt(mt(wo))||ct(mt(ss))===wo){Io.push([ko[co].seqIndex,So]),ko.length=co;break}}}Io.sort(function(Tr,Hr){return Tr[0]-Hr[0]})}for(var as=0;as<Io.length;as++){for(var Ss=Io[as],Uo=Ss[0],Oo=Ss[1],Qs=!1,yr=0,No=Uo+1;No<Oo;No++){var Jo=hn[No];if(wt[Jo]&os){Qs=!0;var ws=wt[Jo]&Zo?yt:gt;if(ws===bo(Jo)){yr=ws;break}}}if(Qs&&!yr){yr=On;for(var _r=Uo-1;_r>=0;_r--){var ro=hn[_r];if(wt[ro]&os){var Ms=wt[ro]&Zo?yt:gt;Ms!==bo(ro)?yr=Ms:yr=bo(ro);break}}}if(yr){if(wt[hn[Uo]]=wt[hn[Oo]]=yr,yr!==bo(hn[Uo])){for(var Gr=Uo+1;Gr<hn.length;Gr++)if(!(wt[hn[Gr]]&k)){tt(Kt[hn[Gr]])&Ft&&(wt[hn[Gr]]=yr);break}}if(yr!==bo(hn[Oo])){for(var io=Oo+1;io<hn.length;io++)if(!(wt[hn[io]]&k)){tt(Kt[hn[io]])&Ft&&(wt[hn[io]]=yr);break}}}}for(var xr=0;xr<hn.length;xr++)if(wt[hn[xr]]&b){for(var bs=xr,Es=xr,Ts=On,Pr=xr-1;Pr>=0;Pr--)if(wt[hn[Pr]]&k)bs=Pr;else{Ts=wt[hn[Pr]]&Zo?yt:gt;break}for(var Ks=vr,fo=xr+1;fo<hn.length;fo++)if(wt[hn[fo]]&(b|k))Es=fo;else{Ks=wt[hn[fo]]&Zo?yt:gt;break}for(var ls=bs;ls<=Es;ls++)wt[hn[ls]]=Ts===Ks?Ts:bo(hn[ls]);xr=Es}}}for(var cr=Nt.start;cr<=Nt.end;cr++){var us=Yt[cr],Mo=wt[cr];if(us&1?Mo&(gt|St|_t)&&Yt[cr]++:Mo&yt?Yt[cr]++:Mo&(_t|St)&&(Yt[cr]+=2),Mo&k&&(Yt[cr]=cr===0?Nt.level:Yt[cr-1]),cr===Nt.end||tt(Kt[cr])&(Rt|At))for(var oo=cr;oo>=0&&tt(Kt[oo])&j;oo--)Yt[oo]=Nt.level}}return{levels:Yt,paragraphs:xn};function Qo(Tr,Hr){for(var Sr=Tr;Sr<Kt.length;Sr++){var wr=wt[Sr];if(wr&(yt|Vt))return 1;if(wr&(At|gt)||Hr&&wr===gn)return 0;if(wr&d){var so=As(Sr);Sr=so===-1?Kt.length:so}}return 0}function As(Tr){for(var Hr=1,Sr=Tr+1;Sr<Kt.length;Sr++){var wr=wt[Sr];if(wr&At)break;if(wr&gn){if(--Hr===0)return Sr}else wr&d&&Hr++}return-1}function bo(Tr){return Yt[Tr]&1?yt:gt}}var pn="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",_n;function $t(){if(!_n){var Kt=lt(pn,!0),bn=Kt.map,En=Kt.reverseMap;En.forEach(function(wt,Mt){bn.set(Mt,wt)}),_n=bn}}function sn(Kt){return $t(),_n.get(Kt)||null}function rn(Kt,bn,En,wt){var Mt=Kt.length;En=Math.max(0,En==null?0:+En),wt=Math.min(Mt-1,wt==null?Mt-1:+wt);for(var Ot=new Map,zt=En;zt<=wt;zt++)if(bn[zt]&1){var Yt=sn(Kt[zt]);Yt!==null&&Ot.set(zt,Yt)}return Ot}function vn(Kt,bn,En,wt){var Mt=Kt.length;En=Math.max(0,En==null?0:+En),wt=Math.min(Mt-1,wt==null?Mt-1:+wt);var Ot=[];return bn.paragraphs.forEach(function(zt){var Yt=Math.max(En,zt.start),dn=Math.min(wt,zt.end);if(Yt<dn){for(var xn=bn.levels.slice(Yt,dn+1),Nt=dn;Nt>=Yt&&tt(Kt[Nt])&j;Nt--)xn[Nt]=zt.level;for(var mn=zt.level,Ln=1/0,Sn=0;Sn<xn.length;Sn++){var yn=xn[Sn];yn>mn&&(mn=yn),yn<Ln&&(Ln=yn|1)}for(var Bt=mn;Bt>=Ln;Bt--)for(var an=0;an<xn.length;an++)if(xn[an]>=Bt){for(var en=an;an+1<xn.length&&xn[an+1]>=Bt;)an++;an>en&&Ot.push([en+En,an+En])}}}),Ot}function cn(Kt,bn,En,wt){var Mt=Dn(Kt,bn,En,wt),Ot=[].concat(Kt);return Mt.forEach(function(zt,Yt){Ot[Yt]=(bn.levels[zt]&1?sn(Kt[zt]):null)||Kt[zt]}),Ot.join("")}function Dn(Kt,bn,En,wt){for(var Mt=vn(Kt,bn,En,wt),Ot=[],zt=0;zt<Kt.length;zt++)Ot[zt]=zt;return Mt.forEach(function(Yt){for(var dn=Yt[0],xn=Yt[1],Nt=Ot.slice(dn,xn+1),mn=Nt.length;mn--;)Ot[xn-mn]=Nt[mn]}),Ot}return e.closingToOpeningBracket=dt,e.getBidiCharType=tt,e.getBidiCharTypeName=rt,e.getCanonicalBracket=mt,e.getEmbeddingLevels=fn,e.getMirroredCharacter=sn,e.getMirroredCharactersMap=rn,e.getReorderSegments=vn,e.getReorderedIndices=Dn,e.getReorderedString=cn,e.openingToClosingBracket=ct,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return s}const voidMainRegExp=/\bvoid\s+main\s*\(\s*\)\s*{/g;function expandShaderIncludes(s){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function o(a,c){let d=ShaderChunk[c];return d?expandShaderIncludes(d):a}return s.replace(e,o)}const _lut=[];for(let s=0;s<256;s++)_lut[s]=(s<16?"0":"")+s.toString(16);function generateUUID(){const s=Math.random()*4294967295|0,e=Math.random()*4294967295|0,o=Math.random()*4294967295|0,a=Math.random()*4294967295|0;return(_lut[s&255]+_lut[s>>8&255]+_lut[s>>16&255]+_lut[s>>24&255]+"-"+_lut[e&255]+_lut[e>>8&255]+"-"+_lut[e>>16&15|64]+_lut[e>>24&255]+"-"+_lut[o&63|128]+_lut[o>>8&255]+"-"+_lut[o>>16&255]+_lut[o>>24&255]+_lut[a&255]+_lut[a>>8&255]+_lut[a>>16&255]+_lut[a>>24&255]).toUpperCase()}const assign$1=Object.assign||function(){let s=arguments[0];for(let e=1,o=arguments.length;e<o;e++){let a=arguments[e];if(a)for(let c in a)a.hasOwnProperty(c)&&(s[c]=a[c])}return s},epoch=Date.now(),CONSTRUCTOR_CACHE=new WeakMap,SHADER_UPGRADE_CACHE=new Map;let materialInstanceId=1e10;function createDerivedMaterial(s,e){const o=getKeyForOptions(e);let a=CONSTRUCTOR_CACHE.get(s);if(a||CONSTRUCTOR_CACHE.set(s,a=Object.create(null)),a[o])return new a[o];const c=`_onBeforeCompile${o}`,d=function(j){s.onBeforeCompile.call(this,j);const et=this.customProgramCacheKey()+"|"+j.vertexShader+"|"+j.fragmentShader;let nt=SHADER_UPGRADE_CACHE[et];if(!nt){const tt=upgradeShaders(j,e,o);nt=SHADER_UPGRADE_CACHE[et]=tt}j.vertexShader=nt.vertexShader,j.fragmentShader=nt.fragmentShader,assign$1(j.uniforms,this.uniforms),e.timeUniform&&(j.uniforms[e.timeUniform]={get value(){return Date.now()-epoch}}),this[c]&&this[c](j)},_=function(){return b(e.chained?s:s.clone())},b=function(j){const et=Object.create(j,k);return Object.defineProperty(et,"baseMaterial",{value:s}),Object.defineProperty(et,"id",{value:materialInstanceId++}),et.uuid=generateUUID(),et.uniforms=assign$1({},j.uniforms,e.uniforms),et.defines=assign$1({},j.defines,e.defines),et.defines[`TROIKA_DERIVED_MATERIAL_${o}`]="",et.extensions=assign$1({},j.extensions,e.extensions),et._listeners=void 0,et},k={constructor:{value:_},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return s.customProgramCacheKey()+"|"+o}},onBeforeCompile:{get(){return d},set(j){this[c]=j}},copy:{writable:!0,configurable:!0,value:function(j){return s.copy.call(this,j),!s.isShaderMaterial&&!s.isDerivedMaterial&&(assign$1(this.extensions,j.extensions),assign$1(this.defines,j.defines),assign$1(this.uniforms,UniformsUtils.clone(j.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const j=new s.constructor;return b(j).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let j=this._depthMaterial;return j||(j=this._depthMaterial=createDerivedMaterial(s.isDerivedMaterial?s.getDepthMaterial():new MeshDepthMaterial({depthPacking:RGBADepthPacking}),e),j.defines.IS_DEPTH_MATERIAL="",j.uniforms=this.uniforms),j}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let j=this._distanceMaterial;return j||(j=this._distanceMaterial=createDerivedMaterial(s.isDerivedMaterial?s.getDistanceMaterial():new MeshDistanceMaterial,e),j.defines.IS_DISTANCE_MATERIAL="",j.uniforms=this.uniforms),j}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:j,_distanceMaterial:et}=this;j&&j.dispose(),et&&et.dispose(),s.dispose.call(this)}}};return a[o]=_,new _}function upgradeShaders({vertexShader:s,fragmentShader:e},o,a){let{vertexDefs:c,vertexMainIntro:d,vertexMainOutro:_,vertexTransform:b,fragmentDefs:k,fragmentMainIntro:j,fragmentMainOutro:et,fragmentColorTransform:nt,customRewriter:tt,timeUniform:rt}=o;if(c=c||"",d=d||"",_=_||"",k=k||"",j=j||"",et=et||"",(b||tt)&&(s=expandShaderIncludes(s)),(nt||tt)&&(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),e=expandShaderIncludes(e)),tt){let at=tt({vertexShader:s,fragmentShader:e});s=at.vertexShader,e=at.fragmentShader}if(nt){let at=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,lt=>(at.push(lt),"")),et=`${nt}
${at.join(`
`)}
${et}`}if(rt){const at=`
uniform float ${rt};
`;c=at+c,k=at+k}return b&&(s=`vec3 troika_position_${a};
vec3 troika_normal_${a};
vec2 troika_uv_${a};
${s}
`,c=`${c}
void troikaVertexTransform${a}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${b}
}
`,d=`
troika_position_${a} = vec3(position);
troika_normal_${a} = vec3(normal);
troika_uv_${a} = vec2(uv);
troikaVertexTransform${a}(troika_position_${a}, troika_normal_${a}, troika_uv_${a});
${d}
`,s=s.replace(/\b(position|normal|uv)\b/g,(at,lt,ut,st)=>/\battribute\s+vec[23]\s+$/.test(st.substr(0,ut))?lt:`troika_${lt}_${a}`)),s=injectIntoShaderCode(s,a,c,d,_),e=injectIntoShaderCode(e,a,k,j,et),{vertexShader:s,fragmentShader:e}}function injectIntoShaderCode(s,e,o,a,c){return(a||c||o)&&(s=s.replace(voidMainRegExp,`
${o}
void troikaOrigMain${e}() {`),s+=`
void main() {
  ${a}
  troikaOrigMain${e}();
  ${c}
}`),s}function optionsJsonReplacer(s,e){return s==="uniforms"?void 0:typeof e=="function"?e.toString():e}let _idCtr=0;const optionsHashesToIds=new Map;function getKeyForOptions(s){const e=JSON.stringify(s,optionsJsonReplacer);let o=optionsHashesToIds.get(e);return o==null&&optionsHashesToIds.set(e,o=++_idCtr),o}function createSDFGenerator(s){function o(_,b,k,j,et,nt,tt){const rt=1-tt;return{x:rt*rt*_+2*rt*tt*k+tt*tt*et,y:rt*rt*b+2*rt*tt*j+tt*tt*nt}}function a(_,b,k,j,et,nt,tt,rt,at){const lt=1-at;return{x:lt*lt*lt*_+3*lt*lt*at*k+3*lt*at*at*et+at*at*at*tt,y:lt*lt*lt*b+3*lt*lt*at*j+3*lt*at*at*nt+at*at*at*rt}}function c(){return(self.performance||Date).now()}function d(_,b,k,j,et,nt=1){const tt=c(),rt=new Uint8Array(_*b),at=j[2]-j[0],lt=j[3]-j[1],ut=s(j),st=/([MLQCZ])([^MLQCZ]*)/g;let it,ft,ct,dt,mt;for(;it=st.exec(k);){const gt=it[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(yt=>parseFloat(yt));switch(it[1]){case"M":dt=ft=gt[0],mt=ct=gt[1];break;case"L":(gt[0]!==dt||gt[1]!==mt)&&ut.addLineSegment(dt,mt,dt=gt[0],mt=gt[1]);break;case"Q":{let yt={x:dt,y:mt};for(let St=1;St<16;St++){let Et=o(dt,mt,gt[0],gt[1],gt[2],gt[3],St/15);ut.addLineSegment(yt.x,yt.y,Et.x,Et.y),yt=Et}dt=gt[2],mt=gt[3];break}case"C":{let yt={x:dt,y:mt};for(let St=1;St<16;St++){let Et=a(dt,mt,gt[0],gt[1],gt[2],gt[3],gt[4],gt[5],St/15);ut.addLineSegment(yt.x,yt.y,Et.x,Et.y),yt=Et}dt=gt[4],mt=gt[5];break}case"Z":(dt!==ft||mt!==ct)&&ut.addLineSegment(dt,mt,ft,ct);break}}for(let gt=0;gt<_;gt++)for(let yt=0;yt<b;yt++){const St=ut.findNearestSignedDistance(j[0]+at*(gt+.5)/_,j[1]+lt*(yt+.5)/b,et);let Et=Math.pow(1-Math.abs(St)/et,nt)/2;St<0&&(Et=1-Et),Et=Math.max(0,Math.min(255,Math.round(Et*255))),rt[yt*_+gt]=Et}return{textureData:rt,timing:c()-tt}}return d}function createTypesetter(s,e,o){const{defaultFontURL:a}=o,c=Object.create(null),d=1/0,_=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,b=/[\s\-\u007C\u00AD\u2010\u2012-\u2014\u2027\u2056\u2E17\u2E40]/;function k(st,it){function ft(){const ct=dt=>{console.error(`Failure loading font ${st}${st===a?"":"; trying fallback"}`,dt),st!==a&&(st=a,ft())};try{const dt=new XMLHttpRequest;dt.open("get",st,!0),dt.responseType="arraybuffer",dt.onload=function(){if(dt.status>=400)ct(new Error(dt.statusText));else if(dt.status>0)try{const mt=s(dt.response);it(mt)}catch(mt){ct(mt)}},dt.onerror=ct,dt.send()}catch(dt){ct(dt)}}ft()}function j(st,it){st||(st=a);let ft=c[st];ft?ft.pending?ft.pending.push(it):it(ft):(c[st]={pending:[it]},k(st,ct=>{let dt=c[st].pending;c[st]=ct,dt.forEach(mt=>mt(ct))}))}function et({text:st="",font:it=a,sdfGlyphSize:ft=64,fontSize:ct=1,letterSpacing:dt=0,lineHeight:mt="normal",maxWidth:gt=d,direction:yt,textAlign:St="left",textIndent:Et=0,whiteSpace:vt="normal",overflowWrap:_t="normal",anchorX:bt=0,anchorY:At=0,includeCaretPositions:Rt=!1,chunkedBoundsSize:Pt=8192,colorRanges:Dt=null},Ft,Vt=!1){const Qt=at(),Lt={fontLoad:0,typesetting:0};st.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),st=st.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),ct=+ct,dt=+dt,gt=+gt,mt=mt||"normal",Et=+Et,j(it,It=>{const Ht=isFinite(gt);let on=null,nn=null,jt=null,Mn=null,gn=null,fn=null,pn=null,_n=0,$t=0,sn=vt!=="nowrap";const{ascender:rn,descender:vn,unitsPerEm:cn}=It;Lt.fontLoad=at()-Qt;const Dn=at(),Kt=ct/cn;mt==="normal"&&(mt=(rn-vn)/cn),mt=mt*ct;const bn=(mt-(rn-vn)*Kt)/2,En=-(rn*Kt+bn),wt=Math.min(mt,(rn-vn)*Kt),Mt=(rn+vn)/2*Kt-wt/2;let Ot=Et,zt=new lt;const Yt=[zt];It.forEachGlyph(st,ct,dt,(Nt,mn,Ln)=>{const Sn=st.charAt(Ln),yn=Nt.advanceWidth*Kt,Bt=zt.count;let an;if("isEmpty"in Nt||(Nt.isWhitespace=!!Sn&&/\s/.test(Sn),Nt.canBreakAfter=!!Sn&&b.test(Sn),Nt.isEmpty=Nt.xMin===Nt.xMax||Nt.yMin===Nt.yMax||_.test(Sn)),!Nt.isWhitespace&&!Nt.isEmpty&&$t++,sn&&Ht&&!Nt.isWhitespace&&mn+yn+Ot>gt&&Bt){if(zt.glyphAt(Bt-1).glyphObj.canBreakAfter)an=new lt,Ot=-mn;else for(let Cn=Bt;Cn--;)if(Cn===0&&_t==="break-word"){an=new lt,Ot=-mn;break}else if(zt.glyphAt(Cn).glyphObj.canBreakAfter){an=zt.splitAt(Cn+1);const un=an.glyphAt(0).x;Ot-=un;for(let ln=an.count;ln--;)an.glyphAt(ln).x-=un;break}an&&(zt.isSoftWrapped=!0,zt=an,Yt.push(zt),_n=gt)}let en=zt.glyphAt(zt.count);en.glyphObj=Nt,en.x=mn+Ot,en.width=yn,en.charIndex=Ln,Sn===`
`&&(zt=new lt,Yt.push(zt),Ot=-(mn+yn+dt*ct)+Et)}),Yt.forEach(Nt=>{for(let mn=Nt.count;mn--;){let{glyphObj:Ln,x:Sn,width:yn}=Nt.glyphAt(mn);if(!Ln.isWhitespace){Nt.width=Sn+yn,Nt.width>_n&&(_n=Nt.width);return}}});let dn=0,xn=0;if(bt&&(typeof bt=="number"?dn=-bt:typeof bt=="string"&&(dn=-_n*(bt==="left"?0:bt==="center"?.5:bt==="right"?1:tt(bt)))),At){if(typeof At=="number")xn=-At;else if(typeof At=="string"){let Nt=Yt.length*mt;xn=At==="top"?0:At==="top-baseline"?-En:At==="middle"?Nt/2:At==="bottom"?Nt:At==="bottom-baseline"?Nt-bn+vn*Kt:tt(At)*Nt}}if(!Vt){const Nt=e.getEmbeddingLevels(st,yt);on=new Uint16Array($t),nn=new Float32Array($t*2),jt={},fn=[d,d,-d,-d],pn=[];let mn=En;Rt&&(gn=new Float32Array(st.length*3)),Dt&&(Mn=new Uint8Array($t*3));let Ln=0,Sn=-1,yn=-1,Bt,an;if(Yt.forEach((en,Cn)=>{let{count:un,width:ln}=en;if(un>0){let Rn=0;for(let Kn=un;Kn--&&en.glyphAt(Kn).glyphObj.isWhitespace;)Rn++;let Fn=0,ar=0;if(St==="center")Fn=(_n-ln)/2;else if(St==="right")Fn=_n-ln;else if(St==="justify"&&en.isSoftWrapped){let Kn=0;for(let qn=un-Rn;qn--;)en.glyphAt(qn).glyphObj.isWhitespace&&Kn++;ar=(_n-ln)/Kn}if(ar||Fn){let Kn=0;for(let qn=0;qn<un;qn++){let hr=en.glyphAt(qn);const br=hr.glyphObj;hr.x+=Fn+Kn,ar!==0&&br.isWhitespace&&qn<un-Rn&&(Kn+=ar,hr.width+=ar)}}const Yn=e.getReorderSegments(st,Nt,en.glyphAt(0).charIndex,en.glyphAt(en.count-1).charIndex);for(let Kn=0;Kn<Yn.length;Kn++){const[qn,hr]=Yn[Kn];let br=1/0,tr=-1/0;for(let Er=0;Er<un;Er++)if(en.glyphAt(Er).charIndex>=qn){let Ur=Er,pr=Er;for(;pr<un;pr++){let Tt=en.glyphAt(pr);if(Tt.charIndex>hr)break;pr<un-Rn&&(br=Math.min(br,Tt.x),tr=Math.max(tr,Tt.x+Tt.width))}for(let Tt=Ur;Tt<pr;Tt++){const Gt=en.glyphAt(Tt);Gt.x=tr-(Gt.x+Gt.width-br)}break}}let er;const Lr=Kn=>er=Kn;for(let Kn=0;Kn<un;Kn++){let qn=en.glyphAt(Kn);er=qn.glyphObj;const hr=er.index,br=Nt.levels[qn.charIndex]&1;if(br){const tr=e.getMirroredCharacter(st[qn.charIndex]);tr&&It.forEachGlyph(tr,0,0,Lr)}if(Rt){const{charIndex:tr}=qn,Er=qn.x+dn,Ur=qn.x+qn.width+dn;gn[tr*3]=br?Ur:Er,gn[tr*3+1]=br?Er:Ur,gn[tr*3+2]=mn+Mt+xn;const pr=tr-Sn;pr>1&&rt(gn,Sn,pr),Sn=tr}if(Dt){const{charIndex:tr}=qn;for(;tr>yn;)yn++,Dt.hasOwnProperty(yn)&&(an=Dt[yn])}if(!er.isWhitespace&&!er.isEmpty){const tr=Ln++;jt[hr]||(jt[hr]={path:er.path,pathBounds:[er.xMin,er.yMin,er.xMax,er.yMax]});const Er=qn.x+dn,Ur=mn+xn;nn[tr*2]=Er,nn[tr*2+1]=Ur;const pr=Er+er.xMin*Kt,Tt=Ur+er.yMin*Kt,Gt=Er+er.xMax*Kt,qt=Ur+er.yMax*Kt;pr<fn[0]&&(fn[0]=pr),Tt<fn[1]&&(fn[1]=Tt),Gt>fn[2]&&(fn[2]=Gt),qt>fn[3]&&(fn[3]=qt),tr%Pt===0&&(Bt={start:tr,end:tr,rect:[d,d,-d,-d]},pn.push(Bt)),Bt.end++;const Xt=Bt.rect;if(pr<Xt[0]&&(Xt[0]=pr),Tt<Xt[1]&&(Xt[1]=Tt),Gt>Xt[2]&&(Xt[2]=Gt),qt>Xt[3]&&(Xt[3]=qt),on[tr]=hr,Dt){const tn=tr*3;Mn[tn]=an>>16&255,Mn[tn+1]=an>>8&255,Mn[tn+2]=an&255}}}}mn-=mt}),gn){const en=st.length-Sn;en>1&&rt(gn,Sn,en)}}Lt.typesetting=at()-Dn,Ft({glyphIds:on,glyphPositions:nn,glyphData:jt,caretPositions:gn,caretHeight:wt,glyphColors:Mn,chunkedBounds:pn,fontSize:ct,unitsPerEm:cn,ascender:rn*Kt,descender:vn*Kt,lineHeight:mt,topBaseline:En,blockBounds:[dn,xn-Yt.length*mt,dn+_n,xn],visibleBounds:fn,timings:Lt})})}function nt(st,it){et(st,ft=>{const[ct,dt,mt,gt]=ft.blockBounds;it({width:mt-ct,height:gt-dt})},{metricsOnly:!0})}function tt(st){let it=st.match(/^([\d.]+)%$/),ft=it?parseFloat(it[1]):NaN;return isNaN(ft)?0:ft/100}function rt(st,it,ft){const ct=st[it*3],dt=st[it*3+1],mt=st[it*3+2],gt=(dt-ct)/ft;for(let yt=0;yt<ft;yt++){const St=(it+yt)*3;st[St]=ct+gt*yt,st[St+1]=ct+gt*(yt+1),st[St+2]=mt}}function at(){return(self.performance||Date).now()}function lt(){this.data=[]}const ut=["glyphObj","x","width","charIndex"];return lt.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/ut.length)},glyphAt(st){let it=lt.flyweight;return it.data=this.data,it.index=st,it},splitAt(st){let it=new lt;return it.data=this.data.splice(st*ut.length),it}},lt.flyweight=ut.reduce((st,it,ft,ct)=>(Object.defineProperty(st,it,{get(){return this.data[this.index*ut.length+ft]},set(dt){this.data[this.index*ut.length+ft]=dt}}),st),{data:null,index:0}),{typeset:et,measure:nt,loadFont:j}}function createGlyphSegmentsIndex(s){let e=!1;const o=[];function a(){e&&(o.sort(function(k,j){return k.maxX-j.maxX}),e=!1)}function c(k,j,et,nt){const tt={x0:k,y0:j,x1:et,y1:nt,minX:Math.min(k,et),minY:Math.min(j,nt),maxX:Math.max(k,et),maxY:Math.max(j,nt)};o.push(tt),e=!0}function d(k,j){a();let et=1/0,nt=1/0;for(let tt=o.length;tt--;){const rt=o[tt];if(rt.maxX+nt<=k)break;if(k+nt>rt.minX&&j-nt<rt.maxY&&j+nt>rt.minY){const at=b(k,j,rt.x0,rt.y0,rt.x1,rt.y1);at<et&&(et=at,nt=Math.sqrt(et))}}return _(k,j)&&(nt=-nt),nt}function _(k,j){a();let et=!1;for(let nt=o.length;nt--;){const tt=o[nt];if(tt.maxX<=k)break;tt.minY<j&&tt.maxY>j&&tt.y0>j!=tt.y1>j&&k<(tt.x1-tt.x0)*(j-tt.y0)/(tt.y1-tt.y0)+tt.x0&&(et=!et)}return et}function b(k,j,et,nt,tt,rt){const at=tt-et,lt=rt-nt,ut=at*at+lt*lt,st=ut?Math.max(0,Math.min(1,((k-et)*at+(j-nt)*lt)/ut)):0,it=k-(et+st*at),ft=j-(nt+st*lt);return it*it+ft*ft}return{addLineSegment:c,findNearestSignedDistance:d}}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function typrFactory(){return typeof window=="undefined"&&(self.window=self),function(s){var e={parse:function(c){var d=e._bin,_=new Uint8Array(c);if(d.readASCII(_,0,4)=="ttcf"){var b=4;d.readUshort(_,b),b+=2,d.readUshort(_,b),b+=2;var k=d.readUint(_,b);b+=4;for(var j=[],et=0;et<k;et++){var nt=d.readUint(_,b);b+=4,j.push(e._readFont(_,nt))}return j}return[e._readFont(_,0)]},_readFont:function(c,d){var _=e._bin,b=d;_.readFixed(c,d),d+=4;var k=_.readUshort(c,d);d+=2,_.readUshort(c,d),d+=2,_.readUshort(c,d),d+=2,_.readUshort(c,d),d+=2;for(var j=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],et={_data:c,_offset:b},nt={},tt=0;tt<k;tt++){var rt=_.readASCII(c,d,4);d+=4,_.readUint(c,d),d+=4;var at=_.readUint(c,d);d+=4;var lt=_.readUint(c,d);d+=4,nt[rt]={offset:at,length:lt}}for(tt=0;tt<j.length;tt++){var ut=j[tt];nt[ut]&&(et[ut.trim()]=e[ut.trim()].parse(c,nt[ut].offset,nt[ut].length,et))}return et},_tabOffset:function(c,d,_){for(var b=e._bin,k=b.readUshort(c,_+4),j=_+12,et=0;et<k;et++){var nt=b.readASCII(c,j,4);j+=4,b.readUint(c,j),j+=4;var tt=b.readUint(c,j);if(j+=4,b.readUint(c,j),j+=4,nt==d)return tt}return 0}};e._bin={readFixed:function(c,d){return(c[d]<<8|c[d+1])+(c[d+2]<<8|c[d+3])/65540},readF2dot14:function(c,d){return e._bin.readShort(c,d)/16384},readInt:function(c,d){return e._bin._view(c).getInt32(d)},readInt8:function(c,d){return e._bin._view(c).getInt8(d)},readShort:function(c,d){return e._bin._view(c).getInt16(d)},readUshort:function(c,d){return e._bin._view(c).getUint16(d)},readUshorts:function(c,d,_){for(var b=[],k=0;k<_;k++)b.push(e._bin.readUshort(c,d+2*k));return b},readUint:function(c,d){return e._bin._view(c).getUint32(d)},readUint64:function(c,d){return 4294967296*e._bin.readUint(c,d)+e._bin.readUint(c,d+4)},readASCII:function(c,d,_){for(var b="",k=0;k<_;k++)b+=String.fromCharCode(c[d+k]);return b},readUnicode:function(c,d,_){for(var b="",k=0;k<_;k++){var j=c[d++]<<8|c[d++];b+=String.fromCharCode(j)}return b},_tdec:typeof window!="undefined"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(c,d,_){var b=e._bin._tdec;return b&&d==0&&_==c.length?b.decode(c):e._bin.readASCII(c,d,_)},readBytes:function(c,d,_){for(var b=[],k=0;k<_;k++)b.push(c[d+k]);return b},readASCIIArray:function(c,d,_){for(var b=[],k=0;k<_;k++)b.push(String.fromCharCode(c[d+k]));return b},_view:function(c){return c._dataView||(c._dataView=c.buffer?new DataView(c.buffer,c.byteOffset,c.byteLength):new DataView(new Uint8Array(c).buffer))}},e._lctf={},e._lctf.parse=function(c,d,_,b,k){var j=e._bin,et={},nt=d;j.readFixed(c,d),d+=4;var tt=j.readUshort(c,d);d+=2;var rt=j.readUshort(c,d);d+=2;var at=j.readUshort(c,d);return d+=2,et.scriptList=e._lctf.readScriptList(c,nt+tt),et.featureList=e._lctf.readFeatureList(c,nt+rt),et.lookupList=e._lctf.readLookupList(c,nt+at,k),et},e._lctf.readLookupList=function(c,d,_){var b=e._bin,k=d,j=[],et=b.readUshort(c,d);d+=2;for(var nt=0;nt<et;nt++){var tt=b.readUshort(c,d);d+=2;var rt=e._lctf.readLookupTable(c,k+tt,_);j.push(rt)}return j},e._lctf.readLookupTable=function(c,d,_){var b=e._bin,k=d,j={tabs:[]};j.ltype=b.readUshort(c,d),d+=2,j.flag=b.readUshort(c,d),d+=2;var et=b.readUshort(c,d);d+=2;for(var nt=j.ltype,tt=0;tt<et;tt++){var rt=b.readUshort(c,d);d+=2;var at=_(c,nt,k+rt,j);j.tabs.push(at)}return j},e._lctf.numOfOnes=function(c){for(var d=0,_=0;_<32;_++)(c>>>_&1)!=0&&d++;return d},e._lctf.readClassDef=function(c,d){var _=e._bin,b=[],k=_.readUshort(c,d);if(d+=2,k==1){var j=_.readUshort(c,d);d+=2;var et=_.readUshort(c,d);d+=2;for(var nt=0;nt<et;nt++)b.push(j+nt),b.push(j+nt),b.push(_.readUshort(c,d)),d+=2}if(k==2){var tt=_.readUshort(c,d);for(d+=2,nt=0;nt<tt;nt++)b.push(_.readUshort(c,d)),d+=2,b.push(_.readUshort(c,d)),d+=2,b.push(_.readUshort(c,d)),d+=2}return b},e._lctf.getInterval=function(c,d){for(var _=0;_<c.length;_+=3){var b=c[_],k=c[_+1];if(c[_+2],b<=d&&d<=k)return _}return-1},e._lctf.readCoverage=function(c,d){var _=e._bin,b={};b.fmt=_.readUshort(c,d),d+=2;var k=_.readUshort(c,d);return d+=2,b.fmt==1&&(b.tab=_.readUshorts(c,d,k)),b.fmt==2&&(b.tab=_.readUshorts(c,d,3*k)),b},e._lctf.coverageIndex=function(c,d){var _=c.tab;if(c.fmt==1)return _.indexOf(d);if(c.fmt==2){var b=e._lctf.getInterval(_,d);if(b!=-1)return _[b+2]+(d-_[b])}return-1},e._lctf.readFeatureList=function(c,d){var _=e._bin,b=d,k=[],j=_.readUshort(c,d);d+=2;for(var et=0;et<j;et++){var nt=_.readASCII(c,d,4);d+=4;var tt=_.readUshort(c,d);d+=2;var rt=e._lctf.readFeatureTable(c,b+tt);rt.tag=nt.trim(),k.push(rt)}return k},e._lctf.readFeatureTable=function(c,d){var _=e._bin,b=d,k={},j=_.readUshort(c,d);d+=2,j>0&&(k.featureParams=b+j);var et=_.readUshort(c,d);d+=2,k.tab=[];for(var nt=0;nt<et;nt++)k.tab.push(_.readUshort(c,d+2*nt));return k},e._lctf.readScriptList=function(c,d){var _=e._bin,b=d,k={},j=_.readUshort(c,d);d+=2;for(var et=0;et<j;et++){var nt=_.readASCII(c,d,4);d+=4;var tt=_.readUshort(c,d);d+=2,k[nt.trim()]=e._lctf.readScriptTable(c,b+tt)}return k},e._lctf.readScriptTable=function(c,d){var _=e._bin,b=d,k={},j=_.readUshort(c,d);d+=2,k.default=e._lctf.readLangSysTable(c,b+j);var et=_.readUshort(c,d);d+=2;for(var nt=0;nt<et;nt++){var tt=_.readASCII(c,d,4);d+=4;var rt=_.readUshort(c,d);d+=2,k[tt.trim()]=e._lctf.readLangSysTable(c,b+rt)}return k},e._lctf.readLangSysTable=function(c,d){var _=e._bin,b={};_.readUshort(c,d),d+=2,b.reqFeature=_.readUshort(c,d),d+=2;var k=_.readUshort(c,d);return d+=2,b.features=_.readUshorts(c,d,k),b},e.CFF={},e.CFF.parse=function(c,d,_){var b=e._bin;(c=new Uint8Array(c.buffer,d,_))[d=0],c[++d],c[++d],c[++d],d++;var k=[];d=e.CFF.readIndex(c,d,k);for(var j=[],et=0;et<k.length-1;et++)j.push(b.readASCII(c,d+k[et],k[et+1]-k[et]));d+=k[k.length-1];var nt=[];d=e.CFF.readIndex(c,d,nt);var tt=[];for(et=0;et<nt.length-1;et++)tt.push(e.CFF.readDict(c,d+nt[et],d+nt[et+1]));d+=nt[nt.length-1];var rt=tt[0],at=[];d=e.CFF.readIndex(c,d,at);var lt=[];for(et=0;et<at.length-1;et++)lt.push(b.readASCII(c,d+at[et],at[et+1]-at[et]));if(d+=at[at.length-1],e.CFF.readSubrs(c,d,rt),rt.CharStrings){d=rt.CharStrings,at=[],d=e.CFF.readIndex(c,d,at);var ut=[];for(et=0;et<at.length-1;et++)ut.push(b.readBytes(c,d+at[et],at[et+1]-at[et]));rt.CharStrings=ut}if(rt.ROS){d=rt.FDArray;var st=[];for(d=e.CFF.readIndex(c,d,st),rt.FDArray=[],et=0;et<st.length-1;et++){var it=e.CFF.readDict(c,d+st[et],d+st[et+1]);e.CFF._readFDict(c,it,lt),rt.FDArray.push(it)}d+=st[st.length-1],d=rt.FDSelect,rt.FDSelect=[];var ft=c[d];if(d++,ft!=3)throw ft;var ct=b.readUshort(c,d);for(d+=2,et=0;et<ct+1;et++)rt.FDSelect.push(b.readUshort(c,d),c[d+2]),d+=3}return rt.Encoding&&(rt.Encoding=e.CFF.readEncoding(c,rt.Encoding,rt.CharStrings.length)),rt.charset&&(rt.charset=e.CFF.readCharset(c,rt.charset,rt.CharStrings.length)),e.CFF._readFDict(c,rt,lt),rt},e.CFF._readFDict=function(c,d,_){var b;for(var k in d.Private&&(b=d.Private[1],d.Private=e.CFF.readDict(c,b,b+d.Private[0]),d.Private.Subrs&&e.CFF.readSubrs(c,b+d.Private.Subrs,d.Private)),d)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(k)!=-1&&(d[k]=_[d[k]-426+35])},e.CFF.readSubrs=function(c,d,_){var b=e._bin,k=[];d=e.CFF.readIndex(c,d,k);var j,et=k.length;j=et<1240?107:et<33900?1131:32768,_.Bias=j,_.Subrs=[];for(var nt=0;nt<k.length-1;nt++)_.Subrs.push(b.readBytes(c,d+k[nt],k[nt+1]-k[nt]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(c,d){for(var _=0;_<c.charset.length;_++)if(c.charset[_]==d)return _;return-1},e.CFF.glyphBySE=function(c,d){return d<0||d>255?-1:e.CFF.glyphByUnicode(c,e.CFF.tableSE[d])},e.CFF.readEncoding=function(c,d,_){e._bin;var b=[".notdef"],k=c[d];if(d++,k!=0)throw"error: unknown encoding format: "+k;var j=c[d];d++;for(var et=0;et<j;et++)b.push(c[d+et]);return b},e.CFF.readCharset=function(c,d,_){var b=e._bin,k=[".notdef"],j=c[d];if(d++,j==0)for(var et=0;et<_;et++){var nt=b.readUshort(c,d);d+=2,k.push(nt)}else{if(j!=1&&j!=2)throw"error: format: "+j;for(;k.length<_;){nt=b.readUshort(c,d),d+=2;var tt=0;for(j==1?(tt=c[d],d++):(tt=b.readUshort(c,d),d+=2),et=0;et<=tt;et++)k.push(nt),nt++}}return k},e.CFF.readIndex=function(c,d,_){var b=e._bin,k=b.readUshort(c,d)+1,j=c[d+=2];if(d++,j==1)for(var et=0;et<k;et++)_.push(c[d+et]);else if(j==2)for(et=0;et<k;et++)_.push(b.readUshort(c,d+2*et));else if(j==3)for(et=0;et<k;et++)_.push(16777215&b.readUint(c,d+3*et-1));else if(k!=1)throw"unsupported offset size: "+j+", count: "+k;return(d+=k*j)-1},e.CFF.getCharString=function(c,d,_){var b=e._bin,k=c[d],j=c[d+1];c[d+2],c[d+3],c[d+4];var et=1,nt=null,tt=null;k<=20&&(nt=k,et=1),k==12&&(nt=100*k+j,et=2),21<=k&&k<=27&&(nt=k,et=1),k==28&&(tt=b.readShort(c,d+1),et=3),29<=k&&k<=31&&(nt=k,et=1),32<=k&&k<=246&&(tt=k-139,et=1),247<=k&&k<=250&&(tt=256*(k-247)+j+108,et=2),251<=k&&k<=254&&(tt=256*-(k-251)-j-108,et=2),k==255&&(tt=b.readInt(c,d+1)/65535,et=5),_.val=tt!=null?tt:"o"+nt,_.size=et},e.CFF.readCharString=function(c,d,_){for(var b=d+_,k=e._bin,j=[];d<b;){var et=c[d],nt=c[d+1];c[d+2],c[d+3],c[d+4];var tt=1,rt=null,at=null;et<=20&&(rt=et,tt=1),et==12&&(rt=100*et+nt,tt=2),et!=19&&et!=20||(rt=et,tt=2),21<=et&&et<=27&&(rt=et,tt=1),et==28&&(at=k.readShort(c,d+1),tt=3),29<=et&&et<=31&&(rt=et,tt=1),32<=et&&et<=246&&(at=et-139,tt=1),247<=et&&et<=250&&(at=256*(et-247)+nt+108,tt=2),251<=et&&et<=254&&(at=256*-(et-251)-nt-108,tt=2),et==255&&(at=k.readInt(c,d+1)/65535,tt=5),j.push(at!=null?at:"o"+rt),d+=tt}return j},e.CFF.readDict=function(c,d,_){for(var b=e._bin,k={},j=[];d<_;){var et=c[d],nt=c[d+1];c[d+2],c[d+3],c[d+4];var tt=1,rt=null,at=null;if(et==28&&(at=b.readShort(c,d+1),tt=3),et==29&&(at=b.readInt(c,d+1),tt=5),32<=et&&et<=246&&(at=et-139,tt=1),247<=et&&et<=250&&(at=256*(et-247)+nt+108,tt=2),251<=et&&et<=254&&(at=256*-(et-251)-nt-108,tt=2),et==255)throw at=b.readInt(c,d+1)/65535,tt=5,"unknown number";if(et==30){var lt=[];for(tt=1;;){var ut=c[d+tt];tt++;var st=ut>>4,it=15&ut;if(st!=15&&lt.push(st),it!=15&&lt.push(it),it==15)break}for(var ft="",ct=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],dt=0;dt<lt.length;dt++)ft+=ct[lt[dt]];at=parseFloat(ft)}et<=21&&(rt=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][et],tt=1,et==12&&(rt=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][nt],tt=2)),rt!=null?(k[rt]=j.length==1?j[0]:j,j=[]):j.push(at),d+=tt}return k},e.cmap={},e.cmap.parse=function(c,d,_){c=new Uint8Array(c.buffer,d,_),d=0;var b=e._bin,k={};b.readUshort(c,d),d+=2;var j=b.readUshort(c,d);d+=2;var et=[];k.tables=[];for(var nt=0;nt<j;nt++){var tt=b.readUshort(c,d);d+=2;var rt=b.readUshort(c,d);d+=2;var at=b.readUint(c,d);d+=4;var lt="p"+tt+"e"+rt,ut=et.indexOf(at);if(ut==-1){var st;ut=k.tables.length,et.push(at);var it=b.readUshort(c,at);it==0?st=e.cmap.parse0(c,at):it==4?st=e.cmap.parse4(c,at):it==6?st=e.cmap.parse6(c,at):it==12?st=e.cmap.parse12(c,at):console.debug("unknown format: "+it,tt,rt,at),k.tables.push(st)}if(k[lt]!=null)throw"multiple tables for one platform+encoding";k[lt]=ut}return k},e.cmap.parse0=function(c,d){var _=e._bin,b={};b.format=_.readUshort(c,d),d+=2;var k=_.readUshort(c,d);d+=2,_.readUshort(c,d),d+=2,b.map=[];for(var j=0;j<k-6;j++)b.map.push(c[d+j]);return b},e.cmap.parse4=function(c,d){var _=e._bin,b=d,k={};k.format=_.readUshort(c,d),d+=2;var j=_.readUshort(c,d);d+=2,_.readUshort(c,d),d+=2;var et=_.readUshort(c,d);d+=2;var nt=et/2;k.searchRange=_.readUshort(c,d),d+=2,k.entrySelector=_.readUshort(c,d),d+=2,k.rangeShift=_.readUshort(c,d),d+=2,k.endCount=_.readUshorts(c,d,nt),d+=2*nt,d+=2,k.startCount=_.readUshorts(c,d,nt),d+=2*nt,k.idDelta=[];for(var tt=0;tt<nt;tt++)k.idDelta.push(_.readShort(c,d)),d+=2;for(k.idRangeOffset=_.readUshorts(c,d,nt),d+=2*nt,k.glyphIdArray=[];d<b+j;)k.glyphIdArray.push(_.readUshort(c,d)),d+=2;return k},e.cmap.parse6=function(c,d){var _=e._bin,b={};b.format=_.readUshort(c,d),d+=2,_.readUshort(c,d),d+=2,_.readUshort(c,d),d+=2,b.firstCode=_.readUshort(c,d),d+=2;var k=_.readUshort(c,d);d+=2,b.glyphIdArray=[];for(var j=0;j<k;j++)b.glyphIdArray.push(_.readUshort(c,d)),d+=2;return b},e.cmap.parse12=function(c,d){var _=e._bin,b={};b.format=_.readUshort(c,d),d+=2,d+=2,_.readUint(c,d),d+=4,_.readUint(c,d),d+=4;var k=_.readUint(c,d);d+=4,b.groups=[];for(var j=0;j<k;j++){var et=d+12*j,nt=_.readUint(c,et+0),tt=_.readUint(c,et+4),rt=_.readUint(c,et+8);b.groups.push([nt,tt,rt])}return b},e.glyf={},e.glyf.parse=function(c,d,_,b){for(var k=[],j=0;j<b.maxp.numGlyphs;j++)k.push(null);return k},e.glyf._parseGlyf=function(c,d){var _=e._bin,b=c._data,k=e._tabOffset(b,"glyf",c._offset)+c.loca[d];if(c.loca[d]==c.loca[d+1])return null;var j={};if(j.noc=_.readShort(b,k),k+=2,j.xMin=_.readShort(b,k),k+=2,j.yMin=_.readShort(b,k),k+=2,j.xMax=_.readShort(b,k),k+=2,j.yMax=_.readShort(b,k),k+=2,j.xMin>=j.xMax||j.yMin>=j.yMax)return null;if(j.noc>0){j.endPts=[];for(var et=0;et<j.noc;et++)j.endPts.push(_.readUshort(b,k)),k+=2;var nt=_.readUshort(b,k);if(k+=2,b.length-k<nt)return null;j.instructions=_.readBytes(b,k,nt),k+=nt;var tt=j.endPts[j.noc-1]+1;for(j.flags=[],et=0;et<tt;et++){var rt=b[k];if(k++,j.flags.push(rt),(8&rt)!=0){var at=b[k];k++;for(var lt=0;lt<at;lt++)j.flags.push(rt),et++}}for(j.xs=[],et=0;et<tt;et++){var ut=(2&j.flags[et])!=0,st=(16&j.flags[et])!=0;ut?(j.xs.push(st?b[k]:-b[k]),k++):st?j.xs.push(0):(j.xs.push(_.readShort(b,k)),k+=2)}for(j.ys=[],et=0;et<tt;et++)ut=(4&j.flags[et])!=0,st=(32&j.flags[et])!=0,ut?(j.ys.push(st?b[k]:-b[k]),k++):st?j.ys.push(0):(j.ys.push(_.readShort(b,k)),k+=2);var it=0,ft=0;for(et=0;et<tt;et++)it+=j.xs[et],ft+=j.ys[et],j.xs[et]=it,j.ys[et]=ft}else{var ct;j.parts=[];do{ct=_.readUshort(b,k),k+=2;var dt={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(j.parts.push(dt),dt.glyphIndex=_.readUshort(b,k),k+=2,1&ct){var mt=_.readShort(b,k);k+=2;var gt=_.readShort(b,k);k+=2}else mt=_.readInt8(b,k),k++,gt=_.readInt8(b,k),k++;2&ct?(dt.m.tx=mt,dt.m.ty=gt):(dt.p1=mt,dt.p2=gt),8&ct?(dt.m.a=dt.m.d=_.readF2dot14(b,k),k+=2):64&ct?(dt.m.a=_.readF2dot14(b,k),k+=2,dt.m.d=_.readF2dot14(b,k),k+=2):128&ct&&(dt.m.a=_.readF2dot14(b,k),k+=2,dt.m.b=_.readF2dot14(b,k),k+=2,dt.m.c=_.readF2dot14(b,k),k+=2,dt.m.d=_.readF2dot14(b,k),k+=2)}while(32&ct);if(256&ct){var yt=_.readUshort(b,k);for(k+=2,j.instr=[],et=0;et<yt;et++)j.instr.push(b[k]),k++}}return j},e.GPOS={},e.GPOS.parse=function(c,d,_,b){return e._lctf.parse(c,d,_,b,e.GPOS.subt)},e.GPOS.subt=function(c,d,_,b){var k=e._bin,j=_,et={};if(et.fmt=k.readUshort(c,_),_+=2,d==1||d==2||d==3||d==7||d==8&&et.fmt<=2){var nt=k.readUshort(c,_);_+=2,et.coverage=e._lctf.readCoverage(c,nt+j)}if(d==1&&et.fmt==1){var tt=k.readUshort(c,_);_+=2;var rt=e._lctf.numOfOnes(tt);tt!=0&&(et.pos=e.GPOS.readValueRecord(c,_,tt))}else if(d==2&&et.fmt>=1&&et.fmt<=2){tt=k.readUshort(c,_),_+=2;var at=k.readUshort(c,_);_+=2,rt=e._lctf.numOfOnes(tt);var lt=e._lctf.numOfOnes(at);if(et.fmt==1){et.pairsets=[];var ut=k.readUshort(c,_);_+=2;for(var st=0;st<ut;st++){var it=j+k.readUshort(c,_);_+=2;var ft=k.readUshort(c,it);it+=2;for(var ct=[],dt=0;dt<ft;dt++){var mt=k.readUshort(c,it);it+=2,tt!=0&&(_t=e.GPOS.readValueRecord(c,it,tt),it+=2*rt),at!=0&&(bt=e.GPOS.readValueRecord(c,it,at),it+=2*lt),ct.push({gid2:mt,val1:_t,val2:bt})}et.pairsets.push(ct)}}if(et.fmt==2){var gt=k.readUshort(c,_);_+=2;var yt=k.readUshort(c,_);_+=2;var St=k.readUshort(c,_);_+=2;var Et=k.readUshort(c,_);for(_+=2,et.classDef1=e._lctf.readClassDef(c,j+gt),et.classDef2=e._lctf.readClassDef(c,j+yt),et.matrix=[],st=0;st<St;st++){var vt=[];for(dt=0;dt<Et;dt++){var _t=null,bt=null;tt!=0&&(_t=e.GPOS.readValueRecord(c,_,tt),_+=2*rt),at!=0&&(bt=e.GPOS.readValueRecord(c,_,at),_+=2*lt),vt.push({val1:_t,val2:bt})}et.matrix.push(vt)}}}else{if(d==9&&et.fmt==1){var At=k.readUshort(c,_);_+=2;var Rt=k.readUint(c,_);if(_+=4,b.ltype==9)b.ltype=At;else if(b.ltype!=At)throw"invalid extension substitution";return e.GPOS.subt(c,b.ltype,j+Rt)}console.debug("unsupported GPOS table LookupType",d,"format",et.fmt)}return et},e.GPOS.readValueRecord=function(c,d,_){var b=e._bin,k=[];return k.push(1&_?b.readShort(c,d):0),d+=1&_?2:0,k.push(2&_?b.readShort(c,d):0),d+=2&_?2:0,k.push(4&_?b.readShort(c,d):0),d+=4&_?2:0,k.push(8&_?b.readShort(c,d):0),d+=8&_?2:0,k},e.GSUB={},e.GSUB.parse=function(c,d,_,b){return e._lctf.parse(c,d,_,b,e.GSUB.subt)},e.GSUB.subt=function(c,d,_,b){var k=e._bin,j=_,et={};if(et.fmt=k.readUshort(c,_),_+=2,d!=1&&d!=4&&d!=5&&d!=6)return null;if(d==1||d==4||d==5&&et.fmt<=2||d==6&&et.fmt<=2){var nt=k.readUshort(c,_);_+=2,et.coverage=e._lctf.readCoverage(c,j+nt)}if(d==1&&et.fmt>=1&&et.fmt<=2){if(et.fmt==1)et.delta=k.readShort(c,_),_+=2;else if(et.fmt==2){var tt=k.readUshort(c,_);_+=2,et.newg=k.readUshorts(c,_,tt),_+=2*et.newg.length}}else if(d==4){et.vals=[],tt=k.readUshort(c,_),_+=2;for(var rt=0;rt<tt;rt++){var at=k.readUshort(c,_);_+=2,et.vals.push(e.GSUB.readLigatureSet(c,j+at))}}else if(d==5&&et.fmt==2){if(et.fmt==2){var lt=k.readUshort(c,_);_+=2,et.cDef=e._lctf.readClassDef(c,j+lt),et.scset=[];var ut=k.readUshort(c,_);for(_+=2,rt=0;rt<ut;rt++){var st=k.readUshort(c,_);_+=2,et.scset.push(st==0?null:e.GSUB.readSubClassSet(c,j+st))}}}else if(d==6&&et.fmt==3){if(et.fmt==3){for(rt=0;rt<3;rt++){tt=k.readUshort(c,_),_+=2;for(var it=[],ft=0;ft<tt;ft++)it.push(e._lctf.readCoverage(c,j+k.readUshort(c,_+2*ft)));_+=2*tt,rt==0&&(et.backCvg=it),rt==1&&(et.inptCvg=it),rt==2&&(et.ahedCvg=it)}tt=k.readUshort(c,_),_+=2,et.lookupRec=e.GSUB.readSubstLookupRecords(c,_,tt)}}else{if(d==7&&et.fmt==1){var ct=k.readUshort(c,_);_+=2;var dt=k.readUint(c,_);if(_+=4,b.ltype==9)b.ltype=ct;else if(b.ltype!=ct)throw"invalid extension substitution";return e.GSUB.subt(c,b.ltype,j+dt)}console.debug("unsupported GSUB table LookupType",d,"format",et.fmt)}return et},e.GSUB.readSubClassSet=function(c,d){var _=e._bin.readUshort,b=d,k=[],j=_(c,d);d+=2;for(var et=0;et<j;et++){var nt=_(c,d);d+=2,k.push(e.GSUB.readSubClassRule(c,b+nt))}return k},e.GSUB.readSubClassRule=function(c,d){var _=e._bin.readUshort,b={},k=_(c,d),j=_(c,d+=2);d+=2,b.input=[];for(var et=0;et<k-1;et++)b.input.push(_(c,d)),d+=2;return b.substLookupRecords=e.GSUB.readSubstLookupRecords(c,d,j),b},e.GSUB.readSubstLookupRecords=function(c,d,_){for(var b=e._bin.readUshort,k=[],j=0;j<_;j++)k.push(b(c,d),b(c,d+2)),d+=4;return k},e.GSUB.readChainSubClassSet=function(c,d){var _=e._bin,b=d,k=[],j=_.readUshort(c,d);d+=2;for(var et=0;et<j;et++){var nt=_.readUshort(c,d);d+=2,k.push(e.GSUB.readChainSubClassRule(c,b+nt))}return k},e.GSUB.readChainSubClassRule=function(c,d){for(var _=e._bin,b={},k=["backtrack","input","lookahead"],j=0;j<k.length;j++){var et=_.readUshort(c,d);d+=2,j==1&&et--,b[k[j]]=_.readUshorts(c,d,et),d+=2*b[k[j]].length}return et=_.readUshort(c,d),d+=2,b.subst=_.readUshorts(c,d,2*et),d+=2*b.subst.length,b},e.GSUB.readLigatureSet=function(c,d){var _=e._bin,b=d,k=[],j=_.readUshort(c,d);d+=2;for(var et=0;et<j;et++){var nt=_.readUshort(c,d);d+=2,k.push(e.GSUB.readLigature(c,b+nt))}return k},e.GSUB.readLigature=function(c,d){var _=e._bin,b={chain:[]};b.nglyph=_.readUshort(c,d),d+=2;var k=_.readUshort(c,d);d+=2;for(var j=0;j<k-1;j++)b.chain.push(_.readUshort(c,d)),d+=2;return b},e.head={},e.head.parse=function(c,d,_){var b=e._bin,k={};return b.readFixed(c,d),d+=4,k.fontRevision=b.readFixed(c,d),d+=4,b.readUint(c,d),d+=4,b.readUint(c,d),d+=4,k.flags=b.readUshort(c,d),d+=2,k.unitsPerEm=b.readUshort(c,d),d+=2,k.created=b.readUint64(c,d),d+=8,k.modified=b.readUint64(c,d),d+=8,k.xMin=b.readShort(c,d),d+=2,k.yMin=b.readShort(c,d),d+=2,k.xMax=b.readShort(c,d),d+=2,k.yMax=b.readShort(c,d),d+=2,k.macStyle=b.readUshort(c,d),d+=2,k.lowestRecPPEM=b.readUshort(c,d),d+=2,k.fontDirectionHint=b.readShort(c,d),d+=2,k.indexToLocFormat=b.readShort(c,d),d+=2,k.glyphDataFormat=b.readShort(c,d),d+=2,k},e.hhea={},e.hhea.parse=function(c,d,_){var b=e._bin,k={};return b.readFixed(c,d),d+=4,k.ascender=b.readShort(c,d),d+=2,k.descender=b.readShort(c,d),d+=2,k.lineGap=b.readShort(c,d),d+=2,k.advanceWidthMax=b.readUshort(c,d),d+=2,k.minLeftSideBearing=b.readShort(c,d),d+=2,k.minRightSideBearing=b.readShort(c,d),d+=2,k.xMaxExtent=b.readShort(c,d),d+=2,k.caretSlopeRise=b.readShort(c,d),d+=2,k.caretSlopeRun=b.readShort(c,d),d+=2,k.caretOffset=b.readShort(c,d),d+=2,d+=8,k.metricDataFormat=b.readShort(c,d),d+=2,k.numberOfHMetrics=b.readUshort(c,d),d+=2,k},e.hmtx={},e.hmtx.parse=function(c,d,_,b){for(var k=e._bin,j={aWidth:[],lsBearing:[]},et=0,nt=0,tt=0;tt<b.maxp.numGlyphs;tt++)tt<b.hhea.numberOfHMetrics&&(et=k.readUshort(c,d),d+=2,nt=k.readShort(c,d),d+=2),j.aWidth.push(et),j.lsBearing.push(nt);return j},e.kern={},e.kern.parse=function(c,d,_,b){var k=e._bin,j=k.readUshort(c,d);if(d+=2,j==1)return e.kern.parseV1(c,d-2,_,b);var et=k.readUshort(c,d);d+=2;for(var nt={glyph1:[],rval:[]},tt=0;tt<et;tt++){d+=2,_=k.readUshort(c,d),d+=2;var rt=k.readUshort(c,d);d+=2;var at=rt>>>8;if((at&=15)!=0)throw"unknown kern table format: "+at;d=e.kern.readFormat0(c,d,nt)}return nt},e.kern.parseV1=function(c,d,_,b){var k=e._bin;k.readFixed(c,d),d+=4;var j=k.readUint(c,d);d+=4;for(var et={glyph1:[],rval:[]},nt=0;nt<j;nt++){k.readUint(c,d),d+=4;var tt=k.readUshort(c,d);d+=2,k.readUshort(c,d),d+=2;var rt=tt>>>8;if((rt&=15)!=0)throw"unknown kern table format: "+rt;d=e.kern.readFormat0(c,d,et)}return et},e.kern.readFormat0=function(c,d,_){var b=e._bin,k=-1,j=b.readUshort(c,d);d+=2,b.readUshort(c,d),d+=2,b.readUshort(c,d),d+=2,b.readUshort(c,d),d+=2;for(var et=0;et<j;et++){var nt=b.readUshort(c,d);d+=2;var tt=b.readUshort(c,d);d+=2;var rt=b.readShort(c,d);d+=2,nt!=k&&(_.glyph1.push(nt),_.rval.push({glyph2:[],vals:[]}));var at=_.rval[_.rval.length-1];at.glyph2.push(tt),at.vals.push(rt),k=nt}return d},e.loca={},e.loca.parse=function(c,d,_,b){var k=e._bin,j=[],et=b.head.indexToLocFormat,nt=b.maxp.numGlyphs+1;if(et==0)for(var tt=0;tt<nt;tt++)j.push(k.readUshort(c,d+(tt<<1))<<1);if(et==1)for(tt=0;tt<nt;tt++)j.push(k.readUint(c,d+(tt<<2)));return j},e.maxp={},e.maxp.parse=function(c,d,_){var b=e._bin,k={},j=b.readUint(c,d);return d+=4,k.numGlyphs=b.readUshort(c,d),d+=2,j==65536&&(k.maxPoints=b.readUshort(c,d),d+=2,k.maxContours=b.readUshort(c,d),d+=2,k.maxCompositePoints=b.readUshort(c,d),d+=2,k.maxCompositeContours=b.readUshort(c,d),d+=2,k.maxZones=b.readUshort(c,d),d+=2,k.maxTwilightPoints=b.readUshort(c,d),d+=2,k.maxStorage=b.readUshort(c,d),d+=2,k.maxFunctionDefs=b.readUshort(c,d),d+=2,k.maxInstructionDefs=b.readUshort(c,d),d+=2,k.maxStackElements=b.readUshort(c,d),d+=2,k.maxSizeOfInstructions=b.readUshort(c,d),d+=2,k.maxComponentElements=b.readUshort(c,d),d+=2,k.maxComponentDepth=b.readUshort(c,d),d+=2),k},e.name={},e.name.parse=function(c,d,_){var b=e._bin,k={};b.readUshort(c,d),d+=2;var j=b.readUshort(c,d);d+=2,b.readUshort(c,d);for(var et,nt=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],tt=d+=2,rt=0;rt<j;rt++){var at=b.readUshort(c,d);d+=2;var lt=b.readUshort(c,d);d+=2;var ut=b.readUshort(c,d);d+=2;var st=b.readUshort(c,d);d+=2;var it=b.readUshort(c,d);d+=2;var ft=b.readUshort(c,d);d+=2;var ct,dt=nt[st],mt=tt+12*j+ft;if(at==0)ct=b.readUnicode(c,mt,it/2);else if(at==3&&lt==0)ct=b.readUnicode(c,mt,it/2);else if(lt==0)ct=b.readASCII(c,mt,it);else if(lt==1)ct=b.readUnicode(c,mt,it/2);else if(lt==3)ct=b.readUnicode(c,mt,it/2);else{if(at!=1)throw"unknown encoding "+lt+", platformID: "+at;ct=b.readASCII(c,mt,it),console.debug("reading unknown MAC encoding "+lt+" as ASCII")}var gt="p"+at+","+ut.toString(16);k[gt]==null&&(k[gt]={}),k[gt][dt!==void 0?dt:st]=ct,k[gt]._lang=ut}for(var yt in k)if(k[yt].postScriptName!=null&&k[yt]._lang==1033)return k[yt];for(var yt in k)if(k[yt].postScriptName!=null&&k[yt]._lang==0)return k[yt];for(var yt in k)if(k[yt].postScriptName!=null&&k[yt]._lang==3084)return k[yt];for(var yt in k)if(k[yt].postScriptName!=null)return k[yt];for(var yt in k){et=yt;break}return console.debug("returning name table with languageID "+k[et]._lang),k[et]},e["OS/2"]={},e["OS/2"].parse=function(c,d,_){var b=e._bin.readUshort(c,d);d+=2;var k={};if(b==0)e["OS/2"].version0(c,d,k);else if(b==1)e["OS/2"].version1(c,d,k);else if(b==2||b==3||b==4)e["OS/2"].version2(c,d,k);else{if(b!=5)throw"unknown OS/2 table version: "+b;e["OS/2"].version5(c,d,k)}return k},e["OS/2"].version0=function(c,d,_){var b=e._bin;return _.xAvgCharWidth=b.readShort(c,d),d+=2,_.usWeightClass=b.readUshort(c,d),d+=2,_.usWidthClass=b.readUshort(c,d),d+=2,_.fsType=b.readUshort(c,d),d+=2,_.ySubscriptXSize=b.readShort(c,d),d+=2,_.ySubscriptYSize=b.readShort(c,d),d+=2,_.ySubscriptXOffset=b.readShort(c,d),d+=2,_.ySubscriptYOffset=b.readShort(c,d),d+=2,_.ySuperscriptXSize=b.readShort(c,d),d+=2,_.ySuperscriptYSize=b.readShort(c,d),d+=2,_.ySuperscriptXOffset=b.readShort(c,d),d+=2,_.ySuperscriptYOffset=b.readShort(c,d),d+=2,_.yStrikeoutSize=b.readShort(c,d),d+=2,_.yStrikeoutPosition=b.readShort(c,d),d+=2,_.sFamilyClass=b.readShort(c,d),d+=2,_.panose=b.readBytes(c,d,10),d+=10,_.ulUnicodeRange1=b.readUint(c,d),d+=4,_.ulUnicodeRange2=b.readUint(c,d),d+=4,_.ulUnicodeRange3=b.readUint(c,d),d+=4,_.ulUnicodeRange4=b.readUint(c,d),d+=4,_.achVendID=[b.readInt8(c,d),b.readInt8(c,d+1),b.readInt8(c,d+2),b.readInt8(c,d+3)],d+=4,_.fsSelection=b.readUshort(c,d),d+=2,_.usFirstCharIndex=b.readUshort(c,d),d+=2,_.usLastCharIndex=b.readUshort(c,d),d+=2,_.sTypoAscender=b.readShort(c,d),d+=2,_.sTypoDescender=b.readShort(c,d),d+=2,_.sTypoLineGap=b.readShort(c,d),d+=2,_.usWinAscent=b.readUshort(c,d),d+=2,_.usWinDescent=b.readUshort(c,d),d+=2},e["OS/2"].version1=function(c,d,_){var b=e._bin;return d=e["OS/2"].version0(c,d,_),_.ulCodePageRange1=b.readUint(c,d),d+=4,_.ulCodePageRange2=b.readUint(c,d),d+=4},e["OS/2"].version2=function(c,d,_){var b=e._bin;return d=e["OS/2"].version1(c,d,_),_.sxHeight=b.readShort(c,d),d+=2,_.sCapHeight=b.readShort(c,d),d+=2,_.usDefault=b.readUshort(c,d),d+=2,_.usBreak=b.readUshort(c,d),d+=2,_.usMaxContext=b.readUshort(c,d),d+=2},e["OS/2"].version5=function(c,d,_){var b=e._bin;return d=e["OS/2"].version2(c,d,_),_.usLowerOpticalPointSize=b.readUshort(c,d),d+=2,_.usUpperOpticalPointSize=b.readUshort(c,d),d+=2},e.post={},e.post.parse=function(c,d,_){var b=e._bin,k={};return k.version=b.readFixed(c,d),d+=4,k.italicAngle=b.readFixed(c,d),d+=4,k.underlinePosition=b.readShort(c,d),d+=2,k.underlineThickness=b.readShort(c,d),d+=2,k},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(c,d){var _=c.cmap,b=-1;if(_.p0e4!=null?b=_.p0e4:_.p3e1!=null?b=_.p3e1:_.p1e0!=null?b=_.p1e0:_.p0e3!=null&&(b=_.p0e3),b==-1)throw"no familiar platform and encoding!";var k=_.tables[b];if(k.format==0)return d>=k.map.length?0:k.map[d];if(k.format==4){for(var j=-1,et=0;et<k.endCount.length;et++)if(d<=k.endCount[et]){j=et;break}return j==-1||k.startCount[j]>d?0:65535&(k.idRangeOffset[j]!=0?k.glyphIdArray[d-k.startCount[j]+(k.idRangeOffset[j]>>1)-(k.idRangeOffset.length-j)]:d+k.idDelta[j])}if(k.format==12){if(d>k.groups[k.groups.length-1][1])return 0;for(et=0;et<k.groups.length;et++){var nt=k.groups[et];if(nt[0]<=d&&d<=nt[1])return nt[2]+(d-nt[0])}return 0}throw"unknown cmap table format "+k.format},e.U.glyphToPath=function(c,d){var _={cmds:[],crds:[]};if(c.SVG&&c.SVG.entries[d]){var b=c.SVG.entries[d];return b==null?_:(typeof b=="string"&&(b=e.SVG.toPath(b),c.SVG.entries[d]=b),b)}if(c.CFF){var k={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:c.CFF.Private?c.CFF.Private.defaultWidthX:0,open:!1},j=c.CFF,et=c.CFF.Private;if(j.ROS){for(var nt=0;j.FDSelect[nt+2]<=d;)nt+=2;et=j.FDArray[j.FDSelect[nt+1]].Private}e.U._drawCFF(c.CFF.CharStrings[d],k,j,et,_)}else c.glyf&&e.U._drawGlyf(d,c,_);return _},e.U._drawGlyf=function(c,d,_){var b=d.glyf[c];b==null&&(b=d.glyf[c]=e.glyf._parseGlyf(d,c)),b!=null&&(b.noc>-1?e.U._simpleGlyph(b,_):e.U._compoGlyph(b,d,_))},e.U._simpleGlyph=function(c,d){for(var _=0;_<c.noc;_++){for(var b=_==0?0:c.endPts[_-1]+1,k=c.endPts[_],j=b;j<=k;j++){var et=j==b?k:j-1,nt=j==k?b:j+1,tt=1&c.flags[j],rt=1&c.flags[et],at=1&c.flags[nt],lt=c.xs[j],ut=c.ys[j];if(j==b)if(tt){if(!rt){e.U.P.moveTo(d,lt,ut);continue}e.U.P.moveTo(d,c.xs[et],c.ys[et])}else rt?e.U.P.moveTo(d,c.xs[et],c.ys[et]):e.U.P.moveTo(d,(c.xs[et]+lt)/2,(c.ys[et]+ut)/2);tt?rt&&e.U.P.lineTo(d,lt,ut):at?e.U.P.qcurveTo(d,lt,ut,c.xs[nt],c.ys[nt]):e.U.P.qcurveTo(d,lt,ut,(lt+c.xs[nt])/2,(ut+c.ys[nt])/2)}e.U.P.closePath(d)}},e.U._compoGlyph=function(c,d,_){for(var b=0;b<c.parts.length;b++){var k={cmds:[],crds:[]},j=c.parts[b];e.U._drawGlyf(j.glyphIndex,d,k);for(var et=j.m,nt=0;nt<k.crds.length;nt+=2){var tt=k.crds[nt],rt=k.crds[nt+1];_.crds.push(tt*et.a+rt*et.b+et.tx),_.crds.push(tt*et.c+rt*et.d+et.ty)}for(nt=0;nt<k.cmds.length;nt++)_.cmds.push(k.cmds[nt])}},e.U._getGlyphClass=function(c,d){var _=e._lctf.getInterval(d,c);return _==-1?0:d[_+2]},e.U.getPairAdjustment=function(c,d,_){var b=0;if(c.GPOS)for(var k=c.GPOS,j=k.lookupList,et=k.featureList,nt=[],tt=0;tt<et.length;tt++){var rt=et[tt];if(rt.tag=="kern"){for(var at=0;at<rt.tab.length;at++)if(!nt[rt.tab[at]]){nt[rt.tab[at]]=!0;for(var lt=j[rt.tab[at]],ut=0;ut<lt.tabs.length;ut++)if(lt.tabs[ut]!=null){var st,it=lt.tabs[ut];if((!it.coverage||(st=e._lctf.coverageIndex(it.coverage,d))!=-1)&&lt.ltype!=1){if(lt.ltype==2){var ft;if(it.fmt==1){var ct=it.pairsets[st];for(tt=0;tt<ct.length;tt++)ct[tt].gid2==_&&(ft=ct[tt])}else if(it.fmt==2){var dt=e.U._getGlyphClass(d,it.classDef1),mt=e.U._getGlyphClass(_,it.classDef2);ft=it.matrix[dt][mt]}ft&&ft.val1&&ft.val1[2]&&(b+=ft.val1[2]),ft&&ft.val2&&ft.val2[0]&&(b+=ft.val2[0])}}}}}}if(c.kern){var gt=c.kern.glyph1.indexOf(d);if(gt!=-1){var yt=c.kern.rval[gt].glyph2.indexOf(_);yt!=-1&&(b+=c.kern.rval[gt].vals[yt])}}return b},e.U._applySubs=function(c,d,_,b){for(var k=c.length-d-1,j=0;j<_.tabs.length;j++)if(_.tabs[j]!=null){var et,nt=_.tabs[j];if(!nt.coverage||(et=e._lctf.coverageIndex(nt.coverage,c[d]))!=-1){if(_.ltype==1)c[d],nt.fmt==1?c[d]=c[d]+nt.delta:c[d]=nt.newg[et];else if(_.ltype==4)for(var tt=nt.vals[et],rt=0;rt<tt.length;rt++){var at=tt[rt],lt=at.chain.length;if(!(lt>k)){for(var ut=!0,st=0,it=0;it<lt;it++){for(;c[d+st+(1+it)]==-1;)st++;at.chain[it]!=c[d+st+(1+it)]&&(ut=!1)}if(ut){for(c[d]=at.nglyph,it=0;it<lt+st;it++)c[d+it+1]=-1;break}}}else if(_.ltype==5&&nt.fmt==2)for(var ft=e._lctf.getInterval(nt.cDef,c[d]),ct=nt.cDef[ft+2],dt=nt.scset[ct],mt=0;mt<dt.length;mt++){var gt=dt[mt],yt=gt.input;if(!(yt.length>k)){for(ut=!0,it=0;it<yt.length;it++){var St=e._lctf.getInterval(nt.cDef,c[d+1+it]);if(ft==-1&&nt.cDef[St+2]!=yt[it]){ut=!1;break}}if(ut){var Et=gt.substLookupRecords;for(rt=0;rt<Et.length;rt+=2)Et[rt],Et[rt+1]}}}else if(_.ltype==6&&nt.fmt==3){if(!e.U._glsCovered(c,nt.backCvg,d-nt.backCvg.length)||!e.U._glsCovered(c,nt.inptCvg,d)||!e.U._glsCovered(c,nt.ahedCvg,d+nt.inptCvg.length))continue;var vt=nt.lookupRec;for(mt=0;mt<vt.length;mt+=2){ft=vt[mt];var _t=b[vt[mt+1]];e.U._applySubs(c,d+ft,_t,b)}}}}},e.U._glsCovered=function(c,d,_){for(var b=0;b<d.length;b++)if(e._lctf.coverageIndex(d[b],c[_+b])==-1)return!1;return!0},e.U.glyphsToPath=function(c,d,_){for(var b={cmds:[],crds:[]},k=0,j=0;j<d.length;j++){var et=d[j];if(et!=-1){for(var nt=j<d.length-1&&d[j+1]!=-1?d[j+1]:0,tt=e.U.glyphToPath(c,et),rt=0;rt<tt.crds.length;rt+=2)b.crds.push(tt.crds[rt]+k),b.crds.push(tt.crds[rt+1]);for(_&&b.cmds.push(_),rt=0;rt<tt.cmds.length;rt++)b.cmds.push(tt.cmds[rt]);_&&b.cmds.push("X"),k+=c.hmtx.aWidth[et],j<d.length-1&&(k+=e.U.getPairAdjustment(c,et,nt))}}return b},e.U.P={},e.U.P.moveTo=function(c,d,_){c.cmds.push("M"),c.crds.push(d,_)},e.U.P.lineTo=function(c,d,_){c.cmds.push("L"),c.crds.push(d,_)},e.U.P.curveTo=function(c,d,_,b,k,j,et){c.cmds.push("C"),c.crds.push(d,_,b,k,j,et)},e.U.P.qcurveTo=function(c,d,_,b,k){c.cmds.push("Q"),c.crds.push(d,_,b,k)},e.U.P.closePath=function(c){c.cmds.push("Z")},e.U._drawCFF=function(c,d,_,b,k){for(var j=d.stack,et=d.nStems,nt=d.haveWidth,tt=d.width,rt=d.open,at=0,lt=d.x,ut=d.y,st=0,it=0,ft=0,ct=0,dt=0,mt=0,gt=0,yt=0,St=0,Et=0,vt={val:0,size:0};at<c.length;){e.CFF.getCharString(c,at,vt);var _t=vt.val;if(at+=vt.size,_t=="o1"||_t=="o18")j.length%2!=0&&!nt&&(tt=j.shift()+b.nominalWidthX),et+=j.length>>1,j.length=0,nt=!0;else if(_t=="o3"||_t=="o23")j.length%2!=0&&!nt&&(tt=j.shift()+b.nominalWidthX),et+=j.length>>1,j.length=0,nt=!0;else if(_t=="o4")j.length>1&&!nt&&(tt=j.shift()+b.nominalWidthX,nt=!0),rt&&e.U.P.closePath(k),ut+=j.pop(),e.U.P.moveTo(k,lt,ut),rt=!0;else if(_t=="o5")for(;j.length>0;)lt+=j.shift(),ut+=j.shift(),e.U.P.lineTo(k,lt,ut);else if(_t=="o6"||_t=="o7")for(var bt=j.length,At=_t=="o6",Rt=0;Rt<bt;Rt++){var Pt=j.shift();At?lt+=Pt:ut+=Pt,At=!At,e.U.P.lineTo(k,lt,ut)}else if(_t=="o8"||_t=="o24"){bt=j.length;for(var Dt=0;Dt+6<=bt;)st=lt+j.shift(),it=ut+j.shift(),ft=st+j.shift(),ct=it+j.shift(),lt=ft+j.shift(),ut=ct+j.shift(),e.U.P.curveTo(k,st,it,ft,ct,lt,ut),Dt+=6;_t=="o24"&&(lt+=j.shift(),ut+=j.shift(),e.U.P.lineTo(k,lt,ut))}else{if(_t=="o11")break;if(_t=="o1234"||_t=="o1235"||_t=="o1236"||_t=="o1237")_t=="o1234"&&(it=ut,ft=(st=lt+j.shift())+j.shift(),Et=ct=it+j.shift(),mt=ct,yt=ut,lt=(gt=(dt=(St=ft+j.shift())+j.shift())+j.shift())+j.shift(),e.U.P.curveTo(k,st,it,ft,ct,St,Et),e.U.P.curveTo(k,dt,mt,gt,yt,lt,ut)),_t=="o1235"&&(st=lt+j.shift(),it=ut+j.shift(),ft=st+j.shift(),ct=it+j.shift(),St=ft+j.shift(),Et=ct+j.shift(),dt=St+j.shift(),mt=Et+j.shift(),gt=dt+j.shift(),yt=mt+j.shift(),lt=gt+j.shift(),ut=yt+j.shift(),j.shift(),e.U.P.curveTo(k,st,it,ft,ct,St,Et),e.U.P.curveTo(k,dt,mt,gt,yt,lt,ut)),_t=="o1236"&&(st=lt+j.shift(),it=ut+j.shift(),ft=st+j.shift(),Et=ct=it+j.shift(),mt=ct,gt=(dt=(St=ft+j.shift())+j.shift())+j.shift(),yt=mt+j.shift(),lt=gt+j.shift(),e.U.P.curveTo(k,st,it,ft,ct,St,Et),e.U.P.curveTo(k,dt,mt,gt,yt,lt,ut)),_t=="o1237"&&(st=lt+j.shift(),it=ut+j.shift(),ft=st+j.shift(),ct=it+j.shift(),St=ft+j.shift(),Et=ct+j.shift(),dt=St+j.shift(),mt=Et+j.shift(),gt=dt+j.shift(),yt=mt+j.shift(),Math.abs(gt-lt)>Math.abs(yt-ut)?lt=gt+j.shift():ut=yt+j.shift(),e.U.P.curveTo(k,st,it,ft,ct,St,Et),e.U.P.curveTo(k,dt,mt,gt,yt,lt,ut));else if(_t=="o14"){if(j.length>0&&!nt&&(tt=j.shift()+_.nominalWidthX,nt=!0),j.length==4){var Ft=j.shift(),Vt=j.shift(),Qt=j.shift(),Lt=j.shift(),It=e.CFF.glyphBySE(_,Qt),Ht=e.CFF.glyphBySE(_,Lt);e.U._drawCFF(_.CharStrings[It],d,_,b,k),d.x=Ft,d.y=Vt,e.U._drawCFF(_.CharStrings[Ht],d,_,b,k)}rt&&(e.U.P.closePath(k),rt=!1)}else if(_t=="o19"||_t=="o20")j.length%2!=0&&!nt&&(tt=j.shift()+b.nominalWidthX),et+=j.length>>1,j.length=0,nt=!0,at+=et+7>>3;else if(_t=="o21")j.length>2&&!nt&&(tt=j.shift()+b.nominalWidthX,nt=!0),ut+=j.pop(),lt+=j.pop(),rt&&e.U.P.closePath(k),e.U.P.moveTo(k,lt,ut),rt=!0;else if(_t=="o22")j.length>1&&!nt&&(tt=j.shift()+b.nominalWidthX,nt=!0),lt+=j.pop(),rt&&e.U.P.closePath(k),e.U.P.moveTo(k,lt,ut),rt=!0;else if(_t=="o25"){for(;j.length>6;)lt+=j.shift(),ut+=j.shift(),e.U.P.lineTo(k,lt,ut);st=lt+j.shift(),it=ut+j.shift(),ft=st+j.shift(),ct=it+j.shift(),lt=ft+j.shift(),ut=ct+j.shift(),e.U.P.curveTo(k,st,it,ft,ct,lt,ut)}else if(_t=="o26")for(j.length%2&&(lt+=j.shift());j.length>0;)st=lt,it=ut+j.shift(),lt=ft=st+j.shift(),ut=(ct=it+j.shift())+j.shift(),e.U.P.curveTo(k,st,it,ft,ct,lt,ut);else if(_t=="o27")for(j.length%2&&(ut+=j.shift());j.length>0;)it=ut,ft=(st=lt+j.shift())+j.shift(),ct=it+j.shift(),lt=ft+j.shift(),ut=ct,e.U.P.curveTo(k,st,it,ft,ct,lt,ut);else if(_t=="o10"||_t=="o29"){var on=_t=="o10"?b:_;if(j.length==0)console.debug("error: empty stack");else{var nn=j.pop(),jt=on.Subrs[nn+on.Bias];d.x=lt,d.y=ut,d.nStems=et,d.haveWidth=nt,d.width=tt,d.open=rt,e.U._drawCFF(jt,d,_,b,k),lt=d.x,ut=d.y,et=d.nStems,nt=d.haveWidth,tt=d.width,rt=d.open}}else if(_t=="o30"||_t=="o31"){var Mn=j.length,gn=(Dt=0,_t=="o31");for(Dt+=Mn-(bt=-3&Mn);Dt<bt;)gn?(it=ut,ft=(st=lt+j.shift())+j.shift(),ut=(ct=it+j.shift())+j.shift(),bt-Dt==5?(lt=ft+j.shift(),Dt++):lt=ft,gn=!1):(st=lt,it=ut+j.shift(),ft=st+j.shift(),ct=it+j.shift(),lt=ft+j.shift(),bt-Dt==5?(ut=ct+j.shift(),Dt++):ut=ct,gn=!0),e.U.P.curveTo(k,st,it,ft,ct,lt,ut),Dt+=4}else{if((_t+"").charAt(0)=="o")throw console.debug("Unknown operation: "+_t,c),_t;j.push(_t)}}}d.x=lt,d.y=ut,d.nStems=et,d.haveWidth=nt,d.width=tt,d.open=rt};var o=e,a={Typr:o};return s.Typr=o,s.default=a,Object.defineProperty(s,"__esModule",{value:!0}),s}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function woff2otfFactory(){return function(s){var e=Uint8Array,o=Uint16Array,a=Uint32Array,c=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),d=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),b=function(_t,bt){for(var At=new o(31),Rt=0;Rt<31;++Rt)At[Rt]=bt+=1<<_t[Rt-1];var Pt=new a(At[30]);for(Rt=1;Rt<30;++Rt)for(var Dt=At[Rt];Dt<At[Rt+1];++Dt)Pt[Dt]=Dt-At[Rt]<<5|Rt;return[At,Pt]},k=b(c,2),j=k[0],et=k[1];j[28]=258,et[258]=28;for(var nt=b(d,0)[0],tt=new o(32768),rt=0;rt<32768;++rt){var at=(43690&rt)>>>1|(21845&rt)<<1;at=(61680&(at=(52428&at)>>>2|(13107&at)<<2))>>>4|(3855&at)<<4,tt[rt]=((65280&at)>>>8|(255&at)<<8)>>>1}var lt=function(_t,bt,At){for(var Rt=_t.length,Pt=0,Dt=new o(bt);Pt<Rt;++Pt)++Dt[_t[Pt]-1];var Ft,Vt=new o(bt);for(Pt=0;Pt<bt;++Pt)Vt[Pt]=Vt[Pt-1]+Dt[Pt-1]<<1;if(At){Ft=new o(1<<bt);var Qt=15-bt;for(Pt=0;Pt<Rt;++Pt)if(_t[Pt])for(var Lt=Pt<<4|_t[Pt],It=bt-_t[Pt],Ht=Vt[_t[Pt]-1]++<<It,on=Ht|(1<<It)-1;Ht<=on;++Ht)Ft[tt[Ht]>>>Qt]=Lt}else for(Ft=new o(Rt),Pt=0;Pt<Rt;++Pt)_t[Pt]&&(Ft[Pt]=tt[Vt[_t[Pt]-1]++]>>>15-_t[Pt]);return Ft},ut=new e(288);for(rt=0;rt<144;++rt)ut[rt]=8;for(rt=144;rt<256;++rt)ut[rt]=9;for(rt=256;rt<280;++rt)ut[rt]=7;for(rt=280;rt<288;++rt)ut[rt]=8;var st=new e(32);for(rt=0;rt<32;++rt)st[rt]=5;var it=lt(ut,9,1),ft=lt(st,5,1),ct=function(_t){for(var bt=_t[0],At=1;At<_t.length;++At)_t[At]>bt&&(bt=_t[At]);return bt},dt=function(_t,bt,At){var Rt=bt/8|0;return(_t[Rt]|_t[Rt+1]<<8)>>(7&bt)&At},mt=function(_t,bt){var At=bt/8|0;return(_t[At]|_t[At+1]<<8|_t[At+2]<<16)>>(7&bt)},gt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],yt=function(_t,bt,At){var Rt=new Error(bt||gt[_t]);if(Rt.code=_t,Error.captureStackTrace&&Error.captureStackTrace(Rt,yt),!At)throw Rt;return Rt},St=function(_t,bt,At){var Rt=_t.length;if(!Rt||At&&!At.l&&Rt<5)return bt||new e(0);var Pt=!bt||At,Dt=!At||At.i;At||(At={}),bt||(bt=new e(3*Rt));var Ft,Vt=function(en){var Cn=bt.length;if(en>Cn){var un=new e(Math.max(2*Cn,en));un.set(bt),bt=un}},Qt=At.f||0,Lt=At.p||0,It=At.b||0,Ht=At.l,on=At.d,nn=At.m,jt=At.n,Mn=8*Rt;do{if(!Ht){At.f=Qt=dt(_t,Lt,1);var gn=dt(_t,Lt+1,3);if(Lt+=3,!gn){var fn=_t[(En=((Ft=Lt)/8|0)+(7&Ft&&1)+4)-4]|_t[En-3]<<8,pn=En+fn;if(pn>Rt){Dt&&yt(0);break}Pt&&Vt(It+fn),bt.set(_t.subarray(En,pn),It),At.b=It+=fn,At.p=Lt=8*pn;continue}if(gn==1)Ht=it,on=ft,nn=9,jt=5;else if(gn==2){var _n=dt(_t,Lt,31)+257,$t=dt(_t,Lt+10,15)+4,sn=_n+dt(_t,Lt+5,31)+1;Lt+=14;for(var rn=new e(sn),vn=new e(19),cn=0;cn<$t;++cn)vn[_[cn]]=dt(_t,Lt+3*cn,7);Lt+=3*$t;var Dn=ct(vn),Kt=(1<<Dn)-1,bn=lt(vn,Dn,1);for(cn=0;cn<sn;){var En,wt=bn[dt(_t,Lt,Kt)];if(Lt+=15&wt,(En=wt>>>4)<16)rn[cn++]=En;else{var Mt=0,Ot=0;for(En==16?(Ot=3+dt(_t,Lt,3),Lt+=2,Mt=rn[cn-1]):En==17?(Ot=3+dt(_t,Lt,7),Lt+=3):En==18&&(Ot=11+dt(_t,Lt,127),Lt+=7);Ot--;)rn[cn++]=Mt}}var zt=rn.subarray(0,_n),Yt=rn.subarray(_n);nn=ct(zt),jt=ct(Yt),Ht=lt(zt,nn,1),on=lt(Yt,jt,1)}else yt(1);if(Lt>Mn){Dt&&yt(0);break}}Pt&&Vt(It+131072);for(var dn=(1<<nn)-1,xn=(1<<jt)-1,Nt=Lt;;Nt=Lt){var mn=(Mt=Ht[mt(_t,Lt)&dn])>>>4;if((Lt+=15&Mt)>Mn){Dt&&yt(0);break}if(Mt||yt(2),mn<256)bt[It++]=mn;else{if(mn==256){Nt=Lt,Ht=null;break}var Ln=mn-254;if(mn>264){var Sn=c[cn=mn-257];Ln=dt(_t,Lt,(1<<Sn)-1)+j[cn],Lt+=Sn}var yn=on[mt(_t,Lt)&xn],Bt=yn>>>4;if(yn||yt(3),Lt+=15&yn,Yt=nt[Bt],Bt>3&&(Sn=d[Bt],Yt+=mt(_t,Lt)&(1<<Sn)-1,Lt+=Sn),Lt>Mn){Dt&&yt(0);break}Pt&&Vt(It+131072);for(var an=It+Ln;It<an;It+=4)bt[It]=bt[It-Yt],bt[It+1]=bt[It+1-Yt],bt[It+2]=bt[It+2-Yt],bt[It+3]=bt[It+3-Yt];It=an}}At.l=Ht,At.p=Nt,At.b=It,Ht&&(Qt=1,At.m=nn,At.d=on,At.n=jt)}while(!Qt);return It==bt.length?bt:function(en,Cn,un){(Cn==null||Cn<0)&&(Cn=0),(un==null||un>en.length)&&(un=en.length);var ln=new(en instanceof o?o:en instanceof a?a:e)(un-Cn);return ln.set(en.subarray(Cn,un)),ln}(bt,0,It)},Et=new e(0),vt=typeof TextDecoder!="undefined"&&new TextDecoder;try{vt.decode(Et,{stream:!0})}catch{}return s.convert_streams=function(_t){var bt=new DataView(_t),At=0;function Rt(){var _n=bt.getUint16(At);return At+=2,_n}function Pt(){var _n=bt.getUint32(At);return At+=4,_n}function Dt(_n){fn.setUint16(pn,_n),pn+=2}function Ft(_n){fn.setUint32(pn,_n),pn+=4}for(var Vt={signature:Pt(),flavor:Pt(),length:Pt(),numTables:Rt(),reserved:Rt(),totalSfntSize:Pt(),majorVersion:Rt(),minorVersion:Rt(),metaOffset:Pt(),metaLength:Pt(),metaOrigLength:Pt(),privOffset:Pt(),privLength:Pt()},Qt=0;Math.pow(2,Qt)<=Vt.numTables;)Qt++;Qt--;for(var Lt=16*Math.pow(2,Qt),It=16*Vt.numTables-Lt,Ht=12,on=[],nn=0;nn<Vt.numTables;nn++)on.push({tag:Pt(),offset:Pt(),compLength:Pt(),origLength:Pt(),origChecksum:Pt()}),Ht+=16;var jt,Mn=new Uint8Array(12+16*on.length+on.reduce(function(_n,$t){return _n+$t.origLength+4},0)),gn=Mn.buffer,fn=new DataView(gn),pn=0;return Ft(Vt.flavor),Dt(Vt.numTables),Dt(Lt),Dt(Qt),Dt(It),on.forEach(function(_n){Ft(_n.tag),Ft(_n.origChecksum),Ft(Ht),Ft(_n.origLength),_n.outOffset=Ht,(Ht+=_n.origLength)%4!=0&&(Ht+=4-Ht%4)}),on.forEach(function(_n){var $t,sn=_t.slice(_n.offset,_n.offset+_n.compLength);if(_n.compLength!=_n.origLength){var rn=new Uint8Array(_n.origLength);$t=new Uint8Array(sn,2),St($t,rn)}else rn=new Uint8Array(sn);Mn.set(rn,_n.outOffset);var vn=0;(Ht=_n.outOffset+_n.origLength)%4!=0&&(vn=4-Ht%4),Mn.set(new Uint8Array(vn).buffer,_n.outOffset+_n.origLength),jt=Ht+vn}),gn.slice(0,jt)},Object.defineProperty(s,"__esModule",{value:!0}),s}({}).convert_streams}function parserFactory(s,e){const o={M:2,L:2,Q:4,C:6,Z:0},a={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},c=1,d=2,_=4,b=8,k=16,j=32;let et;function nt(ct){if(!et){const dt={R:d,L:c,D:_,C:k,U:j,T:b};et=new Map;for(let mt in a){let gt=0;a[mt].split(",").forEach(yt=>{let[St,Et]=yt.split("+");St=parseInt(St,36),Et=Et?parseInt(Et,36):0,et.set(gt+=St,dt[mt]);for(let vt=Et;vt--;)et.set(++gt,dt[mt])})}}return et.get(ct)||j}const tt=1,rt=2,at=3,lt=4,ut=[null,"isol","init","fina","medi"];function st(ct){const dt=new Uint8Array(ct.length);let mt=j,gt=tt,yt=-1;for(let St=0;St<ct.length;St++){const Et=ct.codePointAt(St);let vt=nt(Et)|0,_t=tt;vt&b||(mt&(c|_|k)?vt&(d|_|k)?(_t=at,(gt===tt||gt===at)&&dt[yt]++):vt&(c|j)&&(gt===rt||gt===lt)&&dt[yt]--:mt&(d|j)&&(gt===rt||gt===lt)&&dt[yt]--,gt=dt[St]=_t,mt=vt,yt=St,Et>65535&&St++)}return dt}function it(ct,dt){const mt=[];for(let yt=0;yt<dt.length;yt++){const St=dt.codePointAt(yt);St>65535&&yt++,mt.push(s.U.codeToGlyph(ct,St))}const gt=ct.GSUB;if(gt){const{lookupList:yt,featureList:St}=gt;let Et;const vt=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,_t=[];St.forEach(bt=>{if(vt.test(bt.tag))for(let At=0;At<bt.tab.length;At++){if(_t[bt.tab[At]])continue;_t[bt.tab[At]]=!0;const Rt=yt[bt.tab[At]],Pt=/^(isol|init|fina|medi)$/.test(bt.tag);Pt&&!Et&&(Et=st(dt));for(let Dt=0;Dt<mt.length;Dt++)(!Et||!Pt||ut[Et[Dt]]===bt.tag)&&s.U._applySubs(mt,Dt,Rt,yt)}})}return mt}function ft(ct){const dt=Object.create(null),mt={unitsPerEm:ct.head.unitsPerEm,ascender:ct.hhea.ascender,descender:ct.hhea.descender,forEachGlyph(gt,yt,St,Et){let vt=0;const _t=1/mt.unitsPerEm*yt,bt=it(ct,gt);let At=0,Rt=-1;return bt.forEach((Pt,Dt)=>{if(Pt!==-1){let Ft=dt[Pt];if(!Ft){const{cmds:Vt,crds:Qt}=s.U.glyphToPath(ct,Pt);let Lt="",It=0;for(let Mn=0,gn=Vt.length;Mn<gn;Mn++){const fn=o[Vt[Mn]];Lt+=Vt[Mn];for(let pn=1;pn<=fn;pn++)Lt+=(pn>1?",":"")+Qt[It++]}let Ht,on,nn,jt;if(Qt.length){Ht=on=1/0,nn=jt=-1/0;for(let Mn=0,gn=Qt.length;Mn<gn;Mn+=2){let fn=Qt[Mn],pn=Qt[Mn+1];fn<Ht&&(Ht=fn),pn<on&&(on=pn),fn>nn&&(nn=fn),pn>jt&&(jt=pn)}}else Ht=nn=on=jt=0;Ft=dt[Pt]={index:Pt,advanceWidth:ct.hmtx.aWidth[Pt],xMin:Ht,yMin:on,xMax:nn,yMax:jt,path:Lt,pathCommandCount:Vt.length}}Rt!==-1&&(vt+=s.U.getPairAdjustment(ct,Rt,Pt)*_t),Et.call(null,Ft,vt,At),Ft.advanceWidth&&(vt+=Ft.advanceWidth*_t),St&&(vt+=St*yt),Rt=Pt}At+=gt.codePointAt(At)>65535?2:1}),vt}};return mt}return function(dt){const mt=new Uint8Array(dt,0,4),gt=s._bin.readASCII(mt,0,4);if(gt==="wOFF")dt=e(dt);else if(gt==="wOF2")throw new Error("woff2 fonts not supported");return ft(s.parse(dt)[0])}}const workerModule=defineWorkerModule({name:"Typr Font Parser",dependencies:[typrFactory,woff2otfFactory,parserFactory],init(s,e,o){const a=s(),c=e();return o(a,c)}}),CONFIG={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},tempColor=new Color;function now(){return(self.performance||Date).now()}const atlases=Object.create(null);function getTextRenderInfo(s,e){s=assign({},s);const o=now();if(s.font=toAbsoluteURL(s.font||CONFIG.defaultFontURL),s.text=""+s.text,s.sdfGlyphSize=s.sdfGlyphSize||CONFIG.sdfGlyphSize,s.colorRanges!=null){let k={};for(let j in s.colorRanges)if(s.colorRanges.hasOwnProperty(j)){let et=s.colorRanges[j];typeof et!="number"&&(et=tempColor.set(et).getHex()),k[j]=et}s.colorRanges=k}Object.freeze(s);const{textureWidth:a,sdfExponent:c}=CONFIG,{sdfGlyphSize:d}=s;let _=atlases[d];_||(_=atlases[d]={glyphCount:0,sdfTexture:new DataTexture(new Uint8Array(d*a*4),a,d,RGBAFormat,void 0,void 0,void 0,void 0,LinearFilter,LinearFilter),glyphsByFont:new Map});let b=_.glyphsByFont.get(s.font);b||_.glyphsByFont.set(s.font,b=new Map),typesetInWorker(s).then(k=>{const{glyphIds:j,glyphPositions:et,fontSize:nt,unitsPerEm:tt,timings:rt}=k,at=[],lt=new Float32Array(j.length*4),ut=nt/tt;let st=0,it=0;const ft=now();j.forEach((dt,mt)=>{let gt=b.get(dt);if(!gt){const{path:vt,pathBounds:_t}=k.glyphData[dt],bt=Math.max(_t[2]-_t[0],_t[3]-_t[1])/d*(CONFIG.sdfMargin*d+.5),At=_.glyphCount++,Rt=[_t[0]-bt,_t[1]-bt,_t[2]+bt,_t[3]+bt];b.set(dt,gt={path:vt,atlasIndex:At,sdfViewBox:Rt}),at.push(gt)}const{sdfViewBox:yt}=gt,St=et[it++],Et=et[it++];lt[st++]=St+yt[0]*ut,lt[st++]=Et+yt[1]*ut,lt[st++]=St+yt[2]*ut,lt[st++]=Et+yt[3]*ut,j[mt]=gt.atlasIndex}),rt.quads=(rt.quads||0)+(now()-ft);const ct=now();rt.sdf={},DefaultThenable.all(at.map(({path:dt,atlasIndex:mt,sdfViewBox:gt})=>{const yt=Math.max(gt[2]-gt[0],gt[3]-gt[1]);return generateSDFInWorker(d,d,dt,gt,yt,CONFIG.sdfExponent).then(({textureData:St,timing:Et})=>(rt.sdf[mt]=Et,{atlasIndex:mt,textureData:St,timing:Et}))})).then(dt=>{dt.length&&(dt.forEach(({atlasIndex:mt,textureData:gt})=>{const yt=_.sdfTexture.image;for(;yt.data.length<(mt+1)*d*d;){const _t=new Uint8Array(yt.data.length*2);_t.set(yt.data),yt.data=_t,yt.height*=2}const St=Math.floor(mt/4),Et=yt.width/d,vt=Math.floor(St/Et)*yt.width*d*4+St%Et*d*4+mt%4;for(let _t=0;_t<d;_t++){const bt=_t*d,At=vt+_t*yt.width*4;for(let Rt=0;Rt<d;Rt++)yt.data[At+Rt*4]=gt[bt+Rt]}}),_.sdfTexture.needsUpdate=!0),rt.sdfTotal=now()-ct,rt.total=now()-o,e(Object.freeze({parameters:s,sdfTexture:_.sdfTexture,sdfGlyphSize:d,sdfExponent:c,glyphBounds:lt,glyphAtlasIndices:j,glyphColors:k.glyphColors,caretPositions:k.caretPositions,caretHeight:k.caretHeight,chunkedBounds:k.chunkedBounds,ascender:k.ascender,descender:k.descender,lineHeight:k.lineHeight,topBaseline:k.topBaseline,blockBounds:k.blockBounds,visibleBounds:k.visibleBounds,timings:k.timings,get totalBounds(){return console.log("totalBounds deprecated, use blockBounds instead"),k.blockBounds},get totalBlockSize(){console.log("totalBlockSize deprecated, use blockBounds instead");const[mt,gt,yt,St]=k.blockBounds;return[yt-mt,St-gt]}}))})})}function preloadFont({font:s,characters:e,sdfGlyphSize:o},a){let c=Array.isArray(e)?e.join(`
`):""+e;getTextRenderInfo({font:s,sdfGlyphSize:o,text:c},a)}function assign(s,e){for(let o in e)e.hasOwnProperty(o)&&(s[o]=e[o]);return s}let linkEl;function toAbsoluteURL(s){return linkEl||(linkEl=typeof document=="undefined"?{}:document.createElement("a")),linkEl.href=s,linkEl.href}const typesetterWorkerModule=defineWorkerModule({name:"Typesetter",dependencies:[CONFIG,workerModule,createTypesetter,bidiFactory],init(s,e,o,a){const{defaultFontURL:c}=s;return o(e,a(),{defaultFontURL:c})}}),generateSDFInWorker=function(){const o={};let a=0;return function(...c){const d="TroikaTextSDFGenerator_"+a++%4;let _=o[d];return _||(_=o[d]={workerModule:defineWorkerModule({name:d,workerId:d,dependencies:[CONFIG,createGlyphSegmentsIndex,createSDFGenerator],init(b,k,j){const{sdfExponent:et,sdfMargin:nt}=b;return j(k,{sdfExponent:et,sdfMargin:nt})},getTransferables(b){return[b.textureData.buffer]}}),requests:0,idleTimer:null}),_.requests++,clearTimeout(_.idleTimer),_.workerModule(...c).then(b=>(--_.requests===0&&(_.idleTimer=setTimeout(()=>{terminateWorker(d)},2e3)),b))}}(),typesetInWorker=defineWorkerModule({name:"Typesetter",dependencies:[typesetterWorkerModule,ThenableWorkerModule],init(s,e){return function(o){const a=new e;return s.typeset(o,a.resolve),a}},getTransferables(s){const e=[s.glyphPositions.buffer,s.glyphIds.buffer];return s.caretPositions&&e.push(s.caretPositions.buffer),s.glyphColors&&e.push(s.glyphColors.buffer),e}}),GlyphsGeometry=(()=>{const s={};function e(k){let j=s[k];if(!j){const et=new PlaneGeometry(1,1,k,k),nt=et.clone(),tt=et.attributes,rt=nt.attributes,at=new BufferGeometry,lt=tt.uv.count;for(let ut=0;ut<lt;ut++)rt.position.array[ut*3]*=-1,rt.normal.array[ut*3+2]*=-1;["position","normal","uv"].forEach(ut=>{at.setAttribute(ut,new Float32BufferAttribute([...tt[ut].array,...rt[ut].array],tt[ut].itemSize))}),at.setIndex([...et.index.array,...nt.index.array.map(ut=>ut+lt)]),at.translate(.5,.5,0),j=s[k]=at}return j}const o="aTroikaGlyphBounds",a="aTroikaGlyphIndex",c="aTroikaGlyphColor";class d extends InstancedBufferGeometry{constructor(){super();this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Sphere,this.boundingBox=new Box3}computeBoundingSphere(){}computeBoundingBox(){}setSide(j){const et=this.getIndex().count;this.setDrawRange(j===BackSide?et/2:0,j===DoubleSide?et:et/2)}set detail(j){if(j!==this._detail){this._detail=j,(typeof j!="number"||j<1)&&(j=1);let et=e(j);["position","normal","uv"].forEach(nt=>{this.attributes[nt]=et.attributes[nt].clone()}),this.setIndex(et.getIndex().clone())}}get detail(){return this._detail}set curveRadius(j){j!==this._curveRadius&&(this._curveRadius=j,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(j,et,nt,tt,rt){_(this,o,j,4),_(this,a,et,1),_(this,c,rt,3),this._blockBounds=nt,this._chunkedBounds=tt,b(this,et.length),this._updateBounds()}_updateBounds(){const j=this._blockBounds;if(j){const{curveRadius:et,boundingBox:nt}=this;if(et){const{PI:tt,floor:rt,min:at,max:lt,sin:ut,cos:st}=Math,it=tt/2,ft=tt*2,ct=Math.abs(et),dt=j[0]/ct,mt=j[2]/ct,gt=rt((dt+it)/ft)!==rt((mt+it)/ft)?-ct:at(ut(dt)*ct,ut(mt)*ct),yt=rt((dt-it)/ft)!==rt((mt-it)/ft)?ct:lt(ut(dt)*ct,ut(mt)*ct),St=rt((dt+tt)/ft)!==rt((mt+tt)/ft)?ct*2:lt(ct-st(dt)*ct,ct-st(mt)*ct);nt.min.set(gt,j[1],et<0?-St:0),nt.max.set(yt,j[3],et<0?0:St)}else nt.min.set(j[0],j[1],0),nt.max.set(j[2],j[3],0);nt.getBoundingSphere(this.boundingSphere)}}applyClipRect(j){let et=this.getAttribute(a).count,nt=this._chunkedBounds;if(nt)for(let tt=nt.length;tt--;){et=nt[tt].end;let rt=nt[tt].rect;if(rt[1]<j.w&&rt[3]>j.y&&rt[0]<j.z&&rt[2]>j.x)break}b(this,et)}}d.prototype.setAttribute||(d.prototype.setAttribute=function(k,j){return this.attributes[k]=j,this});function _(k,j,et,nt){const tt=k.getAttribute(j);et?tt&&tt.array.length===et.length?(tt.array.set(et),tt.needsUpdate=!0):(k.setAttribute(j,new InstancedBufferAttribute(et,nt)),delete k._maxInstanceCount,k.dispose()):tt&&k.deleteAttribute(j)}function b(k,j){k[k.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=j}return d})(),VERTEX_DEFS=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,VERTEX_TRANSFORM=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,FRAGMENT_DEFS=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of encoding in SDFGenerator.js
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,FRAGMENT_TRANSFORM=`
float aaDist = troikaGetAADist();
float distance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(distance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  distance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function createTextDerivedMaterial(s){const e=createDerivedMaterial(s,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Vector4(0,0,0,0)},uTroikaClipRect:{value:new Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:VERTEX_DEFS,vertexTransform:VERTEX_TRANSFORM,fragmentDefs:FRAGMENT_DEFS,fragmentColorTransform:FRAGMENT_TRANSFORM,customRewriter({vertexShader:o,fragmentShader:a}){let c=/\buniform\s+vec3\s+diffuse\b/;return c.test(a)&&(a=a.replace(c,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),c.test(o)||(o=o.replace(voidMainRegExp,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:o,fragmentShader:a}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const Text$1=(()=>{const s=new MeshBasicMaterial({color:16777215,side:DoubleSide,transparent:!0}),e=8421504,o=new Matrix4,a=new Vector3,c=new Vector3,d=[],_=new Vector3,b="+x+y";function k(st){return Array.isArray(st)?st[0]:st}let j=()=>{const st=new Mesh(new PlaneGeometry(1,1),s);return j=()=>st,st},et=()=>{const st=new Mesh(new PlaneGeometry(1,1,32,1),s);return et=()=>st,st};const nt={type:"syncstart"},tt={type:"synccomplete"},rt=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],at=rt.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class lt extends Mesh{constructor(){const it=new GlyphsGeometry;super(it,null);this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=e,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=b,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.debugSDF=!1}sync(it){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(it):(this._isSyncing=!0,this.dispatchEvent(nt),getTextRenderInfo({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize},ft=>{this._isSyncing=!1,this._textRenderInfo=ft,this.geometry.updateGlyphs(ft.glyphBounds,ft.glyphAtlasIndices,ft.blockBounds,ft.chunkedBounds,ft.glyphColors);const ct=this._queuedSyncs;ct&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{ct.forEach(dt=>dt&&dt())})),this.dispatchEvent(tt),it&&it()})))}onBeforeRender(it,ft,ct,dt,mt,gt){this.sync(),mt.isTroikaTextMaterial&&this._prepareForRender(mt),mt._hadOwnSide=mt.hasOwnProperty("side"),this.geometry.setSide(mt._actualSide=mt.side),mt.side=FrontSide}onAfterRender(it,ft,ct,dt,mt,gt){mt._hadOwnSide?mt.side=mt._actualSide:delete mt.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let it=this._derivedMaterial;const ft=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=s.clone());if((!it||it.baseMaterial!==ft)&&(it=this._derivedMaterial=createTextDerivedMaterial(ft),ft.addEventListener("dispose",function ct(){ft.removeEventListener("dispose",ct),it.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let ct=it._outlineMtl;return ct||(ct=it._outlineMtl=Object.create(it,{id:{value:it.id+.1}}),ct.isTextOutlineMaterial=!0,ct.depthWrite=!1,ct.map=null,it.addEventListener("dispose",function dt(){it.removeEventListener("dispose",dt),ct.dispose()})),[ct,it]}else return it}set material(it){it&&it.isTroikaTextMaterial?(this._derivedMaterial=it,this._baseMaterial=it.baseMaterial):this._baseMaterial=it}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(it){this.geometry.detail=it}get curveRadius(){return this.geometry.curveRadius}set curveRadius(it){this.geometry.curveRadius=it}get customDepthMaterial(){return k(this.material).getDepthMaterial()}get customDistanceMaterial(){return k(this.material).getDistanceMaterial()}_prepareForRender(it){const ft=it.isTextOutlineMaterial,ct=it.uniforms,dt=this.textRenderInfo;if(dt){const{sdfTexture:yt,blockBounds:St}=dt;ct.uTroikaSDFTexture.value=yt,ct.uTroikaSDFTextureSize.value.set(yt.image.width,yt.image.height),ct.uTroikaSDFGlyphSize.value=dt.sdfGlyphSize,ct.uTroikaSDFExponent.value=dt.sdfExponent,ct.uTroikaTotalBounds.value.fromArray(St),ct.uTroikaUseGlyphColors.value=!ft&&!!dt.glyphColors;let Et=0,vt=0,_t=0,bt,At,Rt,Pt=0,Dt=0;if(ft){let{outlineWidth:Vt,outlineOffsetX:Qt,outlineOffsetY:Lt,outlineBlur:It,outlineOpacity:Ht}=this;Et=this._parsePercent(Vt)||0,vt=Math.max(0,this._parsePercent(It)||0),bt=Ht,Pt=this._parsePercent(Qt)||0,Dt=this._parsePercent(Lt)||0}else _t=Math.max(0,this._parsePercent(this.strokeWidth)||0),_t&&(Rt=this.strokeColor,ct.uTroikaStrokeColor.value.set(Rt==null?e:Rt),At=this.strokeOpacity,At==null&&(At=1)),bt=this.fillOpacity;ct.uTroikaDistanceOffset.value=Et,ct.uTroikaPositionOffset.value.set(Pt,Dt),ct.uTroikaBlurRadius.value=vt,ct.uTroikaStrokeWidth.value=_t,ct.uTroikaStrokeOpacity.value=At,ct.uTroikaFillOpacity.value=bt==null?1:bt,ct.uTroikaCurveRadius.value=this.curveRadius||0;let Ft=this.clipRect;if(Ft&&Array.isArray(Ft)&&Ft.length===4)ct.uTroikaClipRect.value.fromArray(Ft);else{const Vt=(this.fontSize||.1)*100;ct.uTroikaClipRect.value.set(St[0]-Vt,St[1]-Vt,St[2]+Vt,St[3]+Vt)}this.geometry.applyClipRect(ct.uTroikaClipRect.value)}ct.uTroikaSDFDebug.value=!!this.debugSDF,it.polygonOffset=!!this.depthOffset,it.polygonOffsetFactor=it.polygonOffsetUnits=this.depthOffset||0;const mt=ft?this.outlineColor||0:this.color;if(mt==null)delete it.color;else{const yt=it.hasOwnProperty("color")?it.color:it.color=new Color;(mt!==yt._input||typeof mt=="object")&&yt.set(yt._input=mt)}let gt=this.orientation||b;if(gt!==it._orientation){let yt=ct.uTroikaOrient.value;gt=gt.replace(/[^-+xyz]/g,"");let St=gt!==b&&gt.match(/^([-+])([xyz])([-+])([xyz])$/);if(St){let[,Et,vt,_t,bt]=St;a.set(0,0,0)[vt]=Et==="-"?1:-1,c.set(0,0,0)[bt]=_t==="-"?-1:1,o.lookAt(_,a.cross(c),c),yt.setFromMatrix4(o)}else yt.identity();it._orientation=gt}}_parsePercent(it){if(typeof it=="string"){let ft=it.match(/^(-?[\d.]+)%$/),ct=ft?parseFloat(ft[1]):NaN;it=(isNaN(ct)?0:ct/100)*this.fontSize}return it}localPositionToTextCoords(it,ft=new Vector2){ft.copy(it);const ct=this.curveRadius;return ct&&(ft.x=Math.atan2(it.x,Math.abs(ct)-Math.abs(it.z))*Math.abs(ct)),ft}worldPositionToTextCoords(it,ft=new Vector2){return a.copy(it),this.localPositionToTextCoords(this.worldToLocal(a),ft)}raycast(it,ft){const{textRenderInfo:ct,curveRadius:dt}=this;if(ct){const mt=ct.blockBounds,gt=dt?et():j(),yt=gt.geometry,{position:St,uv:Et}=yt.attributes;for(let vt=0;vt<Et.count;vt++){let _t=mt[0]+Et.getX(vt)*(mt[2]-mt[0]);const bt=mt[1]+Et.getY(vt)*(mt[3]-mt[1]);let At=0;dt&&(At=dt-Math.cos(_t/dt)*dt,_t=Math.sin(_t/dt)*dt),St.setXYZ(vt,_t,bt,At)}yt.boundingSphere=this.geometry.boundingSphere,yt.boundingBox=this.geometry.boundingBox,gt.matrixWorld=this.matrixWorld,gt.material.side=this.material.side,d.length=0,gt.raycast(it,d);for(let vt=0;vt<d.length;vt++)d[vt].object=this,ft.push(d[vt])}}copy(it){const ft=this.geometry;return super.copy(it),this.geometry=ft,at.forEach(ct=>{this[ct]=it[ct]}),this}clone(){return new this.constructor().copy(this)}}rt.forEach(st=>{const it="_private_"+st;Object.defineProperty(lt.prototype,st,{get(){return this[it]},set(ft){ft!==this[it]&&(this[it]=ft,this._needsSync=!0)}})});let ut=!1;return Object.defineProperty(lt.prototype,"anchor",{get(){return this._deprecated_anchor},set(st){this._deprecated_anchor=st,ut||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),ut=!0),Array.isArray(st)?(this.anchorX=`${(+st[0]||0)*100}%`,this.anchorY=`${(+st[1]||0)*100}%`):this.anchorX=this.anchorY=0}}),lt})();function shallowEqualArrays(s,e,o=(a,c)=>a===c){if(s===e)return!0;if(!s||!e)return!1;const a=s.length;if(e.length!==a)return!1;for(let c=0;c<a;c++)if(!o(s[c],e[c]))return!1;return!0}const globalCache=[];function query(s,e,o=!1,a={}){for(const d of globalCache)if(shallowEqualArrays(e,d.keys,d.equal)){if(o)return;if(Object.prototype.hasOwnProperty.call(d,"error"))throw d.error;if(Object.prototype.hasOwnProperty.call(d,"response"))return d.response;if(!o)throw d.promise}const c={keys:e,equal:a.equal,promise:s(...e).then(d=>c.response=d).then(()=>{a.lifespan&&a.lifespan>0&&setTimeout(()=>{const d=globalCache.indexOf(c);d!==-1&&globalCache.splice(d,1)},a.lifespan)}).catch(d=>c.error=d)};if(globalCache.push(c),!o)throw c.promise}const suspend=(s,e,o)=>query(s,e,!1,o),Text=react.exports.forwardRef((b,_)=>{var k=b,{anchorX:s="center",anchorY:e="middle",font:o,children:a,onSync:c}=k,d=_i(k,["anchorX","anchorY","font","children","onSync"]);const j=useThree(({invalidate:rt})=>rt),[et]=react.exports.useState(()=>new Text$1),[nt,tt]=react.exports.useMemo(()=>{const rt=[];let at="";return react.exports.Children.forEach(a,lt=>{typeof lt=="string"||typeof lt=="number"?at+=lt:rt.push(lt)}),[rt,at]},[a]);return suspend(()=>new Promise(rt=>preloadFont({font:o,characters:tt},rt)),["troika-text",o,tt]),react.exports.useLayoutEffect(()=>void et.sync(()=>{j(),c&&c(et)})),react.exports.useEffect(()=>()=>et.dispose(),[et]),react.exports.createElement("primitive",_extends({object:et,ref:_,font:o,text:tt,anchorX:s,anchorY:e},d),nt)});function shaderMaterial(s,e,o,a){return class extends ShaderMaterial{constructor(){const c=Object.entries(s);super({uniforms:c.reduce((d,[_,b])=>{const k=UniformsUtils.clone({[_]:{value:b}});return Xn(Xn({},d),k)},{}),vertexShader:e,fragmentShader:o});c.forEach(([d])=>Object.defineProperty(this,d,{get:()=>this.uniforms[d].value,set:_=>this.uniforms[d].value=_})),a&&a(this)}}}const IsObject=s=>s===Object(s)&&!Array.isArray(s)&&typeof s!="function";function useTexture(s){const e=useThree(a=>a.gl),o=useLoader(TextureLoader,IsObject(s)?Object.values(s):s);if(react.exports.useEffect(()=>{(Array.isArray(o)?o:[o]).forEach(e.initTexture)},[e,o]),IsObject(s)){const a=Object.keys(s),c={};return a.forEach(d=>Object.assign(c,{[d]:o[a.indexOf(d)]})),c}else return o}useTexture.preload=s=>useLoader.preload(TextureLoader,s);useTexture.clear=s=>useLoader.clear(TextureLoader,s);const ImageMaterialImpl=shaderMaterial({color:new Color("white"),scale:[1,1],imageBounds:[1,1],map:null,zoom:1,grayscale:0},`
  varying vec2 vUv;
  void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
    vUv = uv;
  }
`,`
  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
  varying vec2 vUv;
  uniform vec2 scale;
  uniform vec2 imageBounds;
  uniform vec3 color;
  uniform sampler2D map;
  uniform float zoom;
  uniform float grayscale;
  const vec3 luma = vec3(.299, 0.587, 0.114);
  vec4 toGrayscale(vec4 color, float intensity) {
    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
  }
  vec2 aspect(vec2 size) {
    return size / min(size.x, size.y);
  }
  void main() {
    vec2 s = aspect(scale);
    vec2 i = aspect(imageBounds);
    float rs = s.x / s.y;
    float ri = i.x / i.y;
    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
    vec2 uv = vUv * s / new + offset;
    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);
    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, 1.0), grayscale);
    
    #include <tonemapping_fragment>
    #include <encodings_fragment>
  }
`),Image=react.exports.forwardRef((et,j)=>{var nt=et,{children:s,color:e,segments:o=1,scale:a=1,zoom:c=1,grayscale:d=0,url:_,toneMapped:b}=nt,k=_i(nt,["children","color","segments","scale","zoom","grayscale","url","toneMapped"]);extend({ImageMaterial:ImageMaterialImpl});const tt=useTexture(_),rt=Array.isArray(a)?[a[0],a[1]]:[a,a],at=[tt.image.width,tt.image.height];return react.exports.createElement("mesh",_extends({ref:j,scale:a},k),react.exports.createElement("planeGeometry",{args:[1,1,o,o]}),react.exports.createElement("imageMaterial",{color:e,map:tt,zoom:c,grayscale:d,scale:rt,imageBounds:at,toneMapped:b}),s)}),FirstPersonControls=react.exports.forwardRef((s,e)=>{const o=useThree(({camera:d})=>d),a=useThree(({gl:d})=>d),[c]=react.exports.useState(()=>new FirstPersonControls$1(o,a.domElement));return useFrame((d,_)=>{c.update(_)}),c?react.exports.createElement("primitive",_extends({ref:e,object:c},s)):null});class ConvolutionMaterial extends ShaderMaterial{constructor(e=new Vector2){super({uniforms:{inputBuffer:new Uniform(null),depthBuffer:new Uniform(null),resolution:new Uniform(new Vector2),texelSize:new Uniform(new Vector2),halfTexelSize:new Uniform(new Vector2),kernel:new Uniform(0),scale:new Uniform(1),cameraNear:new Uniform(0),cameraFar:new Uniform(1),minDepthThreshold:new Uniform(0),maxDepthThreshold:new Uniform(1),depthScale:new Uniform(0),depthToBlurRatioBias:new Uniform(.25)},fragmentShader:`#include <common>
        #include <dithering_pars_fragment>      
        uniform sampler2D inputBuffer;
        uniform sampler2D depthBuffer;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          float depthFactor = 0.0;
          
          #ifdef USE_DEPTH
            vec4 depth = texture2D(depthBuffer, vUv);
            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
            depthFactor *= depthScale;
            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));
          #endif
          
          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));
          gl_FragColor = sum * 0.25 ;

          #include <dithering_fragment>
          #include <tonemapping_fragment>
          #include <encodings_fragment>
        }`,vertexShader:`uniform vec2 texelSize;
        uniform vec2 halfTexelSize;
        uniform float kernel;
        uniform float scale;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          vec2 uv = position.xy * 0.5 + 0.5;
          vUv = uv;

          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;
          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);
          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);
          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);
          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);

          gl_Position = vec4(position.xy, 1.0, 1.0);
        }`,blending:NoBlending,depthWrite:!1,depthTest:!1});this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(e,o){this.uniforms.texelSize.value.set(e,o),this.uniforms.halfTexelSize.value.set(e,o).multiplyScalar(.5)}setResolution(e){this.uniforms.resolution.value.copy(e)}}class BlurPass{constructor({gl:e,resolution:o,width:a=500,height:c=500,minDepthThreshold:d=0,maxDepthThreshold:_=1,depthScale:b=0,depthToBlurRatioBias:k=.25}){this.renderToScreen=!1,this.renderTargetA=new WebGLRenderTarget(o,o,{minFilter:LinearFilter,magFilter:LinearFilter,stencilBuffer:!1,depthBuffer:!1,encoding:e.outputEncoding}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new ConvolutionMaterial,this.convolutionMaterial.setTexelSize(1/a,1/c),this.convolutionMaterial.setResolution(new Vector2(a,c)),this.scene=new Scene,this.camera=new Camera,this.convolutionMaterial.uniforms.minDepthThreshold.value=d,this.convolutionMaterial.uniforms.maxDepthThreshold.value=_,this.convolutionMaterial.uniforms.depthScale.value=b,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=k,this.convolutionMaterial.defines.USE_DEPTH=b>0;const j=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),et=new Float32Array([0,0,2,0,0,2]),nt=new BufferGeometry;nt.setAttribute("position",new BufferAttribute(j,3)),nt.setAttribute("uv",new BufferAttribute(et,2)),this.screen=new Mesh(nt,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(e,o,a){const c=this.scene,d=this.camera,_=this.renderTargetA,b=this.renderTargetB;let k=this.convolutionMaterial,j=k.uniforms;j.depthBuffer.value=o.depthTexture;const et=k.kernel;let nt=o,tt,rt,at;for(rt=0,at=et.length-1;rt<at;++rt)tt=(rt&1)===0?_:b,j.kernel.value=et[rt],j.inputBuffer.value=nt.texture,e.setRenderTarget(tt),e.render(c,d),nt=tt;j.kernel.value=et[rt],j.inputBuffer.value=nt.texture,e.setRenderTarget(this.renderToScreen?null:a),e.render(c,d)}}class MeshReflectorMaterial$1 extends MeshStandardMaterial{constructor(e={}){super(e);this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(e)}onBeforeCompile(e){var o;(o=e.defines)!=null&&o.USE_UV||(e.defines.USE_UV=""),e.uniforms.hasBlur=this._hasBlur,e.uniforms.tDiffuse=this._tDiffuse,e.uniforms.tDepth=this._tDepth,e.uniforms.distortionMap=this._distortionMap,e.uniforms.tDiffuseBlur=this._tDiffuseBlur,e.uniforms.textureMatrix=this._textureMatrix,e.uniforms.mirror=this._mirror,e.uniforms.mixBlur=this._mixBlur,e.uniforms.mixStrength=this._blurStrength,e.uniforms.minDepthThreshold=this._minDepthThreshold,e.uniforms.maxDepthThreshold=this._maxDepthThreshold,e.uniforms.depthScale=this._depthScale,e.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,e.uniforms.distortion=this._distortion,e.uniforms.mixContrast=this._mixContrast,e.vertexShader=`
        uniform mat4 textureMatrix;
        varying vec4 my_vUv;     
      ${e.vertexShader}`,e.vertexShader=e.vertexShader.replace("#include <project_vertex>",`#include <project_vertex>
        my_vUv = textureMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`),e.fragmentShader=`
        uniform sampler2D tDiffuse;
        uniform sampler2D tDiffuseBlur;
        uniform sampler2D tDepth;
        uniform sampler2D distortionMap;
        uniform float distortion;
        uniform float cameraNear;
			  uniform float cameraFar;
        uniform bool hasBlur;
        uniform float mixBlur;
        uniform float mirror;
        uniform float mixStrength;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float mixContrast;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec4 my_vUv;        
        ${e.fragmentShader}`,e.fragmentShader=e.fragmentShader.replace("#include <emissivemap_fragment>",`#include <emissivemap_fragment>
    
      float distortionFactor = 0.0;
      #ifdef USE_DISTORTION
        distortionFactor = texture2D(distortionMap, vUv).r * distortion;
      #endif

      vec4 new_vUv = my_vUv;
      new_vUv.x += distortionFactor;
      new_vUv.y += distortionFactor;

      vec4 base = texture2DProj(tDiffuse, new_vUv);
      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);
      
      vec4 merge = base;
      
      #ifdef USE_NORMALMAP
        vec2 normal_uv = vec2(0.0);
        vec4 normalColor = texture2D(normalMap, vUv * normalScale);
        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );
        vec3 coord = new_vUv.xyz / new_vUv.w;
        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;
        vec4 base_normal = texture2D(tDiffuse, normal_uv);
        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);
        merge = base_normal;
        blur = blur_normal;
      #endif

      float depthFactor = 0.0001;
      float blurFactor = 0.0;

      #ifdef USE_DEPTH
        vec4 depth = texture2DProj(tDepth, new_vUv);
        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
        depthFactor *= depthScale;
        depthFactor = max(0.0001, min(1.0, depthFactor));

        #ifdef USE_BLUR
          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);
          merge = merge * min(1.0, depthFactor + 0.5);
        #else
          merge = merge * depthFactor;
        #endif
  
      #endif

      float reflectorRoughnessFactor = roughness;
      #ifdef USE_ROUGHNESSMAP
        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );
        reflectorRoughnessFactor *= reflectorTexelRoughness.g;
      #endif
      
      #ifdef USE_BLUR
        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);
        merge = mix(merge, blur, blurFactor);
      #endif

      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);
      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;
      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;
      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;

      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);
      `)}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(e){this._tDiffuse.value=e}get tDepth(){return this._tDepth.value}set tDepth(e){this._tDepth.value=e}get distortionMap(){return this._distortionMap.value}set distortionMap(e){this._distortionMap.value=e}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(e){this._tDiffuseBlur.value=e}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(e){this._textureMatrix.value=e}get hasBlur(){return this._hasBlur.value}set hasBlur(e){this._hasBlur.value=e}get mirror(){return this._mirror.value}set mirror(e){this._mirror.value=e}get mixBlur(){return this._mixBlur.value}set mixBlur(e){this._mixBlur.value=e}get mixStrength(){return this._blurStrength.value}set mixStrength(e){this._blurStrength.value=e}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(e){this._minDepthThreshold.value=e}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(e){this._maxDepthThreshold.value=e}get depthScale(){return this._depthScale.value}set depthScale(e){this._depthScale.value=e}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(e){this._depthToBlurRatioBias.value=e}get distortion(){return this._distortion.value}set distortion(e){this._distortion.value=e}get mixContrast(){return this._mixContrast.value}set mixContrast(e){this._mixContrast.value=e}}extend({MeshReflectorMaterialImpl:MeshReflectorMaterial$1});const MeshReflectorMaterial=react.exports.forwardRef((lt,at)=>{var ut=lt,{mixBlur:s=0,mixStrength:e=1,resolution:o=256,blur:a=[0,0],minDepthThreshold:c=.9,maxDepthThreshold:d=1,depthScale:_=0,depthToBlurRatioBias:b=.25,mirror:k=0,distortion:j=1,mixContrast:et=1,distortionMap:nt,reflectorOffset:tt=0}=ut,rt=_i(ut,["mixBlur","mixStrength","resolution","blur","minDepthThreshold","maxDepthThreshold","depthScale","depthToBlurRatioBias","mirror","distortion","mixContrast","distortionMap","reflectorOffset"]);const st=useThree(({gl:Ht})=>Ht),it=useThree(({camera:Ht})=>Ht),ft=useThree(({scene:Ht})=>Ht);a=Array.isArray(a)?a:[a,a];const ct=a[0]+a[1]>0,dt=react.exports.useRef(null),[mt]=react.exports.useState(()=>new Plane),[gt]=react.exports.useState(()=>new Vector3),[yt]=react.exports.useState(()=>new Vector3),[St]=react.exports.useState(()=>new Vector3),[Et]=react.exports.useState(()=>new Matrix4),[vt]=react.exports.useState(()=>new Vector3(0,0,-1)),[_t]=react.exports.useState(()=>new Vector4),[bt]=react.exports.useState(()=>new Vector3),[At]=react.exports.useState(()=>new Vector3),[Rt]=react.exports.useState(()=>new Vector4),[Pt]=react.exports.useState(()=>new Matrix4),[Dt]=react.exports.useState(()=>new PerspectiveCamera),Ft=react.exports.useCallback(()=>{var Ht;const on=dt.current.parent||((Ht=dt.current)==null?void 0:Ht.__r3f.parent);if(!on||(yt.setFromMatrixPosition(on.matrixWorld),St.setFromMatrixPosition(it.matrixWorld),Et.extractRotation(on.matrixWorld),gt.set(0,0,1),gt.applyMatrix4(Et),yt.addScaledVector(gt,tt),bt.subVectors(yt,St),bt.dot(gt)>0))return;bt.reflect(gt).negate(),bt.add(yt),Et.extractRotation(it.matrixWorld),vt.set(0,0,-1),vt.applyMatrix4(Et),vt.add(St),At.subVectors(yt,vt),At.reflect(gt).negate(),At.add(yt),Dt.position.copy(bt),Dt.up.set(0,1,0),Dt.up.applyMatrix4(Et),Dt.up.reflect(gt),Dt.lookAt(At),Dt.far=it.far,Dt.updateMatrixWorld(),Dt.projectionMatrix.copy(it.projectionMatrix),Pt.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Pt.multiply(Dt.projectionMatrix),Pt.multiply(Dt.matrixWorldInverse),Pt.multiply(on.matrixWorld),mt.setFromNormalAndCoplanarPoint(gt,yt),mt.applyMatrix4(Dt.matrixWorldInverse),_t.set(mt.normal.x,mt.normal.y,mt.normal.z,mt.constant);const nn=Dt.projectionMatrix;Rt.x=(Math.sign(_t.x)+nn.elements[8])/nn.elements[0],Rt.y=(Math.sign(_t.y)+nn.elements[9])/nn.elements[5],Rt.z=-1,Rt.w=(1+nn.elements[10])/nn.elements[14],_t.multiplyScalar(2/_t.dot(Rt)),nn.elements[2]=_t.x,nn.elements[6]=_t.y,nn.elements[10]=_t.z+1,nn.elements[14]=_t.w},[it,tt]),[Vt,Qt,Lt,It]=react.exports.useMemo(()=>{const Ht={minFilter:LinearFilter,magFilter:LinearFilter,encoding:st.outputEncoding},on=new WebGLRenderTarget(o,o,Ht);on.depthBuffer=!0,on.depthTexture=new DepthTexture(o,o),on.depthTexture.format=DepthFormat,on.depthTexture.type=UnsignedShortType;const nn=new WebGLRenderTarget(o,o,Ht),jt=new BlurPass({gl:st,resolution:o,width:a[0],height:a[1],minDepthThreshold:c,maxDepthThreshold:d,depthScale:_,depthToBlurRatioBias:b}),Mn={mirror:k,textureMatrix:Pt,mixBlur:s,tDiffuse:on.texture,tDepth:on.depthTexture,tDiffuseBlur:nn.texture,hasBlur:ct,mixStrength:e,minDepthThreshold:c,maxDepthThreshold:d,depthScale:_,depthToBlurRatioBias:b,transparent:!0,distortion:j,distortionMap:nt,mixContrast:et,"defines-USE_BLUR":ct?"":void 0,"defines-USE_DEPTH":_>0?"":void 0,"defines-USE_DISTORTION":nt?"":void 0};return[on,nn,jt,Mn]},[st,a,Pt,o,k,ct,s,e,c,d,_,b,j,nt,et]);return useFrame(()=>{var Ht;const on=dt.current.parent||((Ht=dt.current)==null?void 0:Ht.__r3f.parent);if(!on)return;on.visible=!1;const nn=st.xr.enabled,jt=st.shadowMap.autoUpdate;Ft(),st.xr.enabled=!1,st.shadowMap.autoUpdate=!1,st.setRenderTarget(Vt),st.state.buffers.depth.setMask(!0),st.autoClear||st.clear(),st.render(ft,Dt),ct&&Lt.render(st,Vt,Qt),st.xr.enabled=nn,st.shadowMap.autoUpdate=jt,on.visible=!0,st.setRenderTarget(null)}),react.exports.createElement("meshReflectorMaterialImpl",_extends({attach:"material",key:"key"+It["defines-USE_BLUR"]+It["defines-USE_DEPTH"]+It["defines-USE_DISTORTION"],ref:mergeRefs([dt,at])},It,rt))}),presetsObj={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"},CUBEMAP_ROOT="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/";function Environment({background:s=!1,files:e=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:o="",preset:a=void 0,scene:c,extensions:d}){if(a){if(!(a in presetsObj))throw new Error("Preset must be one of: "+Object.keys(presetsObj).join(", "));e=presetsObj[a],o=CUBEMAP_ROOT}const _=useThree(({scene:nt})=>nt),b=Array.isArray(e),j=useLoader(b?CubeTextureLoader:RGBELoader,b?[e]:e,nt=>{nt.setPath(o),nt.setDataType==null||nt.setDataType(FloatType),d&&d(nt)}),et=b?j[0]:j;return et.mapping=EquirectangularReflectionMapping,react.exports.useLayoutEffect(()=>{const nt=c?c.background:_.background,tt=c?c.environment:_.environment;return c?(c.environment=et,s&&(c.background=et)):(_.environment=et,s&&(_.background=et)),()=>{c?(c.environment=tt,c.background=nt):(_.environment=tt,_.background=nt),et.dispose()}},[et,s,c]),null}const eventPopstate="popstate",eventPushState="pushState",eventReplaceState="replaceState",events=[eventPopstate,eventPushState,eventReplaceState];var locationHook=({base:s=""}={})=>{const[{path:e,search:o},a]=react.exports.useState(()=>({path:currentPathname(s),search:location.search})),c=react.exports.useRef(e+o);react.exports.useEffect(()=>{const _=()=>{const b=currentPathname(s),k=location.search,j=b+k;c.current!==j&&(c.current=j,a({path:b,search:k}))};return events.forEach(b=>addEventListener(b,_)),_(),()=>events.forEach(b=>removeEventListener(b,_))},[s]);const d=react.exports.useCallback((_,{replace:b=!1}={})=>history[b?eventReplaceState:eventPushState](null,"",_[0]==="~"?_.slice(1):s+_),[s]);return[e,d]};if(typeof history!="undefined")for(const s of[eventPushState,eventReplaceState]){const e=history[s];history[s]=function(){const o=e.apply(this,arguments),a=new Event(s);return a.arguments=arguments,dispatchEvent(a),o}}const currentPathname=(s,e=location.pathname)=>e.toLowerCase().indexOf(s.toLowerCase())?"~"+e:e.slice(s.length)||"/";function makeMatcher(s=pathToRegexp){let e={};const o=a=>e[a]||(e[a]=s(a));return(a,c)=>{const{regexp:d,keys:_}=o(a||""),b=d.exec(c);if(!b)return[!1,null];const k=_.reduce((j,et,nt)=>(j[et.name]=b[nt+1],j),{});return[!0,k]}}const escapeRx=s=>s.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),rxForSegment=(s,e,o)=>{let a=s?"((?:[^\\/]+?)(?:\\/(?:[^\\/]+?))*)":"([^\\/]+?)";return e&&o&&(a="(?:\\/"+a+")"),a+(e?"?":"")},pathToRegexp=s=>{const e=/:([A-Za-z0-9_]+)([?+*]?)/g;let o=null,a=0,c=[],d="";for(;(o=e.exec(s))!==null;){const[_,b,k]=o,j=k==="+"||k==="*",et=k==="?"||k==="*",nt=et&&s[o.index-1]==="/"?1:0,tt=s.substring(a,o.index-nt);c.push({name:b}),a=e.lastIndex,d+=escapeRx(tt)+rxForSegment(j,et,nt)}return d+=escapeRx(s.substring(a)),{keys:c,regexp:new RegExp("^"+d+"(?:\\/)?$","i")}},RouterCtx=react.exports.createContext({}),buildRouter=({hook:s=locationHook,base:e="",matcher:o=makeMatcher()}={})=>({hook:s,base:e,matcher:o}),useRouter=()=>{const s=react.exports.useContext(RouterCtx);return s.v||(s.v=buildRouter())},useLocation=()=>{const s=useRouter();return s.hook(s)},useRoute=s=>{const[e]=useLocation();return useRouter().matcher(s,e)};var md5$1={exports:{}};/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.7.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_MD5_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer!="undefined",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}(root.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(s){return Object.prototype.toString.call(s)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(s){return typeof s=="object"&&s.buffer&&s.buffer.constructor===ArrayBuffer});var createOutputMethod=function(s){return function(e){return new Md5(!0).update(e)[s]()}},createMethod=function(){var s=createOutputMethod("hex");NODE_JS&&(s=nodeWrap(s)),s.create=function(){return new Md5},s.update=function(a){return s.create().update(a)};for(var e=0;e<OUTPUT_TYPES.length;++e){var o=OUTPUT_TYPES[e];s[o]=createOutputMethod(o)}return s},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(s){if(typeof s=="string")return crypto.createHash("md5").update(s,"utf8").digest("hex");if(s==null)throw ERROR;return s.constructor===ArrayBuffer&&(s=new Uint8Array(s)),Array.isArray(s)||ArrayBuffer.isView(s)||s.constructor===Buffer?crypto.createHash("md5").update(new Buffer(s)).digest("hex"):method(s)};return nodeMethod};function Md5(s){if(s)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var e=new ArrayBuffer(68);this.buffer8=new Uint8Array(e),this.blocks=new Uint32Array(e)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(s){if(!this.finalized){var e,o=typeof s;if(o!=="string"){if(o==="object"){if(s===null)throw ERROR;if(ARRAY_BUFFER&&s.constructor===ArrayBuffer)s=new Uint8Array(s);else if(!Array.isArray(s)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(s)))throw ERROR}else throw ERROR;e=!0}for(var a,c=0,d,_=s.length,b=this.blocks,k=this.buffer8;c<_;){if(this.hashed&&(this.hashed=!1,b[0]=b[16],b[16]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=b[9]=b[10]=b[11]=b[12]=b[13]=b[14]=b[15]=0),e)if(ARRAY_BUFFER)for(d=this.start;c<_&&d<64;++c)k[d++]=s[c];else for(d=this.start;c<_&&d<64;++c)b[d>>2]|=s[c]<<SHIFT[d++&3];else if(ARRAY_BUFFER)for(d=this.start;c<_&&d<64;++c)a=s.charCodeAt(c),a<128?k[d++]=a:a<2048?(k[d++]=192|a>>6,k[d++]=128|a&63):a<55296||a>=57344?(k[d++]=224|a>>12,k[d++]=128|a>>6&63,k[d++]=128|a&63):(a=65536+((a&1023)<<10|s.charCodeAt(++c)&1023),k[d++]=240|a>>18,k[d++]=128|a>>12&63,k[d++]=128|a>>6&63,k[d++]=128|a&63);else for(d=this.start;c<_&&d<64;++c)a=s.charCodeAt(c),a<128?b[d>>2]|=a<<SHIFT[d++&3]:a<2048?(b[d>>2]|=(192|a>>6)<<SHIFT[d++&3],b[d>>2]|=(128|a&63)<<SHIFT[d++&3]):a<55296||a>=57344?(b[d>>2]|=(224|a>>12)<<SHIFT[d++&3],b[d>>2]|=(128|a>>6&63)<<SHIFT[d++&3],b[d>>2]|=(128|a&63)<<SHIFT[d++&3]):(a=65536+((a&1023)<<10|s.charCodeAt(++c)&1023),b[d>>2]|=(240|a>>18)<<SHIFT[d++&3],b[d>>2]|=(128|a>>12&63)<<SHIFT[d++&3],b[d>>2]|=(128|a>>6&63)<<SHIFT[d++&3],b[d>>2]|=(128|a&63)<<SHIFT[d++&3]);this.lastByteIndex=d,this.bytes+=d-this.start,d>=64?(this.start=d-64,this.hash(),this.hashed=!0):this.start=d}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var s=this.blocks,e=this.lastByteIndex;s[e>>2]|=EXTRA[e&3],e>=56&&(this.hashed||this.hash(),s[0]=s[16],s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),s[14]=this.bytes<<3,s[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var s,e,o,a,c,d,_=this.blocks;this.first?(s=_[0]-680876937,s=(s<<7|s>>>25)-271733879<<0,a=(-1732584194^s&2004318071)+_[1]-117830708,a=(a<<12|a>>>20)+s<<0,o=(-271733879^a&(s^-271733879))+_[2]-1126478375,o=(o<<17|o>>>15)+a<<0,e=(s^o&(a^s))+_[3]-1316259209,e=(e<<22|e>>>10)+o<<0):(s=this.h0,e=this.h1,o=this.h2,a=this.h3,s+=(a^e&(o^a))+_[0]-680876936,s=(s<<7|s>>>25)+e<<0,a+=(o^s&(e^o))+_[1]-389564586,a=(a<<12|a>>>20)+s<<0,o+=(e^a&(s^e))+_[2]+606105819,o=(o<<17|o>>>15)+a<<0,e+=(s^o&(a^s))+_[3]-1044525330,e=(e<<22|e>>>10)+o<<0),s+=(a^e&(o^a))+_[4]-176418897,s=(s<<7|s>>>25)+e<<0,a+=(o^s&(e^o))+_[5]+1200080426,a=(a<<12|a>>>20)+s<<0,o+=(e^a&(s^e))+_[6]-1473231341,o=(o<<17|o>>>15)+a<<0,e+=(s^o&(a^s))+_[7]-45705983,e=(e<<22|e>>>10)+o<<0,s+=(a^e&(o^a))+_[8]+1770035416,s=(s<<7|s>>>25)+e<<0,a+=(o^s&(e^o))+_[9]-1958414417,a=(a<<12|a>>>20)+s<<0,o+=(e^a&(s^e))+_[10]-42063,o=(o<<17|o>>>15)+a<<0,e+=(s^o&(a^s))+_[11]-1990404162,e=(e<<22|e>>>10)+o<<0,s+=(a^e&(o^a))+_[12]+1804603682,s=(s<<7|s>>>25)+e<<0,a+=(o^s&(e^o))+_[13]-40341101,a=(a<<12|a>>>20)+s<<0,o+=(e^a&(s^e))+_[14]-1502002290,o=(o<<17|o>>>15)+a<<0,e+=(s^o&(a^s))+_[15]+1236535329,e=(e<<22|e>>>10)+o<<0,s+=(o^a&(e^o))+_[1]-165796510,s=(s<<5|s>>>27)+e<<0,a+=(e^o&(s^e))+_[6]-1069501632,a=(a<<9|a>>>23)+s<<0,o+=(s^e&(a^s))+_[11]+643717713,o=(o<<14|o>>>18)+a<<0,e+=(a^s&(o^a))+_[0]-373897302,e=(e<<20|e>>>12)+o<<0,s+=(o^a&(e^o))+_[5]-701558691,s=(s<<5|s>>>27)+e<<0,a+=(e^o&(s^e))+_[10]+38016083,a=(a<<9|a>>>23)+s<<0,o+=(s^e&(a^s))+_[15]-660478335,o=(o<<14|o>>>18)+a<<0,e+=(a^s&(o^a))+_[4]-405537848,e=(e<<20|e>>>12)+o<<0,s+=(o^a&(e^o))+_[9]+568446438,s=(s<<5|s>>>27)+e<<0,a+=(e^o&(s^e))+_[14]-1019803690,a=(a<<9|a>>>23)+s<<0,o+=(s^e&(a^s))+_[3]-187363961,o=(o<<14|o>>>18)+a<<0,e+=(a^s&(o^a))+_[8]+1163531501,e=(e<<20|e>>>12)+o<<0,s+=(o^a&(e^o))+_[13]-1444681467,s=(s<<5|s>>>27)+e<<0,a+=(e^o&(s^e))+_[2]-51403784,a=(a<<9|a>>>23)+s<<0,o+=(s^e&(a^s))+_[7]+1735328473,o=(o<<14|o>>>18)+a<<0,e+=(a^s&(o^a))+_[12]-1926607734,e=(e<<20|e>>>12)+o<<0,c=e^o,s+=(c^a)+_[5]-378558,s=(s<<4|s>>>28)+e<<0,a+=(c^s)+_[8]-2022574463,a=(a<<11|a>>>21)+s<<0,d=a^s,o+=(d^e)+_[11]+1839030562,o=(o<<16|o>>>16)+a<<0,e+=(d^o)+_[14]-35309556,e=(e<<23|e>>>9)+o<<0,c=e^o,s+=(c^a)+_[1]-1530992060,s=(s<<4|s>>>28)+e<<0,a+=(c^s)+_[4]+1272893353,a=(a<<11|a>>>21)+s<<0,d=a^s,o+=(d^e)+_[7]-155497632,o=(o<<16|o>>>16)+a<<0,e+=(d^o)+_[10]-1094730640,e=(e<<23|e>>>9)+o<<0,c=e^o,s+=(c^a)+_[13]+681279174,s=(s<<4|s>>>28)+e<<0,a+=(c^s)+_[0]-358537222,a=(a<<11|a>>>21)+s<<0,d=a^s,o+=(d^e)+_[3]-722521979,o=(o<<16|o>>>16)+a<<0,e+=(d^o)+_[6]+76029189,e=(e<<23|e>>>9)+o<<0,c=e^o,s+=(c^a)+_[9]-640364487,s=(s<<4|s>>>28)+e<<0,a+=(c^s)+_[12]-421815835,a=(a<<11|a>>>21)+s<<0,d=a^s,o+=(d^e)+_[15]+530742520,o=(o<<16|o>>>16)+a<<0,e+=(d^o)+_[2]-995338651,e=(e<<23|e>>>9)+o<<0,s+=(o^(e|~a))+_[0]-198630844,s=(s<<6|s>>>26)+e<<0,a+=(e^(s|~o))+_[7]+1126891415,a=(a<<10|a>>>22)+s<<0,o+=(s^(a|~e))+_[14]-1416354905,o=(o<<15|o>>>17)+a<<0,e+=(a^(o|~s))+_[5]-57434055,e=(e<<21|e>>>11)+o<<0,s+=(o^(e|~a))+_[12]+1700485571,s=(s<<6|s>>>26)+e<<0,a+=(e^(s|~o))+_[3]-1894986606,a=(a<<10|a>>>22)+s<<0,o+=(s^(a|~e))+_[10]-1051523,o=(o<<15|o>>>17)+a<<0,e+=(a^(o|~s))+_[1]-2054922799,e=(e<<21|e>>>11)+o<<0,s+=(o^(e|~a))+_[8]+1873313359,s=(s<<6|s>>>26)+e<<0,a+=(e^(s|~o))+_[15]-30611744,a=(a<<10|a>>>22)+s<<0,o+=(s^(a|~e))+_[6]-1560198380,o=(o<<15|o>>>17)+a<<0,e+=(a^(o|~s))+_[13]+1309151649,e=(e<<21|e>>>11)+o<<0,s+=(o^(e|~a))+_[4]-145523070,s=(s<<6|s>>>26)+e<<0,a+=(e^(s|~o))+_[11]-1120210379,a=(a<<10|a>>>22)+s<<0,o+=(s^(a|~e))+_[2]+718787259,o=(o<<15|o>>>17)+a<<0,e+=(a^(o|~s))+_[9]-343485551,e=(e<<21|e>>>11)+o<<0,this.first?(this.h0=s+1732584193<<0,this.h1=e-271733879<<0,this.h2=o-1732584194<<0,this.h3=a+271733878<<0,this.first=!1):(this.h0=this.h0+s<<0,this.h1=this.h1+e<<0,this.h2=this.h2+o<<0,this.h3=this.h3+a<<0)},Md5.prototype.hex=function(){this.finalize();var s=this.h0,e=this.h1,o=this.h2,a=this.h3;return HEX_CHARS[s>>4&15]+HEX_CHARS[s&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var s=this.h0,e=this.h1,o=this.h2,a=this.h3;return[s&255,s>>8&255,s>>16&255,s>>24&255,e&255,e>>8&255,e>>16&255,e>>24&255,o&255,o>>8&255,o>>16&255,o>>24&255,a&255,a>>8&255,a>>16&255,a>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var s=new ArrayBuffer(16),e=new Uint32Array(s);return e[0]=this.h0,e[1]=this.h1,e[2]=this.h2,e[3]=this.h3,s},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var s,e,o,a="",c=this.array(),d=0;d<15;)s=c[d++],e=c[d++],o=c[d++],a+=BASE64_ENCODE_CHAR[s>>>2]+BASE64_ENCODE_CHAR[(s<<4|e>>>4)&63]+BASE64_ENCODE_CHAR[(e<<2|o>>>6)&63]+BASE64_ENCODE_CHAR[o&63];return s=c[d],a+=BASE64_ENCODE_CHAR[s>>>2]+BASE64_ENCODE_CHAR[s<<4&63]+"==",a};var exports=createMethod();COMMON_JS?module.exports=exports:root.md5=exports})()})(md5$1);var sha1$1={exports:{}};/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var root=typeof window=="object"?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS&&(root=commonjsGlobal);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&!0&&module.exports,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(s){return function(e){return new Sha1(!0).update(e)[s]()}},createMethod=function(){var s=createOutputMethod("hex");NODE_JS&&(s=nodeWrap(s)),s.create=function(){return new Sha1},s.update=function(a){return s.create().update(a)};for(var e=0;e<OUTPUT_TYPES.length;++e){var o=OUTPUT_TYPES[e];s[o]=createOutputMethod(o)}return s},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(s){if(typeof s=="string")return crypto.createHash("sha1").update(s,"utf8").digest("hex");if(s.constructor===ArrayBuffer)s=new Uint8Array(s);else if(s.length===void 0)return method(s);return crypto.createHash("sha1").update(new Buffer(s)).digest("hex")};return nodeMethod};function Sha1(s){s?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(s){if(!this.finalized){var e=typeof s!="string";e&&s.constructor===root.ArrayBuffer&&(s=new Uint8Array(s));for(var o,a=0,c,d=s.length||0,_=this.blocks;a<d;){if(this.hashed&&(this.hashed=!1,_[0]=this.block,_[16]=_[1]=_[2]=_[3]=_[4]=_[5]=_[6]=_[7]=_[8]=_[9]=_[10]=_[11]=_[12]=_[13]=_[14]=_[15]=0),e)for(c=this.start;a<d&&c<64;++a)_[c>>2]|=s[a]<<SHIFT[c++&3];else for(c=this.start;a<d&&c<64;++a)o=s.charCodeAt(a),o<128?_[c>>2]|=o<<SHIFT[c++&3]:o<2048?(_[c>>2]|=(192|o>>6)<<SHIFT[c++&3],_[c>>2]|=(128|o&63)<<SHIFT[c++&3]):o<55296||o>=57344?(_[c>>2]|=(224|o>>12)<<SHIFT[c++&3],_[c>>2]|=(128|o>>6&63)<<SHIFT[c++&3],_[c>>2]|=(128|o&63)<<SHIFT[c++&3]):(o=65536+((o&1023)<<10|s.charCodeAt(++a)&1023),_[c>>2]|=(240|o>>18)<<SHIFT[c++&3],_[c>>2]|=(128|o>>12&63)<<SHIFT[c++&3],_[c>>2]|=(128|o>>6&63)<<SHIFT[c++&3],_[c>>2]|=(128|o&63)<<SHIFT[c++&3]);this.lastByteIndex=c,this.bytes+=c-this.start,c>=64?(this.block=_[16],this.start=c-64,this.hash(),this.hashed=!0):this.start=c}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var s=this.blocks,e=this.lastByteIndex;s[16]=this.block,s[e>>2]|=EXTRA[e&3],this.block=s[16],e>=56&&(this.hashed||this.hash(),s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),s[14]=this.hBytes<<3|this.bytes>>>29,s[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var s=this.h0,e=this.h1,o=this.h2,a=this.h3,c=this.h4,d,_,b,k=this.blocks;for(_=16;_<80;++_)b=k[_-3]^k[_-8]^k[_-14]^k[_-16],k[_]=b<<1|b>>>31;for(_=0;_<20;_+=5)d=e&o|~e&a,b=s<<5|s>>>27,c=b+d+c+1518500249+k[_]<<0,e=e<<30|e>>>2,d=s&e|~s&o,b=c<<5|c>>>27,a=b+d+a+1518500249+k[_+1]<<0,s=s<<30|s>>>2,d=c&s|~c&e,b=a<<5|a>>>27,o=b+d+o+1518500249+k[_+2]<<0,c=c<<30|c>>>2,d=a&c|~a&s,b=o<<5|o>>>27,e=b+d+e+1518500249+k[_+3]<<0,a=a<<30|a>>>2,d=o&a|~o&c,b=e<<5|e>>>27,s=b+d+s+1518500249+k[_+4]<<0,o=o<<30|o>>>2;for(;_<40;_+=5)d=e^o^a,b=s<<5|s>>>27,c=b+d+c+1859775393+k[_]<<0,e=e<<30|e>>>2,d=s^e^o,b=c<<5|c>>>27,a=b+d+a+1859775393+k[_+1]<<0,s=s<<30|s>>>2,d=c^s^e,b=a<<5|a>>>27,o=b+d+o+1859775393+k[_+2]<<0,c=c<<30|c>>>2,d=a^c^s,b=o<<5|o>>>27,e=b+d+e+1859775393+k[_+3]<<0,a=a<<30|a>>>2,d=o^a^c,b=e<<5|e>>>27,s=b+d+s+1859775393+k[_+4]<<0,o=o<<30|o>>>2;for(;_<60;_+=5)d=e&o|e&a|o&a,b=s<<5|s>>>27,c=b+d+c-1894007588+k[_]<<0,e=e<<30|e>>>2,d=s&e|s&o|e&o,b=c<<5|c>>>27,a=b+d+a-1894007588+k[_+1]<<0,s=s<<30|s>>>2,d=c&s|c&e|s&e,b=a<<5|a>>>27,o=b+d+o-1894007588+k[_+2]<<0,c=c<<30|c>>>2,d=a&c|a&s|c&s,b=o<<5|o>>>27,e=b+d+e-1894007588+k[_+3]<<0,a=a<<30|a>>>2,d=o&a|o&c|a&c,b=e<<5|e>>>27,s=b+d+s-1894007588+k[_+4]<<0,o=o<<30|o>>>2;for(;_<80;_+=5)d=e^o^a,b=s<<5|s>>>27,c=b+d+c-899497514+k[_]<<0,e=e<<30|e>>>2,d=s^e^o,b=c<<5|c>>>27,a=b+d+a-899497514+k[_+1]<<0,s=s<<30|s>>>2,d=c^s^e,b=a<<5|a>>>27,o=b+d+o-899497514+k[_+2]<<0,c=c<<30|c>>>2,d=a^c^s,b=o<<5|o>>>27,e=b+d+e-899497514+k[_+3]<<0,a=a<<30|a>>>2,d=o^a^c,b=e<<5|e>>>27,s=b+d+s-899497514+k[_+4]<<0,o=o<<30|o>>>2;this.h0=this.h0+s<<0,this.h1=this.h1+e<<0,this.h2=this.h2+o<<0,this.h3=this.h3+a<<0,this.h4=this.h4+c<<0},Sha1.prototype.hex=function(){this.finalize();var s=this.h0,e=this.h1,o=this.h2,a=this.h3,c=this.h4;return HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[c>>28&15]+HEX_CHARS[c>>24&15]+HEX_CHARS[c>>20&15]+HEX_CHARS[c>>16&15]+HEX_CHARS[c>>12&15]+HEX_CHARS[c>>8&15]+HEX_CHARS[c>>4&15]+HEX_CHARS[c&15]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var s=this.h0,e=this.h1,o=this.h2,a=this.h3,c=this.h4;return[s>>24&255,s>>16&255,s>>8&255,s&255,e>>24&255,e>>16&255,e>>8&255,e&255,o>>24&255,o>>16&255,o>>8&255,o&255,a>>24&255,a>>16&255,a>>8&255,a&255,c>>24&255,c>>16&255,c>>8&255,c&255]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var s=new ArrayBuffer(20),e=new DataView(s);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),s};var exports=createMethod();COMMON_JS?module.exports=exports:root.sha1=exports})()})(sha1$1);var md5=md5$1.exports,sha1=sha1$1.exports,HEX_DIGITS="0123456789abcdef".split(""),uint8ToHex=function(s){var e=s>>4,o=s-(e<<4);return HEX_DIGITS[e]+HEX_DIGITS[o]},uint8ArrayToHex=function(s){for(var e=[],o=0;o<s.length;o++)e.push(uint8ToHex(s[o]));return e.join("")},stringToCharBuffer=function(s){for(var e=new Uint8Array(s.length),o=0;o<s.length;o++)e[o]=s[o].charCodeAt(0);return e},md5Hash=function(s){return new Uint8Array(md5.arrayBuffer(s))},sha1Hash=function(s){return new Uint8Array(sha1.arrayBuffer(s))},concatBuffers=function(s,e){var o=new Uint8Array(s.length+e.length);return o.set(new Uint8Array(s),0),o.set(new Uint8Array(e),s.byteLength),o},hashToUuid=function(s,e){return[uint8ArrayToHex(s.slice(0,4)),"-",uint8ArrayToHex(s.slice(4,6)),"-",uint8ToHex(s[6]&15|parseInt(e*10,16)),uint8ToHex(s[7]),"-",uint8ToHex(s[8]&63|128),uint8ToHex(s[9]),"-",uint8ArrayToHex(s.slice(10,16))].join("")},lib$1={uint8ToHex,uint8ArrayToHex,stringToCharBuffer,md5Hash,sha1Hash,concatBuffers,hashToUuid},lib=lib$1,EMPTY_UINT8_ARRAY=new Uint8Array(0);function generateUuid(s,e,o){if(typeof s!="string")throw TypeError("Value must be string");if(typeof e=="number")return generateUuid(s,void 0,e);if(o==null)return generateUuid(s,e,5);if(o!==3&&o!==5)throw TypeError("Version of UUID can be only 3 or 5");var a=lib.stringToCharBuffer(s),c=typeof e=="string"?lib.stringToCharBuffer(e):EMPTY_UINT8_ARRAY,d=lib.concatBuffers(c,a),_=o===3?lib.md5Hash(d):lib.sha1Hash(d);return lib.hashToUuid(_,o)}var src=generateUuid,jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=react.exports,g=60103;reactJsxRuntime_production_min.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var h=Symbol.for;g=h("react.element"),reactJsxRuntime_production_min.Fragment=h("react.fragment")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};function q(s,e,o){var a,c={},d=null,_=null;o!==void 0&&(d=""+o),e.key!==void 0&&(d=""+e.key),e.ref!==void 0&&(_=e.ref);for(a in e)n.call(e,a)&&!p.hasOwnProperty(a)&&(c[a]=e[a]);if(s&&s.defaultProps)for(a in e=s.defaultProps,e)c[a]===void 0&&(c[a]=e[a]);return{$$typeof:g,type:s,key:d,ref:_,props:c,_owner:m.current}}reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;export{Canvas as C,Environment as E,FirstPersonControls as F,Image as I,Loader as L,MeshReflectorMaterial as M,Quaternion as Q,ReactDOM as R,Text as T,Vector3 as V,useFrame as a,useRoute as b,useLocation as c,Color as d,useCursor as e,MathUtils as f,React as g,jsxRuntime as j,react as r,src as s,useThree as u};
